!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Dragee={})}(this,function(t){"use strict";function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function r(t,e,n){return(r=a()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&s(r,n.prototype),r}).apply(null,arguments)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(i){var r=a();return function(){var t,e=o(i);if(r){var n=o(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,t)}}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}}).apply(this,arguments)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(t);!(s=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);s=!0);}catch(t){a=!0,r=t}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(t,e)||p(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function m(n,t){return t.reduce(function(t,e){return t+parseInt(window.getComputedStyle(n)[e]||0)},0)}var E=function(){function o(t,e){c(this,o),this.x=t,this.y=e}return h(o,[{key:"add",value:function(t){return new o(this.x+t.x,this.y+t.y)}},{key:"sub",value:function(t){return new o(this.x-t.x,this.y-t.y)}},{key:"mult",value:function(t){return new o(this.x*t,this.y*t)}},{key:"negative",value:function(){return new o(-this.x,-this.y)}},{key:"compare",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"clone",value:function(){return new o(this.x,this.y)}},{key:"toString",value:function(){return"{x=".concat(this.x,",y=").concat(this.y)}}],[{key:"elementOffset",value:function(t,e){e=e||t.parentNode;var n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return new o(n.left-i.left,n.top-i.top)}},{key:"elementSize",value:function(t,e){var n=1<arguments.length&&void 0!==e&&e,i=parseInt(window.getComputedStyle(t).width),r=parseInt(window.getComputedStyle(t).height);return n||(i+=m(t,["padding-left","padding-right","border-left-width","border-right-width"]),r+=m(t,["padding-top","padding-bottom","border-top-width","border-bottom-width"])),new o(i,r)}}]),o}(),b=function(){function a(t,e){c(this,a),this.position=t,this.size=e}return h(a,[{key:"getP1",value:function(){return this.position}},{key:"getP2",value:function(){return new E(this.position.x+this.size.x,this.position.y)}},{key:"getP3",value:function(){return this.position.add(this.size)}},{key:"getP4",value:function(){return new E(this.position.x,this.position.y+this.size.y)}},{key:"getCenter",value:function(){return this.position.add(this.size.mult(.5))}},{key:"or",value:function(t){var e=new E(Math.min(this.position.x,t.position.x),Math.min(this.position.y,t.position.y));return new a(e,new E(Math.max(this.position.x+this.size.x,t.position.x+t.size.x),Math.max(this.position.y+this.size.y,t.position.y+t.size.y)).sub(e))}},{key:"and",value:function(t){var e=new E(Math.max(this.position.x,t.position.x),Math.max(this.position.y,t.position.y)),n=new E(Math.min(this.position.x+this.size.x,t.position.x+t.size.x),Math.min(this.position.y+this.size.y,t.position.y+t.size.y)).sub(e);return n.x<=0||n.y<=0?null:new a(e,n)}},{key:"includePoint",value:function(t){return!(this.position.x>t.x||this.position.x+this.size.x<t.x||this.position.y>t.y||this.position.y+this.size.y<t.y)}},{key:"includeRectangle",value:function(t){return this.includePoint(t.position)&&this.includePoint(t.getP3())}},{key:"moveToBound",value:function(t,e){var n,i;if(e)n=e;else{if(!(i=this.and(t)))return t;n=i.size.x>i.size.y?"y":"x"}var r=this.getCenter(),o=t.getCenter(),s=0<(r[n]>o[n]?-1:1)?this.position[n]+this.size[n]-t.position[n]:this.position[n]-(t.position[n]+t.size[n]);return t.position[n]=t.position[n]+s,t}},{key:"getSquare",value:function(){return this.size.x*this.size.y}},{key:"styleApply",value:function(t){(t=t||document.querySelector("ind")).style.left=this.position.x+"px",t.style.top=this.position.y+"px",t.style.width=this.size.x+"px",t.style.height=this.size.y+"px"}},{key:"growth",value:function(t){this.size=this.size.add(t),this.position=this.position.add(t.mult(-.5))}},{key:"getMinSide",value:function(){return Math.min(this.size.x,this.size.y)}}],[{key:"fromElement",value:function(t,e,n,i){var r=1<arguments.length&&void 0!==e?e:t.parentNode,o=2<arguments.length&&void 0!==n&&n,s=3<arguments.length&&void 0!==i&&i;return new a(E.elementOffset(t,r,s),E.elementSize(t,o))}}]),a}();function e(t){for(var e=t.parentNode;e.parentNode&&"static"===window.getComputedStyle(e).position&&"BODY"!==e.tagName;)e=e.parentNode;return e}var n=function(){function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(c(this,s),this.events={},t&&t.on)for(var e=0,n=Object.entries(t.on);e<n.length;e++){var i=f(n[e],2),r=i[0],o=i[1];this.on(r,o)}}return h(s,[{key:"emit",value:function(t){this.interrupted=!1;var e=[].slice.call(arguments,1);if(this.events[t]){var n,i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=p(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(this.events[t]);try{for(i.s();!(n=i.n()).done;){if(n.value.apply(void 0,v(e)),this.interrupted)return}}catch(t){i.e(t)}finally{i.f()}}}},{key:"interrupt",value:function(){this.interrupted=!0}},{key:"on",value:function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)}},{key:"prependOn",value:function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].unshift(e)}},{key:"unsubscribe",value:function(t,e){if(this.events[t]){var n=this.events[t].indexOf(e);this.events[t].splice(n,1)}}},{key:"resetEmitter",value:function(){this.events={}}},{key:"resetOn",value:function(t){this.events[t]=[]}}]),s}();var x,w=(function(t,e){var r,o;r="Webkit Moz ms Ms O".split(" "),o=document.documentElement.style,t.exports=function(t){if(t){if("string"==typeof o[t])return t;var e;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,i=r.length;n<i;n++)if(e=r[n]+t,"string"==typeof o[e])return e}}}(x={exports:{}},x.exports),x.exports);function D(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function k(t,e){return Math.abs(t.y-e.y)}function P(n){return function(t,e){return Math.sqrt(Math.pow(n.x*Math.abs(t.x-e.x),2)+Math.pow(n.y*Math.abs(t.y-e.y),2))}}function T(t,e,n){var i,r,o,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:D,a=0;if(0===t.length)return-1;for(i=s(t[0],e),r=0;r<t.length;r++)(o=s(t[r],e))<i&&(i=o,a=r);return 0<=n&&n<i?-1:a}function S(t,e,n){var i=e.x-t.x,r=e.y-t.y,o=n/D(t,e);return new E(t.x+o*i,t.y+o*r)}function _(t,e,n){for(var i=t.filter(function(t){return t.y>e.y||(n?t.x<e.x:t.x>e.x)}),r=0;r<i.length;r++)if(e.y<i[r].y)return i.splice(r,0,e),i;return i.push(e),i}function O(t,e){var n=Math.min(t,e),i=Math.max(t,e);return Math.min(i-n,n+2*Math.PI-i)}function z(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}var B=function(){function t(){c(this,t)}return h(t,[{key:"bound",value:function(t){return t}},{key:"refresh",value:function(){}}],[{key:"bounding",value:function(){var t=r(this,Array.prototype.slice.call(arguments));return t.bound.bind(t)}}]),t}(),L=function(){l(i,B);var n=d(i);function i(t){var e;return c(this,i),(e=n.call(this)).rectangle=t,e}return h(i,[{key:"bound",value:function(t,e){var n=t.clone(),i=this.rectangle.getP3();return this.rectangle.position.x>n.x&&(n.x=this.rectangle.position.x),this.rectangle.position.y>n.y&&(n.y=this.rectangle.position.y),i.x<n.x+e.x&&(n.x=i.x-e.x),i.y<n.y+e.y&&(n.y=i.y-e.y),n}}]),i}(),R=function(){l(r,L);var i=d(r);function r(t,e){var n;return c(this,r),(n=i.call(this,b.fromElement(t,e))).element=t,n.container=e,n}return h(r,[{key:"refresh",value:function(){this.rectangle=b.fromElement(this.element,this.container)}}]),r}(),A=function(){l(o,B);var r=d(o);function o(t,e,n){var i;return c(this,o),(i=r.call(this)).x=t,i.startY=e,i.endY=n,i}return h(o,[{key:"bound",value:function(t,e){var n=t.clone();return n.x=this.x,this.startY>n.y&&(n.y=this.startY),this.endY<n.y+e.y&&(n.y=this.endY-e.y),n}}]),o}(),M=function(){l(o,B);var r=d(o);function o(t,e,n){var i;return c(this,o),(i=r.call(this)).y=t,i.startX=e,i.endX=n,i}return h(o,[{key:"bound",value:function(t,e){var n=t.clone();return n.y=this.y,this.startX>n.x&&(n.x=this.startX),this.endX<n.x+e.x&&(n.x=this.endX-e.x),n}}]),o}(),C=function(){l(o,B);var r=d(o);function o(t,e){var n;c(this,o),(n=r.call(this)).startPoint=t,n.endPoint=e;var i=Math.atan2(e.y-t.y,e.x-t.x)+Math.PI/2;return n.someK=10,n.cosBeta=Math.cos(i),n.sinBeta=Math.sin(i),n}return h(o,[{key:"bound",value:function(t,e){var n,i,r,o,s,a,u,c,h,l,d,g,f,v,p,y,m,b=new E(t.x+this.someK*this.cosBeta,t.y+this.someK*this.sinBeta),x=S(this.endPoint,this.startPoint,e.x),w=(n=this.startPoint,i=this.endPoint,o=b,(r=t).x===o.x&&(s=r,r=n,n=s,s=o,o=i,i=s),n.x===i.x?(u=(o.y-r.y)/(o.x-r.x),h=(o.x*r.y-r.x*o.y)/(o.x-r.x),l=n.x,new E(l,l*u+h)):(a=(i.y-n.y)/(i.x-n.x),c=(i.x*n.y-n.x*i.y)/(i.x-n.x),u=(o.y-r.y)/(o.x-r.x),h=(o.x*r.y-r.x*o.y)/(o.x-r.x),new E(l=(c-h)/(u-a),l*a+c)));return d=this.startPoint,g=x,v=new E((f=w).x-d.x,f.y-d.y),p=new E(g.x-d.x,g.y-d.y),y=p.x*p.x+p.y*p.y,m=(v.x*p.x+v.y*p.y)/y,new E(d.x+p.x*m,d.y+p.y*m)}}]),o}(),N=function(){l(r,B);var i=d(r);function r(t,e){var n;return c(this,r),(n=i.call(this)).center=t,n.radius=e,n}return h(r,[{key:"bound",value:function(t){return S(this.center,t,this.radius)}}]),r}(),I=function(){l(s,N);var o=d(s);function s(t,e,n,i){var r;return c(this,s),(r=o.call(this,t,e))._startAngle=n,r._endAngle=i,r}return h(s,[{key:"startAngle",value:function(){return"function"==typeof this._startAngle?this._startAngle():this._startAngle}},{key:"endAngle",value:function(){return"function"==typeof this._endAngle?this._endAngle():this._endAngle}},{key:"bound",value:function(t){var e,n,i,r,o,s,a,u=(e=this.center,n=t.sub(e),z(Math.atan2(n.y,n.x)));return u=z(u),i=this.startAngle(),r=this.endAngle(),o=u,u=i<r&&i<o&&o<r?o:r<i&&(o<r||i<o)?o:O(i,o)<O(r,o)?i:r,s=u,a=this.radius,(this.center||new E(0,0)).add(new E(a*Math.cos(s),a*Math.sin(s)))}}]),s}();function j(t,e){for(var n=0;n<t.length;n++)t[n]===e&&(t.splice(n,1),n--);return t}var X=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};c(this,n),this.rectangle=t,this.options=e}return h(n,[{key:"boundRect",get:function(){return"function"==typeof this.rectangle?this.rectangle():this.rectangle}}]),n}(),F=function(){l(e,X);var t=d(e);function e(){return c(this,e),t.apply(this,arguments)}return h(e,[{key:"positioning",value:function(i,r){var e=this,o=i.reduce(function(t,e,n){return-1===r.indexOf(n)&&t.push(n),t},[]);return r.forEach(function(t){var n=i[t];o.forEach(function(t){var e=i[t];n=e.moveToBound(n)}),o.some(function(t){return!!i[t].and(n)})||n.and(e.boundRect).getSquare()!==n.getSquare()?n.removable=!0:o.push(t)}),i}},{key:"sorting",value:function(t,e,n){var i=t.concat(e);return e.forEach(function(t){n.push(i.indexOf(t))}),i}}]),e}(),Y=function(){l(r,X);var i=d(r);function r(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return c(this,r),(e=i.call(this,t,n)).options=Object.assign({removable:!0},n),e.radius=n.radius||80,e.paddingTopLeft=n.paddingTopLeft||new E(0,0),e.paddingBottomRight=n.paddingBottomRight||new E(0,0),e.yGapBetweenDraggables=n.yGapBetweenDraggables||0,e.getDistance=n.getDistance||D,e.getPosition=n.getPosition||function(t){return t.position},e}return h(r,[{key:"positioning",value:function(t){var o=this,s=this.boundRect,a=s.getP2(),u=[s.position];return t.forEach(function(t,e){for(var n,i=!1,r=0;r<u.length&&!(i=(n=new E(u[r].x+o.paddingTopLeft.x,0<r?u[r-1].y+o.yGapBetweenDraggables:s.position.y+o.paddingTopLeft.y)).x+t.size.x<a.x);r++);i||(n=new E(s.position.x+o.paddingTopLeft.x,u[u.length-1].y+(0<e?o.yGapBetweenDraggables:o.paddingTopLeft.y))),t.position=n,o.options.removable&&t.getP3().y>s.getP3().y&&(t.removable=!0),u=_(u,t.getP3().add(o.paddingBottomRight))}),t}},{key:"sorting",value:function(n,t,e){var i=this,r=n.concat(),o=n.map(function(t){return t.getPosition()});return t.forEach(function(t){var e=T(o,i.getPosition(t),i.radius,i.getDistance);e=-1===e?r.length:r.indexOf(n[e]),r.splice(e,0,t)}),t.forEach(function(t){e.push(r.indexOf(t))}),r}}]),r}(),G=function(){l(r,Y);var i=d(r);function r(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return c(this,r),(e=i.call(this,t,n)).paddingTopRight=n.paddingTopRight||new E(5,5),e.paddingBottomLeft=n.paddingBottomLeft||new E(0,0),e.yGapBetweenDraggables=n.yGapBetweenDraggables||0,e.paddingBottomNegLeft=new E(-e.paddingBottomLeft.x,e.paddingBottomLeft.y),e}return h(r,[{key:"positioning",value:function(t){var o=this,s=this.boundRect,a=[s.getP2()];return t.forEach(function(t,e){for(var n,i=!1,r=0;r<a.length&&!(i=(n=new E(a[r].x-t.size.x-o.paddingTopRight.x,0<r?a[r-1].y+o.yGapBetweenDraggables:s.position.y+o.paddingTopRight.y)).x>t.position.x);r++);i||(n=new E(s.getP2().x-t.size.x-o.paddingTopRight.x,a[a.length-1].y+(0<e?o.yGapBetweenDraggables:o.paddingTopRight.y))),t.position=n,o.options.removable&&t.getP4().y>s.getP4().y&&(t.removable=!0),a=_(a,t.getP4().add(o.paddingBottomNegLeft),!0)}),t}}]),r}(),q=function(){l(s,n);var o=d(s);function s(t,e){var n,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};c(this,s);var r=u(n=o.call(this,i));return n.options=Object.assign({timeEnd:200,timeExcange:400},i),n.positioningStrategy=i.strategy||new Y(n.getRectangle.bind(u(n)),{radius:80,getDistance:P({x:1,y:4}),removable:!0}),n.element=t,e.forEach(function(t){return t.targets.push(r)}),n.draggables=e,s.emitter.emit("target:create",u(n)),n.startBounding(),n.init(),n}return h(s,[{key:"startBounding",value:function(){this.bound=this.options.bound||R.bounding(this.element)}},{key:"positioning",value:function(t,e){return this.positioningStrategy.positioning(t,e)}},{key:"sorting",value:function(t,e,n){return this.positioningStrategy.sorting(t,e,n)}},{key:"init",value:function(){var t,e,n=this;this.innerDraggables=this.draggables.filter(function(t){for(var e=t.element.parentNode;e;){if(e===n.element)return!0;e=e.parentNode}return!1}),this.innerDraggables.length&&(e=function(t,e,n){var i=[];if(void 0===e&&(e=t,t=0),void 0===n&&(n=1),0<n&&e<=t||n<0&&t<=e)return[];for(var r=t;0<n?r<e:e<r;r+=n)i.push(r);return i}(this.innerDraggables.length),t=this.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),e),this.setPosition(t,e),this.innerDraggables.forEach(function(t){return n.emit("target:add",t)}))}},{key:"getRectangle",value:function(){return b.fromElement(this.element,this.container,this.options.isContentBoxSize,!0)}},{key:"catchDraggable",value:function(t){if(this.options.catchDraggable)return this.options.catchDraggable(this,t);var e=this.getRectangle();return t.getRectangle().getSquare()<e.getSquare()&&e.includePoint(t.getCenter())}},{key:"getPosition",value:function(){return this.getRectangle().position}},{key:"getSize",value:function(){return this.getRectangle().size}},{key:"destroy",value:function(){var e=this;W.forEach(function(t){return j(t.targets,e)})}},{key:"refresh",value:function(){var t=this.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),[]);this.setPosition(t,[],0)}},{key:"onEnd",value:function(t){var e=[];if(!this.getRectangle().includePoint(t.getCenter()))return!1;t.position=this.bound(t.position,t.getSize()),this.emit("target:beforeAdd",t),this.innerDraggables=this.sorting(this.innerDraggables,[t],e);var n=this.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),e);return this.setPosition(n,e),-1!==this.innerDraggables.indexOf(t)&&this.addRemoveOnMove(t),!0}},{key:"setPosition",value:function(r,o,s){var a=this;this.innerDraggables.slice(0).forEach(function(t,e){var n=r[e],i=s||0===s?s:-1!==o.indexOf(e)?a.options.timeEnd:a.options.timeExcange;n.removable?(t.move(t.initialPosition,i,!0,!0),j(a.innerDraggables,t),a.emit("target:remove",t)):t.move(n.position,i,!0,!0)})}},{key:"add",value:function(t,e){var n=this.innerDraggables.length;this.emit("target:beforeAdd",t),this.pushInnerDraggable(t);var i=this.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),n,t);this.setPosition(i,[n],e||0),-1!==this.innerDraggables.indexOf(t)&&this.addRemoveOnMove(t)}},{key:"pushInnerDraggable",value:function(t){-1===this.innerDraggables.indexOf(t)&&this.innerDraggables.push(t)}},{key:"addRemoveOnMove",value:function(t){var e=this;t.on("drag:move",this.removeHandler=function(){e.remove(t)}),this.emit("target:add",t)}},{key:"remove",value:function(t){t.unsubscribe("drag:move",this.removeHandler);var e=this.innerDraggables.indexOf(t);if(-1!==e){this.innerDraggables.splice(e,1);var n=this.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),[]);this.setPosition(n,[]),this.emit("target:remove",t)}}},{key:"reset",value:function(){var e=this;this.innerDraggables.forEach(function(t){t.move(t.initialPosition,0,!0,!0),e.emit("target:remove",t)}),this.innerDraggables=[]}},{key:"getSortedDraggables",value:function(){this.innerDraggables.slice()}},{key:"container",get:function(){return this._container=this._container||this.options.container||this.options.parent||e(this.element)}}]),s}();q.emitter=new n,q.emitter.on("target:create",function(t){H.addTarget(t)});var W=[],V=function(){l(o,n);var r=d(o);function o(t,n){var e,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return c(this,o),e=r.call(this,i),W.forEach(function(e){t&&t.forEach(function(t){j(e.draggables,t)}),n&&n.forEach(function(t){j(e.targets,t)})}),e.draggables=t||[],e.targets=n||[],W.push(u(e)),e.options={timeEnd:i.timeEnd||400},e.init(),e}return h(o,[{key:"init",value:function(){var e=this;this.draggables.forEach(function(t){t.dragEndAction=function(){return e.onEnd(t)}})}},{key:"addDraggable",value:function(t){var e=this;this.draggables.push(t),t.dragEndAction=function(){return e.onEnd(t)}}},{key:"addTarget",value:function(t){this.targets.push(t)}},{key:"onEnd",value:function(e){var t=this.targets.filter(function(t){return-1!==t.draggables.indexOf(e)}).filter(function(t){return t.catchDraggable(e)}).sort(function(t,e){return t.getRectangle().getSquare()-e.getRectangle().getSquare()});t.length?t[0].onEnd(e):e.targets.length&&e.pinPosition(e.initialPosition,this.options.timeEnd),this.emit("scope:change")}},{key:"reset",value:function(){this.targets.forEach(function(t){return t.reset()})}},{key:"refresh",value:function(){this.draggables.forEach(function(t){return t.refresh()}),this.targets.forEach(function(t){return t.refresh()})}},{key:"positions",get:function(){var e=this;return this.targets.map(function(t){return t.innerDraggables.map(function(t){return e.draggables.indexOf(t)})})},set:function(t){var n=this;if(t.length!==this.targets.length)throw"wrong array length";this.targets.forEach(function(t){return t.reset()}),t.forEach(function(t,e){t.forEach(function(t){n.targets[e].add(n.draggables[t])})})}}]),o}(),H=new V;var U=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}()&&{passive:!1},K="ontouchstart"in window,Z="mousedown",J="mousemove",$="mouseup",Q="touchstart",tt="touchmove",et="touchend",nt=[],it=w("transform"),rt=w("transition");function ot(t,e){for(var n=0;n<t.changedTouches.length;n++)if(t.changedTouches[n].identifier===e)return t.changedTouches[n];return!1}var st=function(){l(s,n);var i=d(s);function s(t){var e,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return c(this,s),(e=i.call(this,n)).targets=[],e.options=n,e.element=t,function(e){if(nt.some(function(t){return e.element===t.element}))throw"for this element Dragee.Draggable is already exist, don't create it twice ";nt.push(e)}(u(e)),s.emitter.emit("draggable:create",u(e)),e._enable=!0,e.touchDraggingThreshold="touchDraggingThreshold"in e.options?e.options.touchDraggingThreshold:0,e.startBounding(),e.startPositioning(),e.startListening(),e}return h(s,[{key:"startBounding",value:function(){this.options.bound?this.bounding={bound:this.options.bound}:this.bounding=new R(this.container,this.container)}},{key:"startPositioning",value:function(){this._setDefaultTransition(),this.offset=E.elementOffset(this.element,this.container,!0),this.pinnedPosition=this.offset,this.position=this.offset,this.initialPosition=this.options.position||this.offset,this.pinPosition(this.initialPosition),this.bounding.refresh&&this.bounding.refresh()}},{key:"startListening",value:function(){var e=this;this._dragStart=function(t){return e.dragStart(t)},this._dragMove=function(t){return e.dragMove(t)},this._dragEnd=function(t){return e.dragEnd(t)},this._nativeDragStart=function(t){return e.nativeDragStart(t)},this._nativeDragOver=function(t){return e.nativeDragOver(t)},this._nativeDragEnd=function(t){return e.nativeDragEnd(t)},this._nativeDrop=function(t){return e.nativeDrop(t)},this._scroll=function(t){return e.onScroll(t)},this.handler.addEventListener(Q,this._dragStart,U),this.handler.addEventListener(Z,this._dragStart,U),this.element.addEventListener("dragstart",this._nativeDragStart)}},{key:"getSize",value:function(){return E.elementSize(this.element,this.options.isContentBoxSize)}},{key:"getPosition",value:function(){return this.position=this.offset.add(this._transformPosition||new E(0,0)),this.position}},{key:"getCenter",value:function(){return this.position.add(this.getSize().mult(.5))}},{key:"_setDefaultTransition",value:function(){this.element.style[rt]=window.getComputedStyle(this.element)[rt]}},{key:"_setTransition",value:function(t){var e=this.element.style[rt],n="transform ".concat(t,"ms");/transform \d*m?s/.test(e)?e=e.replace(/transform \d*m?s/,n):e?e+=", ".concat(n):e=n,this.element.style[rt]!=e&&(this.element.style[rt]=e)}},{key:"_setTranslate",value:function(t){this._transformPosition=t;var e="translate3d(".concat(t.x,"px, ").concat(t.y,"px, 0px)"),n=this.element.style[it];this.shouldRemoveZeroTranslate&&0===t.x&&0===t.y?n=n.replace(/translate3d\([^)]+\)/,""):/translate3d\([^)]+\)/.test(n)?n=n.replace(/translate3d\([^)]+\)/,e):(n&&(n+=" "),n+=e),this.element.style[it]!=n&&(this.element.style[it]=n)}},{key:"move",value:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:0,r=2<arguments.length&&void 0!==n&&n;t=t.clone(),this.determineDirection(t),this.position=t,this._setTransition(i),this._setTranslate(t.sub(this.offset)),r||this.emit("drag:move")}},{key:"pinPosition",value:function(t,e,n){var i=1<arguments.length&&void 0!==e?e:0,r=!(2<arguments.length&&void 0!==n)||n;this.pinnedPosition=t.clone(),this.move(this.pinnedPosition,i,r)}},{key:"resetPositionToInitial",value:function(){this.pinPosition(this.initialPosition)}},{key:"refreshPosition",value:function(){this.setPosition(this.getPosition())}},{key:"setPosition",value:function(t){t=t.clone(),this.position=t,this._setTransition(0),this._setTranslate(t.sub(this.offset))}},{key:"determineDirection",value:function(t){this.leftDirection=this.position.x<t.x,this.rightDirection=this.position.x>t.x,this.upDirection=this.position.y>t.y,this.downDirection=this.position.y<t.y}},{key:"seemsScrolling",value:function(){return new Date-this._startTouchTimestamp<this.touchDraggingThreshold}},{key:"shouldUseNativeDragAndDrop",value:function(){return this.isTouchEvent?this.nativeDragAndDrop&&this.emulateNativeDragAndDropOnTouch:this.nativeDragAndDrop}},{key:"dragStart",value:function(t){var e=this;if(this._enable){if(this.isTouchEvent=K&&t instanceof window.TouchEvent,this.touchPoint=this._startTouchPoint=new E(this.isTouchEvent?t.changedTouches[0].pageX:t.clientX,this.isTouchEvent?t.changedTouches[0].pageY:t.clientY),this._startPosition=this.getPosition(),this.isTouchEvent&&(this._touchId=t.changedTouches[0].identifier,this._startTouchTimestamp=+new Date),this._startScrollPoint=new E(window.scrollX,window.scrollY),(t.target instanceof window.HTMLInputElement||t.target instanceof window.HTMLInputElement)&&t.target.focus(),this.shouldUseNativeDragAndDrop())if(this.isTouchEvent&&this.emulateNativeDragAndDropOnTouch||this.emulateNativeDragAndDropOnAllDevices){var n=function(t){e.seemsScrolling()?e.cancelDraggin():e.emulateNativeDragAndDrop(t),i()},i=function t(){document.removeEventListener(tt,n),document.removeEventListener(et,t)};document.addEventListener(tt,n,U),document.addEventListener(et,i,U)}else this.element.draggable=!0,document.addEventListener($,this._nativeDragEnd,U);else document.addEventListener(tt,this._dragMove,U),document.addEventListener(J,this._dragMove,U),document.addEventListener(et,this._dragEnd,U),document.addEventListener($,this._dragEnd,U);window.addEventListener("scroll",this._scroll),this.emit("drag:start")}}},{key:"dragMove",value:function(t){var e;if(this.isDragging=!0,this.isTouchEvent=K&&t instanceof window.TouchEvent,this.isTouchEvent){if(!(e=ot(t,this._touchId)))return;if(this.seemsScrolling())return void this.cancelDraggin()}t.stopPropagation(),t.preventDefault(),this.touchPoint=new E(this.isTouchEvent?e.pageX:t.clientX,this.isTouchEvent?e.pageY:t.clientY);var n=this._startPosition.add(this.touchPoint.sub(this._startTouchPoint)).add(this.scrollPoint.sub(this._startScrollPoint));n=this.bounding.bound(n,this.getSize()),this.move(n),this.element.classList.add("dragee-active")}},{key:"dragEnd",value:function(t){var e=this;this.isTouchEvent=K&&t instanceof window.TouchEvent,this.isTouchEvent&&!ot(t,this._touchId)||(this.isDragging&&(t.stopPropagation(),t.preventDefault()),this.dragEndAction(),this.emit("drag:end"),this.cancelDraggin(),setTimeout(function(){return e.element.classList.remove("dragee-active")}))}},{key:"onScroll",value:function(){var t=this._startPosition.add(this.touchPoint.sub(this._startTouchPoint)).add(this.scrollPoint.sub(this._startScrollPoint));t=this.bounding.bound(t,this.getSize()),this.nativeDragAndDrop||this.move(t)}},{key:"nativeDragStart",value:function(t){t.dataTransfer.setData("text","FireFox fix"),t.dataTransfer.effectAllowed="move",document.addEventListener("dragover",this._nativeDragOver),document.addEventListener("dragend",this._nativeDragEnd),document.addEventListener("drop",this._nativeDrop)}},{key:"nativeDragOver",value:function(t){if(t.preventDefault(),t.dataTransfer.dropEffect="move",this.element.classList.add("dragee-placeholder"),0!==t.clientX||0!==t.clientY){this.touchPoint=new E(t.clientX,t.clientY);var e=this._startPosition.add(this.touchPoint.sub(this._startTouchPoint)).add(this.scrollPoint.sub(this._startScrollPoint));e=this.bounding.bound(e,this.getSize()),this.position=e,this.emit("drag:move")}}},{key:"nativeDragEnd",value:function(){this.element.classList.remove("dragee-placeholder"),this.dragEndAction(),this.emit("drag:end"),document.removeEventListener("dragover",this._nativeDragOver),document.removeEventListener("dragend",this._nativeDragEnd),document.removeEventListener($,this._nativeDragEnd),document.removeEventListener("drop",this._nativeDrop),window.removeEventListener("scroll",this._scroll),this.isDragging=!1,this.element.removeAttribute("draggable"),this.element.classList.remove("dragee-active")}},{key:"nativeDrop",value:function(t){t.stopPropagation(),t.preventDefault()}},{key:"cancelDraggin",value:function(){document.removeEventListener(tt,this._dragMove),document.removeEventListener(J,this._dragMove),document.removeEventListener(et,this._dragEnd),document.removeEventListener($,this._dragEnd),document.removeEventListener($,this._nativeDragEnd),window.removeEventListener("scroll",this._scroll),this.isDragging=!1,this.element.removeAttribute("draggable")}},{key:"emulateNativeDragAndDrop",value:function(t){var e=this,n=this.container.getBoundingClientRect(),i=this.element.cloneNode(!0);i.style[it]="",function t(e,n){for(var i=window.getComputedStyle(e),r=0;r<i.length;r++){var o=i[r];o.indexOf("transition")<0&&o.indexOf("transform")<0&&(n.style[o]=i[o])}for(var s=0;s<e.children.length;s++)t(e.children[s],n.children[s])}(this.element,i),i.style.position="absolute",document.body.appendChild(i),this.element.classList.add("dragee-placeholder");var r=new s(i,{container:document.body,touchDraggingThreshold:0,bound:function(t){return t},on:{"drag:move":function(){var t=new E(n.left,n.top);e.position=r.position.sub(t).sub(e._startScrollPoint),e.emit("drag:move")},"drag:end":function(){r.destroy(),document.body.removeChild(i),e.element.classList.remove("dragee-placeholder"),e.element.classList.remove("dragee-active")}}}),o=new E(n.left,n.top);r._startScrollPoint=this._startScrollPoint,r.move(this.pinnedPosition.add(o).add(new E(window.scrollX,window.scrollY))),r.dragStart(t),t.preventDefault()}},{key:"dragEndAction",value:function(){this.pinPosition(this.position)}},{key:"getRectangle",value:function(){return new b(this.position,this.getSize())}},{key:"refresh",value:function(){this.bounding.refresh&&this.bounding.refresh()}},{key:"destroy",value:function(){this.handler.removeEventListener(Q,this._dragStart),this.handler.removeEventListener(Z,this._dragStart),this.element.removeEventListener("dragstart",this._nativeDragStart),document.removeEventListener(tt,this._dragMove),document.removeEventListener(J,this._dragMove),document.removeEventListener(et,this._dragEnd),document.removeEventListener($,this._dragEnd),document.removeEventListener("dragover",this._nativeDragOver),document.removeEventListener("dragend",this._nativeDragEnd),document.removeEventListener($,this._nativeDragEnd),document.removeEventListener("drop",this._nativeDrop),this.resetEmitter();var t=nt.indexOf(this);-1<t&&nt.splice(t,1)}},{key:"container",get:function(){return this._container=this._container||this.options.container||this.options.parent||e(this.element)}},{key:"handler",get:function(){return this._handler||("string"==typeof this.options.handler?this._handler=this.element.querySelector(this.options.handler)||this.element:this._handler=this.options.handler||this.element),this._handler}},{key:"nativeDragAndDrop",get:function(){return this.options.nativeDragAndDrop||!1}},{key:"emulateNativeDragAndDropOnTouch",get:function(){return this.options.emulateNativeDragAndDropOnTouch||!1}},{key:"emulateNativeDragAndDropOnAllDevices",get:function(){return this.options.emulateNativeDragAndDropOnAllDevices||!1}},{key:"shouldRemoveZeroTranslate",get:function(){return this.options.shouldRemoveZeroTranslate||!1}},{key:"scrollPoint",get:function(){return new E(window.scrollX,window.scrollY)}},{key:"enable",get:function(){return this._enable},set:function(t){t?this.element.classList.remove("dragee-disable"):this.element.classList.add("dragee-disable"),this._enable=t}}]),s}();st.emitter=new n,st.emitter.on("draggable:create",function(t){H.addDraggable(t)});var at,ut,ct=[],ht="ResizeObserver loop completed with undelivered notifications.";(ut=at=at||{}).BORDER_BOX="border-box",ut.CONTENT_BOX="content-box",ut.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";function lt(t){return Object.freeze(t)}var dt=function(t,e){this.inlineSize=t,this.blockSize=e,lt(this)},gt=(ft.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},ft.fromRect=function(t){return new ft(t.x,t.y,t.width,t.height)},ft);function ft(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,lt(this)}function vt(t){return t instanceof SVGElement&&"getBBox"in t}function pt(t){if(vt(t)){var e=t.getBBox(),n=e.width,i=e.height;return!n&&!i}var r=t.offsetWidth,o=t.offsetHeight;return!(r||o||t.getClientRects().length)}function yt(t){var e;if(t instanceof Element)return!0;var n=null===(e=null===t||void 0===t?void 0:t.ownerDocument)||void 0===e?void 0:e.defaultView;return!!(n&&t instanceof n.Element)}function mt(t){return parseFloat(t||"0")}function bt(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),new dt((n?e:t)||0,(n?t:e)||0)}function xt(t,e){if(void 0===e&&(e=!1),zt.has(t)&&!e)return zt.get(t);if(pt(t))return zt.set(t,At),At;var n=getComputedStyle(t),i=vt(t)&&t.ownerSVGElement&&t.getBBox(),r=!Rt&&"border-box"===n.boxSizing,o=Lt.test(n.writingMode||""),s=!i&&Bt.test(n.overflowY||""),a=!i&&Bt.test(n.overflowX||""),u=i?0:mt(n.paddingTop),c=i?0:mt(n.paddingRight),h=i?0:mt(n.paddingBottom),l=i?0:mt(n.paddingLeft),d=i?0:mt(n.borderTopWidth),g=i?0:mt(n.borderRightWidth),f=i?0:mt(n.borderBottomWidth),v=l+c,p=u+h,y=(i?0:mt(n.borderLeftWidth))+g,m=d+f,b=a?t.offsetHeight-m-t.clientHeight:0,x=s?t.offsetWidth-y-t.clientWidth:0,w=r?v+y:0,E=r?p+m:0,D=i?i.width:mt(n.width)-w-x,k=i?i.height:mt(n.height)-E-b,P=D+v+x+y,T=k+p+b+m,S=lt({devicePixelContentBoxSize:bt(Math.round(D*devicePixelRatio),Math.round(k*devicePixelRatio),o),borderBoxSize:bt(P,T,o),contentBoxSize:bt(D,k,o),contentRect:new gt(l,u,D,k)});return zt.set(t,S),S}function wt(t,e,n){var i=xt(t,n),r=i.borderBoxSize,o=i.contentBoxSize,s=i.devicePixelContentBoxSize;switch(e){case at.DEVICE_PIXEL_CONTENT_BOX:return s;case at.BORDER_BOX:return r;default:return o}}function Et(t){if(pt(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e}function Dt(){var r=1/0,e=[];ct.forEach(function(t){if(0!==t.activeTargets.length){var i=[];t.activeTargets.forEach(function(t){var e=new Mt(t.target),n=Et(t.target);i.push(e),t.lastReportedSize=wt(t.target,t.observedBox),n<r&&(r=n)}),e.push(function(){t.callback.call(t.observer,i,t.observer)}),t.activeTargets.splice(0,t.activeTargets.length)}});for(var t=0,n=e;t<n.length;t++){(0,n[t])()}return r}function kt(n){ct.forEach(function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach(function(t){t.isActive()&&(Et(t.target)>n?e.activeTargets.push(t):e.skippedTargets.push(t))})})}function Pt(){var t,e=0;for(kt(e);ct.some(function(t){return 0<t.activeTargets.length});)e=Dt(),kt(e);return ct.some(function(t){return 0<t.skippedTargets.length})&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:ht}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=ht),window.dispatchEvent(t)),0<e}function Tt(t){if(!_t){var e=0,n=document.createTextNode("");new MutationObserver(function(){return Ct.splice(0).forEach(function(t){return t()})}).observe(n,{characterData:!0}),_t=function(){n.textContent=""+(e?e--:e++)}}Ct.push(t),_t()}function St(t){return void 0===t&&(t=0),Date.now()+t}var _t,Ot="undefined"!=typeof window?window:{},zt=new WeakMap,Bt=/auto|scroll/,Lt=/^tb|vertical/,Rt=/msie|trident/i.test(Ot.navigator&&Ot.navigator.userAgent),At=lt({devicePixelContentBoxSize:bt(),borderBoxSize:bt(),contentBoxSize:bt(),contentRect:new gt(0,0,0,0)}),Mt=function(t){var e=xt(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=lt([e.borderBoxSize]),this.contentBoxSize=lt([e.contentBoxSize]),this.devicePixelContentBoxSize=lt([e.devicePixelContentBoxSize])},Ct=[],Nt=0,It={attributes:!0,characterData:!0,childList:!0,subtree:!0},jt=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Xt=!1;function Ft(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}function Yt(t){!Nt&&0<t&&Gt.start(),(Nt+=t)||Gt.stop()}var Gt=new(Ft.prototype.run=function(e){var n=this;if(void 0===e&&(e=250),!Xt){Xt=!0;var t,i=St(e);t=function(){var t=!1;try{t=Pt()}finally{if(Xt=!1,e=i-St(),!Nt)return;t?n.run(1e3):0<e?n.run(e):n.start()}},Tt(function(){requestAnimationFrame(t)})}},Ft.prototype.schedule=function(){this.stop(),this.run()},Ft.prototype.observe=function(){function t(){return e.observer&&e.observer.observe(document.body,It)}var e=this;document.body?t():Ot.addEventListener("DOMContentLoaded",t)},Ft.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),jt.forEach(function(t){return Ot.addEventListener(t,e.listener,!0)}))},Ft.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),jt.forEach(function(t){return Ot.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},Ft),qt=(Wt.prototype.isActive=function(){var t,e=wt(this.target,this.observedBox,!0);return t=this.target,vt(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return 1}return 0}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},Wt);function Wt(t,e){this.target=t,this.observedBox=e||at.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}function Vt(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1}var Ht=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},Ut=new WeakMap,Kt=(Zt.connect=function(t,e){var n=new Ht(t,e);Ut.set(t,n)},Zt.observe=function(t,e,n){var i=Ut.get(t),r=0===i.observationTargets.length;Vt(i.observationTargets,e)<0&&(r&&ct.push(i),i.observationTargets.push(new qt(e,n&&n.box)),Yt(1),Gt.schedule())},Zt.unobserve=function(t,e){var n=Ut.get(t),i=Vt(n.observationTargets,e),r=1===n.observationTargets.length;0<=i&&(r&&ct.splice(ct.indexOf(n),1),n.observationTargets.splice(i,1),Yt(-1))},Zt.disconnect=function(e){var n=this,t=Ut.get(e);t.observationTargets.slice().forEach(function(t){return n.unobserve(e,t.target)}),t.activeTargets.splice(0,t.activeTargets.length)},Zt);function Zt(){}var Jt=($t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!yt(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Kt.observe(this,t,e)},$t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!yt(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Kt.unobserve(this,t)},$t.prototype.disconnect=function(){Kt.disconnect(this)},$t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},$t);function $t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Kt.connect(this,t)}var Qt=window.ResizeObserver||Jt,te=function(){l(u,n);var a=d(u);function u(t){var e,i,r,o,s,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return c(this,u),(e=a.call(this,n)).options=Object.assign({timeEnd:200,timeExcange:400,radius:30},n),e.container=n.container,e.draggables=t,e.changedDuringIteration=!1,e.resizeObserver=new Qt((i=function(){e.options.reorderOnChange&&e.reset(),e.draggables.forEach(function(t){return t.startPositioning()})},r=100,function(){var t=this,e=arguments,n=o&&!s;clearTimeout(s),s=setTimeout(function(){s=null,o||i.apply(t,e)},r),n&&i.apply(t,e)})),e.init(),e}return h(u,[{key:"init",value:function(){var e=this;this._enable=!0,this.draggables.forEach(function(t){return e.initDraggable(t)})}},{key:"initDraggable",value:function(t){var e=this;t.enable=this._enable,t.on("drag:move",function(){return e.onMove(t)}),t.dragEndAction=function(){t.pinPosition(t.pinnedPosition,e.options.timeEnd),e.onEnd(t)},this.resizeObserver.observe(t.element)}},{key:"releaseDraggable",value:function(t){this.resizeObserver.unobserve(t.element),t.resetOn("drag:end"),t.resetOn("drag:move"),j(this.draggables,t)}},{key:"onMove",value:function(t){var e=this.getSortedDraggables(),n=e.map(function(t){return t.pinnedPosition}),i=e.indexOf(t),r=T(n,t.position,this.options.radius,this.distanceFunc);if(-1!==r&&i!==r){if(r<i)for(var o=r;o<i;o++)e[o].pinPosition(n[o+1],this.options.timeExcange);else for(var s=i;s<r;s++)e[s+1].pinPosition(n[s],this.options.timeExcange);t.nativeDragAndDrop?t.pinPosition(n[r]):t.pinnedPosition=n[r],this.changedDuringIteration=!0}}},{key:"onEnd",value:function(t){this.changedDuringIteration&&(this.emit("list:change"),this.changedDuringIteration=!1,this.options.reorderOnChange&&this.options.container&&this.reorderElements(t))}},{key:"reorderElements",value:function(t){var e=this.getSortedDraggables(),n=e.indexOf(t),i=e[n+1];this.reset(),i?this.container.insertBefore(t.element,i.element):this.container.appendChild(t.element),this.draggables.forEach(function(t){return t.startPositioning()}),this.emit("list:reordered")}},{key:"getCurrentPinnedPositions",value:function(){return this.draggables.map(function(t){return t.pinnedPosition.clone()})}},{key:"getSortedDraggables",value:function(){return this.draggables.sort(this.sorting.bind(this))}},{key:"reset",value:function(){this.draggables.forEach(function(t){return t.resetPositionToInitial()})}},{key:"refresh",value:function(){this.draggables.forEach(function(t){return t.refresh()})}},{key:"add",value:function(t){var e=this;t instanceof Array||(t=[t]),t.forEach(function(t){return e.initDraggable(t)}),this.draggables=this.draggables.concat(t)}},{key:"remove",value:function(t){var e=this,n=this.draggables.map(function(t){return t.initialPosition}),i=[],r=this.getSortedDraggables();t instanceof Array||(t=[t]),t.forEach(function(t){return e.releaseDraggable(t)});var o=0;r.forEach(function(t){-1!==e.draggables.indexOf(t)&&(t.pinnedPosition!==n[o]&&t.pinPosition(n[o],e.options.timeExcange),t.initialPosition=n[o],o++,i.push(t))}),this.draggables=i}},{key:"clear",value:function(){this.remove(this.draggables.slice())}},{key:"destroy",value:function(){this.draggables.forEach(function(t){return t.destroy()})}},{key:"sorting",value:function(t,e){return this.options.sorting?this.options.sorting(t,e):t.pinnedPosition.y<e.pinnedPosition.y?-1:t.pinnedPosition.y>e.pinnedPosition.y?1:t.pinnedPosition.x<e.pinnedPosition.x?-1:t.pinnedPosition.x>e.pinnedPosition.x?1:0}},{key:"distanceFunc",get:function(){return this.options.getDistance||D}},{key:"positions",get:function(){return this.getCurrentPinnedPositions()},set:function(t){var n=this;if(t.length!==this.draggables.length)throw"wrong array length";t.forEach(function(t,e){n.draggables[e].pinPosition(t)})}},{key:"enable",get:function(){return this._enable},set:function(e){this._enable=e,this.draggables.forEach(function(t){t.enable=e})}}],[{key:"factory",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};return new u(Array.from(t).map(function(t){return new st(t,Object.assign({container:e},i.draggable||{}))}),Object.assign({container:e},i.list||{}))}}]),u}(),ee=function(){l(r,te);var n=d(r);function r(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return c(this,r),n.call(this,t,e)}return h(r,[{key:"initDraggable",value:function(t){var e=this;t.on("drag:start",function(){return e.autoDetectVerticalGap(t)}),g(o(r.prototype),"initDraggable",this).call(this,t)}},{key:"autoDetectVerticalGap",value:function(){if(2<=this.draggables.length){var t=this.getSortedDraggables();this.verticalGap=t[1].pinnedPosition.y-t[0].pinnedPosition.y-t[0].getSize().y}else this.verticalGap=0;1<=this.draggables.length&&(this.startPosition=this.draggables[0].pinnedPosition)}},{key:"onMove",value:function(t){var e,n,i,r=this.getSortedDraggables(),o=r.map(function(t){return t.pinnedPosition}),s=r.indexOf(t),a=T(o,t.position,this.options.radius,this.distanceFunc);-1!==a&&s!==a&&(n=s,i=a,(e=r).splice(i<0?e.length+i:i,0,e.splice(n,1)[0]),this.bubbling(r,t),this.changedDuringIteration=!0)}},{key:"bubbling",value:function(t,e){var n=this,i=this.startPosition.clone();(t=t||this.getSortedDraggables()).forEach(function(t){t.pinnedPosition.compare(i)||(t!==e||e.shouldUseNativeDragAndDrop()?t.pinPosition(i,t===e?0:n.options.timeExcange):t.pinnedPosition=i.clone()),i.y=i.y+t.getSize().y+n.verticalGap})}},{key:"remove",value:function(e){var n=this;e instanceof Array||(e=[e]),e.forEach(function(t){return n.releaseDraggable(t)}),this.draggables=this.draggables.filter(function(t){return!e.includes(t)}),this.draggables.forEach(function(t){return t.startPositioning()}),this.bubbling()}},{key:"distanceFunc",get:function(){return this.options.getDistance||k}}],[{key:"factory",value:function(e,t,n){var i=2<arguments.length&&void 0!==n?n:{};return new r(Array.from(t).map(function(t){return new st(t,Object.assign({container:e},i.draggable||{}))}),Object.assign({container:e},i.list||{}))}}]),r}();t.Bound=B,t.BoundToArc=I,t.BoundToCircle=N,t.BoundToElement=R,t.BoundToLine=C,t.BoundToLineX=A,t.BoundToLineY=M,t.BoundToRectangle=L,t.BubblingList=ee,t.Draggable=st,t.FloatLeftStrategy=Y,t.FloatRightStrategy=G,t.List=te,t.NotCrossingStrategy=F,t.Point=E,t.Rectangle=b,t.Scope=V,t.Target=q,t.defaultScope=H,t.getDistance=D,t.getXDifference=function(t,e){return Math.abs(t.x-e.x)},t.getYDifference=k,t.indexOfNearestPoint=T,t.scope=function(t){function e(t){i.addDraggable(t),st.emitter.interrupt()}function n(t){i.addTarget(t),st.emitter.interrupt()}var i=new V;return st.emitter.prependOn("draggable:create",e),q.emitter.prependOn("target:create",n),t.call(),st.emitter.unsubscribe("draggable:create",e),q.emitter.unsubscribe("target:create",n),i},t.scopes=W,t.transformedSpaceDistanceFactory=P,Object.defineProperty(t,"__esModule",{value:!0})});
