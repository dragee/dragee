{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4b9e7e03ed62917356f6","webpack:///./src/index.js","webpack:///./src/expandnative.js","webpack:///./src/draggable.js","webpack:///./src/util.js","webpack:///./src/bound.js","webpack:///./src/point.js","webpack:///./src/list.js"],"names":["Draggable","List","listFactory","clone","o","c","i","Array","prototype","forEach","fun","TypeError","t","Object","len","length","thisp","arguments","call","filter","res","val","push","every","map","some","removeItem","splice","Element","hasClass","re","RegExp","test","className","addClass","replace","removeClass","HTMLElement","appbeginChild","node","firstChild","insertBefore","appendChild","exchange","refNode","tempParentNode","parentNode","tempBeforeNode","nextElementSibling","fullOffset","element","axis","parent_id","tor","id","offsetLeft","offsetTop","extend","Child","Parent","F","constructor","superclass","augment","receivingClass","givingClass","methodName","NodeList","Math","getNearIndex","arr","delta","abs","index","temp","getNearIndexWithCaptureRadius","radius","bound","min","max","boundPoint","x","y","Point","getLength","p1","p2","dx","dy","sqrt","toRadian","angle","PI","String","substrend","substr","XmlHttpRequest","window","XMLHttpRequest","xmlhttp","ActiveXObject","alert","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","__defineGetter__","defineProperty","get","enumerable","configurable","value","name","func","set","defPropException","Dragee","util","boundType","boundFactory","isTouch","mouseEvents","start","move","end","touchEvents","events","draggables","onCreateDraggable","draggable","message","existing","transformProperty","getStyleProperty","transitionProperty","options","that","displayListener","parent","getDefaultParent","startFilter","isContentBoxSize","position","hasOwnProperty","onEnd","triggerFactory","context","isReverse","isStopOnTrue","onMove","onStart","add","init","_enable","offset","getOffset","fixPosition","initPosition","_dragStart","bind","dragStart","_delayedDragStart","delayedDragStart","_dragMove","dragMove","_dragEnd","dragEnd","delayedStart","addEventListener","refresh","reinit","getSize","recalulate","getSizeOfElement","getPosition","_transformPosition","getCenter","mult","_setTranslate","point","transform","style","translateCss","ua","navigator","userAgent","msie","indexOf","time","isFix","isSilent","determineDirection","sub","fire","refreshPosition","setPosition","setZeroTransition","leftDirection","rightDirection","upDirection","downDirection","delayedEvent","isTouchEvent","TouchEvent","startTouchPoint","changedTouches","pageX","clientX","pageY","clientY","shiftKey","checkMovement","event","touchPoint","document","removeEventListener","BlockSelection","startDragSelection","removeCheckMovement","currentEvent","_startTouchPoint","_startPosition","_touchId","identifier","stopPropagation","target","HTMLInputElement","preventDefault","focus","isDragee","touch","getTouchByID","getRectangle","Rectangle","destroy","reset","__defineSetter__","enable","getComputedStyle","apply","touchId","getSumValueOfStyleRule","rules","reduce","sum","rule","parseInt","appendFirstChild","range","stop","step","result","setStyle","cssText","key","opts","funcs","args","slice","retValue","fs","reverse","f","unshift","remove","randomColor","rnd","round","random","toHexString","digit","str","toString","red","green","blue","createCanvas","area","rectagle","canvas","createElement","setAttribute","size","left","top","width","height","rectangle","lineX","lineY","line","unificationOfRectangle","circle","arc","type","retFunc","createRectangleFromElement","calcPoint","rectP2","getP3","startY","endY","startX","endX","alpha","atan2","beta","someK","cosBeta","cos","sinBeta","sin","point2","pointCrossing","directCrossing","newEnd","getPointInLineByLenght","boundOnLine","center","boundedPoint","startAgle","endAngle","boundStartAngle","boundEndtAngle","getAngle","normalizeAngle","boundAngle","getPointFromRadialSystem","mathPoint","p","k","negative","compare","getP1","getP2","getP4","or","rect","and","includePoint","includeRectangle","moveToBound","selAxis","crossRectangle","thisCenter","rectCenter","sign","getSquare","styleApply","el","querySelector","growth","getMinSide","isTransformationSpace","pow","indexOfNearPoint","L1P1","L1P2","L2P1","L2P2","k1","k2","b1","b2","boundOnSegment","LP1","LP2","P","A","B","AP","AB","ab2","ap_ab","getPointInLine","percent","lenght","isConsiderTranslate","elRect","getBoundingClientRect","parentRect","addPointToBoundPoints","boundpoints","isRight","bPoint","diff","toDegree","dmin","dmax","getAngleDiff","getNearestAngle","minAngle","maxAngle","distance","P1","P2","xs","ys","lists","timeEnd","timeExcange","isDisplacement","onChange","initDraggable","moveHandler","onEndDisplaycement","moveOrSave","fixPositions","getCurrentFixPosition","currentIndex","excangeIndex","targetIndex","sortedDraggables","getSortedDraggables","initPositions","concat","j","list","clear","positions","parentElement","elements","draggableOptions","listOptions"],"mappings":"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","file":"dragee.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Dragee\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dragee\"] = factory();\n\telse\n\t\troot[\"Dragee\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4b9e7e03ed62917356f6\n **/","import './expandnative'\nimport {Draggable} from './draggable'\nimport {List, listFactory} from './list'\n\nexport { Draggable, List, listFactory }\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","var clone = function (o) {\n    function c(o) {\n        for (var i in o) {\n            this[i] = o[i];\n        }\n    }\n    return new c(o);\n}\n\n\n/************ Array **************/\n\nif (!Array.prototype.forEach){\n    Array.prototype.forEach = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t)\n                fun.call(thisp, t[i], i, t);\n        }\n    };\n}\n\nif (!Array.prototype.filter){\n    Array.prototype.filter = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var res = [];\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t){\n                var val = t[i]; // in case fun mutates this\n                if (fun.call(thisp, val, i, t))\n                    res.push(val);\n            }\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.every){\n        Array.prototype.every = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n        throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t && !fun.call(thisp, t[i], i, t))\n                return false;\n        }\n        return true;\n    };\n}\n\nif (!Array.prototype.map){\n    Array.prototype.map = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var res = new Array(len);\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t)\n                res[i] = fun.call(thisp, t[i], i, t);\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.some){\n    Array.prototype.some = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t && fun.call(thisp, t[i], i, t))\n                return true;\n        }\n        return false;\n    };\n}\n\nif (!Array.prototype.removeItem){\n    Array.prototype.removeItem = function(val) {\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === val) {\n                this.splice(i, 1);\n                i--;\n            }\n        }\n        return this;\n    }\n}\n\n/*********** HTMLElement ***************/\nElement.prototype.hasClass = function(c){\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\");\n    return (re.test(this.className));\n}\n\nElement.prototype.addClass = function(c){\n    if (this.hasClass(c)) return this;\n    this.className = (this.className + \" \" + c).replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n    return this;\n}\n\nElement.prototype.removeClass = function(c){\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\")\n    this.className = this.className.replace(re, \"$1\").replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n    return this;\n}\n\nHTMLElement.prototype.appbeginChild = function(node) {\n    this.firstChild ? this.insertBefore(node, this.firstChild) : this.appendChild(node);\n}\n\nHTMLElement.prototype.exchange = function(refNode) {\n    var tempParentNode = refNode.parentNode;\n    var tempBeforeNode = refNode.nextElementSibling;\n    this.parentNode.insertBefore(refNode,this);\n    if(tempBeforeNode)\n        tempParentNode.insertBefore(this,tempBeforeNode);\n    else\n        tempParentNode.appendChild(this);\n\n    return refNode;\n}\n\nvar fullOffset = function(element, axis, parent_id){\n    var tor = 0;\n    while((element) && (element.id!=parent_id)){  //&& (element!=\"\")\n        if( axis == \"x\" )\n        {\n            if(element.offsetLeft)\n                tor += element.offsetLeft;\n        }\n        if( axis == \"y\" )\n        {\n            if(element.offsetTop)\n                tor += element.offsetTop;\n        }\n            element = element.parentNode;\n    }\n    return tor;\n}\n\n/*********************** 00P *************************/\nvar extend = function(Child, Parent) {\n    var F = function() { }\n    F.prototype = Parent.prototype;\n    Child.prototype = new F();\n    Child.prototype.constructor = Child;\n    Child.superclass = Parent.prototype;\n}\n\nvar augment = function(receivingClass, givingClass) {\n    /* only provide certain methods */\n    if (arguments[2]) {\n        for (var i=2, len=arguments.length; i<len; i++) {\n            receivingClass.prototype[arguments[i]] = givingClass.prototype[arguments[i]];\n        }\n    }\n    /* provide all methods*/\n    else {\n        for (methodName in givingClass.prototype) {\n            /* check to make sure the receiving class doesn't\n               have a method of the same name as the one currently\n               being processed */\n            if (!receivingClass.prototype[methodName]) {\n                receivingClass.prototype[methodName] = givingClass.prototype[methodName];\n            }\n        }\n    }\n}\n/**************************************************/\naugment(NodeList,Array,'forEach');\n\n/**************************************************/\nMath.getNearIndex = function(arr, val){\n    var delta = Math.abs(arr[0] - val);\n    var index = 0;\n    for(var i=0; i<arr.length; i++){\n        var temp = Math.abs(arr[i] - val);\n        if(temp<delta){\n            delta = temp;\n            index = i;\n        }\n    }\n    return index;\n}\n\nMath.getNearIndexWithCaptureRadius = function(arr, radius, val){\n    var delta=Math.abs(arr[0]-val);\n    var index=0;\n    for(var i=0;i<arr.length;i++){\n        var temp=Math.abs(arr[i]-val);\n        if(temp<delta){\n            delta=temp;\n            index=i;\n        }\n    }\n    if(delta>radius){\n        return -1;\n    }\n    return index;\n}\n\nMath.bound = function(min, max, val){\n    //console.log(min,max,val)\n    return Math.max(min,Math.min(max,val));\n}\nMath.boundPoint = function(min, max, val){\n    var x = Math.max(min.x, Math.min(max.x, val.x));\n    var y = Math.max(min.y, Math.min(max.y, val.y));\n    return new Point(x, y);\n}\nMath.getLength = function(p1, p2){\n    var dx = p1.x - p2.x;\n    var dy = p1.y - p2.y;\n    return Math.sqrt(dx*dx + dy*dy);\n}\n\nMath.toRadian = function(angle){\n    return ((angle % 361) * Math.PI / 180);\n}\n/********************************************/\n\nString.prototype.substrend = function(length) {\n    return this.substr(0, this.length - length);\n}\n/********************************************/\n\nfunction XmlHttpRequest() {\n    if (window.XMLHttpRequest) {\n        xmlhttp = new XMLHttpRequest();\n    } else if (window.ActiveXObject) {\n        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    if (xmlhttp == null) {\n        alert(\"Your browser does not support XMLHTTP.\");\n    }\n    return xmlhttp;\n}\n\nwindow.requestAnimationFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          window.oRequestAnimationFrame      ||\n          window.msRequestAnimationFrame     ||\n          function(/* function */ callback, /* DOMElement */ element){\n            window.setTimeout(callback, 1000 / 60);\n          };\n})();\n\ntry {\n    if(!Object.prototype.__defineGetter__ &&\n    Object.defineProperty({}, \"x\", { get: function() { return true } }).x) {\n        Object.defineProperty(Object.prototype, \"__defineGetter__\",\n     { enumerable: false, configurable: true,\n        value: function(name, func) {\n            Object.defineProperty(this, name,\n             { get: func, enumerable: true, configurable: true });\n        }\n     });\n        Object.defineProperty(Object.prototype, \"__defineSetter__\",\n     { enumerable: false, configurable: true,\n        value: function(name, func) {\n            Object.defineProperty(this, name,\n             { set: func, enumerable: true, configurable: true });\n        }\n     });\n    }\n} catch(defPropException) { /*Do nothing if an exception occurs*/ };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/expandnative.js\n **/","    'use strict';\n\n\n    import util from './util'\n    import {boundType, boundFactory} from './bound'\n    import {mathPoint, Point} from './point'\n\n    var Dragee = { util, boundType, boundFactory };//todo remove after refactore\n\n    var isTouch = 'ontouchstart' in window, mouseEvents = {\n        start: 'mousedown',\n        move: 'mousemove',\n        end: 'mouseup'\n    }, touchEvents = {\n        start: 'touchstart',\n        move: 'touchmove',\n        end: 'touchend'\n    },\n    events = isTouch ? touchEvents : mouseEvents,\n    draggables = [],\n    onCreateDraggable = function(draggable){\n        var message = \"for this element Dragee.Draggable is already exist, don't create it twice \";\n        if(draggables.some(function(existing){\n            return draggable.element === existing.element;\n        })){\n            throw message;\n        }\n        draggables.push(draggable);\n    },\n    transformProperty = getStyleProperty('transform'),\n    transitionProperty = getStyleProperty('transition');\n\n    //Dragee.events = events;\n\n    function Draggable(element, options){\n        options = options || {};\n        var i, that = this, displayListener, parent = options.parent || Dragee.util.getDefaultParent(element);\n        this.options = {\n            parent: parent,\n            bound: Dragee.boundFactory(Dragee.boundType.element)(parent, parent),\n            startFilter: false,\n            isContentBoxSize: false,\n            position: false\n        }\n        for(i in options){\n            if(options.hasOwnProperty(i)){\n                this.options[i] = options[i];\n            }\n        }\n        this.onEnd = Dragee.util.triggerFactory({\n            context: this, isReverse: true, isStopOnTrue: true\n        });\n        this.onMove = Dragee.util.triggerFactory({context: this});\n        this.onStart = Dragee.util.triggerFactory({context: this});\n\n        this.onEnd.add(function(){\n            this.move(this.position, 0, true, true);\n        });\n\n        if(options.onEnd){\n            this.onEnd.add(options.onEnd);\n        }\n        if(options.onMove){\n            this.onMove.add(options.onMove);\n        }\n        if(options.onStart){\n            this.onStart.add(options.onStart);\n        }\n        this.element = element;\n        this.bound = this.options.bound;\n        onCreateDraggable(this);\n        that.init();\n    }\n\n    Draggable.prototype.init = function(){\n        this._enable = true;\n        this.offset = mathPoint.getOffset(this.element, this.options.parent, true);\n        this.fixPosition = this.offset;\n        this.position = this.offset;\n        if(this.options.position){\n            this.initPosition = this.options.position;\n            this.move(this.initPosition, 0, true, true);\n        } else {\n            this.initPosition = this.offset;\n        }\n        this._dragStart = Dragee.util.bind(this.dragStart, this);\n        this._delayedDragStart = Dragee.util.bind(this.delayedDragStart, this);\n        this._dragMove = Dragee.util.bind(this.dragMove, this);\n        this._dragEnd = Dragee.util.bind(this.dragEnd, this);\n\n        if(this.options.delayedStart) {\n            this.element.addEventListener(touchEvents.start, this._delayedDragStart);\n            this.element.addEventListener(mouseEvents.start, this._delayedDragStart);\n        } else {\n            this.element.addEventListener(touchEvents.start, this._dragStart);\n            this.element.addEventListener(mouseEvents.start, this._dragStart);\n        }\n\n        this.bound.refresh && this.bound.refresh();\n    };\n\n    Draggable.prototype.reinit = function(){\n        this.offset = mathPoint.getOffset(this.element, this.options.parent, true);\n        this.fixPosition = this.offset;\n        this.position = this.offset;\n        if(this.options.position){\n            this.initPosition = this.options.position;\n            this.move(this.initPosition, 0, true, true);\n        } else {\n            this.initPosition = this.offset;\n        }\n\n        this.bound.refresh && this.bound.refresh();\n    };\n\n    Draggable.prototype.getSize = function(recalulate){\n        return mathPoint.getSizeOfElement(this.element, this.options.isContentBoxSize);\n    };\n\n    Draggable.prototype.getPosition = function(){\n        this.position = this.offset.add(this._transformPosition || new Point(0, 0));\n        return this.position;\n    };\n\n    Draggable.prototype.getCenter = function(){\n        return this.position.add(this.getSize().mult(0.5));\n    };\n\n    Draggable.prototype._setTranslate = function(point){\n        this._transformPosition = point;\n\n        var transform = this.element.style[transformProperty],\n            translateCss = ' translate3d(' + point.x + 'px,' + point.y + 'px, 0px)';\n\n        var ua = window.navigator.userAgent;\n        var msie = ua.indexOf(\"MSIE \");\n\n        if(msie) {\n            translateCss = ' translate(' + point.x + 'px,' + point.y + 'px)';\n            if(!/translate\\([^)]+\\)/.test(transform)){\n                transform += translateCss;\n            }else{\n                transform = transform.replace(/translate\\([^)]+\\)/, translateCss);\n            }\n        } else {\n            if(!/translate3d\\([^)]+\\)/.test(transform)){\n                transform += translateCss;\n            }else{\n                transform = transform.replace(/translate3d\\([^)]+\\)/, translateCss);\n            }\n        }\n\n        this.element.style[transformProperty] = transform;\n    };\n\n    Draggable.prototype.move = function(point, time, isFix, isSilent){\n        var that = this;\n        time = time || 0;\n        point = point.clone();\n        if(isFix){\n            this.fixPosition = point;\n        }\n\n        this.determineDirection(point);\n\n        this.position = point;\n\n        transitionProperty && (that.element.style[transitionProperty] = time + \"ms\");\n        that._setTranslate(point.sub(that.offset));\n        isSilent || that.onMove.fire();\n    };\n\n    Draggable.prototype.refreshPosition = function(){\n        this.setPosition(this.getPosition());\n    };\n\n    Draggable.prototype.setPosition = function(point){\n        point = point.clone();\n        this.position = point;\n\n        transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n        this._setTranslate(point.sub(this.offset));\n    };\n\n    Draggable.prototype.setZeroTransition = function(){\n        transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n    };\n\n    Draggable.prototype.determineDirection = function(point){\n        this.leftDirection = (this.position.x < point.x);\n        this.rightDirection = (this.position.x > point.x);\n        this.upDirection = (this.position.y > point.y);\n        this.downDirection = (this.position.y < point.y);\n    };\n\n    Draggable.prototype.delayedDragStart = function(delayedEvent){\n        var isTouchEvent = (isTouch && (delayedEvent instanceof TouchEvent)),\n            startTouchPoint = new Point(\n                isTouchEvent ? delayedEvent.changedTouches[0].pageX : delayedEvent.clientX,\n                isTouchEvent ? delayedEvent.changedTouches[0].pageY : delayedEvent.clientY\n            ),\n            that = this;\n\n        if(delayedEvent.shiftKey) return;\n\n        function checkMovement(event){\n            var isTouchEvent = (isTouch && (event instanceof TouchEvent)),\n                touchPoint = new Point(\n                    isTouchEvent ? event.changedTouches[0].pageX : event.clientX,\n                    isTouchEvent ? event.changedTouches[0].pageY : event.clientY\n                );\n\n            if(Math.abs(touchPoint.x-startTouchPoint.x) > 5\n                || Math.abs(touchPoint.y-startTouchPoint.y) > 5) {\n\n                document.removeEventListener(touchEvents.move, checkMovement);\n                document.removeEventListener(mouseEvents.move, checkMovement);\n\n                BlockSelection.startDragSelection(that, delayedEvent);\n                that.dragStart(delayedEvent);\n            }\n        }\n\n        function removeCheckMovement(event){\n            document.removeEventListener(touchEvents.move, checkMovement);\n            document.removeEventListener(mouseEvents.move, checkMovement);\n\n            document.removeEventListener(touchEvents.end, removeCheckMovement);\n            document.removeEventListener(mouseEvents.end, removeCheckMovement);\n        }\n\n        document.addEventListener(touchEvents.move, checkMovement);\n        document.addEventListener(mouseEvents.move, checkMovement);\n\n        document.addEventListener(touchEvents.end, removeCheckMovement);\n        document.addEventListener(mouseEvents.end, removeCheckMovement);\n    };\n\n    Draggable.prototype.dragStart = function(event){\n        this.currentEvent = event;\n        if(!this._enable || ( this.options.startFilter && !this.options.startFilter(event))){\n            return;\n        }\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        this._startTouchPoint = new Point(isTouchEvent ? event.changedTouches[0].pageX : event.clientX, isTouchEvent ? event.changedTouches[0].pageY : event.clientY);\n\n        this._startPosition = this.getPosition();\n        if(isTouchEvent){\n            this._touchId = event.changedTouches[0].identifier;\n        }\n        event.stopPropagation();\n        if(!(event.target instanceof HTMLInputElement\n            || event.target instanceof HTMLInputElement)){\n            event.preventDefault();\n        }else{\n            event.target.focus();\n        }\n\n        document.addEventListener(touchEvents.move, this._dragMove);\n        document.addEventListener(mouseEvents.move, this._dragMove);\n\n        document.addEventListener(touchEvents.end, this._dragEnd);\n        document.addEventListener(mouseEvents.end, this._dragEnd);\n\n        this.isDragee = true;\n\n        this.onStart.fire(event);\n        this.element.addClass(\"active\");\n        this.onMove.fire(event);\n    };\n\n    Draggable.prototype.dragMove = function(event){\n        this.currentEvent = event;\n\n        var touch, touchPoint, point;\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        if(isTouchEvent){\n            if(!(touch = Dragee.util.getTouchByID(event, this._touchId))){\n                return;\n            }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        touchPoint = new Point(isTouchEvent ? touch.pageX : event.clientX, isTouchEvent ? touch.pageY : event.clientY);\n        point = this._startPosition.add(touchPoint.sub(this._startTouchPoint));\n        point = this.bound(point, this.getSize());\n        this.touchPoint = touchPoint;\n        this.move(point, 0);\n    };\n\n    Draggable.prototype.dragEnd = function(event){\n        var touch;\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        if(isTouchEvent){\n            if(!(touch = Dragee.util.getTouchByID(event, this._touchId))){\n                return;\n            }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        this.onEnd.fire(event);\n\n        document.removeEventListener(touchEvents.move, this._dragMove);\n        document.removeEventListener(mouseEvents.move, this._dragMove);\n\n        document.removeEventListener(touchEvents.end, this._dragEnd);\n        document.removeEventListener(mouseEvents.end, this._dragEnd);\n\n        this.isDragee = false;\n        this.element.removeClass(\"active\");\n    };\n\n    Draggable.prototype.getRectangle = function(){\n        return new Rectangle(this.position, this.getSize());\n    };\n\n    Draggable.prototype.refresh = function(){\n        this.getSize(true);\n        this.bound.refresh && this.bound.refresh();\n    }\n\n    Draggable.prototype.destroy = function(){\n        this.element.removeEventListener(touchEvents.start, this._dragStart);\n        this.element.removeEventListener(mouseEvents.start, this._dragStart);\n        this.element.removeEventListener(touchEvents.move, this._dragMove);\n        this.element.removeEventListener(mouseEvents.move, this._dragMove);\n        this.element.removeEventListener(touchEvents.end, this._dragEnd);\n        this.element.removeEventListener(mouseEvents.end, this._dragEnd);\n\n        this.onEnd.reset();\n        this.onMove.reset();\n    };\n\n    Draggable.prototype.__defineGetter__(\"enable\", function(){\n        return this._enable;\n    });\n\n    Draggable.prototype.__defineSetter__(\"enable\", function(enable) {\n        if(enable) {\n            this.element.removeClass(\"disable\");\n        } else {\n            this.element.addClass(\"disable\");\n        }\n\n        return this._enable = enable;\n    });\n\n    export {Draggable, draggables, events};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/draggable.js\n **/","    'use strict';\n\n    var util = {\n        getDefaultParent: function (element){\n            var parent = element.parentNode;\n            while(parent.parentNode && window.getComputedStyle(parent)[\"position\"] === \"static\"){\n                parent = parent.parentNode;\n            }\n            return parent;\n        },\n        bind: function(func, context){\n            return function(){\n                return func.apply(context, [].splice.call(arguments, 0));\n            };\n        },\n        getTouchByID: function(element, touchId){\n            var i;\n            for(i = 0; i < element.changedTouches.length; i++){\n                if(element.changedTouches[i].identifier === touchId){\n                    return element.changedTouches[i];\n                }\n            }\n            return false;\n        },\n        getSumValueOfStyleRule: function(element, rules){\n            return rules.reduce(function(sum, rule){\n                return sum + parseInt(window.getComputedStyle(element)[rule]||0);\n            }, 0);\n        },\n        appendFirstChild: function(element, node){\n            element.firstChild ? element.insertBefore(node, element.firstChild) : element.appendChild(node);\n        },\n        range: function(start, stop, step){\n            var result = [];\n            if(typeof stop === 'undefined'){\n                stop = start;\n                start = 0;\n            }\n            if(typeof step === 'undefined'){\n                step = 1;\n            }\n            if((step > 0 && start >= stop) || (step < 0 && start <= stop)){\n                return [];\n            }\n            for(var i = start; step > 0 ? i < stop : i > stop; i += step){\n                result.push(i);\n            }\n            return result;\n        },\n        setStyle: function(element, style){\n            style = style || {};\n            var cssText = \"\", key;\n            for(key in style){\n                if(style.hasOwnProperty(key)){\n                    cssText += key + \": \" + style[key] + \"; \";\n                }\n            }\n\n            element.style.cssText = cssText;\n        },\n        triggerFactory: function(opts){\n            var funcs = [], i, options = {\n                isReverse: false,\n                isStopOnTrue: false,\n                context: window\n            };\n            for(i in opts){\n                if(opts.hasOwnProperty(i)){\n                    options[i] = opts[i];\n                }\n            };\n            return {\n                fire: function(){\n                    var args = [].slice.call(arguments),\n                        i, retValue, fs = options.isReverse ? funcs.slice().reverse() : funcs;\n\n                    for(i = 0; i < fs.length; i++){\n                        retValue = fs[i].apply(options.context, args);\n                        if(options.isStopOnTrue && retValue){\n                            return true;\n                        }\n                    }\n                    return !options.isStopOnTrue;\n                },\n                add: function(f){\n                    funcs.push(f);\n                },\n                unshift: function(f){\n                    funcs.unshift(f);\n                },\n                remove: function(f){\n                    var index = funcs.indexOf(f);\n                    if(index !== -1){\n                        funcs.splice(index, 1)\n                    }\n                },\n                reset:function(){\n                    funcs = [];\n                }\n            }\n        },\n        randomColor:function(){\n            var rnd = function(){\n                    return Math.round(Math.random()*255);\n                },\n                toHexString = function(digit){\n                    var str = digit.toString(16);\n                    while(str.length < 2){\n                        str = \"0\" + str;\n                    }\n                    return str;\n                },\n                red = rnd(),\n                green = rnd(),\n                blue = rnd();\n\n            return \"#\" + toHexString(red) + toHexString(green) + toHexString(blue);\n        },\n        createCanvas: function(area, rectagle){\n            var canvas;\n            if(window.getComputedStyle(area).position === \"static\"){\n                area.style.position = \"relative\";\n            }\n            canvas = document.createElement(\"canvas\");\n            canvas.setAttribute(\"width\", rectagle.size.x + \"px\");\n            canvas.setAttribute(\"height\", rectagle.size.y + \"px\");\n            util.setStyle(canvas, {\n                position: \"absolute\",\n                left: rectagle.position.y + \"px\",\n                top: rectagle.position.y + \"px\",\n                width: rectagle.size.x + \"px\",\n                height: rectagle.size.y + \"px\"\n            });\n            util.appendFirstChild(area, canvas);\n            return canvas;\n        }\n    };\n\n    export default util;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","'use strict';\nimport {mathPoint} from './point'\n\n\n\tvar Dragee = window.Dragee || {},\n\t\tboundType = {\n\t\t\telement: -1,\n\t\t\trectangle: 0,\n\t\t\tlineX: 1,\n\t\t\tlineY: 2,\n\t\t\tline: 3,\n\t\t\tunificationOfRectangle: 4,\n\t\t\tcircle:5,\n\t\t\tarc:6\n\t\t};\n\tfunction boundFactory(type){\n\t\tswitch(type){\n\t\t\tcase boundType.element:\n\t\t\t\treturn function(element, parent){\n\t\t\t\t\tvar bound,\n\t\t\t\t\t\tretFunc = function(){\n\t\t\t\t\t\t\treturn bound.apply(this, arguments);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tretFunc.refresh = function(){\n\t\t\t\t\t\tbound = boundFactory(boundType.rectangle)(\n\t\t\t\t\t\t\tmathPoint.createRectangleFromElement(element, parent)\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\tretFunc.refresh();\n\t\t\t\t\treturn retFunc;\n\t\t\t\t};\n\t\t\tcase boundType.rectangle:\n\t\t\t\treturn function (rectangle){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone(),\n\t\t\t\t\t\t\trectP2 = rectangle.getP3();\n\n\t\t\t\t\t\tif(rectangle.position.x > calcPoint.x){\n\t\t\t\t\t\t\t(calcPoint.x = rectangle.position.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectangle.position.y > calcPoint.y){\n\t\t\t\t\t\t\tcalcPoint.y = rectangle.position.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectP2.x < calcPoint.x + size.x){\n\t\t\t\t\t\t\tcalcPoint.x = rectP2.x - size.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectP2.y < calcPoint.y + size.y){\n\t\t\t\t\t\t\tcalcPoint.y = rectP2.y - size.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.lineX:\n\t\t\t\treturn function (x, startY, endY){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone();\n\t\t\t\t\t\tcalcPoint.x = x;\n\t\t\t\t\t\tif(startY > calcPoint.y){\n\t\t\t\t\t\t\tcalcPoint.y = startY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(endY < calcPoint.y + size.y){\n\t\t\t\t\t\t\tcalcPoint.y = endY - size.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.lineY:\n\t\t\t\treturn function (y, startX, endX){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone();\n\t\t\t\t\t\tcalcPoint.y = y;\n\t\t\t\t\t\tif(startX > calcPoint.x){\n\t\t\t\t\t\t\tcalcPoint.x = startX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(endX < calcPoint.x + size.x){\n\t\t\t\t\t\t\tcalcPoint.x = endX - size.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.line:\n\t\t\t\treturn function (start, end){\n\t\t\t\t\tvar alpha = Math.atan2(end.y - start.y, end.x - start.x),\n\t\t\t\t\t\tbeta = alpha + Math.PI / 2,\n\t\t\t\t\t\tsomeK = 10,\n\t\t\t\t\t\tcosBeta = Math.cos(beta),\n\t\t\t\t\t\tsinBeta = Math.sin(beta);\n\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar point2 = new Point(point.x + someK * cosBeta, point.y + someK * sinBeta),\n\t\t\t\t\t\t\tpointCrossing = mathPoint.directCrossing(start, end, point, point2),\n\t\t\t\t\t\t\tnewEnd = mathPoint.getPointInLineByLenght(end, start, size.x);\n\n\t\t\t\t\t\tpointCrossing = mathPoint.boundOnLine(start, newEnd, pointCrossing);\n\t\t\t\t\t\treturn pointCrossing;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.circle:\n\t\t\t\treturn function(center, radius){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar boundedPoint = mathPoint.getPointInLineByLenght(center,point,radius);\n\t\t\t\t\t\treturn boundedPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.arc:\n\t\t\t\treturn function(center, radius, startAgle, endAngle){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar boundStartAngle = typeof startAgle === \"function\" ? startAgle() : startAgle,\n\t\t\t\t\t\t\tboundEndtAngle = typeof startAgle === \"function\" ? endAngle() : endAngle,\n\t\t\t\t\t\t\tangle = mathPoint.getAngle(center, point);\n\n\t\t\t\t\t\tangle = mathPoint.normalizeAngle(angle);\n\t\t\t\t\t\tangle = mathPoint.boundAngle(boundStartAngle, boundEndtAngle, angle);\n\t\t\t\t\t\treturn mathPoint.getPointFromRadialSystem(angle, radius, center);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t}\n\n  export {boundType, boundFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bound.js\n **/","'use strict';\n    import util from './util'\n    var mathPoint;\n    var Dragee = { util };//todo remove after refactore\n\n\n\n    /*********************/\n    function Point(x, y){\n        this.x = x;\n        this.y = y;\n    }\n\n    Point.prototype.toString = function(){\n        return '{x=' + this.x + ',y=' + this.y + '}';\n    };\n    Point.prototype.add = function(p){\n        return new Point(this.x + p.x, this.y + p.y);\n    };\n    Point.prototype.sub = function(p){\n        return new Point(this.x - p.x, this.y - p.y);\n    };\n    Point.prototype.mult = function(k){\n        return new Point(this.x * k, this.y * k);\n    };\n    Point.prototype.negative = function(){\n        return new Point(-this.x, -this.y);\n    };\n    Point.prototype.compare = function(p){\n        return (this.x === p.x && this.y === p.y);\n    };\n    Point.prototype.clone = function(){\n        return new Point(this.x, this.y);\n    };\n\n    /****************/\n    function Rectangle(position, size){\n        this.position = position;\n        this.size = size;\n    }\n\n    Rectangle.prototype.getP1 = function(){\n        return this.position;\n    };\n    Rectangle.prototype.getP2 = function(){\n        return new Point(this.position.x + this.size.x, this.position.y);\n    };\n    Rectangle.prototype.getP3 = function(){\n        return this.position.add(this.size);\n    };\n    Rectangle.prototype.getP4 = function(){\n        return new Point(this.position.x, this.position.y + this.size.y);\n    };\n    Rectangle.prototype.getCenter = function(){\n        return this.position.add(this.size.mult(0.5));\n    };\n    Rectangle.prototype.or = function(rect){\n        var position = new Point(Math.min(this.position.x, rect.position.x), Math.min(this.position.y, rect.position.y)), size = (new Point(Math.max(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.max(this.position.y + this.size.y, rect.position.y + rect.size.y))).sub(position);\n        return new Rectangle(position, size);\n    };\n    Rectangle.prototype.and = function(rect){\n        var position = new Point(Math.max(this.position.x, rect.position.x), Math.max(this.position.y, rect.position.y)), size = (new Point(Math.min(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.min(this.position.y + this.size.y, rect.position.y + rect.size.y))).sub(position);\n        if(size.x <= 0 || size.y <= 0){\n            return null;\n        }\n        return new Rectangle(position, size);\n    };\n\tRectangle.prototype.includePoint = function(p){\n\t\treturn !(this.position.x > p.x || this.position.x + this.size.x < p.x || this.position.y > p.y || this.position.y + this.size.y < p.y);\n\t};\n\tRectangle.prototype.includeRectangle = function(rectangle){\n\t\treturn this.includePoint(rectangle.position) && this.includePoint(rectangle.getP3());\n\t};\n    Rectangle.prototype.moveToBound = function(rect, axis){\n        var selAxis, crossRectangle, thisCenter, rectCenter, sign, offset;\n        if(axis){\n            selAxis = axis;\n        }else{\n            crossRectangle = this.and(rect);\n            if(!crossRectangle){\n                return rect;\n            }\n            selAxis = crossRectangle.size.x > crossRectangle.size.y ? \"y\" : \"x\";\n        }\n        thisCenter = this.getCenter();\n        rectCenter = rect.getCenter();\n        sign = thisCenter[selAxis] > rectCenter[selAxis] ? -1 : 1;\n        offset = sign > 0 ? this.position[selAxis] + this.size[selAxis] - rect.position[selAxis] : this.position[selAxis] - (rect.position[selAxis] + rect.size[selAxis]);\n        rect.position[selAxis] = rect.position[selAxis] + offset;\n        return rect;\n    };\n    Rectangle.prototype.getSquare = function(){\n        return this.size.x * this.size.y;\n    };\n    Rectangle.prototype.styleApply = function(el){\n        el = el || document.querySelector(\"ind\");\n        el.style.left = this.position.x + \"px\";\n        el.style.top = this.position.y + \"px\";\n        el.style.width = this.size.x + \"px\";\n        el.style.height = this.size.y + \"px\";\n    };\n    Rectangle.prototype.growth = function(size){\n        this.size = this.size.add(size);\n        this.position = this.position.add(size.mult(-0.5));\n    };\n    Rectangle.prototype.getMinSide = function(){\n        return Math.min(this.size.x, this.size.y);\n    };\n\n    /*****************/\n    mathPoint = {\n        getLength: function(options){\n            if(!options || (options.x && options.y && !options.isTransformationSpace)){\n                return function(p1, p2){\n                    var dx = p1.x - p2.x, dy = p1.y - p2.y;\n                    return Math.sqrt(dx * dx + dy * dy);\n                };\n            }else{\n                if(options.x && options.y && options.isTransformationSpace){\n                    return function(p1, p2){\n                        return Math.sqrt(Math.pow(options.x * Math.abs(p1.x - p2.x), 2) + Math.pow(options.y * Math.abs(p1.y - p2.y), 2));\n                    };\n                }else{\n                    if(options.x){\n                        return function(p1, p2){\n                            return Math.abs(p1.x - p2.x);\n                        };\n                    }else{\n                        if(options.y){\n                            return function(p1, p2){\n                                return Math.abs(p1.y - p2.y);\n                            };\n                        }\n                    }\n                }\n            }\n        },\n        indexOfNearPoint: function(arr, val, radius, getLength){\n            var size, index = 0, i, temp;\n            getLength = getLength || this.getLength();\n            if(arr.length === 0){\n                return -1;\n            }\n            size = getLength(arr[0], val);\n            for(i = 0; i < arr.length; i++){\n                temp = getLength(arr[i], val);\n                if(temp < size){\n                    size = temp;\n                    index = i;\n                }\n            }\n            if(radius >= 0 && size > radius){\n                return -1;\n            }\n            return index;\n        },\n        bound: function(min, max, val){\n            return Math.max(min, Math.min(max, val));\n        },\n        boundPoint: function(min, max, val){\n            var x = Math.max(min.x, Math.min(max.x, val.x)), y = Math.max(min.y, Math.min(max.y, val.y));\n            return new Point(x, y);\n        },\n        //Return crossing point of two lines\n        directCrossing: function(L1P1, L1P2, L2P1, L2P2){\n            var temp, k1, k2, b1, b2, x, y;\n            if(L2P1.x === L2P2.x){\n                temp = L2P1;\n                L2P1 = L1P1;\n                L1P1 = temp;\n                temp = L2P2;\n                L2P2 = L1P2;\n                L1P2 = temp;\n            }\n            if(L1P1.x === L1P2.x){\n                k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n                b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n                x = L1P1.x;\n                y = x * k2 + b2;\n                return new Point(x, y);\n            }else{\n                k1 = (L1P2.y - L1P1.y) / (L1P2.x - L1P1.x);\n                b1 = (L1P2.x * L1P1.y - L1P1.x * L1P2.y) / (L1P2.x - L1P1.x);\n                k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n                b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n                x = (b1 - b2) / (k2 - k1);\n                y = x * k1 + b1;\n                return new Point(x, y);\n            }\n        },\n        //Get point and check that point belong to segment of the line\n        // if not - return the nearest point of segment\n        boundOnSegment: function(LP1, LP2, P){\n            var x, y;\n            x = mathPoint.bound(Math.min(LP1.x, LP2.x), Math.max(LP1.x, LP2.x), P.x);\n            if(x != P.x){\n                y = (x === LP1.x) ? LP1.y : LP2.y;\n                P = new Point(x, y);\n            }\n            y = mathPoint.bound(Math.min(LP1.y, LP2.y), Math.max(LP1.y, LP2.y), P.y);\n            if(y != P.y){\n                x = (y === LP1.y) ? LP1.x : LP2.x;\n                P = new Point(x, y);\n            }\n            return P;\n        },\n        boundOnLine: function(A, B, P){\n            var AP = new Point(P.x - A.x, P.y - A.y),\n                AB = new Point(B.x - A.x, B.y - A.y),\n                ab2 = AB.x * AB.x + AB.y * AB.y,\n                ap_ab = AP.x * AB.x + AP.y * AB.y,\n                t = ap_ab/ab2;\n            return new Point(A.x + AB.x * t, A.y + AB.y * t);\n        },\n        getPointInLine: function(LP1, LP2, percent){\n            var dx = LP2.x - LP1.x, dy = LP2.y - LP1.y;\n            return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n        },\n        getPointInLineByLenght: function(LP1, LP2, lenght){\n            var dx = LP2.x - LP1.x, dy = LP2.y - LP1.y, percent = lenght / this.getLength()(LP1, LP2);\n            return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n        },\n        createRectangleFromElement: function(el, parent, isContentBoxSize, isConsiderTranslate){\n            var size = this.getSizeOfElement(el, isContentBoxSize)\n            return new Rectangle(this.getOffset(el, parent || el.parentNode, isConsiderTranslate), size);\n        },\n        getSizeOfElement: function(el, isContentBoxSize){\n            var width = parseInt(window.getComputedStyle(el)['width']), height = parseInt(window.getComputedStyle(el)['height']);\n            if(!isContentBoxSize){\n                width += Dragee.util.getSumValueOfStyleRule(el, [\"padding-left\", \"padding-right\", \"border-left-width\", \"border-right-width\"]);\n                height += Dragee.util.getSumValueOfStyleRule(el, [\"padding-top\", \"padding-bottom\", \"border-top-width\", \"border-bottom-width\"]);\n            }\n            return new Point(width, height);\n        },\n        getOffset: function(el, parent, isConsiderTranslate){\n            var elRect = el.getBoundingClientRect(), parentRect = parent.getBoundingClientRect();\n            return new Point(elRect.left - parentRect.left, elRect.top - parentRect.top);\n        },\n        getPointFromRadialSystem: function(angle, length, center){\n            center = center || new Point(0, 0);\n            return center.add(new Point(length * Math.cos(angle), length * Math.sin(angle)));\n        },\n        addPointToBoundPoints: function(boundpoints, point, isRight){\n            var i, result = boundpoints.filter(function(bPoint){\n                return  bPoint.y > point.y || (isRight ? bPoint.x < point.x : bPoint.x > point.x);\n            });\n            for(i = 0; i < result.length; i++){\n                if(point.y < result[i].y){\n                    result.splice(i, 0, point);\n                    return result;\n                }\n            }\n            result.push(point);\n            return result;\n        },\n        getAngle: function(p1, p2){\n            var diff = p2.sub(p1);\n            return this.normalizeAngle(Math.atan2(diff.y, diff.x));\n        },\n        toRadian: function(angle){\n            return ((angle % 360) * Math.PI / 180);\n        },\n        toDegree: function(angle){\n            return (angle * 180 / Math.PI ) % 360;\n        },\n        boundAngle: function(min, max, val){\n            var dmin,dmax;\n            if(min < max && val > min && val < max){\n                return val;\n            }else if(max < min && ( val < max || val > min )){\n                return val;\n            }else{\n                dmin = this.getAngleDiff(min,val);\n                dmax = this.getAngleDiff(max,val);\n                if(dmin < dmax){\n                    return min;\n                }else{\n                    return max;\n                }\n            }\n        },\n        getNearestAngle:function(arr,angle){\n            var i,temp,diff = Math.PI * 2 ,value;\n            for(i = 0; i < arr.length;i++){\n                temp = mathPoint.getAngleDiff(arr[i],angle);\n                if(diff < temp){\n                    diff = temp;\n                    value = arr[i];\n                }\n            }\n            return value;\n        },\n        getAngleDiff:function(alpha,beta){\n            var minAngle = Math.min(alpha,beta),\n                maxAngle =  Math.max(alpha,beta);\n            return Math.min(maxAngle - minAngle,minAngle + Math.PI*2 - maxAngle);\n        },\n        normalizeAngle: function( val){\n            while(val < 0 ){\n                val+= 2 * Math.PI;\n            }\n            while(val > 2 * Math.PI ){\n                val-= 2 * Math.PI;\n            }\n            return val;\n        },\n        distance: function(P1, P2){\n          var xs = 0;\n          var ys = 0;\n\n          xs = P2.x - P1.x;\n          xs = xs * xs;\n\n          ys = P2.y - P1.y;\n          ys = ys * ys;\n\n          return Math.sqrt( xs + ys );\n        }\n    };\n\n    export {Point, Rectangle, mathPoint};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/point.js\n **/","'use strict';\n\n\tvar lists = [];\n\n\timport util from './util'\n\timport {mathPoint, Point} from './point'\n\timport {boundType, boundFactory} from './bound'\n\timport {Draggable, draggables, events} from './draggable'\n\n\tvar Dragee = { util, boundType, boundFactory, Draggable, events };//todo remove after refactore\n\n\n\tfunction List(draggables, options){\n\t\tvar i;\n\t\tthis.options = {\n\t\t\ttimeEnd: 200,\n\t\t\ttimeExcange: 400,\n\t\t\tradius: 30,\n\t\t\tgetLength: mathPoint.getLength(),\n\t\t\tisDisplacement: false\n\t\t};\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.draggables = draggables;\n\t\tlists.push(this);\n\t\tthis.onChange = Dragee.util.triggerFactory({context: this});\n\t\tif(options && options.onChange){\n\t\t\tthis.onChange.add(options.onChange);\n\t\t}\n\t\tthis.init();\n\t}\n\n\tList.prototype.init = function(){\n\t\tthis._enable = true;\n\t\tthis.draggables.forEach(this.initDraggable, this);\n\t};\n\n\tList.prototype.initDraggable = function(draggable){\n\t\tvar moveHandler, that = this;\n\t\tdraggable.enable = this._enable;\n\t\tif(this.options.isDisplacement){\n\t\t\tmoveHandler = function(){\n\t\t\t\tif(this.isDragee){\n\t\t\t\t\tthat.onStart(this);\n\t\t\t\t\tdraggable.onMove.remove(moveHandler);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\tthat.onEndDisplaycement(this);\n\t\t\t\tdraggable.onMove.add(moveHandler);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tdraggable.onMove.add(moveHandler);\n\t\t}else{\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\tthat.onEnd(this);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tList.prototype.moveOrSave = function(draggable, position, time){\n\t\tif(draggable.isDragee){\n\t\t\tdraggable.fixPosition = position;\n\t\t}else{\n\t\t\tdraggable.move(position, time, true);\n\t\t}\n\t};\n\n\tList.prototype.onEnd = function(draggable){\n\t\tvar fixPositions = this.getCurrentFixPosition(), currentIndex, excangeIndex;\n\t\tcurrentIndex = this.draggables.indexOf(draggable);\n\t\texcangeIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif(excangeIndex === -1 || excangeIndex === currentIndex){\n\t\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t\t}else{\n\t\t\tthis.moveOrSave(this.draggables[excangeIndex], fixPositions[currentIndex], this.options.timeExcange);\n\t\t\tthis.draggables[currentIndex].move(fixPositions[excangeIndex], this.options.timeEnd, true);\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\treturn true;\n\t};\n\n\tList.prototype.onEndDisplaycement = function(draggable){\n\t\tvar currentIndex, i, targetIndex,\n\t\t\tsortedDraggables = this.getSortedDraggables(),\n\t\t\tfixPositions = sortedDraggables.map(function(draggable){\n\t\t\t\treturn draggable.fixPosition;\n\t\t\t});\n\t\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\t\ttargetIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif(targetIndex !==-1){\n\t\t\tif(targetIndex < currentIndex){\n\t\t\t\tfor(i=targetIndex; i<currentIndex; i++){\n\t\t\t\t\tthis.moveOrSave(sortedDraggables[i], fixPositions[i+1], this.options.timeExcange);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor(i=currentIndex; i<targetIndex; i++){\n\t\t\t\t\tthis.moveOrSave(sortedDraggables[i+1], fixPositions[i], this.options.timeExcange);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdraggable.move(fixPositions[targetIndex], this.options.timeEnd, true);\n\t\t} else {\n\t\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t\t}\n\t};\n\n\tList.prototype.onStart = function(draggable){\n\t\tvar currentIndex,i,\n\t\t\tsortedDraggables = this.getSortedDraggables(),\n\t\t\tfixPositions = sortedDraggables.map(function(draggable){\n\t\t\t\treturn draggable.fixPosition;\n\t\t\t});\n\n\t\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\t\tfor(i = currentIndex + 1; i < sortedDraggables.length; i++){\n\t\t\tthis.moveOrSave(sortedDraggables[i],fixPositions[i-1],this.options.timeExcange);\n\t\t}\n\t\tsortedDraggables[currentIndex].fixPosition = fixPositions[i-1];\n\t};\n\n\n\n\tList.prototype.getCurrentFixPosition = function(){\n\t\treturn this.draggables.map(function(draggable){\n\t\t\treturn draggable.fixPosition.clone();\n\t\t});\n\t};\n\n\tList.prototype.getSortedDraggables = function(){\n\t\tvar sortedDraggables,\n\t\t\tinitPositions = this.draggables.map(function(draggable){\n\t\t\t\treturn draggable.initPosition;\n\t\t\t});\n\t\tsortedDraggables = initPositions.map(function(position){\n\t\t\treturn this.draggables.filter(function(draggable){\n\t\t\t\treturn draggable.fixPosition.compare(position);\n\t\t\t},this)[0];\n\t\t},this);\n\t\treturn sortedDraggables;\n\t};\n\n\tList.prototype.reset = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.move(draggable.initPosition, 0, true, false);\n\t\t});\n\t};\n\n\tList.prototype.refresh = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.refresh();\n\t\t});\n\t};\n\n\tList.prototype.add = function(draggables){\n\t\tvar that = this;\n\t\tif(!(draggables instanceof Array)){\n\t\t\tdraggables = [draggables];\n\t\t}\n\t\tdraggables.forEach(this.initDraggable, this);\n\t\tthis.draggables = this.draggables.concat(draggables);\n\t};\n\n\tList.prototype.remove = function(draggables){\n\t\tvar j, initPositions = this.draggables.map(function(draggable){\n\t\t\t\treturn draggable.initPosition;\n\t\t\t}),\n\t\t\tlist = [],\n\t\t\tsortedDraggables = this.getSortedDraggables();\n\t\tif(!(draggables instanceof Array)){\n\t\t\tdraggables = [draggables];\n\n\t\t}\n\t\tdraggables.forEach(function(draggable){\n\t\t\tdraggable.onEnd.reset();\n\t\t\tdraggable.onMove.reset();//todo remove reset in future\n\t\t\tthis.draggables.removeItem(draggable);\n\t\t\tDragee.util.remove(this.draggables, draggable);\n\t\t}, this);\n\t\tj = 0;\n\t\tsortedDraggables.forEach(function(draggable, i){\n\t\t\tif(this.draggables.indexOf(draggable) !== -1){\n\t\t\t\tif(draggable.fixPosition !== initPositions[j]){\n\t\t\t\t\tdraggable.move(initPositions[j], this.options.timeExcange, true);\n\t\t\t\t}\n\t\t\t\tdraggable.initPosition = initPositions[j];\n\t\t\t\tj++;\n\t\t\t\tlist.push(draggable);\n\t\t\t}\n\t\t}, this);\n\t\tthis.draggables = list;\n\t};\n\n\tList.prototype.clear = function(){\n\t\tthis.remove(this.draggables.slice());\n\t};\n\n\tList.prototype.destroy = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.destroy();\n\t\t});\n\t};\n\n\tList.prototype.__defineGetter__(\"positions\", function(){\n\t\treturn this.getCurrentFixPosition();\n\t});\n\n\tList.prototype.__defineSetter__(\"positions\", function(positions){\n\t\tvar message = \"wrong array length\";\n\t\tif(positions.length === this.draggables.length){\n\t\t\tpositions.forEach(function(point, i){\n\t\t\t\tthis.draggables[i].move(point, 0, true, true);\n\t\t\t}, this);\n\t\t}else{\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\n\tList.prototype.__defineGetter__(\"enable\", function(){\n\t\treturn this._enable;\n\t});\n\n\tList.prototype.__defineSetter__(\"enable\", function(value){\n\t\tthis._enable = value;\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.enable = value;\n\t\t});\n\t});\n\n\n\tfunction listFactory(parentElement, elements, options){\n\t\tvar draggables, draggableOptions, listOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\tlistOptions = options.list || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || parentElement;\n\t\telements = Array.prototype.slice.call(elements);\n\n\t\tdraggables = elements.map(function(element){\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\n\t\treturn new List(draggables, listOptions);\n\t}\n\n  export {lists, List, listFactory};\n\n\t// Dragee.lists = lists;\n\t// Dragee.List = List;\n\t// Dragee.listFactory = listFactory;\n\t// window.Dragee = Dragee;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/list.js\n **/"],"sourceRoot":""}