{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6e7eb4d7b3e3ad192690","webpack:///./src/index.js","webpack:///./~/desandro-get-style-property/get-style-property.js","webpack:///./src/expandnative.js","webpack:///./src/point.js","webpack:///./src/util.js","webpack:///./src/draggable.js","webpack:///./src/event.js","webpack:///./src/bound.js","webpack:///./src/list.js","webpack:///./src/target.js","webpack:///./src/positioning.js","webpack:///./src/targetManager.js","webpack:///./src/spider.js","webpack:///./src/arcslider.js","webpack:///./src/chart.js","webpack:///./src/listswitcher.js"],"names":["global","Point","Draggable","List","listFactory","targets","Target","targetManagers","TargetManager","targetManagerFactory","positionType","sortingFactory","positionFactory","boundType","boundFactory","spiders","Spider","arcSliders","ArcSlider","charts","Chart","listSwitcherFactory","ListSwitcher","clone","o","c","i","Array","prototype","forEach","fun","TypeError","t","Object","len","length","thisp","arguments","call","filter","res","val","push","every","map","some","removeItem","splice","Element","hasClass","re","RegExp","test","className","addClass","replace","removeClass","HTMLElement","appbeginChild","node","firstChild","insertBefore","appendChild","exchange","refNode","tempParentNode","parentNode","tempBeforeNode","nextElementSibling","fullOffset","element","axis","parent_id","tor","id","offsetLeft","offsetTop","extend","Child","Parent","F","constructor","superclass","augment","receivingClass","givingClass","methodName","NodeList","Math","getNearIndex","arr","delta","abs","index","temp","getNearIndexWithCaptureRadius","radius","bound","min","max","boundPoint","x","y","getLength","p1","p2","dx","dy","sqrt","toRadian","angle","PI","String","substrend","substr","XmlHttpRequest","window","XMLHttpRequest","xmlhttp","ActiveXObject","alert","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","__defineGetter__","defineProperty","get","enumerable","configurable","value","name","func","set","defPropException","mathPoint","Dragee","util","toString","add","p","sub","mult","k","negative","compare","Rectangle","position","size","getP1","getP2","getP3","getP4","getCenter","or","rect","and","includePoint","includeRectangle","rectangle","moveToBound","selAxis","crossRectangle","thisCenter","rectCenter","sign","offset","getSquare","styleApply","el","document","querySelector","style","left","top","width","height","growth","getMinSide","options","isTransformationSpace","pow","indexOfNearPoint","directCrossing","L1P1","L1P2","L2P1","L2P2","k1","k2","b1","b2","boundOnSegment","LP1","LP2","P","boundOnLine","A","B","AP","AB","ab2","ap_ab","getPointInLine","percent","getPointInLineByLenght","lenght","createRectangleFromElement","parent","isContentBoxSize","isConsiderTranslate","getSizeOfElement","getOffset","parseInt","getComputedStyle","getSumValueOfStyleRule","elRect","getBoundingClientRect","parentRect","getPointFromRadialSystem","center","cos","sin","addPointToBoundPoints","boundpoints","point","isRight","result","bPoint","getAngle","diff","normalizeAngle","atan2","toDegree","boundAngle","dmin","dmax","getAngleDiff","getNearestAngle","alpha","beta","minAngle","maxAngle","distance","P1","P2","xs","ys","getDefaultParent","bind","context","apply","getTouchByID","touchId","changedTouches","identifier","rules","reduce","sum","rule","appendFirstChild","range","start","stop","step","setStyle","cssText","key","hasOwnProperty","randomColor","rnd","round","random","toHexString","digit","str","red","green","blue","createCanvas","area","rectagle","canvas","createElement","setAttribute","Event","isTouch","mouseEvents","move","end","touchEvents","events","draggables","onCreateDraggable","draggable","message","existing","transformProperty","transitionProperty","that","displayListener","startFilter","onEnd","isReverse","isStopOnTrue","onMove","onStart","init","_enable","fixPosition","initPosition","_dragStart","dragStart","_delayedDragStart","delayedDragStart","_dragMove","dragMove","_dragEnd","dragEnd","delayedStart","addEventListener","refresh","reinit","getSize","recalulate","getPosition","_transformPosition","_setTranslate","transform","translateCss","ua","navigator","userAgent","msie","indexOf","time","isFix","isSilent","determineDirection","fire","refreshPosition","setPosition","setZeroTransition","leftDirection","rightDirection","upDirection","downDirection","delayedEvent","isTouchEvent","TouchEvent","startTouchPoint","pageX","clientX","pageY","clientY","shiftKey","checkMovement","event","touchPoint","removeEventListener","BlockSelection","startDragSelection","removeCheckMovement","currentEvent","_startTouchPoint","_startPosition","_touchId","stopPropagation","target","HTMLInputElement","preventDefault","focus","isDragee","touch","getRectangle","destroy","reset","__defineSetter__","enable","funcs","args","slice","retValue","fs","reverse","f","unshift","remove","lineX","lineY","line","unificationOfRectangle","circle","arc","type","retFunc","calcPoint","rectP2","startY","endY","startX","endX","someK","cosBeta","sinBeta","point2","pointCrossing","newEnd","boundedPoint","startAgle","endAngle","boundStartAngle","boundEndtAngle","lists","timeEnd","timeExcange","isDisplacement","onChange","initDraggable","moveHandler","onEndDisplaycement","moveOrSave","fixPositions","getCurrentFixPosition","currentIndex","excangeIndex","targetIndex","sortedDraggables","getSortedDraggables","initPositions","concat","j","list","clear","positions","parentElement","elements","draggableOptions","listOptions","sorting","floatLeft","positioning","removable","onAdd","beforeAdd","onRemove","catchDraggable","targetRectangle","draggableSquare","rectangles","indexesOfNew","innerDraggables","targetManager","newDraggablesIndex","addRemoveOnMove","pushInnerDraggable","removeHandler","notCrossing","floatRight","opts","rectangleList","indexesOfNews","boundRect","staticRectangleIndexes","indexes","indexOfStatic","staticRect","paddingTopLeft","paddingBottomRight","yGapBetweenDraggables","boundaryPoints","isValid","paddingTopNegRight","paddingBottomNegLeft","paddingTopRight","paddingBottomLeft","getRightTopPoint","getLeftBottomPoint","oldObjsList","newObjs","indexOfNews","objsList","obj","newList","listOldPosition","newObj","timeWaitForRefresh","addDraggable","shotTargets","sort","a","b","targetIndexes","draggableElements","targetElements","targetOptions","managerOptions","manager","areaRectangle","dAngle","startRadius","endRadius","lineWidth","strokeStyle","fillStyle","getContext","halfSize","draw","isInit","clearRect","beginPath","moveTo","lineTo","closePath","stroke","fill","startAngle","angles","shiftedCenter","change","updateAngle","setAngle","getArrayWithBoundIndexes","retIndexes","touchRadius","fillStyles","initAngles","onDraw","limitImg","limitImgOffset","isSelectable","getBoundAngle","initSelect","setActiveArc","e","canvasOffset","getArcOnPoint","activeArcIndex","updateAngles","isClossing","drawArc","enableIndexes","drawLimitImg","createClone","cloneObj","getFillStyle","color","img","translate","rotate","drawImage","setTransform","getAnglesDiff","baseAngle","diffAngle","getPercent","getArcBisectrixs","setAngles","stepOn","isOn","getCurrentFixPositionWithOff","moveDraggable","fixToOff","moveDraggableToOff","fixOffPosition"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;ACtCA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEAA,QAAOC,KAAP;;SAESC,S;SACPC,I;SAAMC,W;SACNC,O;SAASC,M;SACTC,c;SAAgBC,a;SAAeC,oB;SAC/BC,Y;SAAcC,c;SAAgBC,e;SAC9BC,S;SAAWC,Y;SACXC,O;SAASC,M;SACTC,U;SAAYC,S;SACZC,M;SAAQC,K;SACRC,mB;SAAqBC,Y;;;;;;;ACxBvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,EAAC;AACD;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA,EAAC;;;;;;;;;ACtDD,KAAIC,QAAQ,SAARA,KAAQ,CAAUC,CAAV,EAAa;AACrB,cAASC,CAAT,CAAWD,CAAX,EAAc;AACV,cAAK,IAAIE,CAAT,IAAcF,CAAd,EAAiB;AACb,kBAAKE,CAAL,IAAUF,EAAEE,CAAF,CAAV;AACH;AACJ;AACD,YAAO,IAAID,CAAJ,CAAMD,CAAN,CAAP;AACH,EAPD;;AAUA;;AAEA,KAAI,CAACG,MAAMC,SAAN,CAAgBC,OAArB,EAA6B;AACzBF,WAAMC,SAAN,CAAgBC,OAAhB,GAA0B,UAASC,GAAT,CAAa,YAAb,EAA0B;AAChD,aAAI,SAAS,KAAK,CAAd,IAAmB,SAAS,IAAhC,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIC,IAAIC,OAAO,IAAP,CAAR;AACA,aAAIC,MAAMF,EAAEG,MAAF,KAAa,CAAvB;AACA,aAAI,OAAOL,GAAP,KAAe,UAAnB,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIK,QAAQC,UAAU,CAAV,CAAZ;AACA,cAAK,IAAIX,IAAI,CAAb,EAAgBA,IAAIQ,GAApB,EAAyBR,GAAzB,EAA6B;AACzB,iBAAIA,KAAKM,CAAT,EACIF,IAAIQ,IAAJ,CAASF,KAAT,EAAgBJ,EAAEN,CAAF,CAAhB,EAAsBA,CAAtB,EAAyBM,CAAzB;AACP;AACJ,MAZD;AAaH;;AAED,KAAI,CAACL,MAAMC,SAAN,CAAgBW,MAArB,EAA4B;AACxBZ,WAAMC,SAAN,CAAgBW,MAAhB,GAAyB,UAAST,GAAT,CAAa,YAAb,EAA0B;AAC/C,aAAI,SAAS,KAAK,CAAd,IAAmB,SAAS,IAAhC,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIC,IAAIC,OAAO,IAAP,CAAR;AACA,aAAIC,MAAMF,EAAEG,MAAF,KAAa,CAAvB;AACA,aAAI,OAAOL,GAAP,KAAe,UAAnB,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIS,MAAM,EAAV;AACA,aAAIJ,QAAQC,UAAU,CAAV,CAAZ;AACA,cAAK,IAAIX,IAAI,CAAb,EAAgBA,IAAIQ,GAApB,EAAyBR,GAAzB,EAA6B;AACzB,iBAAIA,KAAKM,CAAT,EAAW;AACP,qBAAIS,MAAMT,EAAEN,CAAF,CAAV,CADO,CACS;AAChB,qBAAII,IAAIQ,IAAJ,CAASF,KAAT,EAAgBK,GAAhB,EAAqBf,CAArB,EAAwBM,CAAxB,CAAJ,EACIQ,IAAIE,IAAJ,CAASD,GAAT;AACP;AACJ;AACD,gBAAOD,GAAP;AACH,MAjBD;AAkBH;;AAED,KAAI,CAACb,MAAMC,SAAN,CAAgBe,KAArB,EAA2B;AACnBhB,WAAMC,SAAN,CAAgBe,KAAhB,GAAwB,UAASb,GAAT,CAAa,YAAb,EAA0B;AAClD,aAAI,SAAS,KAAK,CAAd,IAAmB,SAAS,IAAhC,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIC,IAAIC,OAAO,IAAP,CAAR;AACA,aAAIC,MAAMF,EAAEG,MAAF,KAAa,CAAvB;AACA,aAAI,OAAOL,GAAP,KAAe,UAAnB,EACA,MAAM,IAAIC,SAAJ,EAAN;AACA,aAAIK,QAAQC,UAAU,CAAV,CAAZ;AACA,cAAK,IAAIX,IAAI,CAAb,EAAgBA,IAAIQ,GAApB,EAAyBR,GAAzB,EAA6B;AACzB,iBAAIA,KAAKM,CAAL,IAAU,CAACF,IAAIQ,IAAJ,CAASF,KAAT,EAAgBJ,EAAEN,CAAF,CAAhB,EAAsBA,CAAtB,EAAyBM,CAAzB,CAAf,EACI,OAAO,KAAP;AACP;AACD,gBAAO,IAAP;AACH,MAbG;AAcP;;AAED,KAAI,CAACL,MAAMC,SAAN,CAAgBgB,GAArB,EAAyB;AACrBjB,WAAMC,SAAN,CAAgBgB,GAAhB,GAAsB,UAASd,GAAT,CAAa,YAAb,EAA0B;AAC5C,aAAI,SAAS,KAAK,CAAd,IAAmB,SAAS,IAAhC,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIC,IAAIC,OAAO,IAAP,CAAR;AACA,aAAIC,MAAMF,EAAEG,MAAF,KAAa,CAAvB;AACA,aAAI,OAAOL,GAAP,KAAe,UAAnB,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIS,MAAM,IAAIb,KAAJ,CAAUO,GAAV,CAAV;AACA,aAAIE,QAAQC,UAAU,CAAV,CAAZ;AACA,cAAK,IAAIX,IAAI,CAAb,EAAgBA,IAAIQ,GAApB,EAAyBR,GAAzB,EAA6B;AACzB,iBAAIA,KAAKM,CAAT,EACIQ,IAAId,CAAJ,IAASI,IAAIQ,IAAJ,CAASF,KAAT,EAAgBJ,EAAEN,CAAF,CAAhB,EAAsBA,CAAtB,EAAyBM,CAAzB,CAAT;AACP;AACD,gBAAOQ,GAAP;AACH,MAdD;AAeH;;AAED,KAAI,CAACb,MAAMC,SAAN,CAAgBiB,IAArB,EAA0B;AACtBlB,WAAMC,SAAN,CAAgBiB,IAAhB,GAAuB,UAASf,GAAT,CAAa,YAAb,EAA0B;AAC7C,aAAI,SAAS,KAAK,CAAd,IAAmB,SAAS,IAAhC,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIC,IAAIC,OAAO,IAAP,CAAR;AACA,aAAIC,MAAMF,EAAEG,MAAF,KAAa,CAAvB;AACA,aAAI,OAAOL,GAAP,KAAe,UAAnB,EACI,MAAM,IAAIC,SAAJ,EAAN;AACJ,aAAIK,QAAQC,UAAU,CAAV,CAAZ;AACA,cAAK,IAAIX,IAAI,CAAb,EAAgBA,IAAIQ,GAApB,EAAyBR,GAAzB,EAA6B;AACzB,iBAAIA,KAAKM,CAAL,IAAUF,IAAIQ,IAAJ,CAASF,KAAT,EAAgBJ,EAAEN,CAAF,CAAhB,EAAsBA,CAAtB,EAAyBM,CAAzB,CAAd,EACI,OAAO,IAAP;AACP;AACD,gBAAO,KAAP;AACH,MAbD;AAcH;;AAED,KAAI,CAACL,MAAMC,SAAN,CAAgBkB,UAArB,EAAgC;AAC5BnB,WAAMC,SAAN,CAAgBkB,UAAhB,GAA6B,UAASL,GAAT,EAAc;AACvC,cAAK,IAAIf,IAAI,CAAb,EAAgBA,IAAI,KAAKS,MAAzB,EAAiCT,GAAjC,EAAsC;AAClC,iBAAI,KAAKA,CAAL,MAAYe,GAAhB,EAAqB;AACjB,sBAAKM,MAAL,CAAYrB,CAAZ,EAAe,CAAf;AACAA;AACH;AACJ;AACD,gBAAO,IAAP;AACH,MARD;AASH;;AAED;AACAsB,SAAQpB,SAAR,CAAkBqB,QAAlB,GAA6B,UAASxB,CAAT,EAAW;AACpC,SAAIyB,KAAK,IAAIC,MAAJ,CAAW,YAAY1B,CAAZ,GAAgB,SAA3B,EAAsC,GAAtC,CAAT;AACA,YAAQyB,GAAGE,IAAH,CAAQ,KAAKC,SAAb,CAAR;AACH,EAHD;;AAKAL,SAAQpB,SAAR,CAAkB0B,QAAlB,GAA6B,UAAS7B,CAAT,EAAW;AACpC,SAAI,KAAKwB,QAAL,CAAcxB,CAAd,CAAJ,EAAsB,OAAO,IAAP;AACtB,UAAK4B,SAAL,GAAiB,CAAC,KAAKA,SAAL,GAAiB,GAAjB,GAAuB5B,CAAxB,EAA2B8B,OAA3B,CAAmC,MAAnC,EAA2C,GAA3C,EAAgDA,OAAhD,CAAwD,UAAxD,EAAoE,EAApE,CAAjB;AACA,YAAO,IAAP;AACH,EAJD;;AAMAP,SAAQpB,SAAR,CAAkB4B,WAAlB,GAAgC,UAAS/B,CAAT,EAAW;AACvC,SAAIyB,KAAK,IAAIC,MAAJ,CAAW,YAAY1B,CAAZ,GAAgB,SAA3B,EAAsC,GAAtC,CAAT;AACA,UAAK4B,SAAL,GAAiB,KAAKA,SAAL,CAAeE,OAAf,CAAuBL,EAAvB,EAA2B,IAA3B,EAAiCK,OAAjC,CAAyC,MAAzC,EAAiD,GAAjD,EAAsDA,OAAtD,CAA8D,UAA9D,EAA0E,EAA1E,CAAjB;AACA,YAAO,IAAP;AACH,EAJD;;AAMAE,aAAY7B,SAAZ,CAAsB8B,aAAtB,GAAsC,UAASC,IAAT,EAAe;AACjD,UAAKC,UAAL,GAAkB,KAAKC,YAAL,CAAkBF,IAAlB,EAAwB,KAAKC,UAA7B,CAAlB,GAA6D,KAAKE,WAAL,CAAiBH,IAAjB,CAA7D;AACH,EAFD;;AAIAF,aAAY7B,SAAZ,CAAsBmC,QAAtB,GAAiC,UAASC,OAAT,EAAkB;AAC/C,SAAIC,iBAAiBD,QAAQE,UAA7B;AACA,SAAIC,iBAAiBH,QAAQI,kBAA7B;AACA,UAAKF,UAAL,CAAgBL,YAAhB,CAA6BG,OAA7B,EAAqC,IAArC;AACA,SAAGG,cAAH,EACIF,eAAeJ,YAAf,CAA4B,IAA5B,EAAiCM,cAAjC,EADJ,KAGIF,eAAeH,WAAf,CAA2B,IAA3B;;AAEJ,YAAOE,OAAP;AACH,EAVD;;AAYA,KAAIK,aAAa,SAAbA,UAAa,CAASC,OAAT,EAAkBC,IAAlB,EAAwBC,SAAxB,EAAkC;AAC/C,SAAIC,MAAM,CAAV;AACA,YAAOH,OAAD,IAAcA,QAAQI,EAAR,IAAYF,SAAhC,EAA2C;AAAG;AAC1C,aAAID,QAAQ,GAAZ,EACA;AACI,iBAAGD,QAAQK,UAAX,EACIF,OAAOH,QAAQK,UAAf;AACP;AACD,aAAIJ,QAAQ,GAAZ,EACA;AACI,iBAAGD,QAAQM,SAAX,EACIH,OAAOH,QAAQM,SAAf;AACP;AACGN,mBAAUA,QAAQJ,UAAlB;AACP;AACD,YAAOO,GAAP;AACH,EAhBD;;AAkBA;AACA,KAAII,SAAS,SAATA,MAAS,CAASC,KAAT,EAAgBC,MAAhB,EAAwB;AACjC,SAAIC,IAAI,SAAJA,CAAI,GAAW,CAAG,CAAtB;AACAA,OAAEpD,SAAF,GAAcmD,OAAOnD,SAArB;AACAkD,WAAMlD,SAAN,GAAkB,IAAIoD,CAAJ,EAAlB;AACAF,WAAMlD,SAAN,CAAgBqD,WAAhB,GAA8BH,KAA9B;AACAA,WAAMI,UAAN,GAAmBH,OAAOnD,SAA1B;AACH,EAND;;AAQA,KAAIuD,UAAU,SAAVA,OAAU,CAASC,cAAT,EAAyBC,WAAzB,EAAsC;AAChD;AACA,SAAIhD,UAAU,CAAV,CAAJ,EAAkB;AACd,cAAK,IAAIX,IAAE,CAAN,EAASQ,MAAIG,UAAUF,MAA5B,EAAoCT,IAAEQ,GAAtC,EAA2CR,GAA3C,EAAgD;AAC5C0D,4BAAexD,SAAf,CAAyBS,UAAUX,CAAV,CAAzB,IAAyC2D,YAAYzD,SAAZ,CAAsBS,UAAUX,CAAV,CAAtB,CAAzC;AACH;AACJ;AACD;AALA,UAMK;AACD,kBAAK4D,UAAL,IAAmBD,YAAYzD,SAA/B,EAA0C;AACtC;;;AAGA,qBAAI,CAACwD,eAAexD,SAAf,CAAyB0D,UAAzB,CAAL,EAA2C;AACvCF,oCAAexD,SAAf,CAAyB0D,UAAzB,IAAuCD,YAAYzD,SAAZ,CAAsB0D,UAAtB,CAAvC;AACH;AACJ;AACJ;AACJ,EAlBD;AAmBA;AACAH,SAAQI,QAAR,EAAiB5D,KAAjB,EAAuB,SAAvB;;AAEA;AACA6D,MAAKC,YAAL,GAAoB,UAASC,GAAT,EAAcjD,GAAd,EAAkB;AAClC,SAAIkD,QAAQH,KAAKI,GAAL,CAASF,IAAI,CAAJ,IAASjD,GAAlB,CAAZ;AACA,SAAIoD,QAAQ,CAAZ;AACA,UAAI,IAAInE,IAAE,CAAV,EAAaA,IAAEgE,IAAIvD,MAAnB,EAA2BT,GAA3B,EAA+B;AAC3B,aAAIoE,OAAON,KAAKI,GAAL,CAASF,IAAIhE,CAAJ,IAASe,GAAlB,CAAX;AACA,aAAGqD,OAAKH,KAAR,EAAc;AACVA,qBAAQG,IAAR;AACAD,qBAAQnE,CAAR;AACH;AACJ;AACD,YAAOmE,KAAP;AACH,EAXD;;AAaAL,MAAKO,6BAAL,GAAqC,UAASL,GAAT,EAAcM,MAAd,EAAsBvD,GAAtB,EAA0B;AAC3D,SAAIkD,QAAMH,KAAKI,GAAL,CAASF,IAAI,CAAJ,IAAOjD,GAAhB,CAAV;AACA,SAAIoD,QAAM,CAAV;AACA,UAAI,IAAInE,IAAE,CAAV,EAAYA,IAAEgE,IAAIvD,MAAlB,EAAyBT,GAAzB,EAA6B;AACzB,aAAIoE,OAAKN,KAAKI,GAAL,CAASF,IAAIhE,CAAJ,IAAOe,GAAhB,CAAT;AACA,aAAGqD,OAAKH,KAAR,EAAc;AACVA,qBAAMG,IAAN;AACAD,qBAAMnE,CAAN;AACH;AACJ;AACD,SAAGiE,QAAMK,MAAT,EAAgB;AACZ,gBAAO,CAAC,CAAR;AACH;AACD,YAAOH,KAAP;AACH,EAdD;;AAgBAL,MAAKS,KAAL,GAAa,UAASC,GAAT,EAAcC,GAAd,EAAmB1D,GAAnB,EAAuB;AAChC;AACA,YAAO+C,KAAKW,GAAL,CAASD,GAAT,EAAaV,KAAKU,GAAL,CAASC,GAAT,EAAa1D,GAAb,CAAb,CAAP;AACH,EAHD;AAIA+C,MAAKY,UAAL,GAAkB,UAASF,GAAT,EAAcC,GAAd,EAAmB1D,GAAnB,EAAuB;AACrC,SAAI4D,IAAIb,KAAKW,GAAL,CAASD,IAAIG,CAAb,EAAgBb,KAAKU,GAAL,CAASC,IAAIE,CAAb,EAAgB5D,IAAI4D,CAApB,CAAhB,CAAR;AACA,SAAIC,IAAId,KAAKW,GAAL,CAASD,IAAII,CAAb,EAAgBd,KAAKU,GAAL,CAASC,IAAIG,CAAb,EAAgB7D,IAAI6D,CAApB,CAAhB,CAAR;AACA,YAAO,IAAIrG,KAAJ,CAAUoG,CAAV,EAAaC,CAAb,CAAP;AACH,EAJD;AAKAd,MAAKe,SAAL,GAAiB,UAASC,EAAT,EAAaC,EAAb,EAAgB;AAC7B,SAAIC,KAAKF,GAAGH,CAAH,GAAOI,GAAGJ,CAAnB;AACA,SAAIM,KAAKH,GAAGF,CAAH,GAAOG,GAAGH,CAAnB;AACA,YAAOd,KAAKoB,IAAL,CAAUF,KAAGA,EAAH,GAAQC,KAAGA,EAArB,CAAP;AACH,EAJD;;AAMAnB,MAAKqB,QAAL,GAAgB,UAASC,KAAT,EAAe;AAC3B,YAASA,QAAQ,GAAT,GAAgBtB,KAAKuB,EAArB,GAA0B,GAAlC;AACH,EAFD;AAGA;;AAEAC,QAAOpF,SAAP,CAAiBqF,SAAjB,GAA6B,UAAS9E,MAAT,EAAiB;AAC1C,YAAO,KAAK+E,MAAL,CAAY,CAAZ,EAAe,KAAK/E,MAAL,GAAcA,MAA7B,CAAP;AACH,EAFD;AAGA;;AAEA,UAASgF,cAAT,GAA0B;AACtB,SAAIC,OAAOC,cAAX,EAA2B;AACvBC,mBAAU,IAAID,cAAJ,EAAV;AACH,MAFD,MAEO,IAAID,OAAOG,aAAX,EAA0B;AAC7BD,mBAAU,IAAIC,aAAJ,CAAkB,mBAAlB,CAAV;AACH;AACD,SAAID,WAAW,IAAf,EAAqB;AACjBE,eAAM,wCAAN;AACH;AACD,YAAOF,OAAP;AACH;;AAEDF,QAAOK,qBAAP,GAAgC,YAAU;AACxC,YAAQL,OAAOK,qBAAP,IACAL,OAAOM,2BADP,IAEAN,OAAOO,wBAFP,IAGAP,OAAOQ,sBAHP,IAIAR,OAAOS,uBAJP,IAKA,WAAS,cAAeC,QAAxB,EAAkC,gBAAiBxD,OAAnD,EAA2D;AACzD8C,gBAAOW,UAAP,CAAkBD,QAAlB,EAA4B,OAAO,EAAnC;AACD,MAPT;AAQD,EAT8B,EAA/B;;AAWA,KAAI;AACA,SAAG,CAAC7F,OAAOL,SAAP,CAAiBoG,gBAAlB,IACH/F,OAAOgG,cAAP,CAAsB,EAAtB,EAA0B,GAA1B,EAA+B,EAAEC,KAAK,eAAW;AAAE,oBAAO,IAAP;AAAa,UAAjC,EAA/B,EAAoE7B,CADpE,EACuE;AACnEpE,gBAAOgG,cAAP,CAAsBhG,OAAOL,SAA7B,EAAwC,kBAAxC,EACH,EAAEuG,YAAY,KAAd,EAAqBC,cAAc,IAAnC;AACGC,oBAAO,eAASC,IAAT,EAAeC,IAAf,EAAqB;AACxBtG,wBAAOgG,cAAP,CAAsB,IAAtB,EAA4BK,IAA5B,EACC,EAAEJ,KAAKK,IAAP,EAAaJ,YAAY,IAAzB,EAA+BC,cAAc,IAA7C,EADD;AAEH;AAJJ,UADG;AAOAnG,gBAAOgG,cAAP,CAAsBhG,OAAOL,SAA7B,EAAwC,kBAAxC,EACH,EAAEuG,YAAY,KAAd,EAAqBC,cAAc,IAAnC;AACGC,oBAAO,eAASC,IAAT,EAAeC,IAAf,EAAqB;AACxBtG,wBAAOgG,cAAP,CAAsB,IAAtB,EAA4BK,IAA5B,EACC,EAAEE,KAAKD,IAAP,EAAaJ,YAAY,IAAzB,EAA+BC,cAAc,IAA7C,EADD;AAEH;AAJJ,UADG;AAOH;AACJ,EAlBD,CAkBE,OAAMK,gBAAN,EAAwB,CAAE,qCAAuC,E;;;;;;ACpSnE;;;;;;;AACI;;;;;;AACA,KAAIC,SAAJ;AACA,KAAIC,SAAS,EAAEC,oBAAF,EAAb,C,CAAsB;;;AAItB;AACA,UAAS3I,KAAT,CAAeoG,CAAf,EAAkBC,CAAlB,EAAoB;AAChB,UAAKD,CAAL,GAASA,CAAT;AACA,UAAKC,CAAL,GAASA,CAAT;AACH;;AAEDrG,OAAM2B,SAAN,CAAgBiH,QAAhB,GAA2B,YAAU;AACjC,YAAO,QAAQ,KAAKxC,CAAb,GAAiB,KAAjB,GAAyB,KAAKC,CAA9B,GAAkC,GAAzC;AACH,EAFD;AAGArG,OAAM2B,SAAN,CAAgBkH,GAAhB,GAAsB,UAASC,CAAT,EAAW;AAC7B,YAAO,IAAI9I,KAAJ,CAAU,KAAKoG,CAAL,GAAS0C,EAAE1C,CAArB,EAAwB,KAAKC,CAAL,GAASyC,EAAEzC,CAAnC,CAAP;AACH,EAFD;AAGArG,OAAM2B,SAAN,CAAgBoH,GAAhB,GAAsB,UAASD,CAAT,EAAW;AAC7B,YAAO,IAAI9I,KAAJ,CAAU,KAAKoG,CAAL,GAAS0C,EAAE1C,CAArB,EAAwB,KAAKC,CAAL,GAASyC,EAAEzC,CAAnC,CAAP;AACH,EAFD;AAGArG,OAAM2B,SAAN,CAAgBqH,IAAhB,GAAuB,UAASC,CAAT,EAAW;AAC9B,YAAO,IAAIjJ,KAAJ,CAAU,KAAKoG,CAAL,GAAS6C,CAAnB,EAAsB,KAAK5C,CAAL,GAAS4C,CAA/B,CAAP;AACH,EAFD;AAGAjJ,OAAM2B,SAAN,CAAgBuH,QAAhB,GAA2B,YAAU;AACjC,YAAO,IAAIlJ,KAAJ,CAAU,CAAC,KAAKoG,CAAhB,EAAmB,CAAC,KAAKC,CAAzB,CAAP;AACH,EAFD;AAGArG,OAAM2B,SAAN,CAAgBwH,OAAhB,GAA0B,UAASL,CAAT,EAAW;AACjC,YAAQ,KAAK1C,CAAL,KAAW0C,EAAE1C,CAAb,IAAkB,KAAKC,CAAL,KAAWyC,EAAEzC,CAAvC;AACH,EAFD;AAGArG,OAAM2B,SAAN,CAAgBL,KAAhB,GAAwB,YAAU;AAC9B,YAAO,IAAItB,KAAJ,CAAU,KAAKoG,CAAf,EAAkB,KAAKC,CAAvB,CAAP;AACH,EAFD;;AAIA;AACA,UAAS+C,SAAT,CAAmBC,QAAnB,EAA6BC,IAA7B,EAAkC;AAC9B,UAAKD,QAAL,GAAgBA,QAAhB;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACH;;AAEDF,WAAUzH,SAAV,CAAoB4H,KAApB,GAA4B,YAAU;AAClC,YAAO,KAAKF,QAAZ;AACH,EAFD;AAGAD,WAAUzH,SAAV,CAAoB6H,KAApB,GAA4B,YAAU;AAClC,YAAO,IAAIxJ,KAAJ,CAAU,KAAKqJ,QAAL,CAAcjD,CAAd,GAAkB,KAAKkD,IAAL,CAAUlD,CAAtC,EAAyC,KAAKiD,QAAL,CAAchD,CAAvD,CAAP;AACH,EAFD;AAGA+C,WAAUzH,SAAV,CAAoB8H,KAApB,GAA4B,YAAU;AAClC,YAAO,KAAKJ,QAAL,CAAcR,GAAd,CAAkB,KAAKS,IAAvB,CAAP;AACH,EAFD;AAGAF,WAAUzH,SAAV,CAAoB+H,KAApB,GAA4B,YAAU;AAClC,YAAO,IAAI1J,KAAJ,CAAU,KAAKqJ,QAAL,CAAcjD,CAAxB,EAA2B,KAAKiD,QAAL,CAAchD,CAAd,GAAkB,KAAKiD,IAAL,CAAUjD,CAAvD,CAAP;AACH,EAFD;AAGA+C,WAAUzH,SAAV,CAAoBgI,SAApB,GAAgC,YAAU;AACtC,YAAO,KAAKN,QAAL,CAAcR,GAAd,CAAkB,KAAKS,IAAL,CAAUN,IAAV,CAAe,GAAf,CAAlB,CAAP;AACH,EAFD;AAGAI,WAAUzH,SAAV,CAAoBiI,EAApB,GAAyB,UAASC,IAAT,EAAc;AACnC,SAAIR,WAAW,IAAIrJ,KAAJ,CAAUuF,KAAKU,GAAL,CAAS,KAAKoD,QAAL,CAAcjD,CAAvB,EAA0ByD,KAAKR,QAAL,CAAcjD,CAAxC,CAAV,EAAsDb,KAAKU,GAAL,CAAS,KAAKoD,QAAL,CAAchD,CAAvB,EAA0BwD,KAAKR,QAAL,CAAchD,CAAxC,CAAtD,CAAf;AAAA,SAAkHiD,OAAQ,IAAItJ,KAAJ,CAAUuF,KAAKW,GAAL,CAAS,KAAKmD,QAAL,CAAcjD,CAAd,GAAkB,KAAKkD,IAAL,CAAUlD,CAArC,EAAwCyD,KAAKR,QAAL,CAAcjD,CAAd,GAAkByD,KAAKP,IAAL,CAAUlD,CAApE,CAAV,EAAkFb,KAAKW,GAAL,CAAS,KAAKmD,QAAL,CAAchD,CAAd,GAAkB,KAAKiD,IAAL,CAAUjD,CAArC,EAAwCwD,KAAKR,QAAL,CAAchD,CAAd,GAAkBwD,KAAKP,IAAL,CAAUjD,CAApE,CAAlF,CAAD,CAA4J0C,GAA5J,CAAgKM,QAAhK,CAAzH;AACA,YAAO,IAAID,SAAJ,CAAcC,QAAd,EAAwBC,IAAxB,CAAP;AACH,EAHD;AAIAF,WAAUzH,SAAV,CAAoBmI,GAApB,GAA0B,UAASD,IAAT,EAAc;AACpC,SAAIR,WAAW,IAAIrJ,KAAJ,CAAUuF,KAAKW,GAAL,CAAS,KAAKmD,QAAL,CAAcjD,CAAvB,EAA0ByD,KAAKR,QAAL,CAAcjD,CAAxC,CAAV,EAAsDb,KAAKW,GAAL,CAAS,KAAKmD,QAAL,CAAchD,CAAvB,EAA0BwD,KAAKR,QAAL,CAAchD,CAAxC,CAAtD,CAAf;AAAA,SAAkHiD,OAAQ,IAAItJ,KAAJ,CAAUuF,KAAKU,GAAL,CAAS,KAAKoD,QAAL,CAAcjD,CAAd,GAAkB,KAAKkD,IAAL,CAAUlD,CAArC,EAAwCyD,KAAKR,QAAL,CAAcjD,CAAd,GAAkByD,KAAKP,IAAL,CAAUlD,CAApE,CAAV,EAAkFb,KAAKU,GAAL,CAAS,KAAKoD,QAAL,CAAchD,CAAd,GAAkB,KAAKiD,IAAL,CAAUjD,CAArC,EAAwCwD,KAAKR,QAAL,CAAchD,CAAd,GAAkBwD,KAAKP,IAAL,CAAUjD,CAApE,CAAlF,CAAD,CAA4J0C,GAA5J,CAAgKM,QAAhK,CAAzH;AACA,SAAGC,KAAKlD,CAAL,IAAU,CAAV,IAAekD,KAAKjD,CAAL,IAAU,CAA5B,EAA8B;AAC1B,gBAAO,IAAP;AACH;AACD,YAAO,IAAI+C,SAAJ,CAAcC,QAAd,EAAwBC,IAAxB,CAAP;AACH,EAND;AAOHF,WAAUzH,SAAV,CAAoBoI,YAApB,GAAmC,UAASjB,CAAT,EAAW;AAC7C,YAAO,EAAE,KAAKO,QAAL,CAAcjD,CAAd,GAAkB0C,EAAE1C,CAApB,IAAyB,KAAKiD,QAAL,CAAcjD,CAAd,GAAkB,KAAKkD,IAAL,CAAUlD,CAA5B,GAAgC0C,EAAE1C,CAA3D,IAAgE,KAAKiD,QAAL,CAAchD,CAAd,GAAkByC,EAAEzC,CAApF,IAAyF,KAAKgD,QAAL,CAAchD,CAAd,GAAkB,KAAKiD,IAAL,CAAUjD,CAA5B,GAAgCyC,EAAEzC,CAA7H,CAAP;AACA,EAFD;AAGA+C,WAAUzH,SAAV,CAAoBqI,gBAApB,GAAuC,UAASC,SAAT,EAAmB;AACzD,YAAO,KAAKF,YAAL,CAAkBE,UAAUZ,QAA5B,KAAyC,KAAKU,YAAL,CAAkBE,UAAUR,KAAV,EAAlB,CAAhD;AACA,EAFD;AAGGL,WAAUzH,SAAV,CAAoBuI,WAApB,GAAkC,UAASL,IAAT,EAAevF,IAAf,EAAoB;AAClD,SAAI6F,OAAJ,EAAaC,cAAb,EAA6BC,UAA7B,EAAyCC,UAAzC,EAAqDC,IAArD,EAA2DC,MAA3D;AACA,SAAGlG,IAAH,EAAQ;AACJ6F,mBAAU7F,IAAV;AACH,MAFD,MAEK;AACD8F,0BAAiB,KAAKN,GAAL,CAASD,IAAT,CAAjB;AACA,aAAG,CAACO,cAAJ,EAAmB;AACf,oBAAOP,IAAP;AACH;AACDM,mBAAUC,eAAed,IAAf,CAAoBlD,CAApB,GAAwBgE,eAAed,IAAf,CAAoBjD,CAA5C,GAAgD,GAAhD,GAAsD,GAAhE;AACH;AACDgE,kBAAa,KAAKV,SAAL,EAAb;AACAW,kBAAaT,KAAKF,SAAL,EAAb;AACAY,YAAOF,WAAWF,OAAX,IAAsBG,WAAWH,OAAX,CAAtB,GAA4C,CAAC,CAA7C,GAAiD,CAAxD;AACAK,cAASD,OAAO,CAAP,GAAW,KAAKlB,QAAL,CAAcc,OAAd,IAAyB,KAAKb,IAAL,CAAUa,OAAV,CAAzB,GAA8CN,KAAKR,QAAL,CAAcc,OAAd,CAAzD,GAAkF,KAAKd,QAAL,CAAcc,OAAd,KAA0BN,KAAKR,QAAL,CAAcc,OAAd,IAAyBN,KAAKP,IAAL,CAAUa,OAAV,CAAnD,CAA3F;AACAN,UAAKR,QAAL,CAAcc,OAAd,IAAyBN,KAAKR,QAAL,CAAcc,OAAd,IAAyBK,MAAlD;AACA,YAAOX,IAAP;AACH,EAjBD;AAkBAT,WAAUzH,SAAV,CAAoB8I,SAApB,GAAgC,YAAU;AACtC,YAAO,KAAKnB,IAAL,CAAUlD,CAAV,GAAc,KAAKkD,IAAL,CAAUjD,CAA/B;AACH,EAFD;AAGA+C,WAAUzH,SAAV,CAAoB+I,UAApB,GAAiC,UAASC,EAAT,EAAY;AACzCA,UAAKA,MAAMC,SAASC,aAAT,CAAuB,KAAvB,CAAX;AACAF,QAAGG,KAAH,CAASC,IAAT,GAAgB,KAAK1B,QAAL,CAAcjD,CAAd,GAAkB,IAAlC;AACAuE,QAAGG,KAAH,CAASE,GAAT,GAAe,KAAK3B,QAAL,CAAchD,CAAd,GAAkB,IAAjC;AACAsE,QAAGG,KAAH,CAASG,KAAT,GAAiB,KAAK3B,IAAL,CAAUlD,CAAV,GAAc,IAA/B;AACAuE,QAAGG,KAAH,CAASI,MAAT,GAAkB,KAAK5B,IAAL,CAAUjD,CAAV,GAAc,IAAhC;AACH,EAND;AAOA+C,WAAUzH,SAAV,CAAoBwJ,MAApB,GAA6B,UAAS7B,IAAT,EAAc;AACvC,UAAKA,IAAL,GAAY,KAAKA,IAAL,CAAUT,GAAV,CAAcS,IAAd,CAAZ;AACA,UAAKD,QAAL,GAAgB,KAAKA,QAAL,CAAcR,GAAd,CAAkBS,KAAKN,IAAL,CAAU,CAAC,GAAX,CAAlB,CAAhB;AACH,EAHD;AAIAI,WAAUzH,SAAV,CAAoByJ,UAApB,GAAiC,YAAU;AACvC,YAAO7F,KAAKU,GAAL,CAAS,KAAKqD,IAAL,CAAUlD,CAAnB,EAAsB,KAAKkD,IAAL,CAAUjD,CAAhC,CAAP;AACH,EAFD;;AAIA;AACA,SAkN0BoC,SAlN1B,eAAY;AACRnC,gBAAW,mBAAS+E,OAAT,EAAiB;AACxB,aAAG,CAACA,OAAD,IAAaA,QAAQjF,CAAR,IAAaiF,QAAQhF,CAArB,IAA0B,CAACgF,QAAQC,qBAAnD,EAA0E;AACtE,oBAAO,UAAS/E,EAAT,EAAaC,EAAb,EAAgB;AACnB,qBAAIC,KAAKF,GAAGH,CAAH,GAAOI,GAAGJ,CAAnB;AAAA,qBAAsBM,KAAKH,GAAGF,CAAH,GAAOG,GAAGH,CAArC;AACA,wBAAOd,KAAKoB,IAAL,CAAUF,KAAKA,EAAL,GAAUC,KAAKA,EAAzB,CAAP;AACH,cAHD;AAIH,UALD,MAKK;AACD,iBAAG2E,QAAQjF,CAAR,IAAaiF,QAAQhF,CAArB,IAA0BgF,QAAQC,qBAArC,EAA2D;AACvD,wBAAO,UAAS/E,EAAT,EAAaC,EAAb,EAAgB;AACnB,4BAAOjB,KAAKoB,IAAL,CAAUpB,KAAKgG,GAAL,CAASF,QAAQjF,CAAR,GAAYb,KAAKI,GAAL,CAASY,GAAGH,CAAH,GAAOI,GAAGJ,CAAnB,CAArB,EAA4C,CAA5C,IAAiDb,KAAKgG,GAAL,CAASF,QAAQhF,CAAR,GAAYd,KAAKI,GAAL,CAASY,GAAGF,CAAH,GAAOG,GAAGH,CAAnB,CAArB,EAA4C,CAA5C,CAA3D,CAAP;AACH,kBAFD;AAGH,cAJD,MAIK;AACD,qBAAGgF,QAAQjF,CAAX,EAAa;AACT,4BAAO,UAASG,EAAT,EAAaC,EAAb,EAAgB;AACnB,gCAAOjB,KAAKI,GAAL,CAASY,GAAGH,CAAH,GAAOI,GAAGJ,CAAnB,CAAP;AACH,sBAFD;AAGH,kBAJD,MAIK;AACD,yBAAGiF,QAAQhF,CAAX,EAAa;AACT,gCAAO,UAASE,EAAT,EAAaC,EAAb,EAAgB;AACnB,oCAAOjB,KAAKI,GAAL,CAASY,GAAGF,CAAH,GAAOG,GAAGH,CAAnB,CAAP;AACH,0BAFD;AAGH;AACJ;AACJ;AACJ;AACJ,MA1BO;AA2BRmF,uBAAkB,0BAAS/F,GAAT,EAAcjD,GAAd,EAAmBuD,MAAnB,EAA2BO,SAA3B,EAAqC;AACnD,aAAIgD,IAAJ;AAAA,aAAU1D,QAAQ,CAAlB;AAAA,aAAqBnE,CAArB;AAAA,aAAwBoE,IAAxB;AACAS,qBAAYA,aAAa,KAAKA,SAAL,EAAzB;AACA,aAAGb,IAAIvD,MAAJ,KAAe,CAAlB,EAAoB;AAChB,oBAAO,CAAC,CAAR;AACH;AACDoH,gBAAOhD,UAAUb,IAAI,CAAJ,CAAV,EAAkBjD,GAAlB,CAAP;AACA,cAAIf,IAAI,CAAR,EAAWA,IAAIgE,IAAIvD,MAAnB,EAA2BT,GAA3B,EAA+B;AAC3BoE,oBAAOS,UAAUb,IAAIhE,CAAJ,CAAV,EAAkBe,GAAlB,CAAP;AACA,iBAAGqD,OAAOyD,IAAV,EAAe;AACXA,wBAAOzD,IAAP;AACAD,yBAAQnE,CAAR;AACH;AACJ;AACD,aAAGsE,UAAU,CAAV,IAAeuD,OAAOvD,MAAzB,EAAgC;AAC5B,oBAAO,CAAC,CAAR;AACH;AACD,gBAAOH,KAAP;AACH,MA7CO;AA8CRI,YAAO,eAASC,GAAT,EAAcC,GAAd,EAAmB1D,GAAnB,EAAuB;AAC1B,gBAAO+C,KAAKW,GAAL,CAASD,GAAT,EAAcV,KAAKU,GAAL,CAASC,GAAT,EAAc1D,GAAd,CAAd,CAAP;AACH,MAhDO;AAiDR2D,iBAAY,oBAASF,GAAT,EAAcC,GAAd,EAAmB1D,GAAnB,EAAuB;AAC/B,aAAI4D,IAAIb,KAAKW,GAAL,CAASD,IAAIG,CAAb,EAAgBb,KAAKU,GAAL,CAASC,IAAIE,CAAb,EAAgB5D,IAAI4D,CAApB,CAAhB,CAAR;AAAA,aAAiDC,IAAId,KAAKW,GAAL,CAASD,IAAII,CAAb,EAAgBd,KAAKU,GAAL,CAASC,IAAIG,CAAb,EAAgB7D,IAAI6D,CAApB,CAAhB,CAArD;AACA,gBAAO,IAAIrG,KAAJ,CAAUoG,CAAV,EAAaC,CAAb,CAAP;AACH,MApDO;AAqDR;AACAoF,qBAAgB,wBAASC,IAAT,EAAeC,IAAf,EAAqBC,IAArB,EAA2BC,IAA3B,EAAgC;AAC5C,aAAIhG,IAAJ,EAAUiG,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,EAAsBC,EAAtB,EAA0B7F,CAA1B,EAA6BC,CAA7B;AACA,aAAGuF,KAAKxF,CAAL,KAAWyF,KAAKzF,CAAnB,EAAqB;AACjBP,oBAAO+F,IAAP;AACAA,oBAAOF,IAAP;AACAA,oBAAO7F,IAAP;AACAA,oBAAOgG,IAAP;AACAA,oBAAOF,IAAP;AACAA,oBAAO9F,IAAP;AACH;AACD,aAAG6F,KAAKtF,CAAL,KAAWuF,KAAKvF,CAAnB,EAAqB;AACjB2F,kBAAK,CAACF,KAAKxF,CAAL,GAASuF,KAAKvF,CAAf,KAAqBwF,KAAKzF,CAAL,GAASwF,KAAKxF,CAAnC,CAAL;AACA6F,kBAAK,CAACJ,KAAKzF,CAAL,GAASwF,KAAKvF,CAAd,GAAkBuF,KAAKxF,CAAL,GAASyF,KAAKxF,CAAjC,KAAuCwF,KAAKzF,CAAL,GAASwF,KAAKxF,CAArD,CAAL;AACAA,iBAAIsF,KAAKtF,CAAT;AACAC,iBAAID,IAAI2F,EAAJ,GAASE,EAAb;AACA,oBAAO,IAAIjM,KAAJ,CAAUoG,CAAV,EAAaC,CAAb,CAAP;AACH,UAND,MAMK;AACDyF,kBAAK,CAACH,KAAKtF,CAAL,GAASqF,KAAKrF,CAAf,KAAqBsF,KAAKvF,CAAL,GAASsF,KAAKtF,CAAnC,CAAL;AACA4F,kBAAK,CAACL,KAAKvF,CAAL,GAASsF,KAAKrF,CAAd,GAAkBqF,KAAKtF,CAAL,GAASuF,KAAKtF,CAAjC,KAAuCsF,KAAKvF,CAAL,GAASsF,KAAKtF,CAArD,CAAL;AACA2F,kBAAK,CAACF,KAAKxF,CAAL,GAASuF,KAAKvF,CAAf,KAAqBwF,KAAKzF,CAAL,GAASwF,KAAKxF,CAAnC,CAAL;AACA6F,kBAAK,CAACJ,KAAKzF,CAAL,GAASwF,KAAKvF,CAAd,GAAkBuF,KAAKxF,CAAL,GAASyF,KAAKxF,CAAjC,KAAuCwF,KAAKzF,CAAL,GAASwF,KAAKxF,CAArD,CAAL;AACAA,iBAAI,CAAC4F,KAAKC,EAAN,KAAaF,KAAKD,EAAlB,CAAJ;AACAzF,iBAAID,IAAI0F,EAAJ,GAASE,EAAb;AACA,oBAAO,IAAIhM,KAAJ,CAAUoG,CAAV,EAAaC,CAAb,CAAP;AACH;AACJ,MA/EO;AAgFR;AACA;AACA6F,qBAAgB,wBAASC,GAAT,EAAcC,GAAd,EAAmBC,CAAnB,EAAqB;AACjC,aAAIjG,CAAJ,EAAOC,CAAP;AACAD,aAAIqC,UAAUzC,KAAV,CAAgBT,KAAKU,GAAL,CAASkG,IAAI/F,CAAb,EAAgBgG,IAAIhG,CAApB,CAAhB,EAAwCb,KAAKW,GAAL,CAASiG,IAAI/F,CAAb,EAAgBgG,IAAIhG,CAApB,CAAxC,EAAgEiG,EAAEjG,CAAlE,CAAJ;AACA,aAAGA,KAAKiG,EAAEjG,CAAV,EAAY;AACRC,iBAAKD,MAAM+F,IAAI/F,CAAX,GAAgB+F,IAAI9F,CAApB,GAAwB+F,IAAI/F,CAAhC;AACAgG,iBAAI,IAAIrM,KAAJ,CAAUoG,CAAV,EAAaC,CAAb,CAAJ;AACH;AACDA,aAAIoC,UAAUzC,KAAV,CAAgBT,KAAKU,GAAL,CAASkG,IAAI9F,CAAb,EAAgB+F,IAAI/F,CAApB,CAAhB,EAAwCd,KAAKW,GAAL,CAASiG,IAAI9F,CAAb,EAAgB+F,IAAI/F,CAApB,CAAxC,EAAgEgG,EAAEhG,CAAlE,CAAJ;AACA,aAAGA,KAAKgG,EAAEhG,CAAV,EAAY;AACRD,iBAAKC,MAAM8F,IAAI9F,CAAX,GAAgB8F,IAAI/F,CAApB,GAAwBgG,IAAIhG,CAAhC;AACAiG,iBAAI,IAAIrM,KAAJ,CAAUoG,CAAV,EAAaC,CAAb,CAAJ;AACH;AACD,gBAAOgG,CAAP;AACH,MA/FO;AAgGRC,kBAAa,qBAASC,CAAT,EAAYC,CAAZ,EAAeH,CAAf,EAAiB;AAC1B,aAAII,KAAK,IAAIzM,KAAJ,CAAUqM,EAAEjG,CAAF,GAAMmG,EAAEnG,CAAlB,EAAqBiG,EAAEhG,CAAF,GAAMkG,EAAElG,CAA7B,CAAT;AAAA,aACIqG,KAAK,IAAI1M,KAAJ,CAAUwM,EAAEpG,CAAF,GAAMmG,EAAEnG,CAAlB,EAAqBoG,EAAEnG,CAAF,GAAMkG,EAAElG,CAA7B,CADT;AAAA,aAEIsG,MAAMD,GAAGtG,CAAH,GAAOsG,GAAGtG,CAAV,GAAcsG,GAAGrG,CAAH,GAAOqG,GAAGrG,CAFlC;AAAA,aAGIuG,QAAQH,GAAGrG,CAAH,GAAOsG,GAAGtG,CAAV,GAAcqG,GAAGpG,CAAH,GAAOqG,GAAGrG,CAHpC;AAAA,aAIItE,IAAI6K,QAAMD,GAJd;AAKA,gBAAO,IAAI3M,KAAJ,CAAUuM,EAAEnG,CAAF,GAAMsG,GAAGtG,CAAH,GAAOrE,CAAvB,EAA0BwK,EAAElG,CAAF,GAAMqG,GAAGrG,CAAH,GAAOtE,CAAvC,CAAP;AACH,MAvGO;AAwGR8K,qBAAgB,wBAASV,GAAT,EAAcC,GAAd,EAAmBU,OAAnB,EAA2B;AACvC,aAAIrG,KAAK2F,IAAIhG,CAAJ,GAAQ+F,IAAI/F,CAArB;AAAA,aAAwBM,KAAK0F,IAAI/F,CAAJ,GAAQ8F,IAAI9F,CAAzC;AACA,gBAAO,IAAIrG,KAAJ,CAAUmM,IAAI/F,CAAJ,GAAQ0G,UAAUrG,EAA5B,EAAgC0F,IAAI9F,CAAJ,GAAQyG,UAAUpG,EAAlD,CAAP;AACH,MA3GO;AA4GRqG,6BAAwB,gCAASZ,GAAT,EAAcC,GAAd,EAAmBY,MAAnB,EAA0B;AAC9C,aAAIvG,KAAK2F,IAAIhG,CAAJ,GAAQ+F,IAAI/F,CAArB;AAAA,aAAwBM,KAAK0F,IAAI/F,CAAJ,GAAQ8F,IAAI9F,CAAzC;AAAA,aAA4CyG,UAAUE,SAAS,KAAK1G,SAAL,GAAiB6F,GAAjB,EAAsBC,GAAtB,CAA/D;AACA,gBAAO,IAAIpM,KAAJ,CAAUmM,IAAI/F,CAAJ,GAAQ0G,UAAUrG,EAA5B,EAAgC0F,IAAI9F,CAAJ,GAAQyG,UAAUpG,EAAlD,CAAP;AACH,MA/GO;AAgHRuG,iCAA4B,oCAAStC,EAAT,EAAauC,MAAb,EAAqBC,gBAArB,EAAuCC,mBAAvC,EAA2D;AACnF,aAAI9D,OAAO,KAAK+D,gBAAL,CAAsB1C,EAAtB,EAA0BwC,gBAA1B,CAAX;AACA,gBAAO,IAAI/D,SAAJ,CAAc,KAAKkE,SAAL,CAAe3C,EAAf,EAAmBuC,UAAUvC,GAAG1G,UAAhC,EAA4CmJ,mBAA5C,CAAd,EAAgF9D,IAAhF,CAAP;AACH,MAnHO;AAoHR+D,uBAAkB,0BAAS1C,EAAT,EAAawC,gBAAb,EAA8B;AAC5C,aAAIlC,QAAQsC,SAASpG,OAAOqG,gBAAP,CAAwB7C,EAAxB,EAA4B,OAA5B,CAAT,CAAZ;AAAA,aAA4DO,SAASqC,SAASpG,OAAOqG,gBAAP,CAAwB7C,EAAxB,EAA4B,QAA5B,CAAT,CAArE;AACA,aAAG,CAACwC,gBAAJ,EAAqB;AACjBlC,sBAASvC,OAAOC,IAAP,CAAY8E,sBAAZ,CAAmC9C,EAAnC,EAAuC,CAAC,cAAD,EAAiB,eAAjB,EAAkC,mBAAlC,EAAuD,oBAAvD,CAAvC,CAAT;AACAO,uBAAUxC,OAAOC,IAAP,CAAY8E,sBAAZ,CAAmC9C,EAAnC,EAAuC,CAAC,aAAD,EAAgB,gBAAhB,EAAkC,kBAAlC,EAAsD,qBAAtD,CAAvC,CAAV;AACH;AACD,gBAAO,IAAI3K,KAAJ,CAAUiL,KAAV,EAAiBC,MAAjB,CAAP;AACH,MA3HO;AA4HRoC,gBAAW,mBAAS3C,EAAT,EAAauC,MAAb,EAAqBE,mBAArB,EAAyC;AAChD,aAAIM,SAAS/C,GAAGgD,qBAAH,EAAb;AAAA,aAAyCC,aAAaV,OAAOS,qBAAP,EAAtD;AACA,gBAAO,IAAI3N,KAAJ,CAAU0N,OAAO3C,IAAP,GAAc6C,WAAW7C,IAAnC,EAAyC2C,OAAO1C,GAAP,GAAa4C,WAAW5C,GAAjE,CAAP;AACH,MA/HO;AAgIR6C,+BAA0B,kCAAShH,KAAT,EAAgB3E,MAAhB,EAAwB4L,MAAxB,EAA+B;AACrDA,kBAASA,UAAU,IAAI9N,KAAJ,CAAU,CAAV,EAAa,CAAb,CAAnB;AACA,gBAAO8N,OAAOjF,GAAP,CAAW,IAAI7I,KAAJ,CAAUkC,SAASqD,KAAKwI,GAAL,CAASlH,KAAT,CAAnB,EAAoC3E,SAASqD,KAAKyI,GAAL,CAASnH,KAAT,CAA7C,CAAX,CAAP;AACH,MAnIO;AAoIRoH,4BAAuB,+BAASC,WAAT,EAAsBC,KAAtB,EAA6BC,OAA7B,EAAqC;AACxD,aAAI3M,CAAJ;AAAA,aAAO4M,SAASH,YAAY5L,MAAZ,CAAmB,UAASgM,MAAT,EAAgB;AAC/C,oBAAQA,OAAOjI,CAAP,GAAW8H,MAAM9H,CAAjB,KAAuB+H,UAAUE,OAAOlI,CAAP,GAAW+H,MAAM/H,CAA3B,GAA+BkI,OAAOlI,CAAP,GAAW+H,MAAM/H,CAAvE,CAAR;AACH,UAFe,CAAhB;AAGA,cAAI3E,IAAI,CAAR,EAAWA,IAAI4M,OAAOnM,MAAtB,EAA8BT,GAA9B,EAAkC;AAC9B,iBAAG0M,MAAM9H,CAAN,GAAUgI,OAAO5M,CAAP,EAAU4E,CAAvB,EAAyB;AACrBgI,wBAAOvL,MAAP,CAAcrB,CAAd,EAAiB,CAAjB,EAAoB0M,KAApB;AACA,wBAAOE,MAAP;AACH;AACJ;AACDA,gBAAO5L,IAAP,CAAY0L,KAAZ;AACA,gBAAOE,MAAP;AACH,MAhJO;AAiJRE,eAAU,kBAAShI,EAAT,EAAaC,EAAb,EAAgB;AACtB,aAAIgI,OAAOhI,GAAGuC,GAAH,CAAOxC,EAAP,CAAX;AACA,gBAAO,KAAKkI,cAAL,CAAoBlJ,KAAKmJ,KAAL,CAAWF,KAAKnI,CAAhB,EAAmBmI,KAAKpI,CAAxB,CAApB,CAAP;AACH,MApJO;AAqJRQ,eAAU,kBAASC,KAAT,EAAe;AACrB,gBAASA,QAAQ,GAAT,GAAgBtB,KAAKuB,EAArB,GAA0B,GAAlC;AACH,MAvJO;AAwJR6H,eAAU,kBAAS9H,KAAT,EAAe;AACrB,gBAAQA,QAAQ,GAAR,GAActB,KAAKuB,EAApB,GAA2B,GAAlC;AACH,MA1JO;AA2JR8H,iBAAY,oBAAS3I,GAAT,EAAcC,GAAd,EAAmB1D,GAAnB,EAAuB;AAC/B,aAAIqM,IAAJ,EAASC,IAAT;AACA,aAAG7I,MAAMC,GAAN,IAAa1D,MAAMyD,GAAnB,IAA0BzD,MAAM0D,GAAnC,EAAuC;AACnC,oBAAO1D,GAAP;AACH,UAFD,MAEM,IAAG0D,MAAMD,GAAN,KAAezD,MAAM0D,GAAN,IAAa1D,MAAMyD,GAAlC,CAAH,EAA2C;AAC7C,oBAAOzD,GAAP;AACH,UAFK,MAED;AACDqM,oBAAO,KAAKE,YAAL,CAAkB9I,GAAlB,EAAsBzD,GAAtB,CAAP;AACAsM,oBAAO,KAAKC,YAAL,CAAkB7I,GAAlB,EAAsB1D,GAAtB,CAAP;AACA,iBAAGqM,OAAOC,IAAV,EAAe;AACX,wBAAO7I,GAAP;AACH,cAFD,MAEK;AACD,wBAAOC,GAAP;AACH;AACJ;AACJ,MA1KO;AA2KR8I,sBAAgB,yBAASvJ,GAAT,EAAaoB,KAAb,EAAmB;AAC/B,aAAIpF,CAAJ;AAAA,aAAMoE,IAAN;AAAA,aAAW2I,OAAOjJ,KAAKuB,EAAL,GAAU,CAA5B;AAAA,aAA+BsB,KAA/B;AACA,cAAI3G,IAAI,CAAR,EAAWA,IAAIgE,IAAIvD,MAAnB,EAA0BT,GAA1B,EAA8B;AAC1BoE,oBAAO4C,UAAUsG,YAAV,CAAuBtJ,IAAIhE,CAAJ,CAAvB,EAA8BoF,KAA9B,CAAP;AACA,iBAAG2H,OAAO3I,IAAV,EAAe;AACX2I,wBAAO3I,IAAP;AACAuC,yBAAQ3C,IAAIhE,CAAJ,CAAR;AACH;AACJ;AACD,gBAAO2G,KAAP;AACH,MArLO;AAsLR2G,mBAAa,sBAASE,KAAT,EAAeC,IAAf,EAAoB;AAC7B,aAAIC,WAAW5J,KAAKU,GAAL,CAASgJ,KAAT,EAAeC,IAAf,CAAf;AAAA,aACIE,WAAY7J,KAAKW,GAAL,CAAS+I,KAAT,EAAeC,IAAf,CADhB;AAEA,gBAAO3J,KAAKU,GAAL,CAASmJ,WAAWD,QAApB,EAA6BA,WAAW5J,KAAKuB,EAAL,GAAQ,CAAnB,GAAuBsI,QAApD,CAAP;AACH,MA1LO;AA2LRX,qBAAgB,wBAAUjM,GAAV,EAAc;AAC1B,gBAAMA,MAAM,CAAZ,EAAe;AACXA,oBAAM,IAAI+C,KAAKuB,EAAf;AACH;AACD,gBAAMtE,MAAM,IAAI+C,KAAKuB,EAArB,EAAyB;AACrBtE,oBAAM,IAAI+C,KAAKuB,EAAf;AACH;AACD,gBAAOtE,GAAP;AACH,MAnMO;AAoMR6M,eAAU,kBAASC,EAAT,EAAaC,EAAb,EAAgB;AACxB,aAAIC,KAAK,CAAT;AACA,aAAIC,KAAK,CAAT;;AAEAD,cAAKD,GAAGnJ,CAAH,GAAOkJ,GAAGlJ,CAAf;AACAoJ,cAAKA,KAAKA,EAAV;;AAEAC,cAAKF,GAAGlJ,CAAH,GAAOiJ,GAAGjJ,CAAf;AACAoJ,cAAKA,KAAKA,EAAV;;AAEA,gBAAOlK,KAAKoB,IAAL,CAAW6I,KAAKC,EAAhB,CAAP;AACD;AA/MO,EAAZ;;SAkNQzP,K,GAAAA,K;SAAOoJ,S,GAAAA,S;SAAWX,S,GAAAA,S;;;;;;AChU1B;;;;;AAEA,KAAIE,OAAO;AACP+G,uBAAkB,0BAAUrL,OAAV,EAAkB;AAChC,aAAI6I,SAAS7I,QAAQJ,UAArB;AACA,gBAAMiJ,OAAOjJ,UAAP,IAAqBkD,OAAOqG,gBAAP,CAAwBN,MAAxB,EAAgC,UAAhC,MAAgD,QAA3E,EAAoF;AAChFA,sBAASA,OAAOjJ,UAAhB;AACH;AACD,gBAAOiJ,MAAP;AACH,MAPM;AAQPyC,WAAM,cAASrH,IAAT,EAAesH,OAAf,EAAuB;AACzB,gBAAO,YAAU;AACb,oBAAOtH,KAAKuH,KAAL,CAAWD,OAAX,EAAoB,GAAG9M,MAAH,CAAUT,IAAV,CAAeD,SAAf,EAA0B,CAA1B,CAApB,CAAP;AACH,UAFD;AAGH,MAZM;AAaP0N,mBAAc,sBAASzL,OAAT,EAAkB0L,OAAlB,EAA0B;AACpC,aAAItO,CAAJ;AACA,cAAIA,IAAI,CAAR,EAAWA,IAAI4C,QAAQ2L,cAAR,CAAuB9N,MAAtC,EAA8CT,GAA9C,EAAkD;AAC9C,iBAAG4C,QAAQ2L,cAAR,CAAuBvO,CAAvB,EAA0BwO,UAA1B,KAAyCF,OAA5C,EAAoD;AAChD,wBAAO1L,QAAQ2L,cAAR,CAAuBvO,CAAvB,CAAP;AACH;AACJ;AACD,gBAAO,KAAP;AACH,MArBM;AAsBPgM,6BAAwB,gCAASpJ,OAAT,EAAkB6L,KAAlB,EAAwB;AAC5C,gBAAOA,MAAMC,MAAN,CAAa,UAASC,GAAT,EAAcC,IAAd,EAAmB;AACnC,oBAAOD,MAAM7C,SAASpG,OAAOqG,gBAAP,CAAwBnJ,OAAxB,EAAiCgM,IAAjC,KAAwC,CAAjD,CAAb;AACH,UAFM,EAEJ,CAFI,CAAP;AAGH,MA1BM;AA2BPC,uBAAkB,0BAASjM,OAAT,EAAkBX,IAAlB,EAAuB;AACrCW,iBAAQV,UAAR,GAAqBU,QAAQT,YAAR,CAAqBF,IAArB,EAA2BW,QAAQV,UAAnC,CAArB,GAAsEU,QAAQR,WAAR,CAAoBH,IAApB,CAAtE;AACH,MA7BM;AA8BP6M,YAAO,eAASC,KAAT,EAAgBC,IAAhB,EAAsBC,IAAtB,EAA2B;AAC9B,aAAIrC,SAAS,EAAb;AACA,aAAG,OAAOoC,IAAP,KAAgB,WAAnB,EAA+B;AAC3BA,oBAAOD,KAAP;AACAA,qBAAQ,CAAR;AACH;AACD,aAAG,OAAOE,IAAP,KAAgB,WAAnB,EAA+B;AAC3BA,oBAAO,CAAP;AACH;AACD,aAAIA,OAAO,CAAP,IAAYF,SAASC,IAAtB,IAAgCC,OAAO,CAAP,IAAYF,SAASC,IAAxD,EAA8D;AAC1D,oBAAO,EAAP;AACH;AACD,cAAI,IAAIhP,IAAI+O,KAAZ,EAAmBE,OAAO,CAAP,GAAWjP,IAAIgP,IAAf,GAAsBhP,IAAIgP,IAA7C,EAAmDhP,KAAKiP,IAAxD,EAA6D;AACzDrC,oBAAO5L,IAAP,CAAYhB,CAAZ;AACH;AACD,gBAAO4M,MAAP;AACH,MA9CM;AA+CPsC,eAAU,kBAAStM,OAAT,EAAkByG,KAAlB,EAAwB;AAC9BA,iBAAQA,SAAS,EAAjB;AACA,aAAI8F,UAAU,EAAd;AAAA,aAAkBC,GAAlB;AACA,cAAIA,GAAJ,IAAW/F,KAAX,EAAiB;AACb,iBAAGA,MAAMgG,cAAN,CAAqBD,GAArB,CAAH,EAA6B;AACzBD,4BAAWC,MAAM,IAAN,GAAa/F,MAAM+F,GAAN,CAAb,GAA0B,IAArC;AACH;AACJ;;AAEDxM,iBAAQyG,KAAR,CAAc8F,OAAd,GAAwBA,OAAxB;AACH,MAzDM;AA0DPG,kBAAY,uBAAU;AAClB,aAAIC,MAAM,SAANA,GAAM,GAAU;AACZ,oBAAOzL,KAAK0L,KAAL,CAAW1L,KAAK2L,MAAL,KAAc,GAAzB,CAAP;AACH,UAFL;AAAA,aAGIC,cAAc,SAAdA,WAAc,CAASC,KAAT,EAAe;AACzB,iBAAIC,MAAMD,MAAMxI,QAAN,CAAe,EAAf,CAAV;AACA,oBAAMyI,IAAInP,MAAJ,GAAa,CAAnB,EAAqB;AACjBmP,uBAAM,MAAMA,GAAZ;AACH;AACD,oBAAOA,GAAP;AACH,UATL;AAAA,aAUIC,MAAMN,KAVV;AAAA,aAWIO,QAAQP,KAXZ;AAAA,aAYIQ,OAAOR,KAZX;;AAcA,gBAAO,MAAMG,YAAYG,GAAZ,CAAN,GAAyBH,YAAYI,KAAZ,CAAzB,GAA8CJ,YAAYK,IAAZ,CAArD;AACH,MA1EM;AA2EPC,mBAAc,sBAASC,IAAT,EAAeC,QAAf,EAAwB;AAClC,aAAIC,MAAJ;AACA,aAAGzK,OAAOqG,gBAAP,CAAwBkE,IAAxB,EAA8BrI,QAA9B,KAA2C,QAA9C,EAAuD;AACnDqI,kBAAK5G,KAAL,CAAWzB,QAAX,GAAsB,UAAtB;AACH;AACDuI,kBAAShH,SAASiH,aAAT,CAAuB,QAAvB,CAAT;AACAD,gBAAOE,YAAP,CAAoB,OAApB,EAA6BH,SAASrI,IAAT,CAAclD,CAAd,GAAkB,IAA/C;AACAwL,gBAAOE,YAAP,CAAoB,QAApB,EAA8BH,SAASrI,IAAT,CAAcjD,CAAd,GAAkB,IAAhD;AACAsC,cAAKgI,QAAL,CAAciB,MAAd,EAAsB;AAClBvI,uBAAU,UADQ;AAElB0B,mBAAM4G,SAAStI,QAAT,CAAkBhD,CAAlB,GAAsB,IAFV;AAGlB2E,kBAAK2G,SAAStI,QAAT,CAAkBhD,CAAlB,GAAsB,IAHT;AAIlB4E,oBAAO0G,SAASrI,IAAT,CAAclD,CAAd,GAAkB,IAJP;AAKlB8E,qBAAQyG,SAASrI,IAAT,CAAcjD,CAAd,GAAkB;AALR,UAAtB;AAOAsC,cAAK2H,gBAAL,CAAsBoB,IAAtB,EAA4BE,MAA5B;AACA,gBAAOA,MAAP;AACH;AA5FM,EAAX;;mBA+FejJ,I;;;;;;;ACjGf;;;;;;;AAGA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AAEA,KAAID,SAAS,EAAEC,oBAAF,EAAQ/H,2BAAR,EAAmBC,iCAAnB,EAAiCkR,sBAAjC,EAAb,C,CAAqD;;AAErD,KAAIC,UAAU,kBAAkB7K,MAAhC;AAAA,KAAwC8K,cAAc;AAClDzB,YAAO,WAD2C;AAElD0B,WAAM,WAF4C;AAGlDC,UAAK;AAH6C,EAAtD;AAAA,KAIGC,cAAc;AACb5B,YAAO,YADM;AAEb0B,WAAM,WAFO;AAGbC,UAAK;AAHQ,EAJjB;AAAA,KASAE,SAASL,UAAUI,WAAV,GAAwBH,WATjC;AAAA,KAUAK,aAAa,EAVb;AAAA,KAWAC,oBAAoB,SAApBA,iBAAoB,CAASC,SAAT,EAAmB;AACnC,SAAIC,UAAU,4EAAd;AACA,SAAGH,WAAW1P,IAAX,CAAgB,UAAS8P,QAAT,EAAkB;AACjC,gBAAOF,UAAUnO,OAAV,KAAsBqO,SAASrO,OAAtC;AACH,MAFE,CAAH,EAEG;AACC,eAAMoO,OAAN;AACH;AACDH,gBAAW7P,IAAX,CAAgB+P,SAAhB;AACH,EAnBD;AAAA,KAoBAG,oBAAoB,wCAAiB,WAAjB,CApBpB;AAAA,KAqBAC,qBAAqB,wCAAiB,YAAjB,CArBrB;;AAuBA;;AAEA,UAAS3S,SAAT,CAAmBoE,OAAnB,EAA4BgH,OAA5B,EAAoC;AAChCA,eAAUA,WAAW,EAArB;AACA,SAAI5J,CAAJ;AAAA,SAAOoR,OAAO,IAAd;AAAA,SAAoBC,eAApB;AAAA,SAAqC5F,SAAS7B,QAAQ6B,MAAR,IAAkBxE,OAAOC,IAAP,CAAY+G,gBAAZ,CAA6BrL,OAA7B,CAAhE;AACA,UAAKgH,OAAL,GAAe;AACX6B,iBAAQA,MADG;AAEXlH,gBAAO0C,OAAO7H,YAAP,CAAoB6H,OAAO9H,SAAP,CAAiByD,OAArC,EAA8C6I,MAA9C,EAAsDA,MAAtD,CAFI;AAGX6F,sBAAa,KAHF;AAIX5F,2BAAkB,KAJP;AAKX9D,mBAAU;AALC,MAAf;AAOA,UAAI5H,CAAJ,IAAS4J,OAAT,EAAiB;AACb,aAAGA,QAAQyF,cAAR,CAAuBrP,CAAvB,CAAH,EAA6B;AACzB,kBAAK4J,OAAL,CAAa5J,CAAb,IAAkB4J,QAAQ5J,CAAR,CAAlB;AACH;AACJ;AACD,UAAKuR,KAAL,GAAa,IAAItK,OAAOqJ,KAAX,CAAiB,IAAjB,EAAuB,EAAEkB,WAAW,IAAb,EAAmBC,cAAc,IAAjC,EAAvB,CAAb;AACA,UAAKC,MAAL,GAAc,IAAIzK,OAAOqJ,KAAX,CAAiB,IAAjB,CAAd;AACA,UAAKqB,OAAL,GAAe,IAAI1K,OAAOqJ,KAAX,CAAiB,IAAjB,CAAf;;AAEA,UAAKiB,KAAL,CAAWnK,GAAX,CAAe,YAAU;AACrB,cAAKqJ,IAAL,CAAU,KAAK7I,QAAf,EAAyB,CAAzB,EAA4B,IAA5B,EAAkC,IAAlC;AACH,MAFD;;AAIA,SAAGgC,QAAQ2H,KAAX,EAAiB;AACb,cAAKA,KAAL,CAAWnK,GAAX,CAAewC,QAAQ2H,KAAvB;AACH;AACD,SAAG3H,QAAQ8H,MAAX,EAAkB;AACd,cAAKA,MAAL,CAAYtK,GAAZ,CAAgBwC,QAAQ8H,MAAxB;AACH;AACD,SAAG9H,QAAQ+H,OAAX,EAAmB;AACf,cAAKA,OAAL,CAAavK,GAAb,CAAiBwC,QAAQ+H,OAAzB;AACH;AACD,UAAK/O,OAAL,GAAeA,OAAf;AACA,UAAK2B,KAAL,GAAa,KAAKqF,OAAL,CAAarF,KAA1B;AACAuM,uBAAkB,IAAlB;AACAM,UAAKQ,IAAL;AACH;;AAEDpT,WAAU0B,SAAV,CAAoB0R,IAApB,GAA2B,YAAU;AACjC,UAAKC,OAAL,GAAe,IAAf;AACA,UAAK9I,MAAL,GAAc,iBAAU8C,SAAV,CAAoB,KAAKjJ,OAAzB,EAAkC,KAAKgH,OAAL,CAAa6B,MAA/C,EAAuD,IAAvD,CAAd;AACA,UAAKqG,WAAL,GAAmB,KAAK/I,MAAxB;AACA,UAAKnB,QAAL,GAAgB,KAAKmB,MAArB;AACA,SAAG,KAAKa,OAAL,CAAahC,QAAhB,EAAyB;AACrB,cAAKmK,YAAL,GAAoB,KAAKnI,OAAL,CAAahC,QAAjC;AACA,cAAK6I,IAAL,CAAU,KAAKsB,YAAf,EAA6B,CAA7B,EAAgC,IAAhC,EAAsC,IAAtC;AACH,MAHD,MAGO;AACH,cAAKA,YAAL,GAAoB,KAAKhJ,MAAzB;AACH;AACD,UAAKiJ,UAAL,GAAkB/K,OAAOC,IAAP,CAAYgH,IAAZ,CAAiB,KAAK+D,SAAtB,EAAiC,IAAjC,CAAlB;AACA,UAAKC,iBAAL,GAAyBjL,OAAOC,IAAP,CAAYgH,IAAZ,CAAiB,KAAKiE,gBAAtB,EAAwC,IAAxC,CAAzB;AACA,UAAKC,SAAL,GAAiBnL,OAAOC,IAAP,CAAYgH,IAAZ,CAAiB,KAAKmE,QAAtB,EAAgC,IAAhC,CAAjB;AACA,UAAKC,QAAL,GAAgBrL,OAAOC,IAAP,CAAYgH,IAAZ,CAAiB,KAAKqE,OAAtB,EAA+B,IAA/B,CAAhB;;AAEA,SAAG,KAAK3I,OAAL,CAAa4I,YAAhB,EAA8B;AAC1B,cAAK5P,OAAL,CAAa6P,gBAAb,CAA8B9B,YAAY5B,KAA1C,EAAiD,KAAKmD,iBAAtD;AACA,cAAKtP,OAAL,CAAa6P,gBAAb,CAA8BjC,YAAYzB,KAA1C,EAAiD,KAAKmD,iBAAtD;AACH,MAHD,MAGO;AACH,cAAKtP,OAAL,CAAa6P,gBAAb,CAA8B9B,YAAY5B,KAA1C,EAAiD,KAAKiD,UAAtD;AACA,cAAKpP,OAAL,CAAa6P,gBAAb,CAA8BjC,YAAYzB,KAA1C,EAAiD,KAAKiD,UAAtD;AACH;;AAED,UAAKzN,KAAL,CAAWmO,OAAX,IAAsB,KAAKnO,KAAL,CAAWmO,OAAX,EAAtB;AACH,EAzBD;;AA2BAlU,WAAU0B,SAAV,CAAoByS,MAApB,GAA6B,YAAU;AACnC,UAAK5J,MAAL,GAAc,iBAAU8C,SAAV,CAAoB,KAAKjJ,OAAzB,EAAkC,KAAKgH,OAAL,CAAa6B,MAA/C,EAAuD,IAAvD,CAAd;AACA,UAAKqG,WAAL,GAAmB,KAAK/I,MAAxB;AACA,UAAKnB,QAAL,GAAgB,KAAKmB,MAArB;AACA,SAAG,KAAKa,OAAL,CAAahC,QAAhB,EAAyB;AACrB,cAAKmK,YAAL,GAAoB,KAAKnI,OAAL,CAAahC,QAAjC;AACA,cAAK6I,IAAL,CAAU,KAAKsB,YAAf,EAA6B,CAA7B,EAAgC,IAAhC,EAAsC,IAAtC;AACH,MAHD,MAGO;AACH,cAAKA,YAAL,GAAoB,KAAKhJ,MAAzB;AACH;;AAED,UAAKxE,KAAL,CAAWmO,OAAX,IAAsB,KAAKnO,KAAL,CAAWmO,OAAX,EAAtB;AACH,EAZD;;AAcAlU,WAAU0B,SAAV,CAAoB0S,OAApB,GAA8B,UAASC,UAAT,EAAoB;AAC9C,YAAO,iBAAUjH,gBAAV,CAA2B,KAAKhJ,OAAhC,EAAyC,KAAKgH,OAAL,CAAa8B,gBAAtD,CAAP;AACH,EAFD;;AAIAlN,WAAU0B,SAAV,CAAoB4S,WAApB,GAAkC,YAAU;AACxC,UAAKlL,QAAL,GAAgB,KAAKmB,MAAL,CAAY3B,GAAZ,CAAgB,KAAK2L,kBAAL,IAA2B,iBAAU,CAAV,EAAa,CAAb,CAA3C,CAAhB;AACA,YAAO,KAAKnL,QAAZ;AACH,EAHD;;AAKApJ,WAAU0B,SAAV,CAAoBgI,SAApB,GAAgC,YAAU;AACtC,YAAO,KAAKN,QAAL,CAAcR,GAAd,CAAkB,KAAKwL,OAAL,GAAerL,IAAf,CAAoB,GAApB,CAAlB,CAAP;AACH,EAFD;;AAIA/I,WAAU0B,SAAV,CAAoB8S,aAApB,GAAoC,UAAStG,KAAT,EAAe;AAC/C,UAAKqG,kBAAL,GAA0BrG,KAA1B;;AAEA,SAAIuG,YAAY,KAAKrQ,OAAL,CAAayG,KAAb,CAAmB6H,iBAAnB,CAAhB;AAAA,SACIgC,eAAe,kBAAkBxG,MAAM/H,CAAxB,GAA4B,KAA5B,GAAoC+H,MAAM9H,CAA1C,GAA8C,UADjE;;AAGA,SAAIuO,KAAKzN,OAAO0N,SAAP,CAAiBC,SAA1B;AACA,SAAIC,OAAOH,GAAGI,OAAH,CAAW,OAAX,CAAX;;AAEA,SAAGD,IAAH,EAAS;AACLJ,wBAAe,gBAAgBxG,MAAM/H,CAAtB,GAA0B,KAA1B,GAAkC+H,MAAM9H,CAAxC,GAA4C,KAA3D;AACA,aAAG,CAAC,qBAAqBlD,IAArB,CAA0BuR,SAA1B,CAAJ,EAAyC;AACrCA,0BAAaC,YAAb;AACH,UAFD,MAEK;AACDD,yBAAYA,UAAUpR,OAAV,CAAkB,oBAAlB,EAAwCqR,YAAxC,CAAZ;AACH;AACJ,MAPD,MAOO;AACH,aAAG,CAAC,uBAAuBxR,IAAvB,CAA4BuR,SAA5B,CAAJ,EAA2C;AACvCA,0BAAaC,YAAb;AACH,UAFD,MAEK;AACDD,yBAAYA,UAAUpR,OAAV,CAAkB,sBAAlB,EAA0CqR,YAA1C,CAAZ;AACH;AACJ;;AAED,UAAKtQ,OAAL,CAAayG,KAAb,CAAmB6H,iBAAnB,IAAwC+B,SAAxC;AACH,EAzBD;;AA2BAzU,WAAU0B,SAAV,CAAoBuQ,IAApB,GAA2B,UAAS/D,KAAT,EAAgB8G,IAAhB,EAAsBC,KAAtB,EAA6BC,QAA7B,EAAsC;AAC7D,SAAItC,OAAO,IAAX;AACAoC,YAAOA,QAAQ,CAAf;AACA9G,aAAQA,MAAM7M,KAAN,EAAR;AACA,SAAG4T,KAAH,EAAS;AACL,cAAK3B,WAAL,GAAmBpF,KAAnB;AACH;;AAED,UAAKiH,kBAAL,CAAwBjH,KAAxB;;AAEA,UAAK9E,QAAL,GAAgB8E,KAAhB;;AAEAyE,4BAAuBC,KAAKxO,OAAL,CAAayG,KAAb,CAAmB8H,kBAAnB,IAAyCqC,OAAO,IAAvE;AACApC,UAAK4B,aAAL,CAAmBtG,MAAMpF,GAAN,CAAU8J,KAAKrI,MAAf,CAAnB;AACA2K,iBAAYtC,KAAKM,MAAL,CAAYkC,IAAZ,EAAZ;AACH,EAfD;;AAiBApV,WAAU0B,SAAV,CAAoB2T,eAApB,GAAsC,YAAU;AAC5C,UAAKC,WAAL,CAAiB,KAAKhB,WAAL,EAAjB;AACH,EAFD;;AAIAtU,WAAU0B,SAAV,CAAoB4T,WAApB,GAAkC,UAASpH,KAAT,EAAe;AAC7CA,aAAQA,MAAM7M,KAAN,EAAR;AACA,UAAK+H,QAAL,GAAgB8E,KAAhB;;AAEAyE,4BAAuB,KAAKvO,OAAL,CAAayG,KAAb,CAAmB8H,kBAAnB,IAAyC,KAAhE;AACA,UAAK6B,aAAL,CAAmBtG,MAAMpF,GAAN,CAAU,KAAKyB,MAAf,CAAnB;AACH,EAND;;AAQAvK,WAAU0B,SAAV,CAAoB6T,iBAApB,GAAwC,YAAU;AAC9C5C,4BAAuB,KAAKvO,OAAL,CAAayG,KAAb,CAAmB8H,kBAAnB,IAAyC,KAAhE;AACH,EAFD;;AAIA3S,WAAU0B,SAAV,CAAoByT,kBAApB,GAAyC,UAASjH,KAAT,EAAe;AACpD,UAAKsH,aAAL,GAAsB,KAAKpM,QAAL,CAAcjD,CAAd,GAAkB+H,MAAM/H,CAA9C;AACA,UAAKsP,cAAL,GAAuB,KAAKrM,QAAL,CAAcjD,CAAd,GAAkB+H,MAAM/H,CAA/C;AACA,UAAKuP,WAAL,GAAoB,KAAKtM,QAAL,CAAchD,CAAd,GAAkB8H,MAAM9H,CAA5C;AACA,UAAKuP,aAAL,GAAsB,KAAKvM,QAAL,CAAchD,CAAd,GAAkB8H,MAAM9H,CAA9C;AACH,EALD;;AAOApG,WAAU0B,SAAV,CAAoBiS,gBAApB,GAAuC,UAASiC,YAAT,EAAsB;AACzD,SAAIC,eAAgB9D,WAAY6D,wBAAwBE,UAAxD;AAAA,SACIC,kBAAkB,iBACdF,eAAeD,aAAa7F,cAAb,CAA4B,CAA5B,EAA+BiG,KAA9C,GAAsDJ,aAAaK,OADrD,EAEdJ,eAAeD,aAAa7F,cAAb,CAA4B,CAA5B,EAA+BmG,KAA9C,GAAsDN,aAAaO,OAFrD,CADtB;AAAA,SAKIvD,OAAO,IALX;;AAOA,SAAGgD,aAAaQ,QAAhB,EAA0B;;AAE1B,cAASC,aAAT,CAAuBC,KAAvB,EAA6B;AACzB,aAAIT,eAAgB9D,WAAYuE,iBAAiBR,UAAjD;AAAA,aACIS,aAAa,iBACTV,eAAeS,MAAMvG,cAAN,CAAqB,CAArB,EAAwBiG,KAAvC,GAA+CM,MAAML,OAD5C,EAETJ,eAAeS,MAAMvG,cAAN,CAAqB,CAArB,EAAwBmG,KAAvC,GAA+CI,MAAMH,OAF5C,CADjB;;AAMA,aAAG7Q,KAAKI,GAAL,CAAS6Q,WAAWpQ,CAAX,GAAa4P,gBAAgB5P,CAAtC,IAA2C,CAA3C,IACIb,KAAKI,GAAL,CAAS6Q,WAAWnQ,CAAX,GAAa2P,gBAAgB3P,CAAtC,IAA2C,CADlD,EACqD;;AAEjDuE,sBAAS6L,mBAAT,CAA6BrE,YAAYF,IAAzC,EAA+CoE,aAA/C;AACA1L,sBAAS6L,mBAAT,CAA6BxE,YAAYC,IAAzC,EAA+CoE,aAA/C;;AAEAI,4BAAeC,kBAAf,CAAkC9D,IAAlC,EAAwCgD,YAAxC;AACAhD,kBAAKa,SAAL,CAAemC,YAAf;AACH;AACJ;;AAED,cAASe,mBAAT,CAA6BL,KAA7B,EAAmC;AAC/B3L,kBAAS6L,mBAAT,CAA6BrE,YAAYF,IAAzC,EAA+CoE,aAA/C;AACA1L,kBAAS6L,mBAAT,CAA6BxE,YAAYC,IAAzC,EAA+CoE,aAA/C;;AAEA1L,kBAAS6L,mBAAT,CAA6BrE,YAAYD,GAAzC,EAA8CyE,mBAA9C;AACAhM,kBAAS6L,mBAAT,CAA6BxE,YAAYE,GAAzC,EAA8CyE,mBAA9C;AACH;;AAEDhM,cAASsJ,gBAAT,CAA0B9B,YAAYF,IAAtC,EAA4CoE,aAA5C;AACA1L,cAASsJ,gBAAT,CAA0BjC,YAAYC,IAAtC,EAA4CoE,aAA5C;;AAEA1L,cAASsJ,gBAAT,CAA0B9B,YAAYD,GAAtC,EAA2CyE,mBAA3C;AACAhM,cAASsJ,gBAAT,CAA0BjC,YAAYE,GAAtC,EAA2CyE,mBAA3C;AACH,EAzCD;;AA2CA3W,WAAU0B,SAAV,CAAoB+R,SAApB,GAAgC,UAAS6C,KAAT,EAAe;AAC3C,UAAKM,YAAL,GAAoBN,KAApB;AACA,SAAG,CAAC,KAAKjD,OAAN,IAAmB,KAAKjI,OAAL,CAAa0H,WAAb,IAA4B,CAAC,KAAK1H,OAAL,CAAa0H,WAAb,CAAyBwD,KAAzB,CAAnD,EAAoF;AAChF;AACH;;AAED,SAAIT,eAAgB9D,WAAYuE,iBAAiBR,UAAjD;;AAEA,UAAKe,gBAAL,GAAwB,iBAAUhB,eAAeS,MAAMvG,cAAN,CAAqB,CAArB,EAAwBiG,KAAvC,GAA+CM,MAAML,OAA/D,EAAwEJ,eAAeS,MAAMvG,cAAN,CAAqB,CAArB,EAAwBmG,KAAvC,GAA+CI,MAAMH,OAA7H,CAAxB;;AAEA,UAAKW,cAAL,GAAsB,KAAKxC,WAAL,EAAtB;AACA,SAAGuB,YAAH,EAAgB;AACZ,cAAKkB,QAAL,GAAgBT,MAAMvG,cAAN,CAAqB,CAArB,EAAwBC,UAAxC;AACH;AACDsG,WAAMU,eAAN;AACA,SAAG,EAAEV,MAAMW,MAAN,YAAwBC,gBAAxB,IACEZ,MAAMW,MAAN,YAAwBC,gBAD5B,CAAH,EACiD;AAC7CZ,eAAMa,cAAN;AACH,MAHD,MAGK;AACDb,eAAMW,MAAN,CAAaG,KAAb;AACH;;AAEDzM,cAASsJ,gBAAT,CAA0B9B,YAAYF,IAAtC,EAA4C,KAAK2B,SAAjD;AACAjJ,cAASsJ,gBAAT,CAA0BjC,YAAYC,IAAtC,EAA4C,KAAK2B,SAAjD;;AAEAjJ,cAASsJ,gBAAT,CAA0B9B,YAAYD,GAAtC,EAA2C,KAAK4B,QAAhD;AACAnJ,cAASsJ,gBAAT,CAA0BjC,YAAYE,GAAtC,EAA2C,KAAK4B,QAAhD;;AAEA,UAAKuD,QAAL,GAAgB,IAAhB;;AAEA,UAAKlE,OAAL,CAAaiC,IAAb,CAAkBkB,KAAlB;AACA,UAAKlS,OAAL,CAAahB,QAAb,CAAsB,QAAtB;AACA,UAAK8P,MAAL,CAAYkC,IAAZ,CAAiBkB,KAAjB;AACH,EAjCD;;AAmCAtW,WAAU0B,SAAV,CAAoBmS,QAApB,GAA+B,UAASyC,KAAT,EAAe;AAC1C,UAAKM,YAAL,GAAoBN,KAApB;;AAEA,SAAIgB,KAAJ,EAAWf,UAAX,EAAuBrI,KAAvB;;AAEA,SAAI2H,eAAgB9D,WAAYuE,iBAAiBR,UAAjD;;AAEA,SAAGD,YAAH,EAAgB;AACZ,aAAG,EAAEyB,QAAQ7O,OAAOC,IAAP,CAAYmH,YAAZ,CAAyByG,KAAzB,EAAgC,KAAKS,QAArC,CAAV,CAAH,EAA6D;AACzD;AACH;AACJ;AACDT,WAAMU,eAAN;AACAV,WAAMa,cAAN;AACAZ,kBAAa,iBAAUV,eAAeyB,MAAMtB,KAArB,GAA6BM,MAAML,OAA7C,EAAsDJ,eAAeyB,MAAMpB,KAArB,GAA6BI,MAAMH,OAAzF,CAAb;AACAjI,aAAQ,KAAK4I,cAAL,CAAoBlO,GAApB,CAAwB2N,WAAWzN,GAAX,CAAe,KAAK+N,gBAApB,CAAxB,CAAR;AACA3I,aAAQ,KAAKnI,KAAL,CAAWmI,KAAX,EAAkB,KAAKkG,OAAL,EAAlB,CAAR;AACA,UAAKmC,UAAL,GAAkBA,UAAlB;AACA,UAAKtE,IAAL,CAAU/D,KAAV,EAAiB,CAAjB;AACH,EAnBD;;AAqBAlO,WAAU0B,SAAV,CAAoBqS,OAApB,GAA8B,UAASuC,KAAT,EAAe;AACzC,SAAIgB,KAAJ;;AAEA,SAAIzB,eAAgB9D,WAAYuE,iBAAiBR,UAAjD;;AAEA,SAAGD,YAAH,EAAgB;AACZ,aAAG,EAAEyB,QAAQ7O,OAAOC,IAAP,CAAYmH,YAAZ,CAAyByG,KAAzB,EAAgC,KAAKS,QAArC,CAAV,CAAH,EAA6D;AACzD;AACH;AACJ;AACDT,WAAMU,eAAN;AACAV,WAAMa,cAAN;AACA,UAAKpE,KAAL,CAAWqC,IAAX,CAAgBkB,KAAhB;;AAEA3L,cAAS6L,mBAAT,CAA6BrE,YAAYF,IAAzC,EAA+C,KAAK2B,SAApD;AACAjJ,cAAS6L,mBAAT,CAA6BxE,YAAYC,IAAzC,EAA+C,KAAK2B,SAApD;;AAEAjJ,cAAS6L,mBAAT,CAA6BrE,YAAYD,GAAzC,EAA8C,KAAK4B,QAAnD;AACAnJ,cAAS6L,mBAAT,CAA6BxE,YAAYE,GAAzC,EAA8C,KAAK4B,QAAnD;;AAEA,UAAKuD,QAAL,GAAgB,KAAhB;AACA,UAAKjT,OAAL,CAAad,WAAb,CAAyB,QAAzB;AACH,EAtBD;;AAwBAtD,WAAU0B,SAAV,CAAoB6V,YAApB,GAAmC,YAAU;AACzC,YAAO,qBAAc,KAAKnO,QAAnB,EAA6B,KAAKgL,OAAL,EAA7B,CAAP;AACH,EAFD;;AAIApU,WAAU0B,SAAV,CAAoBwS,OAApB,GAA8B,YAAU;AACpC,UAAKE,OAAL,CAAa,IAAb;AACA,UAAKrO,KAAL,CAAWmO,OAAX,IAAsB,KAAKnO,KAAL,CAAWmO,OAAX,EAAtB;AACH,EAHD;;AAKAlU,WAAU0B,SAAV,CAAoB8V,OAApB,GAA8B,YAAU;AACpC,UAAKpT,OAAL,CAAaoS,mBAAb,CAAiCrE,YAAY5B,KAA7C,EAAoD,KAAKiD,UAAzD;AACA,UAAKpP,OAAL,CAAaoS,mBAAb,CAAiCxE,YAAYzB,KAA7C,EAAoD,KAAKiD,UAAzD;AACA,UAAKpP,OAAL,CAAaoS,mBAAb,CAAiCrE,YAAYF,IAA7C,EAAmD,KAAK2B,SAAxD;AACA,UAAKxP,OAAL,CAAaoS,mBAAb,CAAiCxE,YAAYC,IAA7C,EAAmD,KAAK2B,SAAxD;AACA,UAAKxP,OAAL,CAAaoS,mBAAb,CAAiCrE,YAAYD,GAA7C,EAAkD,KAAK4B,QAAvD;AACA,UAAK1P,OAAL,CAAaoS,mBAAb,CAAiCxE,YAAYE,GAA7C,EAAkD,KAAK4B,QAAvD;;AAEA,UAAKf,KAAL,CAAW0E,KAAX;AACA,UAAKvE,MAAL,CAAYuE,KAAZ;AACH,EAVD;;AAYAzX,WAAU0B,SAAV,CAAoBoG,gBAApB,CAAqC,QAArC,EAA+C,YAAU;AACrD,YAAO,KAAKuL,OAAZ;AACH,EAFD;;AAIArT,WAAU0B,SAAV,CAAoBgW,gBAApB,CAAqC,QAArC,EAA+C,UAASC,MAAT,EAAiB;AAC5D,SAAGA,MAAH,EAAW;AACP,cAAKvT,OAAL,CAAad,WAAb,CAAyB,SAAzB;AACH,MAFD,MAEO;AACH,cAAKc,OAAL,CAAahB,QAAb,CAAsB,SAAtB;AACH;;AAED,YAAO,KAAKiQ,OAAL,GAAesE,MAAtB;AACH,EARD;;SAUQ3X,S,GAAAA,S;SAAWqS,U,GAAAA,U;SAAYD,M,GAAAA,M;;;;;;ACjWnC;;;;;AAEI,UAASN,KAAT,CAAenC,OAAf,EAAwBvE,OAAxB,EAAgC;AAC5BA,eAAUA,WAAW,EAArB;AACA,UAAKwM,KAAL,GAAa,EAAb;AACA,UAAKjI,OAAL,GAAeA,OAAf;AACA,UAAKqD,SAAL,GAAiB5H,QAAQ4H,SAAR,IAAqB,KAAtC;AACA,UAAKC,YAAL,GAAoB7H,QAAQ6H,YAAR,IAAwB,KAA5C;AACH;;AAEDnB,OAAMpQ,SAAN,CAAgB0T,IAAhB,GAAuB,YAAU;AAC7B,SAAIyC,OAAO,GAAGC,KAAH,CAAS1V,IAAT,CAAcD,SAAd,CAAX;AAAA,SACIX,CADJ;AAAA,SACOuW,QADP;AAAA,SACiBC,KAAK,KAAKhF,SAAL,GAAiB,KAAK4E,KAAL,CAAWE,KAAX,GAAmBG,OAAnB,EAAjB,GAAgD,KAAKL,KAD3E;;AAGA,UAAIpW,IAAI,CAAR,EAAWA,IAAIwW,GAAG/V,MAAlB,EAA0BT,GAA1B,EAA8B;AAC1BuW,oBAAWC,GAAGxW,CAAH,EAAMoO,KAAN,CAAY,KAAKD,OAAjB,EAA0BkI,IAA1B,CAAX;AACA,aAAG,KAAK5E,YAAL,IAAqB8E,QAAxB,EAAiC;AAC7B,oBAAO,IAAP;AACH;AACJ;AACD,YAAO,CAAC,KAAK9E,YAAb;AACH,EAXD;;AAaAnB,OAAMpQ,SAAN,CAAgBkH,GAAhB,GAAsB,UAASsP,CAAT,EAAW;AAC7B,UAAKN,KAAL,CAAWpV,IAAX,CAAgB0V,CAAhB;AACH,EAFD;;AAIApG,OAAMpQ,SAAN,CAAgByW,OAAhB,GAA0B,UAASD,CAAT,EAAW;AACjC,UAAKN,KAAL,CAAWO,OAAX,CAAmBD,CAAnB;AACH,EAFD;;AAIApG,OAAMpQ,SAAN,CAAgB0W,MAAhB,GAAyB,UAASF,CAAT,EAAW;AAChC,SAAIvS,QAAQ,KAAKiS,KAAL,CAAW7C,OAAX,CAAmBmD,CAAnB,CAAZ;AACA,SAAGvS,UAAU,CAAC,CAAd,EAAgB;AACZ,cAAKiS,KAAL,CAAW/U,MAAX,CAAkB8C,KAAlB,EAAyB,CAAzB;AACH;AACJ,EALD;;AAOAmM,OAAMpQ,SAAN,CAAgB+V,KAAhB,GAAwB,UAASS,CAAT,EAAW;AAC/B,UAAKN,KAAL,GAAa,EAAb;AACH,EAFD;;mBAIe9F,K;;;;;;;AC1CnB;;;;;;;AACA;;AAGC,KAAInR,YAAY;AACdyD,WAAS,CAAC,CADI;AAEd4F,aAAW,CAFG;AAGdqO,SAAO,CAHO;AAIdC,SAAO,CAJO;AAKdC,QAAM,CALQ;AAMdC,0BAAwB,CANV;AAOdC,UAAO,CAPO;AAQdC,OAAI;AARU,EAAhB;;AAWA,UAAS9X,YAAT,CAAsB+X,IAAtB,EAA2B;AAC1B,UAAOA,IAAP;AACC,QAAKhY,UAAUyD,OAAf;AACC,WAAO,UAASA,OAAT,EAAkB6I,MAAlB,EAAyB;AAC/B,SAAIlH,KAAJ;AAAA,SACC6S,UAAU,SAAVA,OAAU,GAAU;AACnB,aAAO7S,MAAM6J,KAAN,CAAY,IAAZ,EAAkBzN,SAAlB,CAAP;AACA,MAHF;;AAKAyW,aAAQ1E,OAAR,GAAkB,YAAU;AAC3BnO,cAAQnF,aAAaD,UAAUqJ,SAAvB,EACP,iBAAUgD,0BAAV,CAAqC5I,OAArC,EAA8C6I,MAA9C,CADO,CAAR;AAGA,MAJD;;AAMA2L,aAAQ1E,OAAR;AACA,YAAO0E,OAAP;AACA,KAdD;AAeD,QAAKjY,UAAUqJ,SAAf;AACC,WAAO,UAAUA,SAAV,EAAoB;AAC1B,YAAO,UAAUkE,KAAV,EAAiB7E,IAAjB,EAAsB;AAC5B,UAAIwP,YAAY3K,MAAM7M,KAAN,EAAhB;AAAA,UACCyX,SAAS9O,UAAUR,KAAV,EADV;;AAGA,UAAGQ,UAAUZ,QAAV,CAAmBjD,CAAnB,GAAuB0S,UAAU1S,CAApC,EAAsC;AACpC0S,iBAAU1S,CAAV,GAAc6D,UAAUZ,QAAV,CAAmBjD,CAAlC;AACA;AACD,UAAG6D,UAAUZ,QAAV,CAAmBhD,CAAnB,GAAuByS,UAAUzS,CAApC,EAAsC;AACrCyS,iBAAUzS,CAAV,GAAc4D,UAAUZ,QAAV,CAAmBhD,CAAjC;AACA;AACD,UAAG0S,OAAO3S,CAAP,GAAW0S,UAAU1S,CAAV,GAAckD,KAAKlD,CAAjC,EAAmC;AAClC0S,iBAAU1S,CAAV,GAAc2S,OAAO3S,CAAP,GAAWkD,KAAKlD,CAA9B;AACA;AACD,UAAG2S,OAAO1S,CAAP,GAAWyS,UAAUzS,CAAV,GAAciD,KAAKjD,CAAjC,EAAmC;AAClCyS,iBAAUzS,CAAV,GAAc0S,OAAO1S,CAAP,GAAWiD,KAAKjD,CAA9B;AACA;AACD,aAAOyS,SAAP;AACA,MAjBD;AAkBA,KAnBD;AAoBD,QAAKlY,UAAU0X,KAAf;AACC,WAAO,UAAUlS,CAAV,EAAa4S,MAAb,EAAqBC,IAArB,EAA0B;AAChC,YAAO,UAAU9K,KAAV,EAAiB7E,IAAjB,EAAsB;AAC5B,UAAIwP,YAAY3K,MAAM7M,KAAN,EAAhB;AACAwX,gBAAU1S,CAAV,GAAcA,CAAd;AACA,UAAG4S,SAASF,UAAUzS,CAAtB,EAAwB;AACvByS,iBAAUzS,CAAV,GAAc2S,MAAd;AACA;AACD,UAAGC,OAAOH,UAAUzS,CAAV,GAAciD,KAAKjD,CAA7B,EAA+B;AAC9ByS,iBAAUzS,CAAV,GAAc4S,OAAO3P,KAAKjD,CAA1B;AACA;AACD,aAAOyS,SAAP;AACA,MAVD;AAWA,KAZD;AAaD,QAAKlY,UAAU2X,KAAf;AACC,WAAO,UAAUlS,CAAV,EAAa6S,MAAb,EAAqBC,IAArB,EAA0B;AAChC,YAAO,UAAUhL,KAAV,EAAiB7E,IAAjB,EAAsB;AAC5B,UAAIwP,YAAY3K,MAAM7M,KAAN,EAAhB;AACAwX,gBAAUzS,CAAV,GAAcA,CAAd;AACA,UAAG6S,SAASJ,UAAU1S,CAAtB,EAAwB;AACvB0S,iBAAU1S,CAAV,GAAc8S,MAAd;AACA;AACD,UAAGC,OAAOL,UAAU1S,CAAV,GAAckD,KAAKlD,CAA7B,EAA+B;AAC9B0S,iBAAU1S,CAAV,GAAc+S,OAAO7P,KAAKlD,CAA1B;AACA;AACD,aAAO0S,SAAP;AACA,MAVD;AAWA,KAZD;AAaD,QAAKlY,UAAU4X,IAAf;AACC,WAAO,UAAUhI,KAAV,EAAiB2B,GAAjB,EAAqB;AAC3B,SAAIlD,QAAQ1J,KAAKmJ,KAAL,CAAWyD,IAAI9L,CAAJ,GAAQmK,MAAMnK,CAAzB,EAA4B8L,IAAI/L,CAAJ,GAAQoK,MAAMpK,CAA1C,CAAZ;AAAA,SACC8I,OAAOD,QAAQ1J,KAAKuB,EAAL,GAAU,CAD1B;AAAA,SAECsS,QAAQ,EAFT;AAAA,SAGCC,UAAU9T,KAAKwI,GAAL,CAASmB,IAAT,CAHX;AAAA,SAICoK,UAAU/T,KAAKyI,GAAL,CAASkB,IAAT,CAJX;;AAMA,YAAO,UAAUf,KAAV,EAAiB7E,IAAjB,EAAsB;AAC5B,UAAIiQ,SAAS,IAAIvZ,KAAJ,CAAUmO,MAAM/H,CAAN,GAAUgT,QAAQC,OAA5B,EAAqClL,MAAM9H,CAAN,GAAU+S,QAAQE,OAAvD,CAAb;AAAA,UACCE,gBAAgB,iBAAU/N,cAAV,CAAyB+E,KAAzB,EAAgC2B,GAAhC,EAAqChE,KAArC,EAA4CoL,MAA5C,CADjB;AAAA,UAECE,SAAS,iBAAU1M,sBAAV,CAAiCoF,GAAjC,EAAsC3B,KAAtC,EAA6ClH,KAAKlD,CAAlD,CAFV;;AAIAoT,sBAAgB,iBAAUlN,WAAV,CAAsBkE,KAAtB,EAA6BiJ,MAA7B,EAAqCD,aAArC,CAAhB;AACA,aAAOA,aAAP;AACA,MAPD;AAQA,KAfD;AAgBD,QAAK5Y,UAAU8X,MAAf;AACC,WAAO,UAAS5K,MAAT,EAAiB/H,MAAjB,EAAwB;AAC9B,YAAO,UAAUoI,KAAV,EAAiB7E,IAAjB,EAAsB;AAC5B,UAAIoQ,eAAe,iBAAU3M,sBAAV,CAAiCe,MAAjC,EAAwCK,KAAxC,EAA8CpI,MAA9C,CAAnB;AACA,aAAO2T,YAAP;AACA,MAHD;AAIA,KALD;AAMD,QAAK9Y,UAAU+X,GAAf;AACC,WAAO,UAAS7K,MAAT,EAAiB/H,MAAjB,EAAyB4T,SAAzB,EAAoCC,QAApC,EAA6C;AACnD,YAAO,UAAUzL,KAAV,EAAiB7E,IAAjB,EAAsB;AAC5B,UAAIuQ,kBAAkB,OAAOF,SAAP,KAAqB,UAArB,GAAkCA,WAAlC,GAAgDA,SAAtE;AAAA,UACCG,iBAAiB,OAAOH,SAAP,KAAqB,UAArB,GAAkCC,UAAlC,GAA+CA,QADjE;AAAA,UAEC/S,QAAQ,iBAAU0H,QAAV,CAAmBT,MAAnB,EAA2BK,KAA3B,CAFT;;AAIAtH,cAAQ,iBAAU4H,cAAV,CAAyB5H,KAAzB,CAAR;AACAA,cAAQ,iBAAU+H,UAAV,CAAqBiL,eAArB,EAAsCC,cAAtC,EAAsDjT,KAAtD,CAAR;AACA,aAAO,iBAAUgH,wBAAV,CAAmChH,KAAnC,EAA0Cd,MAA1C,EAAkD+H,MAAlD,CAAP;AACA,MARD;AASA,KAVD;AA3FF;AAuGA;;SAEQlN,S,GAAAA,S;SAAWC,Y,GAAAA,Y;;;;;;ACzHrB;;;;;;;AAIC;;;;AACA;;;;AACA;;AACA;;AACA;;;;AANA,KAAIkZ,QAAQ,EAAZ;;AAQA,KAAIrR,SAAS,EAAEC,oBAAF,EAAQ/H,2BAAR,EAAmBC,iCAAnB,EAAiCZ,+BAAjC,EAA4CoS,yBAA5C,EAAoDN,sBAApD,EAAb,C,CAAyE;;;AAGzE,UAAS7R,IAAT,CAAcoS,UAAd,EAA0BjH,OAA1B,EAAkC;AACjC,MAAI5J,CAAJ;AACA,OAAK4J,OAAL,GAAe;AACd2O,YAAS,GADK;AAEdC,gBAAa,GAFC;AAGdlU,WAAQ,EAHM;AAIdO,cAAW,iBAAUA,SAAV,EAJG;AAKd4T,mBAAgB;AALF,GAAf;AAOA,OAAIzY,CAAJ,IAAS4J,OAAT,EAAiB;AAChB,OAAGA,QAAQyF,cAAR,CAAuBrP,CAAvB,CAAH,EAA6B;AAC5B,SAAK4J,OAAL,CAAa5J,CAAb,IAAkB4J,QAAQ5J,CAAR,CAAlB;AACA;AACD;AACD,OAAK6Q,UAAL,GAAkBA,UAAlB;AACAyH,QAAMtX,IAAN,CAAW,IAAX;AACA,OAAK0X,QAAL,GAAgB,IAAIzR,OAAOqJ,KAAX,CAAiB,IAAjB,CAAhB;AACA,MAAG1G,WAAWA,QAAQ8O,QAAtB,EAA+B;AAC9B,QAAKA,QAAL,CAActR,GAAd,CAAkBwC,QAAQ8O,QAA1B;AACA;AACD,OAAK9G,IAAL;AACA;;AAEDnT,MAAKyB,SAAL,CAAe0R,IAAf,GAAsB,YAAU;AAC/B,OAAKC,OAAL,GAAe,IAAf;AACA,OAAKhB,UAAL,CAAgB1Q,OAAhB,CAAwB,KAAKwY,aAA7B,EAA4C,IAA5C;AACA,EAHD;;AAKAla,MAAKyB,SAAL,CAAeyY,aAAf,GAA+B,UAAS5H,SAAT,EAAmB;AACjD,MAAI6H,YAAJ;AAAA,MAAiBxH,OAAO,IAAxB;AACAL,YAAUoF,MAAV,GAAmB,KAAKtE,OAAxB;AACA,MAAG,KAAKjI,OAAL,CAAa6O,cAAhB,EAA+B;AAC9BG,kBAAc,uBAAU;AACvB,QAAG,KAAK/C,QAAR,EAAiB;AAChBzE,UAAKO,OAAL,CAAa,IAAb;AACAZ,eAAUW,MAAV,CAAiBkF,MAAjB,CAAwBgC,YAAxB;AACA,YAAO,IAAP;AACA;AACD,IAND;AAOA7H,aAAUQ,KAAV,CAAgBnK,GAAhB,CAAoB,YAAU;AAC7BgK,SAAKyH,kBAAL,CAAwB,IAAxB;AACA9H,cAAUW,MAAV,CAAiBtK,GAAjB,CAAqBwR,YAArB;AACA,WAAO,IAAP;AACA,IAJD;AAKA7H,aAAUW,MAAV,CAAiBtK,GAAjB,CAAqBwR,YAArB;AACA,GAdD,MAcK;AACJ7H,aAAUQ,KAAV,CAAgBnK,GAAhB,CAAoB,YAAU;AAC7BgK,SAAKG,KAAL,CAAW,IAAX;AACA,WAAO,IAAP;AACA,IAHD;AAIA;AACD,EAvBD;;AAyBA9S,MAAKyB,SAAL,CAAe4Y,UAAf,GAA4B,UAAS/H,SAAT,EAAoBnJ,QAApB,EAA8B4L,IAA9B,EAAmC;AAC9D,MAAGzC,UAAU8E,QAAb,EAAsB;AACrB9E,aAAUe,WAAV,GAAwBlK,QAAxB;AACA,GAFD,MAEK;AACJmJ,aAAUN,IAAV,CAAe7I,QAAf,EAAyB4L,IAAzB,EAA+B,IAA/B;AACA;AACD,EAND;;AAQA/U,MAAKyB,SAAL,CAAeqR,KAAf,GAAuB,UAASR,SAAT,EAAmB;AACzC,MAAIgI,eAAe,KAAKC,qBAAL,EAAnB;AAAA,MAAiDC,YAAjD;AAAA,MAA+DC,YAA/D;AACAD,iBAAe,KAAKpI,UAAL,CAAgB0C,OAAhB,CAAwBxC,SAAxB,CAAf;AACAmI,iBAAe,iBAAUnP,gBAAV,CAA2BgP,YAA3B,EAAyChI,UAAUnJ,QAAnD,EAA6D,KAAKgC,OAAL,CAAatF,MAA1E,EAAkF,KAAKsF,OAAL,CAAa/E,SAA/F,CAAf;AACA,MAAGqU,iBAAiB,CAAC,CAAlB,IAAuBA,iBAAiBD,YAA3C,EAAwD;AACvDlI,aAAUN,IAAV,CAAeM,UAAUe,WAAzB,EAAsC,KAAKlI,OAAL,CAAa2O,OAAnD,EAA4D,IAA5D;AACA,GAFD,MAEK;AACJ,QAAKO,UAAL,CAAgB,KAAKjI,UAAL,CAAgBqI,YAAhB,CAAhB,EAA+CH,aAAaE,YAAb,CAA/C,EAA2E,KAAKrP,OAAL,CAAa4O,WAAxF;AACA,QAAK3H,UAAL,CAAgBoI,YAAhB,EAA8BxI,IAA9B,CAAmCsI,aAAaG,YAAb,CAAnC,EAA+D,KAAKtP,OAAL,CAAa2O,OAA5E,EAAqF,IAArF;AACA,QAAKG,QAAL,CAAc9E,IAAd;AACA;AACD,SAAO,IAAP;AACA,EAZD;;AAcAnV,MAAKyB,SAAL,CAAe2Y,kBAAf,GAAoC,UAAS9H,SAAT,EAAmB;AACtD,MAAIkI,YAAJ;AAAA,MAAkBjZ,CAAlB;AAAA,MAAqBmZ,WAArB;AAAA,MACCC,mBAAmB,KAAKC,mBAAL,EADpB;AAAA,MAECN,eAAeK,iBAAiBlY,GAAjB,CAAqB,UAAS6P,SAAT,EAAmB;AACtD,UAAOA,UAAUe,WAAjB;AACA,GAFc,CAFhB;AAKAmH,iBAAeG,iBAAiB7F,OAAjB,CAAyBxC,SAAzB,CAAf;AACAoI,gBAAc,iBAAUpP,gBAAV,CAA2BgP,YAA3B,EAAyChI,UAAUnJ,QAAnD,EAA6D,KAAKgC,OAAL,CAAatF,MAA1E,EAAkF,KAAKsF,OAAL,CAAa/E,SAA/F,CAAd;AACA,MAAGsU,gBAAe,CAAC,CAAnB,EAAqB;AACpB,OAAGA,cAAcF,YAAjB,EAA8B;AAC7B,SAAIjZ,IAAEmZ,WAAN,EAAmBnZ,IAAEiZ,YAArB,EAAmCjZ,GAAnC,EAAuC;AACtC,UAAK8Y,UAAL,CAAgBM,iBAAiBpZ,CAAjB,CAAhB,EAAqC+Y,aAAa/Y,IAAE,CAAf,CAArC,EAAwD,KAAK4J,OAAL,CAAa4O,WAArE;AACA;AACD,IAJD,MAIO;AACN,SAAIxY,IAAEiZ,YAAN,EAAoBjZ,IAAEmZ,WAAtB,EAAmCnZ,GAAnC,EAAuC;AACtC,UAAK8Y,UAAL,CAAgBM,iBAAiBpZ,IAAE,CAAnB,CAAhB,EAAuC+Y,aAAa/Y,CAAb,CAAvC,EAAwD,KAAK4J,OAAL,CAAa4O,WAArE;AACA;AACD;AACDzH,aAAUN,IAAV,CAAesI,aAAaI,WAAb,CAAf,EAA0C,KAAKvP,OAAL,CAAa2O,OAAvD,EAAgE,IAAhE;AACA,GAXD,MAWO;AACNxH,aAAUN,IAAV,CAAeM,UAAUe,WAAzB,EAAsC,KAAKlI,OAAL,CAAa2O,OAAnD,EAA4D,IAA5D;AACA;AACD,EAtBD;;AAwBA9Z,MAAKyB,SAAL,CAAeyR,OAAf,GAAyB,UAASZ,SAAT,EAAmB;AAC3C,MAAIkI,YAAJ;AAAA,MAAiBjZ,CAAjB;AAAA,MACCoZ,mBAAmB,KAAKC,mBAAL,EADpB;AAAA,MAECN,eAAeK,iBAAiBlY,GAAjB,CAAqB,UAAS6P,SAAT,EAAmB;AACtD,UAAOA,UAAUe,WAAjB;AACA,GAFc,CAFhB;;AAMAmH,iBAAeG,iBAAiB7F,OAAjB,CAAyBxC,SAAzB,CAAf;AACA,OAAI/Q,IAAIiZ,eAAe,CAAvB,EAA0BjZ,IAAIoZ,iBAAiB3Y,MAA/C,EAAuDT,GAAvD,EAA2D;AAC1D,QAAK8Y,UAAL,CAAgBM,iBAAiBpZ,CAAjB,CAAhB,EAAoC+Y,aAAa/Y,IAAE,CAAf,CAApC,EAAsD,KAAK4J,OAAL,CAAa4O,WAAnE;AACA;AACDY,mBAAiBH,YAAjB,EAA+BnH,WAA/B,GAA6CiH,aAAa/Y,IAAE,CAAf,CAA7C;AACA,EAZD;;AAgBAvB,MAAKyB,SAAL,CAAe8Y,qBAAf,GAAuC,YAAU;AAChD,SAAO,KAAKnI,UAAL,CAAgB3P,GAAhB,CAAoB,UAAS6P,SAAT,EAAmB;AAC7C,UAAOA,UAAUe,WAAV,CAAsBjS,KAAtB,EAAP;AACA,GAFM,CAAP;AAGA,EAJD;;AAMApB,MAAKyB,SAAL,CAAemZ,mBAAf,GAAqC,YAAU;AAC9C,MAAID,gBAAJ;AAAA,MACCE,gBAAgB,KAAKzI,UAAL,CAAgB3P,GAAhB,CAAoB,UAAS6P,SAAT,EAAmB;AACtD,UAAOA,UAAUgB,YAAjB;AACA,GAFe,CADjB;AAIAqH,qBAAmBE,cAAcpY,GAAd,CAAkB,UAAS0G,QAAT,EAAkB;AACtD,UAAO,KAAKiJ,UAAL,CAAgBhQ,MAAhB,CAAuB,UAASkQ,SAAT,EAAmB;AAChD,WAAOA,UAAUe,WAAV,CAAsBpK,OAAtB,CAA8BE,QAA9B,CAAP;AACA,IAFM,EAEL,IAFK,EAEC,CAFD,CAAP;AAGA,GAJkB,EAIjB,IAJiB,CAAnB;AAKA,SAAOwR,gBAAP;AACA,EAXD;;AAaA3a,MAAKyB,SAAL,CAAe+V,KAAf,GAAuB,YAAU;AAChC,OAAKpF,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAmB;AAC1CA,aAAUN,IAAV,CAAeM,UAAUgB,YAAzB,EAAuC,CAAvC,EAA0C,IAA1C,EAAgD,KAAhD;AACA,GAFD;AAGA,EAJD;;AAMAtT,MAAKyB,SAAL,CAAewS,OAAf,GAAyB,YAAU;AAClC,OAAK7B,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAmB;AAC1CA,aAAU2B,OAAV;AACA,GAFD;AAGA,EAJD;;AAMAjU,MAAKyB,SAAL,CAAekH,GAAf,GAAqB,UAASyJ,UAAT,EAAoB;AACxC,MAAIO,OAAO,IAAX;AACA,MAAG,EAAEP,sBAAsB5Q,KAAxB,CAAH,EAAkC;AACjC4Q,gBAAa,CAACA,UAAD,CAAb;AACA;AACDA,aAAW1Q,OAAX,CAAmB,KAAKwY,aAAxB,EAAuC,IAAvC;AACA,OAAK9H,UAAL,GAAkB,KAAKA,UAAL,CAAgB0I,MAAhB,CAAuB1I,UAAvB,CAAlB;AACA,EAPD;;AASApS,MAAKyB,SAAL,CAAe0W,MAAf,GAAwB,UAAS/F,UAAT,EAAoB;AAC3C,MAAI2I,CAAJ;AAAA,MAAOF,gBAAgB,KAAKzI,UAAL,CAAgB3P,GAAhB,CAAoB,UAAS6P,SAAT,EAAmB;AAC5D,UAAOA,UAAUgB,YAAjB;AACA,GAFqB,CAAvB;AAAA,MAGC0H,OAAO,EAHR;AAAA,MAICL,mBAAmB,KAAKC,mBAAL,EAJpB;AAKA,MAAG,EAAExI,sBAAsB5Q,KAAxB,CAAH,EAAkC;AACjC4Q,gBAAa,CAACA,UAAD,CAAb;AAEA;AACDA,aAAW1Q,OAAX,CAAmB,UAAS4Q,SAAT,EAAmB;AACrCA,aAAUQ,KAAV,CAAgB0E,KAAhB;AACAlF,aAAUW,MAAV,CAAiBuE,KAAjB,GAFqC,CAEZ;AACzB,QAAKpF,UAAL,CAAgBzP,UAAhB,CAA2B2P,SAA3B;AACA9J,UAAOC,IAAP,CAAY0P,MAAZ,CAAmB,KAAK/F,UAAxB,EAAoCE,SAApC;AACA,GALD,EAKG,IALH;AAMAyI,MAAI,CAAJ;AACAJ,mBAAiBjZ,OAAjB,CAAyB,UAAS4Q,SAAT,EAAoB/Q,CAApB,EAAsB;AAC9C,OAAG,KAAK6Q,UAAL,CAAgB0C,OAAhB,CAAwBxC,SAAxB,MAAuC,CAAC,CAA3C,EAA6C;AAC5C,QAAGA,UAAUe,WAAV,KAA0BwH,cAAcE,CAAd,CAA7B,EAA8C;AAC7CzI,eAAUN,IAAV,CAAe6I,cAAcE,CAAd,CAAf,EAAiC,KAAK5P,OAAL,CAAa4O,WAA9C,EAA2D,IAA3D;AACA;AACDzH,cAAUgB,YAAV,GAAyBuH,cAAcE,CAAd,CAAzB;AACAA;AACAC,SAAKzY,IAAL,CAAU+P,SAAV;AACA;AACD,GATD,EASG,IATH;AAUA,OAAKF,UAAL,GAAkB4I,IAAlB;AACA,EA5BD;;AA8BAhb,MAAKyB,SAAL,CAAewZ,KAAf,GAAuB,YAAU;AAChC,OAAK9C,MAAL,CAAY,KAAK/F,UAAL,CAAgByF,KAAhB,EAAZ;AACA,EAFD;;AAIA7X,MAAKyB,SAAL,CAAe8V,OAAf,GAAyB,YAAU;AAClC,OAAKnF,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAmB;AAC1CA,aAAUiF,OAAV;AACA,GAFD;AAGA,EAJD;;AAMAvX,MAAKyB,SAAL,CAAeoG,gBAAf,CAAgC,WAAhC,EAA6C,YAAU;AACtD,SAAO,KAAK0S,qBAAL,EAAP;AACA,EAFD;;AAIAva,MAAKyB,SAAL,CAAegW,gBAAf,CAAgC,WAAhC,EAA6C,UAASyD,SAAT,EAAmB;AAC/D,MAAI3I,UAAU,oBAAd;AACA,MAAG2I,UAAUlZ,MAAV,KAAqB,KAAKoQ,UAAL,CAAgBpQ,MAAxC,EAA+C;AAC9CkZ,aAAUxZ,OAAV,CAAkB,UAASuM,KAAT,EAAgB1M,CAAhB,EAAkB;AACnC,SAAK6Q,UAAL,CAAgB7Q,CAAhB,EAAmByQ,IAAnB,CAAwB/D,KAAxB,EAA+B,CAA/B,EAAkC,IAAlC,EAAwC,IAAxC;AACA,IAFD,EAEG,IAFH;AAGA,GAJD,MAIK;AACJ5G,SAAMkL,OAAN;AACA,SAAMA,OAAN;AACA;AACD,EAVD;;AAYAvS,MAAKyB,SAAL,CAAeoG,gBAAf,CAAgC,QAAhC,EAA0C,YAAU;AACnD,SAAO,KAAKuL,OAAZ;AACA,EAFD;;AAIApT,MAAKyB,SAAL,CAAegW,gBAAf,CAAgC,QAAhC,EAA0C,UAASvP,KAAT,EAAe;AACxD,OAAKkL,OAAL,GAAelL,KAAf;AACA,OAAKkK,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAmB;AAC1CA,aAAUoF,MAAV,GAAmBxP,KAAnB;AACA,GAFD;AAGA,EALD;;AAQA,UAASjI,WAAT,CAAqBkb,aAArB,EAAoCC,QAApC,EAA8CjQ,OAA9C,EAAsD;AACrD,MAAIiH,UAAJ,EAAgBiJ,gBAAhB,EAAkCC,WAAlC;AACAnQ,YAAUA,WAAW,EAArB;AACAkQ,qBAAmBlQ,QAAQmH,SAAR,IAAqB,EAAxC;AACAgJ,gBAAcnQ,QAAQ6P,IAAR,IAAgB,EAA9B;AACAK,mBAAiBrO,MAAjB,GAA0BqO,iBAAiBrO,MAAjB,IAA2BmO,aAArD;AACAC,aAAW5Z,MAAMC,SAAN,CAAgBoW,KAAhB,CAAsB1V,IAAtB,CAA2BiZ,QAA3B,CAAX;;AAEAhJ,eAAagJ,SAAS3Y,GAAT,CAAa,UAAS0B,OAAT,EAAiB;AAC1C,UAAO,IAAIqE,OAAOzI,SAAX,CAAqBoE,OAArB,EAA8BkX,gBAA9B,CAAP;AACA,GAFY,CAAb;;AAIA,SAAO,IAAIrb,IAAJ,CAASoS,UAAT,EAAqBkJ,WAArB,CAAP;AACA;;SAEQzB,K,GAAAA,K;SAAO7Z,I,GAAAA,I;SAAMC,W,GAAAA,W;;;;;;AC3PtB;;;;;;;AAEA;;;;AACA;;;;AACA;;AACA;;AACA;;;;AAEA,KAAIuI,SAAS,EAAEC,oBAAF,EAAQlI,uCAAR,EAAuBE,6CAAvB,EAAwCD,2CAAxC,EAAwDJ,6CAAxD,EAAwEyR,sBAAxE,EAAb,C,CAA6F;;AAE7F,KAAI3R,UAAU,EAAd;;AAEA,UAASC,MAAT,CAAgBgE,OAAhB,EAAyBiO,UAAzB,EAAqCjH,OAArC,EAA6C;AAC5CA,YAAUA,WAAW,EAArB;AACA,MAAI5J,CAAJ;AAAA,MAAOyL,SAAS7B,QAAQ6B,MAAR,IAAkBxE,OAAOC,IAAP,CAAY+G,gBAAZ,CAA6BrL,OAA7B,CAAlC;AACA,OAAKgH,OAAL,GAAe;AACd2O,YAAS,GADK;AAEdC,gBAAa,GAFC;AAGd/M,WAAQA,MAHM;AAIduO,YAAS/S,OAAOhI,cAAP,CAAsBgI,OAAOjI,YAAP,CAAoBib,SAA1C,EAAqD,EAArD,EAAyD,iBAAUpV,SAAV,CAAoB,EAACF,GAAG,CAAJ,EAAOC,GAAG,CAAV,EAAaiF,uBAAuB,IAApC,EAApB,CAAzD,CAJK;AAKdqQ,gBAAajT,OAAO/H,eAAP,CAAuB+H,OAAOjI,YAAP,CAAoBib,SAA3C,EAAsD,KAAKlE,YAAL,CAAkB7H,IAAlB,CAAuB,IAAvB,CAAtD,EAAoF,EAACiM,WAAW,IAAZ,EAApF;AALC,GAAf;AAOA,OAAIna,CAAJ,IAAS4J,OAAT,EAAiB;AAChB,QAAKA,OAAL,CAAa5J,CAAb,IAAkB4J,QAAQ5J,CAAR,CAAlB;AACA;AACDrB,UAAQqC,IAAR,CAAa,IAAb;AACA,OAAK4B,OAAL,GAAeA,OAAf;AACA,OAAKiO,UAAL,GAAkBA,UAAlB;AACA,OAAKuJ,KAAL,GAAa,IAAInT,OAAOqJ,KAAX,CAAiB,IAAjB,CAAb;AACA,OAAK+J,SAAL,GAAiB,IAAIpT,OAAOqJ,KAAX,CAAiB,IAAjB,CAAjB;AACA,OAAKgK,QAAL,GAAgB,IAAIrT,OAAOqJ,KAAX,CAAiB,IAAjB,CAAhB;;AAEA1G,UAAQ0Q,QAAR,IAAoB,KAAKA,QAAL,CAAclT,GAAd,CAAkBwC,QAAQ0Q,QAA1B,CAApB;AACA1Q,UAAQwQ,KAAR,IAAiB,KAAKA,KAAL,CAAWhT,GAAX,CAAewC,QAAQwQ,KAAvB,CAAjB;AACAxQ,UAAQyQ,SAAR,IAAqB,KAAKA,SAAL,CAAejT,GAAf,CAAmBwC,QAAQyQ,SAA3B,CAArB;;AAEA,OAAKzI,IAAL;AACA;;AAEDhT,QAAOsB,SAAP,CAAiB6V,YAAjB,GAAgC,YAAU;AACzC,SAAO,iBAAUvK,0BAAV,CACN,KAAK5I,OADC,EAEN,KAAKgH,OAAL,CAAa6B,MAFP,EAGN,KAAK7B,OAAL,CAAa8B,gBAHP,EAIN,IAJM,CAAP;AAMA,EAPD;;AASA9M,QAAOsB,SAAP,CAAiBqa,cAAjB,GAAkC,UAASxJ,SAAT,EAAmB;AACpD,MAAG,KAAKnH,OAAL,CAAa2Q,cAAhB,EAAgC;AAC/B,UAAO,KAAK3Q,OAAL,CAAa2Q,cAAb,CAA4B,IAA5B,EAAkCxJ,SAAlC,CAAP;AACA,GAFD,MAEO;AACN,OAAIyJ,kBAAkB,KAAKzE,YAAL,EAAtB;AAAA,OACC0E,kBAAkB1J,UAAUgF,YAAV,GAAyB/M,SAAzB,EADnB;;AAGA,UAAOyR,kBAAkBD,gBAAgBxR,SAAhB,EAAlB,IACHwR,gBAAgBlS,YAAhB,CAA6ByI,UAAU7I,SAAV,EAA7B,CADJ;AAEA;AACD,EAVD;;AAYAtJ,QAAOsB,SAAP,CAAiB4S,WAAjB,GAA+B,YAAU;AACxC,SAAO,KAAKiD,YAAL,GAAoBnO,QAA3B;AACA,EAFD;;AAIAhJ,QAAOsB,SAAP,CAAiB0S,OAAjB,GAA2B,YAAU;AACpC,SAAO,KAAKmD,YAAL,GAAoBlO,IAA3B;AACA,EAFD;;AAIAjJ,QAAOsB,SAAP,CAAiB0R,IAAjB,GAAwB,YAAU;AACjC,MAAI8I,UAAJ,EAAgBC,YAAhB;;AAEA,OAAKC,eAAL,GAAuB,KAAK/J,UAAL,CAAgBhQ,MAAhB,CAAuB,UAASkQ,SAAT,EAAmB;AAChE,OAAInO,UAAUmO,UAAUnO,OAAV,CAAkBJ,UAAhC;AACA,UAAMI,OAAN,EAAc;AACb,QAAGA,YAAY,KAAKA,OAApB,EAA4B;AAC3B,YAAO,IAAP;AACA;AACDA,cAAUA,QAAQJ,UAAlB;AACA;AACD,UAAO,KAAP;AACA,GATsB,EASpB,IAToB,CAAvB;;AAWA,MAAG,KAAKoY,eAAL,CAAqBna,MAAxB,EAA+B;AAC9Bka,kBAAe1T,OAAOC,IAAP,CAAY4H,KAAZ,CAAkB,KAAK8L,eAAL,CAAqBna,MAAvC,CAAf;AACAia,gBAAa,KAAK9Q,OAAL,CAAasQ,WAAb,CAAyB,KAAKU,eAAL,CAAqB1Z,GAArB,CAAyB,UAAS6P,SAAT,EAAmB;AACjF,WAAOA,UAAUgF,YAAV,EAAP;AACA,IAFqC,CAAzB,EAET4E,YAFS,CAAb;AAGA,QAAK7G,WAAL,CAAiB4G,UAAjB,EAA6BC,YAA7B;AACA,QAAKC,eAAL,CAAqBza,OAArB,CAA6B,UAAS4Q,SAAT,EAAmB;AAC/C,SAAKqJ,KAAL,CAAWxG,IAAX,CAAgB7C,SAAhB;AACA,IAFD,EAEG,IAFH;AAGA;AACD,EAxBD;;AA0BAnS,QAAOsB,SAAP,CAAiB8V,OAAjB,GAA2B,YAAU;AACpC/O,SAAOpI,cAAP,CAAsBsB,OAAtB,CAA8B,UAAS0a,aAAT,EAAuB;AACpDA,iBAAclc,OAAd,CAAsByC,UAAtB,CAAiC,IAAjC;AACA,GAFD,EAEG,IAFH;AAGA,EAJD;;AAMAxC,QAAOsB,SAAP,CAAiBwS,OAAjB,GAA2B,YAAU;AACpC,MAAIgI,aAAa,KAAK9Q,OAAL,CAAasQ,WAAb,CAAyB,KAAKU,eAAL,CAAqB1Z,GAArB,CAAyB,UAAS6P,SAAT,EAAmB;AACrF,UAAOA,UAAUgF,YAAV,EAAP;AACA,GAFyC,CAAzB,EAEb,EAFa,CAAjB;AAGA,OAAKjC,WAAL,CAAiB4G,UAAjB,EAA6B,EAA7B,EAAiC,CAAjC;AACA,EALD;;AAOA9b,QAAOsB,SAAP,CAAiBqR,KAAjB,GAAyB,UAASR,SAAT,EAAmB;AAC3C,MAAI+J,qBAAqB,EAAzB;AAAA,MACCJ,UADD;AAAA,MAECpS,eAAe,KAAKyN,YAAL,GAAoBzN,YAApB,CAAiCyI,UAAU+B,WAAV,EAAjC,CAFhB;;AAIA,MAAG,CAACxK,YAAJ,EAAiB;AAChB,OAAG,KAAKyN,YAAL,GAAoBzN,YAApB,CAAiCyI,UAAU7I,SAAV,EAAjC,CAAH,EAA4D;AAC3D6I,cAAUnJ,QAAV,GAAqBmJ,UAAU7I,SAAV,GAAsBrI,KAAtB,EAArB;AACA,IAFD,MAEO;AACN,WAAO,KAAP;AACA;AACD;;AAED,OAAKwa,SAAL,CAAezG,IAAf,CAAoB7C,SAApB;;AAEA,OAAK6J,eAAL,GAAuB,KAAKhR,OAAL,CAAaoQ,OAAb,CAAqB,KAAKY,eAA1B,EAA2C,CAAC7J,SAAD,CAA3C,EAAwD+J,kBAAxD,CAAvB;AACAJ,eAAa,KAAK9Q,OAAL,CAAasQ,WAAb,CAAyB,KAAKU,eAAL,CAAqB1Z,GAArB,CAAyB,UAAS6P,SAAT,EAAmB;AACjF,UAAOA,UAAUgF,YAAV,EAAP;AACA,GAFqC,CAAzB,EAET+E,kBAFS,EAEW/J,SAFX,CAAb;;AAIA,OAAK+C,WAAL,CAAiB4G,UAAjB,EAA6BI,kBAA7B;AACA,MAAG,KAAKF,eAAL,CAAqBrH,OAArB,CAA6BxC,SAA7B,MAA4C,CAAC,CAAhD,EAAkD;AACjD,QAAKgK,eAAL,CAAqBhK,SAArB;AACA;AACD,SAAO,IAAP;AACA,EAzBD;;AA2BAnS,QAAOsB,SAAP,CAAiB4T,WAAjB,GAA+B,UAAS4G,UAAT,EAAqBC,YAArB,EAAmCnH,IAAnC,EAAwC;AACtE,OAAKoH,eAAL,CAAqBtE,KAArB,CAA2B,CAA3B,EAA8BnW,OAA9B,CAAsC,UAAS4Q,SAAT,EAAoB/Q,CAApB,EAAsB;AAC3D,OAAIoI,OAAOsS,WAAW1a,CAAX,CAAX;AAAA,OACCoR,OAAO,IADR;AAAA,OAECmH,UAAU/E,QAAQA,QAAQ,CAAhB,GAAoBA,IAApB,GAA2BmH,aAAapH,OAAb,CAAqBvT,CAArB,MAA4B,CAAC,CAA7B,GAAiC,KAAK4J,OAAL,CAAa2O,OAA9C,GAAwD,KAAK3O,OAAL,CAAa4O,WAF3G;;AAIA,OAAGpQ,KAAK+R,SAAR,EAAkB;AACjBpJ,cAAUN,IAAV,CAAeM,UAAUgB,YAAzB,EAAuCwG,OAAvC,EAAgD,IAAhD,EAAsD,IAAtD;AACA,SAAKqC,eAAL,CAAqBxZ,UAArB,CAAgC2P,SAAhC;;AAEA,SAAKuJ,QAAL,CAAc1G,IAAd,CAAmB7C,SAAnB;AACA,IALD,MAKO;AACNA,cAAUN,IAAV,CAAerI,KAAKR,QAApB,EAA8B2Q,OAA9B,EAAuC,IAAvC,EAA6C,IAA7C;AACA;AACD,GAbD,EAaG,IAbH;AAcA,EAfD;;AAiBA3Z,QAAOsB,SAAP,CAAiBkH,GAAjB,GAAuB,UAAS2J,SAAT,EAAoByC,IAApB,EAAyB;AAC/C,MAAIkH,UAAJ;AAAA,MAAgBI,qBAAqB,KAAKF,eAAL,CAAqBna,MAA1D;;AAEA,OAAK4Z,SAAL,CAAezG,IAAf,CAAoB7C,SAApB;;AAEA,OAAKiK,kBAAL,CAAwBjK,SAAxB;AACA2J,eAAa,KAAK9Q,OAAL,CAAasQ,WAAb,CAAyB,KAAKU,eAAL,CAAqB1Z,GAArB,CAAyB,UAAS6P,SAAT,EAAmB;AACjF,UAAOA,UAAUgF,YAAV,EAAP;AACA,GAFqC,CAAzB,EAET+E,kBAFS,EAEW/J,SAFX,CAAb;AAGA,OAAK+C,WAAL,CAAiB4G,UAAjB,EAA6B,CAACI,kBAAD,CAA7B,EAAmDtH,QAAQ,CAA3D;AACA,MAAG,KAAKoH,eAAL,CAAqBrH,OAArB,CAA6BxC,SAA7B,MAA4C,CAAC,CAAhD,EAAkD;AACjD,QAAKgK,eAAL,CAAqBhK,SAArB;AACA;AACD,EAbD;;AAeAnS,QAAOsB,SAAP,CAAiB8a,kBAAjB,GAAsC,UAASjK,SAAT,EAAmB;AACxD,MAAG,KAAK6J,eAAL,CAAqBrH,OAArB,CAA6BxC,SAA7B,MAA0C,CAAC,CAA9C,EAAgD;AAC/C,QAAK6J,eAAL,CAAqB5Z,IAArB,CAA0B+P,SAA1B;AACA;AACD,EAJD;;AAMAnS,QAAOsB,SAAP,CAAiB6a,eAAjB,GAAmC,UAAShK,SAAT,EAAmB;AACrD,MAAIK,OAAO,IAAX;;AAEAL,YAAUW,MAAV,CAAiBtK,GAAjB,CAAqB,KAAK6T,aAAL,GAAqB,YAAU;AACnD7J,QAAKwF,MAAL,CAAY7F,SAAZ;AACA,GAFD;;AAIA,OAAKqJ,KAAL,CAAWxG,IAAX,CAAgB7C,SAAhB;AACA,EARD;;AAUAnS,QAAOsB,SAAP,CAAiB0W,MAAjB,GAA0B,UAAS7F,SAAT,EAAmB;AAC5C,MAAI5M,KAAJ,EAAWuW,UAAX;AACA3J,YAAUW,MAAV,CAAiBkF,MAAjB,CAAwB,KAAKqE,aAA7B;;AAEA9W,UAAQ,KAAKyW,eAAL,CAAqBrH,OAArB,CAA6BxC,SAA7B,CAAR;AACA,MAAG5M,UAAU,CAAC,CAAd,EAAgB;AACf;AACA;;AAED,OAAKyW,eAAL,CAAqBvZ,MAArB,CAA4B8C,KAA5B,EAAmC,CAAnC;;AAEAuW,eAAa,KAAK9Q,OAAL,CAAasQ,WAAb,CAAyB,KAAKU,eAAL,CAAqB1Z,GAArB,CAAyB,UAAS6P,SAAT,EAAmB;AACjF,UAAOA,UAAUgF,YAAV,EAAP;AACA,GAFqC,CAAzB,EAET,EAFS,CAAb;;AAIA,OAAKjC,WAAL,CAAiB4G,UAAjB,EAA6B,EAA7B;AACA,OAAKJ,QAAL,CAAc1G,IAAd,CAAmB7C,SAAnB;AACA,EAjBD;;AAmBAnS,QAAOsB,SAAP,CAAiB+V,KAAjB,GAAyB,YAAU;AAClC,OAAK2E,eAAL,CAAqBza,OAArB,CAA6B,UAAS4Q,SAAT,EAAmB;AAC/CA,aAAUN,IAAV,CAAeM,UAAUgB,YAAzB,EAAuC,CAAvC,EAA0C,IAA1C,EAAgD,IAAhD;AACA,QAAKuI,QAAL,CAAc1G,IAAd,CAAmB7C,SAAnB;AACA,GAHD,EAGG,IAHH;AAIA,OAAK6J,eAAL,GAAuB,EAAvB;AACA,EAND;;AAQAhc,QAAOsB,SAAP,CAAiBmZ,mBAAjB,GAAuC,YAAU;AAChD,OAAKuB,eAAL,CAAqBtE,KAArB;AACA,EAFD;;SAIQ3X,O,GAAAA,O;SAASC,M,GAAAA,M;;;;;;ACrNlB;;;;;;;AACA;;AAEC,KAAII,eAAe;AACjBkc,eAAa,CADI;AAEjBjB,aAAW,CAFM;AAGjBkB,cAAY;AAHK,EAAnB;;AAMA,UAASjc,eAAT,CAAyBiY,IAAzB,EAA8B;AAC7B,UAAOA,IAAP;AACC,QAAKnY,aAAakc,WAAlB;AACC,WAAO,UAAS1S,SAAT,EAAoBoB,OAApB,EAA4B;AAClC,SAAI5J,CAAJ;AAAA,SAAOob,OAAO;AACbjB,iBAAW;AADE,MAAd;AAGA,UAAIna,CAAJ,IAAS4J,OAAT,EAAiB;AAChBwR,WAAKpb,CAAL,IAAU4J,QAAQ5J,CAAR,CAAV;AACA;AACD,YAAO,UAASqb,aAAT,EAAwBC,aAAxB,EAAsC;AAC5C,UAAIC,YAAY,OAAO/S,SAAP,KAAqB,UAArB,GAAkCA,WAAlC,GAAgDA,SAAhE;AAAA,UAA2EgT,yBAAyBH,cAAc3M,MAAd,CAAqB,UAAS+M,OAAT,EAAkBrT,IAAlB,EAAwBjE,KAAxB,EAA8B;AACtJ,WAAGmX,cAAc/H,OAAd,CAAsBpP,KAAtB,MAAiC,CAAC,CAArC,EAAuC;AACtCsX,gBAAQza,IAAR,CAAamD,KAAb;AACA;AACD,cAAOsX,OAAP;AACA,OALmG,EAKjG,EALiG,CAApG;AAMAH,oBAAcnb,OAAd,CAAsB,UAASgE,KAAT,EAAe;AACpC,WAAIiE,OAAOiT,cAAclX,KAAd,CAAX;AAAA,WAAiCgW,YAAY,KAA7C;AACAqB,8BAAuBrb,OAAvB,CAA+B,UAASub,aAAT,EAAuB;AACrD,YAAIC,aAAaN,cAAcK,aAAd,CAAjB;AACAtT,eAAOuT,WAAWlT,WAAX,CAAuBL,IAAvB,CAAP;AACA,QAHD;AAIA+R,mBAAYqB,uBAAuBra,IAAvB,CAA4B,UAASua,aAAT,EAAuB;AAC9D,YAAIC,aAAaN,cAAcK,aAAd,CAAjB;AACA,eAAQ,CAAC,CAACC,WAAWtT,GAAX,CAAeD,IAAf,CAAV;AACA,QAHW,KAGNA,KAAKC,GAAL,CAASkT,SAAT,EAAoBvS,SAApB,OAAoCZ,KAAKY,SAAL,EAH1C;AAIA,WAAGmR,SAAH,EAAa;AACZ/R,aAAK+R,SAAL,GAAiB,IAAjB;AACA,QAFD,MAEK;AACJqB,+BAAuBxa,IAAvB,CAA4BmD,KAA5B;AACA;AACD,OAfD;AAgBA,aAAOkX,aAAP;AACA,MAxBD;AAyBA,KAhCD;AAiCD,QAAKrc,aAAaib,SAAlB;AACC,WAAO,UAASzR,SAAT,EAAoBoB,OAApB,EAA4B;AAClC,SAAI5J,CAAJ;AAAA,SAAOob,OAAO;AACbQ,sBAAgB,iBAAU,CAAV,EAAa,CAAb,CADH;AAEbC,0BAAoB,iBAAU,CAAV,EAAa,CAAb,CAFP;AAGbC,6BAAuB,CAHV;AAIb3B,iBAAW;AAJE,MAAd;AAMA,UAAIna,CAAJ,IAAS4J,OAAT,EAAiB;AAChBwR,WAAKpb,CAAL,IAAU4J,QAAQ5J,CAAR,CAAV;AACA;AACD,YAAO,UAASqb,aAAT,EAAwBC,aAAxB,EAAsC;AAC5C,UAAIC,YAAY,OAAO/S,SAAP,KAAqB,UAArB,GAAkCA,WAAlC,GAAgDA,SAAhE;AAAA,UACC8O,SAASiE,UAAUxT,KAAV,EADV;AAAA,UAC6B/H,CAD7B;AAAA,UACgC+b,iBAAiB,CAACR,UAAU3T,QAAX,CADjD;AAEAyT,oBAAclb,OAAd,CAAsB,UAASiI,IAAT,EAAejE,KAAf,EAAqB;AAC1C,WAAIyD,QAAJ;AAAA,WAAcoU,UAAU,KAAxB;AACA,YAAIhc,IAAI,CAAR,EAAWA,IAAI+b,eAAetb,MAA9B,EAAsCT,GAAtC,EAA0C;AACzC4H,mBAAY,iBAAUmU,eAAe/b,CAAf,EAAkB2E,CAA5B,EAA+B3E,IAAI,CAAJ,GAAS+b,eAAe/b,IAAI,CAAnB,EAAsB4E,CAAtB,GAA0BwW,KAAKU,qBAAxC,GAAiEP,UAAU3T,QAAV,CAAmBhD,CAAnH,CAAD,CAAwHwC,GAAxH,CAA4HgU,KAAKQ,cAAjI,CAAX;AACA,YAAGI,UAAWpU,SAASjD,CAAT,GAAayD,KAAKP,IAAL,CAAUlD,CAAvB,GAA2B2S,OAAO3S,CAAhD,EAAmD;AAClD;AACA;AACD;AACD,WAAG,CAACqX,OAAJ,EAAY;AACXpU,mBAAY,iBAAU2T,UAAU3T,QAAV,CAAmBjD,CAA7B,EAAgCoX,eAAeA,eAAetb,MAAf,GAAwB,CAAvC,EAA0CmE,CAA1C,GAA8CwW,KAAKU,qBAAnF,CAAD,CAA4G1U,GAA5G,CAAgHgU,KAAKQ,cAArH,CAAX;AACA;AACDxT,YAAKR,QAAL,GAAgBA,QAAhB;AACA,WAAGwT,KAAKjB,SAAL,IAAkB/R,KAAKJ,KAAL,GAAapD,CAAb,GAAiB2W,UAAUvT,KAAV,GAAkBpD,CAAxD,EAA0D;AACzDwD,aAAK+R,SAAL,GAAiB,IAAjB;AACA;AACD4B,wBAAiB,iBAAUvP,qBAAV,CAAgCuP,cAAhC,EAAgD3T,KAAKJ,KAAL,GAAaZ,GAAb,CAAiBgU,KAAKS,kBAAtB,CAAhD,CAAjB;AACA,OAhBD;AAiBA,aAAOR,aAAP;AACA,MArBD;AAsBA,KAhCD;AAiCD,QAAKrc,aAAamc,UAAlB;AACC,WAAO,UAAS3S,SAAT,EAAoBoB,OAApB,EAA4B;AAClC,SAAIqS,kBAAJ;AAAA,SAAwBC,oBAAxB;AAAA,SAA8Clc,CAA9C;AAAA,SAAiDob,OAAO;AACvDe,uBAAiB,iBAAU,CAAV,EAAa,CAAb,CADsC;AAEvDC,yBAAmB,iBAAU,CAAV,EAAa,CAAb,CAFoC;AAGvDjC,iBAAW;AAH4C,MAAxD;AAKA,UAAIna,CAAJ,IAAS4J,OAAT,EAAiB;AAChBwR,WAAKpb,CAAL,IAAU4J,QAAQ5J,CAAR,CAAV;AACA;AACDic,0BAAqB,iBAAU,CAACb,KAAKe,eAAL,CAAqBxX,CAAhC,EAAmCyW,KAAKe,eAAL,CAAqBvX,CAAxD,CAArB;AACAsX,4BAAuB,iBAAU,CAACd,KAAKgB,iBAAL,CAAuBzX,CAAlC,EAAqCyW,KAAKgB,iBAAL,CAAuBxX,CAA5D,CAAvB;AACA,YAAO,UAASyW,aAAT,EAAwBC,aAAxB,EAAsC;AAC5C,UAAIC,YAAY,OAAO/S,SAAP,KAAqB,UAArB,GAAkCA,WAAlC,GAAgDA,SAAhE;AAAA,UAA2ExI,CAA3E;AAAA,UAA8E+b,iBAAiB,CAACR,UAAUc,gBAAV,EAAD,CAA/F;AACAhB,oBAAclb,OAAd,CAAsB,UAASiI,IAAT,EAAejE,KAAf,EAAqB;AAC1C,WAAIyD,QAAJ;AAAA,WAAcoU,UAAU,KAAxB;AACA,YAAIhc,IAAI,CAAR,EAAWA,IAAI+b,eAAetb,MAA9B,EAAsCT,GAAtC,EAA0C;AACzC4H,mBAAY,iBAAUmU,eAAe/b,CAAf,EAAkB2E,CAAlB,GAAsByD,KAAKP,IAAL,CAAUlD,CAA1C,EAA6C3E,IAAI,CAAJ,GAAQ+b,eAAe/b,IAAI,CAAnB,EAAsB4E,CAA9B,GAAkC2W,UAAU3T,QAAV,CAAmBhD,CAAlG,CAAD,CAAuGwC,GAAvG,CAA2G6U,kBAA3G,CAAX;AACA,YAAGD,UAAWpU,SAASjD,CAAT,GAAayD,KAAKR,QAAL,CAAcjD,CAAzC,EAA4C;AAC3C;AACA;AACD;AACD,WAAG,CAACqX,OAAJ,EAAY;AACXpU,mBAAW,iBAAU2T,UAAUxT,KAAV,GAAkBpD,CAA5B,EAA+BoX,eAAeA,eAAetb,MAAf,GAAwB,CAAvC,EAA0CmE,CAAzE,CAAX;AACA;AACDwD,YAAKR,QAAL,GAAgBA,QAAhB;AACA,WAAGwT,KAAKjB,SAAL,IAAkB/R,KAAKkU,kBAAL,GAA0B1X,CAA1B,GAA8B2W,UAAUtT,KAAV,GAAkBrD,CAArE,EAAuE;AACtEwD,aAAK+R,SAAL,GAAiB,IAAjB;AACA;AACD4B,wBAAiB,iBAAUvP,qBAAV,CAAgCuP,cAAhC,EAAgD3T,KAAKH,KAAL,GAAab,GAAb,CAAiB8U,oBAAjB,CAAhD,EAAwF,IAAxF,CAAjB;AACA,OAhBD;AAiBA,aAAOb,aAAP;AACA,MApBD;AAqBA,KAhCD;AAtEF;AAwGA;;AAED,UAASpc,cAAT,CAAwBkY,IAAxB,EAA6B;AAC5B,UAAOA,IAAP;AACC,QAAKnY,aAAakc,WAAlB;AACC,WAAO,YAAU;AAChB,YAAO,UAASqB,WAAT,EAAsBC,OAAtB,EAA+BC,WAA/B,EAA2C;AACjD,UAAIC,WAAWH,YAAYhD,MAAZ,CAAmBiD,OAAnB,CAAf;AACAA,cAAQrc,OAAR,CAAgB,UAASwc,GAAT,EAAa;AAC5BF,mBAAYzb,IAAZ,CAAiB0b,SAASnJ,OAAT,CAAiBoJ,GAAjB,CAAjB;AACA,OAFD;AAGA,aAAOD,QAAP;AACA,MAND;AAOA,KARD;AASD,QAAK1d,aAAaib,SAAlB;AACA,QAAKjb,aAAamc,UAAlB;AACC,WAAO,UAAS7W,MAAT,EAAiBO,SAAjB,EAA4B+E,OAA5B,EAAoC;AAC1C,SAAI5J,CAAJ;AAAA,SAAOob,OAAO;AACbtI,mBAAa,qBAAS6J,GAAT,EAAa;AACzB,cAAOA,IAAI/U,QAAX;AACA;AAHY,MAAd;AAKA,UAAI5H,CAAJ,IAAS4J,OAAT,EAAiB;AAChBwR,WAAKpb,CAAL,IAAU4J,QAAQ5J,CAAR,CAAV;AACA;AACD,YAAO,UAASuc,WAAT,EAAsBC,OAAtB,EAA+BC,WAA/B,EAA2C;AACjD,UAAIG,UAAUL,YAAYhD,MAAZ,EAAd;AAAA,UAAoCsD,eAApC;AACAA,wBAAkBN,YAAYrb,GAAZ,CAAgBka,KAAKtI,WAArB,CAAlB;AACA0J,cAAQrc,OAAR,CAAgB,UAAS2c,MAAT,EAAgB;AAC/B,WAAI3Y,QAAQ,iBAAU4F,gBAAV,CAA2B8S,eAA3B,EAA4CzB,KAAKtI,WAAL,CAAiBgK,MAAjB,CAA5C,EAAsExY,MAAtE,EAA8EO,SAA9E,CAAZ;AACA,WAAGV,UAAU,CAAC,CAAd,EAAgB;AACfA,gBAAQyY,QAAQnc,MAAhB;AACA,QAFD,MAEO;AACN0D,gBAAQyY,QAAQrJ,OAAR,CAAgBgJ,YAAYpY,KAAZ,CAAhB,CAAR;AACA;AACDyY,eAAQvb,MAAR,CAAe8C,KAAf,EAAsB,CAAtB,EAAyB2Y,MAAzB;AACA,OARD;AASAN,cAAQrc,OAAR,CAAgB,UAAS2c,MAAT,EAAgB;AAC/BL,mBAAYzb,IAAZ,CAAiB4b,QAAQrJ,OAAR,CAAgBuJ,MAAhB,CAAjB;AACA,OAFD;AAGA,aAAOF,OAAP;AACA,MAhBD;AAiBA,KA1BD;AAbF;AAyCA;;SAEQ5d,Y,GAAAA,Y;SAAcC,c,GAAAA,c;SAAgBC,e,GAAAA,e;;;;;;AChKxC;;;;;;;AAEC;;;;AACA;;;;AACA;;AACA;;;;AAEA,KAAI+H,SAAS,EAAEC,oBAAF,EAAQ1I,+BAAR,EAAoBI,sBAApB,EAA4B0R,sBAA5B,EAAb,C,CAAiD;;AAEjD,KAAIzR,iBAAiB,EAArB;;AAEA,UAASC,aAAT,CAAuB8D,OAAvB,EAAgCiO,UAAhC,EAA4ClS,OAA5C,EAAqDiL,OAArD,EAA6D;AAC5D,MAAI5J,CAAJ;AACA,OAAK4C,OAAL,GAAeA,OAAf;AACA,OAAKiO,UAAL,GAAkBA,UAAlB;AACA,OAAKlS,OAAL,GAAeA,OAAf;AACAE,iBAAemC,IAAf,CAAoB,IAApB;AACA,OAAK4I,OAAL,GAAe;AACd2O,YAAS,GADK;AAEdwE,uBAAoB;AAFN,GAAf;AAIA,OAAI/c,CAAJ,IAAS4J,OAAT,EAAiB;AAChB,OAAGA,QAAQyF,cAAR,CAAuBrP,CAAvB,CAAH,EAA6B;AAC5B,SAAK4J,OAAL,CAAa5J,CAAb,IAAkB4J,QAAQ5J,CAAR,CAAlB;AACA;AACD;AACD,OAAK0Y,QAAL,GAAgB,IAAIzR,OAAOqJ,KAAX,CAAiB,IAAjB,CAAhB;AACA,MAAG1G,WAAWA,QAAQ8O,QAAtB,EAA+B;AAC9B,QAAKA,QAAL,CAActR,GAAd,CAAkBwC,QAAQ8O,QAA1B;AACA;AACD,OAAK9G,IAAL;AACA;;AAED9S,eAAcoB,SAAd,CAAwB0R,IAAxB,GAA+B,YAAU;AACxC,MAAIR,OAAO,IAAX;AACA,OAAKP,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAmB;AAC1CA,aAAUQ,KAAV,CAAgBnK,GAAhB,CAAoB,YAAU;AAC7B,WAAOgK,KAAKG,KAAL,CAAW,IAAX,CAAP;AACA,IAFD;AAGA,GAJD;AAKA,EAPD;;AASAzS,eAAcoB,SAAd,CAAwB8c,YAAxB,GAAuC,UAASjM,SAAT,EAAmB;AACzD,MAAIK,OAAO,IAAX;;AAEA,OAAKP,UAAL,CAAgB7P,IAAhB,CAAqB+P,SAArB;AACAA,YAAUQ,KAAV,CAAgBoF,OAAhB,CAAwB,YAAU;AACjC,UAAOvF,KAAKG,KAAL,CAAW,IAAX,CAAP;AACA,GAFD;AAGA,EAPD;;AASAzS,eAAcoB,SAAd,CAAwBqR,KAAxB,GAAgC,UAASR,SAAT,EAAmB;AAClD,MAAIkM,cAAc,KAAKte,OAAL,CAAakC,MAAb,CAAoB,UAAS4U,MAAT,EAAgB;AACrD,UAAOA,OAAO5E,UAAP,CAAkB0C,OAAlB,CAA0BxC,SAA1B,MAAyC,CAAC,CAAjD;AACA,GAFiB,EAEflQ,MAFe,CAER,UAAS4U,MAAT,EAAgB;AACzB,UAAOA,OAAO8E,cAAP,CAAsBxJ,SAAtB,CAAP;AACA,GAJiB,EAIfmM,IAJe,CAIV,UAASC,CAAT,EAAYC,CAAZ,EAAc;AACrB,UAAOD,EAAEpH,YAAF,GAAiB/M,SAAjB,KAA+BoU,EAAErH,YAAF,GAAiB/M,SAAjB,EAAtC;AACA,GANiB,CAAlB;;AAQA,MAAGiU,YAAYxc,MAAf,EAAsB;AACrBwc,eAAY,CAAZ,EAAe1L,KAAf,CAAqBR,SAArB;AACA,GAFD,MAEK;AACJA,aAAUN,IAAV,CAAeM,UAAUgB,YAAzB,EAAuC,KAAKnI,OAAL,CAAa2O,OAApD,EAA6D,IAA7D,EAAmE,IAAnE;AACA;AACD,OAAKG,QAAL,CAAc9E,IAAd;AACA,SAAO,IAAP;AACA,EAhBD;;AAkBA9U,eAAcoB,SAAd,CAAwB+V,KAAxB,GAAgC,YAAU;AACzC,OAAKtX,OAAL,CAAawB,OAAb,CAAqB,UAASsV,MAAT,EAAgB;AACpCA,UAAOQ,KAAP;AACA,GAFD;AAGA,EAJD;;AAMAnX,eAAcoB,SAAd,CAAwBwS,OAAxB,GAAkC,YAAU;AAC3C,OAAK7B,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAmB;AAC1CA,aAAU2B,OAAV;AACA,GAFD;AAGA,OAAK/T,OAAL,CAAawB,OAAb,CAAqB,UAASsV,MAAT,EAAgB;AACpCA,UAAO/C,OAAP;AACA,GAFD;AAGA,EAPD;;AASA5T,eAAcoB,SAAd,CAAwBoG,gBAAxB,CAAyC,WAAzC,EAAsD,YAAU;AAC/D,SAAO,KAAK3H,OAAL,CAAauC,GAAb,CAAiB,UAASuU,MAAT,EAAgB;AACvC,UAAOA,OAAOmF,eAAP,CAAuB1Z,GAAvB,CAA2B,UAAS6P,SAAT,EAAmB;AACpD,WAAO,KAAKF,UAAL,CAAgB0C,OAAhB,CAAwBxC,SAAxB,CAAP;AACA,IAFM,EAEJ,IAFI,CAAP;AAGA,GAJM,EAIJ,IAJI,CAAP;AAKA,EAND;;AAQAjS,eAAcoB,SAAd,CAAwBgW,gBAAxB,CAAyC,WAAzC,EAAsD,UAASyD,SAAT,EAAmB;AACxE,MAAI3I,UAAU,oBAAd;AACA,MAAG2I,UAAUlZ,MAAV,KAAqB,KAAK9B,OAAL,CAAa8B,MAArC,EAA4C;AAC3C,QAAK9B,OAAL,CAAawB,OAAb,CAAqB,UAASsV,MAAT,EAAgB;AACpCA,WAAOQ,KAAP;AACA,IAFD,EAEG,IAFH;AAGA0D,aAAUxZ,OAAV,CAAkB,UAASkd,aAAT,EAAwBrd,CAAxB,EAA0B;AAC3Cqd,kBAAcld,OAAd,CAAsB,UAASgE,KAAT,EAAe;AACpC,UAAKxF,OAAL,CAAaqB,CAAb,EAAgBoH,GAAhB,CAAoB,KAAKyJ,UAAL,CAAgB1M,KAAhB,CAApB;AACA,KAFD,EAEG,IAFH;AAGA,IAJD,EAIG,IAJH;AAKA,GATD,MASK;AACJ2B,SAAMkL,OAAN;AACA,SAAMA,OAAN;AACA;AACD,EAfD;;AAiBA,UAASjS,oBAAT,CAA8B6D,OAA9B,EAAuC0a,iBAAvC,EAA0DC,cAA1D,EAA0E3T,OAA1E,EAAkF;AACjF,MAAIiH,UAAJ,EAAgBlS,OAAhB,EAAyBmb,gBAAzB,EAA2C0D,aAA3C,EAA0DC,cAA1D;AACA7T,YAAUA,WAAW,EAArB;AACAkQ,qBAAmBlQ,QAAQmH,SAAR,IAAqB,EAAxC;AACAyM,kBAAgB5T,QAAQ6L,MAAR,IAAkB,EAAlC;AACAgI,mBAAiB7T,QAAQ8T,OAAR,IAAmB,EAApC;AACA5D,mBAAiBrO,MAAjB,GAA0BqO,iBAAiBrO,MAAjB,IAA2B7I,OAArD;AACA4a,gBAAc/R,MAAd,GAAuB+R,cAAc/R,MAAd,IAAwB7I,OAA/C;AACA0a,sBAAoBrd,MAAMC,SAAN,CAAgBoW,KAAhB,CAAsB1V,IAAtB,CAA2B0c,iBAA3B,CAApB;AACAC,mBAAiBtd,MAAMC,SAAN,CAAgBoW,KAAhB,CAAsB1V,IAAtB,CAA2B2c,cAA3B,CAAjB;;AAEA1M,eAAayM,kBAAkBpc,GAAlB,CAAsB,UAAS0B,OAAT,EAAiB;AACnD,UAAO,IAAIqE,OAAOzI,SAAX,CAAqBoE,OAArB,EAA8BkX,gBAA9B,CAAP;AACA,GAFY,CAAb;;AAIAnb,YAAU4e,eAAerc,GAAf,CAAmB,UAASgI,EAAT,EAAY;AACxC,UAAO,IAAIjC,OAAOrI,MAAX,CAAkBgE,OAAlB,EAA2BiO,UAA3B,EAAuC2M,aAAvC,CAAP;AACA,GAFS,CAAV;AAGA,SAAO,IAAI1e,aAAJ,CAAkB8D,OAAlB,EAA2BiO,UAA3B,EAAuClS,OAAvC,EAAgD8e,cAAhD,CAAP;AACA;;SAEQ5e,c,GAAAA,c;SAAgBC,a,GAAAA,a;SAAeC,oB,GAAAA,oB;;;;;;AClIzC;;;;;;;AAEC;;;;AACA;;AACA;;AACA;;;;AAEA,KAAIkI,SAAS,EAACC,oBAAD,EAAO9H,iCAAP,EAAqBD,2BAArB,EAAgCX,+BAAhC,EAAb;AACA,KAAIa,UAAU,EAAd;;AAEA,UAASC,MAAT,CAAgB2Q,IAAhB,EAAsB4J,QAAtB,EAAgCjQ,OAAhC,EAAwC;AACvC,MAAI5J,CAAJ;AAAA,MAAO2d,gBAAgB,iBAAUnS,0BAAV,CAAqCyE,IAArC,EAA2CA,IAA3C,CAAvB;AACA,OAAKrG,OAAL,GAAe;AACdxE,UAAO,CADO;AAEdwY,WAAQ,IAAI9Z,KAAKuB,EAAT,GAAcwU,SAASpZ,MAFjB;AAGd4L,WAAQsR,cAAczV,SAAd,EAHM;AAId2V,gBAAa,EAJC;AAKdC,cAAWH,cAAchU,UAAd,KAA6B,CAL1B;AAMdoU,cAAW,CANG;AAOdC,gBAAa,SAPC;AAQdC,cAAW;AARG,GAAf;;AAWA,OAAIje,CAAJ,IAAS4J,OAAT,EAAiB;AAChB,OAAGA,QAAQyF,cAAR,CAAuBrP,CAAvB,CAAH,EAA6B;AAC5B,SAAK4J,OAAL,CAAa5J,CAAb,IAAkB4J,QAAQ5J,CAAR,CAAlB;AACA;AACD;AACDX,UAAQ2B,IAAR,CAAa,IAAb;AACA,OAAKiP,IAAL,GAAYA,IAAZ;AACA,OAAK0N,aAAL,GAAqBA,aAArB;AACA,OAAK/L,IAAL,CAAUiI,QAAV;AACA;;AAEDva,QAAOY,SAAP,CAAiB0R,IAAjB,GAAwB,UAASiI,QAAT,EAAkB;AACzC,MAAIzI,OAAO,IAAX;AACA,OAAKjB,MAAL,GAAclJ,OAAOC,IAAP,CAAY8I,YAAZ,CAAyB,KAAKC,IAA9B,EAAoC,KAAK0N,aAAzC,CAAd;AACA,OAAKxP,OAAL,GAAe,KAAKgC,MAAL,CAAY+N,UAAZ,CAAuB,IAAvB,CAAf;;AAEA,OAAKrN,UAAL,GAAkBgJ,SAAS3Y,GAAT,CAAa,UAAU0B,OAAV,EAAmB5C,CAAnB,EAAqB;AACnD,OAAIoF,QAAQ,KAAKwE,OAAL,CAAaxE,KAAb,GAAqBpF,IAAI,KAAK4J,OAAL,CAAagU,MAAlD;AAAA,OACCO,WAAW,iBAAUvS,gBAAV,CAA2BhJ,OAA3B,EAAoC2E,IAApC,CAAyC,GAAzC,CADZ;AAAA,OAECwH,QAAQ,iBAAU3C,wBAAV,CAAmChH,KAAnC,EAA0C,KAAKwE,OAAL,CAAaiU,WAAvD,EAAoE,KAAKjU,OAAL,CAAayC,MAAjF,EAAyF/E,GAAzF,CAA6F6W,QAA7F,CAFT;AAAA,OAGCzN,MAAM,iBAAUtE,wBAAV,CAAmChH,KAAnC,EAA0C,KAAKwE,OAAL,CAAakU,SAAvD,EAAkE,KAAKlU,OAAL,CAAayC,MAA/E,EAAuF/E,GAAvF,CAA2F6W,QAA3F,CAHP;AAAA,OAIC5Z,QAAQ0C,OAAO7H,YAAP,CAAoB6H,OAAO9H,SAAP,CAAiB4X,IAArC,EAA2ChI,KAA3C,EAAkD2B,GAAlD,CAJT;;AAMA,UAAO,IAAIzJ,OAAOzI,SAAX,CAAqBoE,OAArB,EAA8B;AACpC6I,YAAQ,KAAKwE,IADuB;AAEpC1L,WAAOA,KAF6B;AAGpCqD,cAAUmH,KAH0B;AAIpC2C,YAAO,kBAAW;AACjBN,UAAKgN,IAAL;AACA,YAAO,IAAP;AACA;AAPmC,IAA9B,CAAP;AAUA,GAjBiB,EAiBf,IAjBe,CAAlB;;AAmBA,OAAKC,MAAL,GAAc,IAAd;AACA,OAAKD,IAAL;AACA,EA1BD;;AA4BA9e,QAAOY,SAAP,CAAiBke,IAAjB,GAAwB,YAAW;AAClC,MAAI1R,KAAJ,EAAW1M,CAAX;AACA,MAAG,CAAC,KAAKqe,MAAT,EAAgB;AACf;AACA;AACD,OAAKlQ,OAAL,CAAamQ,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,KAAKX,aAAL,CAAmB9V,IAAnB,CAAwBlD,CAArD,EAAwD,KAAKgZ,aAAL,CAAmB9V,IAAnB,CAAwBjD,CAAhF;AACA,OAAKuJ,OAAL,CAAaoQ,SAAb;AACA7R,UAAQ,KAAKmE,UAAL,CAAgB,CAAhB,EAAmB3I,SAAnB,EAAR;AACA,OAAKiG,OAAL,CAAaqQ,MAAb,CAAoB9R,MAAM/H,CAA1B,EAA6B+H,MAAM9H,CAAnC;AACA,OAAI5E,IAAI,CAAR,EAAWA,IAAI,KAAK6Q,UAAL,CAAgBpQ,MAA/B,EAAuCT,GAAvC,EAA2C;AAC1C0M,WAAQ,KAAKmE,UAAL,CAAgB7Q,CAAhB,EAAmBkI,SAAnB,EAAR;AACA,QAAKiG,OAAL,CAAasQ,MAAb,CAAoB/R,MAAM/H,CAA1B,EAA6B+H,MAAM9H,CAAnC;AACA;AACD,OAAKuJ,OAAL,CAAauQ,SAAb;AACA,OAAKvQ,OAAL,CAAa4P,SAAb,GAAyB,KAAKnU,OAAL,CAAamU,SAAtC;AACA,OAAK5P,OAAL,CAAa6P,WAAb,GAA2B,KAAKpU,OAAL,CAAaoU,WAAxC;AACA,OAAK7P,OAAL,CAAawQ,MAAb;AACA,OAAKxQ,OAAL,CAAa8P,SAAb,GAAyB,KAAKrU,OAAL,CAAaqU,SAAtC;AACA,OAAK9P,OAAL,CAAayQ,IAAb;AACA,EAnBD;;SAsBQvf,O,GAAAA,O;SAASC,M,GAAAA,M;;;;;;ACpFlB;;;;;;;AAEC;;;;AACA;;AACA;;AACA;;;;AAEA,KAAI2H,SAAS,EAAEC,oBAAF,EAAQ/H,2BAAR,EAAmBC,iCAAnB,EAAiCZ,+BAAjC,EAAb,C,CAA0D;;AAE1D,KAAIe,aAAa,EAAjB;;AAEA,UAASC,SAAT,CAAmByQ,IAAnB,EAAyBrN,OAAzB,EAAkCgH,OAAlC,EAA0C;AACzC,MAAI5J,CAAJ;AAAA,MAAO2d,gBAAgB,iBAAUnS,0BAAV,CAAqCyE,IAArC,EAA2CA,IAA3C,CAAvB;AAAA,MACCkO,WAAW,iBAAUvS,gBAAV,CAA2BhJ,OAA3B,EAAoC2E,IAApC,CAAyC,GAAzC,CADZ;AAEA,OAAKqC,OAAL,GAAe;AACdyC,WAAQsR,cAAczV,SAAd,EADM;AAEd5D,WAAQqZ,cAAchU,UAAd,KAA6B,CAFvB;AAGdkV,eAAY/a,KAAKuB,EAHH;AAId8S,aAAU,CAJI;AAKd2G,WAAQ,CAAChb,KAAKuB,EAAN,EAAS,CAACvB,KAAKuB,EAAN,GAAS,CAAlB,EAAoB,CAApB,EAAsBvB,KAAKuB,EAAL,GAAQ,CAA9B,EAAgCvB,KAAKuB,EAAL,GAAQ,CAAxC,CALM;AAMdqT,aAAS,oBAAU,CAAE,CANP;AAOdlF,SAAM;AAPQ,GAAf;AASA,OAAIxT,CAAJ,IAAS4J,OAAT,EAAiB;AAChB,OAAGA,QAAQyF,cAAR,CAAuBrP,CAAvB,CAAH,EAA6B;AAC5B,SAAK4J,OAAL,CAAa5J,CAAb,IAAkB4J,QAAQ5J,CAAR,CAAlB;AACA;AACD;AACD,OAAK+e,aAAL,GAAqB,KAAKnV,OAAL,CAAayC,MAAb,CAAoB/E,GAApB,CAAwB6W,QAAxB,CAArB;AACA,OAAKzF,QAAL,GAAgB,KAAK9O,OAAL,CAAa8O,QAA7B;AACAnZ,aAAWyB,IAAX,CAAgB,IAAhB;AACA,OAAKiP,IAAL,GAAYA,IAAZ;AACA,OAAK2B,IAAL,CAAUhP,OAAV;AACA;;AAEDpD,WAAUU,SAAV,CAAoB0R,IAApB,GAA2B,UAAUhP,OAAV,EAAkB;AAC5C,MAAIwO,OAAO,IAAX;AAAA,MACChM,QAAQ,KAAKwE,OAAL,CAAaiV,UADtB;AAAA,MAECjX,WAAW,iBAAUwE,wBAAV,CACVhH,KADU,EAEV,KAAKwE,OAAL,CAAatF,MAFH,EAGV,KAAKya,aAHK,CAFZ;AAAA,MAOCxa,QAAQ0C,OAAO7H,YAAP,CAAoB6H,OAAO9H,SAAP,CAAiB+X,GAArC,EACP9F,KAAK2N,aADE,EAEP3N,KAAKxH,OAAL,CAAatF,MAFN,EAGP,KAAKsF,OAAL,CAAaiV,UAHN,EAIP,KAAKjV,OAAL,CAAauO,QAJN,CAPT;;AAcA,OAAK/S,KAAL,GAAaA,KAAb;AACA,OAAK2L,SAAL,GAAiB,IAAI9J,OAAOzI,SAAX,CAAqBoE,OAArB,EAA8B;AAC9C6I,WAAQ,KAAKwE,IADiC;AAE9C1L,UAAOA,KAFuC;AAG9CqD,aAAUA,QAHoC;AAI9C8J,WAAQ,kBAAW;AAClBN,SAAK4N,MAAL;AACA,WAAO,IAAP;AACA;AAP6C,GAA9B,CAAjB;AASA,EAzBD;;AA2BAxf,WAAUU,SAAV,CAAoB+e,WAApB,GAAkC,YAAW;AAC5C,OAAK7Z,KAAL,GAAa,iBAAU0H,QAAV,CAAmB,KAAKiS,aAAxB,EAAuC,KAAKhO,SAAL,CAAenJ,QAAtD,CAAb;AACA,EAFD;;AAIApI,WAAUU,SAAV,CAAoB8e,MAApB,GAA6B,YAAW;AACvC,OAAKC,WAAL;AACF;AACA;AACE,OAAKvG,QAAL,CAAc,KAAKtT,KAAnB;AACA,EALD;;AAOA5F,WAAUU,SAAV,CAAoBgf,QAApB,GAA+B,UAAS9Z,KAAT,EAAgBoO,IAAhB,EAAqB;AACnD,OAAKpO,KAAL,GAAa,iBAAU4H,cAAV,CAAyB5H,KAAzB,EAAgCwC,QAAhC,CAAb;AACA,MAAIA,WAAW,iBAAUwE,wBAAV,CACd,KAAKhH,KADS,EAEd,KAAKwE,OAAL,CAAatF,MAFC,EAGd,KAAKya,aAHS,CAAf;AAKA,OAAKhO,SAAL,CAAeN,IAAf,CAAoB7I,QAApB,EAA8B4L,QAAM,CAApC,EAAuC,IAAvC,EAA6C,IAA7C;AACA,OAAKkF,QAAL,CAAc,KAAKtT,KAAnB;AACA,EATD;;SAWS7F,U,GAAAA,U;SAAYC,S,GAAAA,S;;;;;;ACpFtB;;;;;;;AAEI;;;;AACD;;AACA;;AACC;;;;AAEA,KAAIyH,SAAS,EAAEC,oBAAF,EAAQ/H,2BAAR,EAAmBC,iCAAnB,EAAiCZ,+BAAjC,EAAb,C,CAA0D;;AAE1D,KAAI+R,UAAU,kBAAkB7K,MAAhC;AACA,KAAIjG,SAAS,EAAb;;AAEA,UAAS0f,wBAAT,CAAkChb,KAAlC,EAAwC1D,MAAxC,EAA+C;AAC3C,SAAI2e,aAAa,EAAjB;AACA,SAAGjb,SAAS,CAAC,CAAb,EAAe;AACXib,oBAAWpe,IAAX,CAAgBmD,KAAhB;AACAib,oBAAWpe,IAAX,CAAgB,CAACmD,QAAQ,CAAT,IAAc1D,MAA9B;AACH;AACD,YAAO2e,UAAP;AACH;;AAGD,UAAS1f,KAAT,CAAeuQ,IAAf,EAAqB4J,QAArB,EAA+BjQ,OAA/B,EAAuC;AACnC,SAAI5J,CAAJ;AAAA,SAAO2d,gBAAgB,iBAAUnS,0BAAV,CAAqCyE,IAArC,EAA2CA,IAA3C,CAAvB;AACA,UAAKrG,OAAL,GAAe;AACXyC,iBAAQsR,cAAczV,SAAd,EADG;AAEX5D,iBAAQqZ,cAAchU,UAAd,KAA6B,CAF1B;AAGX0V,sBAAa1B,cAAchU,UAAd,KAA6B,CAH/B;AAIXwD,qBAAYrJ,KAAKuB,EAAL,GAAQ,CAJT;AAKXia,qBAAYrY,OAAOC,IAAP,CAAY4H,KAAZ,CAAkB,CAAlB,EAAqB+K,SAASpZ,MAA9B,EAAsCS,GAAtC,CAA0C,YAAU;AAC5D,oBAAO+F,OAAOC,IAAP,CAAYoI,WAAZ,EAAP;AACH,UAFW,CALD;AAQXiQ,qBAAYtY,OAAOC,IAAP,CAAY4H,KAAZ,CAAkB,CAAC,EAAnB,EAAuB,GAAvB,EAA4B,MAAM+K,SAASpZ,MAA3C,EAAmDS,GAAnD,CAAuD,UAASkE,KAAT,EAAe;AAC9E,oBAAO,iBAAUD,QAAV,CAAmBC,KAAnB,CAAP;AACH,UAFW,CARD;AAWXoa,iBAAO,kBAAU,CAAE,CAXR;AAYXC,mBAAU,IAZC;AAaXC,yBAAgB,iBAAU,CAAV,EAAY,CAAZ,CAbL;AAcXC,uBAAc;AAdH,MAAf;AAgBA,UAAI3f,CAAJ,IAAS4J,OAAT,EAAiB;AACb,aAAGA,QAAQyF,cAAR,CAAuBrP,CAAvB,CAAH,EAA6B;AACzB,kBAAK4J,OAAL,CAAa5J,CAAb,IAAkB4J,QAAQ5J,CAAR,CAAlB;AACH;AACJ;;AAEDP,YAAOuB,IAAP,CAAY,IAAZ;AACA,UAAKwe,MAAL,GAAc,KAAK5V,OAAL,CAAa4V,MAA3B;AACA,UAAKvP,IAAL,GAAYA,IAAZ;AACA,UAAK0N,aAAL,GAAqBA,aAArB;AACA,UAAK/L,IAAL,CAAUiI,QAAV;AACH;;AAEDna,OAAMQ,SAAN,CAAgB0R,IAAhB,GAAuB,UAAUiI,QAAV,EAAmB;AACtC,SAAIzI,OAAO,IAAX;AACA,UAAKjB,MAAL,GAAclJ,OAAOC,IAAP,CAAY8I,YAAZ,CAAyB,KAAKC,IAA9B,EAAoC,KAAK0N,aAAzC,CAAd;AACA,UAAKxP,OAAL,GAAe,KAAKgC,MAAL,CAAY+N,UAAZ,CAAuB,IAAvB,CAAf;AACA,UAAKrN,UAAL,GAAkBgJ,SAAS3Y,GAAT,CAAa,UAAU0B,OAAV,EAAmB5C,CAAnB,EAAqB;AAChD,aAAIoF,QAAQ,KAAKwE,OAAL,CAAa2V,UAAb,CAAwBvf,CAAxB,CAAZ;AAAA,aACIme,WAAW,iBAAUvS,gBAAV,CAA2BhJ,OAA3B,EAAoC2E,IAApC,CAAyC,GAAzC,CADf;AAAA,aAEIK,WAAW,iBAAUwE,wBAAV,CACPhH,KADO,EAEP,KAAKwE,OAAL,CAAayV,WAFN,EAGP,KAAKzV,OAAL,CAAayC,MAAb,CAAoB/E,GAApB,CAAwB6W,QAAxB,CAHO,CAFf;AAAA,aAOI5Z,QAAQ0C,OAAO7H,YAAP,CAAoB6H,OAAO9H,SAAP,CAAiB+X,GAArC,EACJ9F,KAAKxH,OAAL,CAAayC,MAAb,CAAoB/E,GAApB,CAAwB6W,QAAxB,CADI,EAEJ/M,KAAKxH,OAAL,CAAayV,WAFT,EAGJjO,KAAKwO,aAAL,CAAmB5f,CAAnB,EAAsB,KAAtB,CAHI,EAIJoR,KAAKwO,aAAL,CAAmB5f,CAAnB,EAAsB,IAAtB,CAJI,CAPZ;;AAcA,gBAAO,IAAIiH,OAAOzI,SAAX,CAAqBoE,OAArB,EAA8B;AACjC6I,qBAAO,KAAKwE,IADqB;AAEjC1L,oBAAMA,KAF2B;AAGjCqD,uBAASA,QAHwB;AAIjC8J,qBAAO,kBAAW;AACdN,sBAAKgN,IAAL;AACA,wBAAO,IAAP;AACH;AAPgC,UAA9B,CAAP;AASH,MAxBiB,EAwBf,IAxBe,CAAlB;;AA0BA,UAAKC,MAAL,GAAc,IAAd;AACA,SAAG,KAAKzU,OAAL,CAAa+V,YAAhB,EAA6B;AACzB,cAAKE,UAAL;AACH;AACD,UAAKzB,IAAL;AACH,EAnCD;;AAqCA1e,OAAMQ,SAAN,CAAgB2f,UAAhB,GAA6B,YAAW;AACpC,SAAIzO,OAAO,IAAX;AACA,UAAK0O,YAAL,CAAkB,CAAC,CAAnB;;AAEA,UAAK3P,MAAL,CAAYsC,gBAAZ,CAA6B,kBAAO1D,KAApC,EAA2C,UAASgR,CAAT,EAAW;AAClD,aAAIrT,QAAQ,iBACJ6D,UAAUwP,EAAExR,cAAF,CAAiB,CAAjB,EAAoBiG,KAA9B,GAAsCuL,EAAEtL,OADpC,EAEJlE,UAAUwP,EAAExR,cAAF,CAAiB,CAAjB,EAAoBmG,KAA9B,GAAsCqL,EAAEpL,OAFpC,CAAZ;AAAA,aAGOxQ,KAHP;;AAKA,aAAG,CAACiN,KAAK4O,YAAT,EAAsB;AAClB5O,kBAAK4O,YAAL,GAAoB,iBAAUnU,SAAV,CAAoBuF,KAAKjB,MAAzB,CAApB;AACH;;AAEDzD,iBAAQA,MAAMpF,GAAN,CAAU8J,KAAK4O,YAAf,CAAR;AACA7b,iBAAQiN,KAAK6O,aAAL,CAAmBvT,KAAnB,CAAR;AACA,aAAGvI,SAAO,CAAC,CAAX,EAAa;AACTiN,kBAAK0O,YAAL,CAAmB1O,KAAK8O,cAAL,KAAwB/b,KAAzB,GAAgCA,KAAhC,GAAsC,CAAC,CAAzD;AACH;AACJ,MAfD;AAgBH,EApBD;;AAsBAzE,OAAMQ,SAAN,CAAgBigB,YAAhB,GAA+B,YAAW;AACtC,UAAKrB,MAAL,GAAc,KAAKjO,UAAL,CAAgB3P,GAAhB,CAAoB,UAAS6P,SAAT,EAAmB;AACjD,aAAIoN,WAAWpN,UAAU6B,OAAV,GAAoBrL,IAApB,CAAyB,GAAzB,CAAf;AACA,gBAAO,iBAAUuF,QAAV,CAAmB,KAAKlD,OAAL,CAAayC,MAAb,CAAoB/E,GAApB,CAAwB6W,QAAxB,CAAnB,EAAsDpN,UAAUnJ,QAAhE,CAAP;AACH,MAHa,EAGZ,IAHY,CAAd;AAIH,EALD;;AAOAlI,OAAMQ,SAAN,CAAgB0f,aAAhB,GAAgC,UAASzb,KAAT,EAAgBic,UAAhB,EAA2B;AACvD,SAAIhP,OAAO,IAAX;AAAA,SAAiBtI,OAAOsX,aAAW,CAAX,GAAa,CAAC,CAAtC;;AAEA,YAAO,YAAU;AACb,aAAIpgB,IAAI,CAACmE,QAAQ2E,IAAT,IAAiBsI,KAAK0N,MAAL,CAAYre,MAArC;AACA,aAAGT,IAAI,CAAP,EAAS;AACLA,kBAAKoR,KAAK0N,MAAL,CAAYre,MAAjB;AACH;AACD,gBAAO,iBAAUuM,cAAV,CAAyBoE,KAAK0N,MAAL,CAAY9e,CAAZ,IAAiB8I,OAAOsI,KAAKxH,OAAL,CAAauD,UAA9D,CAAP;AACH,MAND;AAOH,EAVD;;AAYAzN,OAAMQ,SAAN,CAAgBke,IAAhB,GAAuB,YAAW;AAC9B,SAAG,CAAC,KAAKC,MAAT,EAAgB;AACZ;AACH;;AAED,UAAK8B,YAAL;AACA,UAAKhS,OAAL,CAAamQ,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,KAAKX,aAAL,CAAmB9V,IAAnB,CAAwBlD,CAArD,EAAwD,KAAKgZ,aAAL,CAAmB9V,IAAnB,CAAwBjD,CAAhF;AACA,UAAKiM,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAoB5M,KAApB,EAA0B;AAC9C,cAAKkc,OAAL,CAAa,KAAKlS,OAAlB,EAA2B,KAAKvE,OAAL,CAAayC,MAAxC,EAAgD,KAAKzC,OAAL,CAAatF,MAA7D,EAAqEH,KAArE;AACH,MAFD,EAEG,IAFH;;AAIA,UAAK0M,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAoB5M,KAApB,EAA0B;AAC9C,aAAImc,aAAJ;AACA,aAAG,KAAK1W,OAAL,CAAa+V,YAAhB,EAA6B;AACzBW,6BAAgBnB,yBAAyB,KAAKe,cAA9B,EAA8C,KAAKrP,UAAL,CAAgBpQ,MAA9D,CAAhB;AACA,iBAAG6f,cAAc/M,OAAd,CAAsBpP,KAAtB,MAAiC,CAAC,CAArC,EAAuC;AACnC,sBAAKoc,YAAL,CAAkBpc,KAAlB;AACH;AACJ,UALD,MAKO;AACH,kBAAKoc,YAAL,CAAkBpc,KAAlB;AACH;AACJ,MAVD,EAUG,IAVH;AAWA,UAAKqb,MAAL;AACH,EAvBD;;AAyBA9f,OAAMQ,SAAN,CAAgBsgB,WAAhB,GAA8B,UAAS5d,OAAT,EAAkBgH,OAAlB,EAA0B;AACpD,SAAI5J,CAAJ;AAAA,SAAOmQ,MAAP;AAAA,SAAehC,OAAf;AAAA,SAAwBiN,IAAxB;AAAA,SAA8B5S,SAA9B;AAAA,SAAyCiY,QAAzC;AAAA,SAAmDrP,OAAO,IAA1D;AACA,SAAG,CAAC,KAAKiN,MAAT,EAAgB;AACZ;AACH;AACD7V,iBAAY,iBAAUgD,0BAAV,CAAqC5I,OAArC,EAA8CA,OAA9C,CAAZ;AACAwY,YAAO;AACH/O,iBAAQ7D,UAAUN,SAAV,EADL;AAEH5D,iBAAQkE,UAAUmB,UAAV,KAAyB,CAF9B;AAGH2V,qBAAY,KAAK1V,OAAL,CAAa0V;AAHtB,MAAP;AAKA,UAAItf,CAAJ,IAAS4J,OAAT,EAAiB;AACb,aAAGA,QAAQyF,cAAR,CAAuBrP,CAAvB,CAAH,EAA6B;AACzBob,kBAAKpb,CAAL,IAAU4J,QAAQ5J,CAAR,CAAV;AACH;AACJ;AACDmQ,cAASlJ,OAAOC,IAAP,CAAY8I,YAAZ,CAAyBpN,OAAzB,EAAkC4F,SAAlC,CAAT;AACA2F,eAAUgC,OAAO+N,UAAP,CAAkB,IAAlB,CAAV;AACAuC,gBAAW;AACPrC,eAAM,gBAAU;AACZjQ,qBAAQmQ,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwB9V,UAAUX,IAAV,CAAelD,CAAvC,EAA0C6D,UAAUX,IAAV,CAAejD,CAAzD;AACAwM,kBAAKP,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAoB5M,KAApB,EAA0B;AAC9CiN,sBAAKiP,OAAL,CAAalS,OAAb,EAAsBiN,KAAK/O,MAA3B,EAAmC+O,KAAK9W,MAAxC,EAAgDH,KAAhD;AACH,cAFD;AAGH;AANM,MAAX;AAQAsc,cAASrC,IAAT;AACA,YAAOqC,QAAP;AACH,EA5BD;;AA8BA/gB,OAAMQ,SAAN,CAAgBwgB,YAAhB,GAA+B,UAASvc,KAAT,EAAe;AAC1C,SAAG,OAAO,KAAKyF,OAAL,CAAa0V,UAAb,CAAwBnb,KAAxB,CAAP,KAA0C,UAA7C,EAAwD;AACpD,cAAKyF,OAAL,CAAa0V,UAAb,CAAwBnb,KAAxB,IAAiC,KAAKyF,OAAL,CAAa0V,UAAb,CAAwBnb,KAAxB,EAA+BvD,IAA/B,CAAoC,IAApC,CAAjC;AACH;AACD,YAAO,KAAKgJ,OAAL,CAAa0V,UAAb,CAAwBnb,KAAxB,CAAP;AACH,EALD;;AAOAzE,OAAMQ,SAAN,CAAgBmgB,OAAhB,GAA0B,UAASlS,OAAT,EAAiB9B,MAAjB,EAAwB/H,MAAxB,EAA+BH,KAA/B,EAAqC;AAC3D,SAAI0a,aAAa,KAAKC,MAAL,CAAY3a,KAAZ,CAAjB;AAAA,SACIgU,WAAW,KAAK2G,MAAL,CAAY,CAAC3a,QAAM,CAAP,IAAU,KAAK2a,MAAL,CAAYre,MAAlC,CADf;AAAA,SAEIkgB,QAAQ,KAAKD,YAAL,CAAkBvc,KAAlB,CAFZ;;AAIAgK,aAAQoQ,SAAR;AACApQ,aAAQqQ,MAAR,CAAenS,OAAO1H,CAAtB,EAAyB0H,OAAOzH,CAAhC;AACAuJ,aAAQ+I,GAAR,CAAY7K,OAAO1H,CAAnB,EAAsB0H,OAAOzH,CAA7B,EAAgCN,MAAhC,EAAwCua,UAAxC,EAAoD1G,QAApD,EAA8D,KAA9D;AACAhK,aAAQsQ,MAAR,CAAepS,OAAO1H,CAAtB,EAAyB0H,OAAOzH,CAAhC;AACAuJ,aAAQuQ,SAAR;AACAvQ,aAAQ8P,SAAR,GAAoB0C,KAApB;AACAxS,aAAQyQ,IAAR;AACH,EAZD;;AAcAlf,OAAMQ,SAAN,CAAgBqgB,YAAhB,GAA+B,UAASpc,KAAT,EAAe;AAC1C,SAAIiB,KAAJ,EAAWsH,KAAX,EAAkBkU,GAAlB;AACA,SAAG,KAAKhX,OAAL,CAAa6V,QAAhB,EAAyB;AACrBmB,eAAM,KAAKhX,OAAL,CAAa6V,QAAb,YAAiCxf,KAAjC,GAAyC,KAAK2J,OAAL,CAAa6V,QAAb,CAAsBtb,KAAtB,CAAzC,GAAwE,KAAKyF,OAAL,CAAa6V,QAA3F;AACH;AACD,SAAG,CAACmB,GAAJ,EAAQ;AACJ;AACH;AACDxb,aAAQ,iBAAU4H,cAAV,CAAyB,KAAK8R,MAAL,CAAY3a,KAAZ,CAAzB,CAAR;AACAuI,aAAQ,iBAAU,CAAV,EAAa,CAACkU,IAAInX,MAAL,GAAY,CAAzB,CAAR;AACAiD,aAAQA,MAAMtF,GAAN,CAAU,KAAKwC,OAAL,CAAa8V,cAAvB,CAAR;AACA,UAAKvR,OAAL,CAAa0S,SAAb,CAAuB,KAAKlD,aAAL,CAAmB9V,IAAnB,CAAwBlD,CAAxB,GAA4B,CAAnD,EAAsD,KAAKgZ,aAAL,CAAmB9V,IAAnB,CAAwBjD,CAAxB,GAA4B,CAAlF;AACA,UAAKuJ,OAAL,CAAa2S,MAAb,CAAoB1b,KAApB;AACA,UAAK+I,OAAL,CAAa4S,SAAb,CAAuBH,GAAvB,EAA4BlU,MAAM/H,CAAlC,EAAqC+H,MAAM9H,CAA3C;AACA,UAAKuJ,OAAL,CAAa6S,YAAb,CAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC;AACH,EAfD;;AAiBAthB,OAAMQ,SAAN,CAAgB+gB,aAAhB,GAAgC,YAAU;AACtC,SAAIC,YAAY,KAAKpC,MAAL,CAAY,CAAZ,CAAhB;AAAA,SACIA,SAAS,KAAKA,MAAL,CAAYxI,KAAZ,CAAkB,CAAlB,CADb;;AAGAwI,YAAO9d,IAAP,CAAYkgB,SAAZ;AACA,YAAOpC,OAAO5d,GAAP,CAAW,UAASkE,KAAT,EAAe;AAC7B,aAAI+b,YAAY,iBAAUnU,cAAV,CAAyB5H,QAAQ8b,SAAjC,CAAhB;AACAA,qBAAY9b,KAAZ;AACA,gBAAO+b,SAAP;AACH,MAJM,CAAP;AAKH,EAVD;;AAYAzhB,OAAMQ,SAAN,CAAgBkhB,UAAhB,GAA6B,YAAU;AACnC,YAAO,KAAKH,aAAL,GAAqB/f,GAArB,CAAyB,UAASigB,SAAT,EAAmB;AAC/C,gBAAOA,aAAa,IAAIrd,KAAKuB,EAAtB,CAAP;AACH,MAFM,CAAP;AAGH,EAJD;;AAMA3F,OAAMQ,SAAN,CAAgBmhB,gBAAhB,GAAmC,YAAU;AACzC,YAAO,KAAKJ,aAAL,GAAqB/f,GAArB,CAAyB,UAASigB,SAAT,EAAmBnhB,CAAnB,EAAqB;AACjD,gBAAO,iBAAUgN,cAAV,CAAyB,KAAK8R,MAAL,CAAY9e,CAAZ,IAAiBmhB,YAAU,CAApD,CAAP;AACH,MAFM,EAEL,IAFK,CAAP;AAGH,EAJD;;AAMAzhB,OAAMQ,SAAN,CAAgB+f,aAAhB,GAAgC,UAASvT,KAAT,EAAe;AAC3C,SAAItH,QAAQ,iBAAU0H,QAAV,CAAmB,KAAKlD,OAAL,CAAayC,MAAhC,EAAwCK,KAAxC,CAAZ;AAAA,SAA4D1M,CAA5D;AAAA,SAA+D+I,MAA/D;AAAA,SAAuEyQ,CAAvE;AAAA,SACIlV,SAAS,iBAAUO,SAAV,GAAsB,KAAK+E,OAAL,CAAayC,MAAnC,EAA2CK,KAA3C,CADb;AAEA,SAAGpI,SAAS,KAAKsF,OAAL,CAAatF,MAAzB,EAAiC;AAC7B,gBAAO,CAAC,CAAR;AACH;AACDyE,cAAS,CAAC,CAAV;AACA,UAAI/I,IAAI,CAAR,EAAWA,IAAI,KAAK8e,MAAL,CAAYre,MAA3B,EAAmCT,GAAnC,EAAuC;AACnC,aAAG+I,WAAW,CAAC,CAAZ,IAAiB,KAAK+V,MAAL,CAAY/V,MAAZ,IAAsB,KAAK+V,MAAL,CAAY9e,CAAZ,CAA1C,EAAyD;AACrD+I,sBAAS/I,CAAT;AACH;AACJ;AACD,UAAIA,IAAI,CAAJ,EAAMwZ,IAAIzQ,MAAd,EAAsB/I,IAAI,KAAK8e,MAAL,CAAYre,MAAtC,EAA8CT,KAAIwZ,IAAI,CAACxZ,IAAI+I,MAAL,IAAe,KAAK+V,MAAL,CAAYre,MAAjF,EAAwF;AACpF,aAAG2E,QAAQ,KAAK0Z,MAAL,CAAYtF,CAAZ,CAAX,EAA0B;AACtB;AACH;AACJ;AACD,SAAG,EAAEA,CAAF,GAAM,CAAT,EAAW;AACPA,cAAK,KAAKsF,MAAL,CAAYre,MAAjB;AACH;AACD,YAAO+Y,CAAP;AACH,EArBD;;AAuBA9Z,OAAMQ,SAAN,CAAgBohB,SAAhB,GAA4B,UAASxC,MAAT,EAAgB;AACxC,UAAKA,MAAL,GAAcA,MAAd;AACA,UAAKjO,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAU4Q,SAAV,EAAqB/Q,CAArB,EAAuB;AAC3C,aAAIoF,QAAQ,KAAK0Z,MAAL,CAAY9e,CAAZ,CAAZ;AAAA,aACIme,WAAWpN,UAAU6B,OAAV,GAAoBrL,IAApB,CAAyB,GAAzB,CADf;AAAA,aAEIK,WAAW,iBAAUwE,wBAAV,CACPhH,KADO,EAEP,KAAKwE,OAAL,CAAayV,WAFN,EAGP,KAAKzV,OAAL,CAAayC,MAAb,CAAoB/E,GAApB,CAAwB6W,QAAxB,CAHO,CAFf;;AAQApN,mBAAUN,IAAV,CAAe7I,QAAf,EAAyB,CAAzB,EAA4B,IAA5B,EAAkC,IAAlC;AACH,MAVD,EAUG,IAVH;AAWA,UAAKwW,IAAL;AACH,EAdD;;AAgBA1e,OAAMQ,SAAN,CAAgB4f,YAAhB,GAA+B,UAAS3b,KAAT,EAAe;AAC1C,SAAImc,gBAAgBnB,yBAAyBhb,KAAzB,EAAgC,KAAK0M,UAAL,CAAgBpQ,MAAhD,CAApB;AACA,UAAKyf,cAAL,GAAsB/b,KAAtB;AACA,UAAK0M,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAoB/Q,CAApB,EAAsB;AAC1C+Q,mBAAUoF,MAAV,GAAmBmK,cAAc/M,OAAd,CAAsBvT,CAAtB,MAA6B,CAAC,CAAjD;AACH,MAFD;AAGA,UAAKoe,IAAL;AACH,EAPD;;SAUQ3e,M,GAAAA,M;SAAQC,K,GAAAA,K;;;;;;ACzSpB;;;;;;;AAGC;;AACA;;AACA;;AAEA,KAAIuH,SAAS,EAAExI,gBAAF,EAAQD,+BAAR,EAAb,C,CAAiC;;AAEjC,KAAI2E,SAAS,SAATA,MAAS,CAASC,KAAT,EAAgBC,MAAhB,EAAwB;AACjC,MAAIC,IAAI,SAAJA,CAAI,GAAW,CAAG,CAAtB;AACAA,IAAEpD,SAAF,GAAcmD,OAAOnD,SAArB;AACAkD,QAAMlD,SAAN,GAAkB,IAAIoD,CAAJ,EAAlB;AACAF,QAAMlD,SAAN,CAAgBqD,WAAhB,GAA8BH,KAA9B;AACAA,QAAMI,UAAN,GAAmBH,OAAOnD,SAA1B;AACH,EAND,C,CAME;;AAEF,UAASN,YAAT,CAAsBiR,UAAtB,EAAkCjH,OAAlC,EAA0C;AACzCA,YAAUA,WAAW,EAArB;AACAA,UAAQ2X,MAAR,GAAiB3X,QAAQ2X,MAAR,IAAkB,iBAAU,CAAC,EAAX,EAAe,CAAf,CAAnC;AACAta,SAAOxI,IAAP,CAAYmC,IAAZ,CAAiB,IAAjB,EAAuBiQ,UAAvB,EAAmCjH,OAAnC;AACA;;AAEDzG,QAAOvD,YAAP,EAAqBqH,OAAOxI,IAA5B;;AAEAmB,cAAaM,SAAb,CAAuB0R,IAAvB,GAA8B,YAAU;AACvC,MAAIR,OAAO,IAAX;AACA,OAAKP,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAmB;AAC1CA,aAAUyQ,IAAV,GAAiB,KAAjB;AACAzQ,aAAUQ,KAAV,CAAgBnK,GAAhB,CAAoB,YAAU;AAC7BgK,SAAKG,KAAL,CAAW,IAAX;AACA,WAAO,IAAP;AACA,IAHD;AAIA,GAND;AAOA,EATD;;AAWA3R,cAAaM,SAAb,CAAuBqR,KAAvB,GAA+B,UAASR,SAAT,EAAmB;AACjD,MAAIgI,eAAe,KAAK0I,4BAAL,EAAnB;AAAA,MAAwDxI,YAAxD;AAAA,MAAsEC,YAAtE;AACAD,iBAAe,KAAKpI,UAAL,CAAgB0C,OAAhB,CAAwBxC,SAAxB,CAAf;AACAmI,iBAAe,iBAAUnP,gBAAV,CAA2BgP,YAA3B,EAAyChI,UAAUnJ,QAAnD,EAA6D,KAAKgC,OAAL,CAAatF,MAA1E,EAAkF,KAAKsF,OAAL,CAAa/E,SAA/F,CAAf;AACA,MAAGqU,iBAAiB,CAAC,CAAlB,IAAuBA,iBAAiBD,YAA3C,EAAwD;AACvD,QAAKyI,aAAL,CAAmBzI,YAAnB,EAAiClI,UAAUnJ,QAA3C,EAAqDmR,aAAaE,YAAb,CAArD,EAAiF,KAAKrP,OAAL,CAAa2O,OAA9F;AACA,GAFD,MAEO;AACN,OAAG,KAAK1H,UAAL,CAAgBqI,YAAhB,EAA8BrD,QAAjC,EAA0C;AACzC,SAAK8L,QAAL,CAAczI,YAAd,EAA4BH,aAAaE,YAAb,CAA5B;AACA,IAFD,MAEO;AACN,SAAK2I,kBAAL,CAAwB1I,YAAxB,EAAsCH,aAAaE,YAAb,CAAtC,EAAkE,KAAKrP,OAAL,CAAa4O,WAA/E;AACA;AACD,QAAKkJ,aAAL,CAAmBzI,YAAnB,EAAiClI,UAAUnJ,QAA3C,EAAqDmR,aAAaG,YAAb,CAArD,EAAiF,KAAKtP,OAAL,CAAa2O,OAA9F;AACA,QAAKG,QAAL,CAAc9E,IAAd;AACA;AACD,SAAO,IAAP;AACA,EAhBD;;AAkBAhU,cAAaM,SAAb,CAAuBwhB,aAAvB,GAAuC,UAASvd,KAAT,EAAgByD,QAAhB,EAA0Bia,cAA1B,EAA0CrO,IAA1C,EAA+C;AACrF,MAAImG,YAAY,CAACkI,cAAD,EAAiBA,eAAeza,GAAf,CAAmB,KAAKwC,OAAL,CAAa2X,MAAhC,CAAjB,CAAhB;AAAA,MAA2EC,OAAO,iBAAUzX,gBAAV,CAA2B4P,SAA3B,EAAsC/R,QAAtC,EAAgD,CAAC,CAAjD,EAAoD,iBAAU/C,SAAV,CAAoB,EAACF,GAAG,IAAJ,EAApB,CAApD,CAAlF;AACA,MAAG,KAAKkM,UAAL,CAAgB1M,KAAhB,EAAuBqd,IAAvB,KAAgC,CAAC,CAACA,IAArC,EAA0C;AACzC,QAAK3Q,UAAL,CAAgB1M,KAAhB,EAAuBqd,IAAvB,GAA8B,CAAC,CAACA,IAAhC;AACA,QAAK9I,QAAL,CAAc9E,IAAd;AACA;AACD,OAAK/C,UAAL,CAAgB1M,KAAhB,EAAuBsM,IAAvB,CAA4BkJ,UAAU6H,IAAV,CAA5B,EAA6ChO,IAA7C,EAAmD,IAAnD;AACA,EAPD;;AASA5T,cAAaM,SAAb,CAAuByhB,QAAvB,GAAkC,UAASxd,KAAT,EAAgB0d,cAAhB,EAA+B;AAChE,OAAKhR,UAAL,CAAgB1M,KAAhB,EAAuBqd,IAAvB,GAA8B,KAA9B;AACA,OAAK3Q,UAAL,CAAgB1M,KAAhB,EAAuB2N,WAAvB,GAAqC+P,cAArC;AACA,EAHD;;AAKAjiB,cAAaM,SAAb,CAAuB0hB,kBAAvB,GAA4C,UAASzd,KAAT,EAAgB0d,cAAhB,EAAgCrO,IAAhC,EAAqC;AAChF,OAAK3C,UAAL,CAAgB1M,KAAhB,EAAuBqd,IAAvB,GAA8B,KAA9B;AACA,OAAK3Q,UAAL,CAAgB1M,KAAhB,EAAuBsM,IAAvB,CAA4BoR,cAA5B,EAA4CrO,IAA5C,EAAkD,IAAlD;AACA,EAHD;;AAKA5T,cAAaM,SAAb,CAAuBuhB,4BAAvB,GAAsD,YAAU;AAC/D,SAAO,KAAK5Q,UAAL,CAAgB3P,GAAhB,CAAoB,UAAS6P,SAAT,EAAmB;AAC7C,UAAOA,UAAUyQ,IAAV,GAAiBzQ,UAAUe,WAAV,CAAsBxK,GAAtB,CAA0B,KAAKsC,OAAL,CAAa2X,MAAvC,CAAjB,GAAkExQ,UAAUe,WAAV,CAAsBjS,KAAtB,EAAzE;AACA,GAFM,EAEJ,IAFI,CAAP;AAGA,EAJD;;AAMAD,cAAaM,SAAb,CAAuBmZ,mBAAvB,GAA6C,YAAU;AACtD,SAAO,KAAKxI,UAAL,CAAgB3P,GAAhB,CACL,UAAS6P,SAAT,EAAmB;AAClB,UAAOA,UAAUgB,YAAjB;AACA,GAHI,EAGF7Q,GAHE,CAGE,UAAS0G,QAAT,EAAkB;AACxB,UAAO,KAAKiJ,UAAL,CAAgBhQ,MAAhB,CAAuB,UAASkQ,SAAT,EAAmB;AAChD,WAAOA,UAAUe,WAAV,CAAsBpK,OAAtB,CAA8BE,QAA9B,KAA2CmJ,UAAUe,WAAV,CAAsBpK,OAAtB,CAA8BE,SAASR,GAAT,CAAa,KAAKwC,OAAL,CAAa2X,MAA1B,CAA9B,CAAlD;AACA,IAFM,EAEJ,IAFI,EAEE,CAFF,CAAP;AAGA,GAPI,EAOF,IAPE,CAAP;AAQA,EATD;;AAWA3hB,cAAaM,SAAb,CAAuB+V,KAAvB,GAA+B,YAAU;AACxC,OAAKpF,UAAL,CAAgB1Q,OAAhB,CAAwB,UAAS4Q,SAAT,EAAmB;AAC1CA,aAAUN,IAAV,CAAeM,UAAUgB,YAAzB,EAAuC,CAAvC,EAA0C,IAA1C,EAAgD,KAAhD;AACAhB,aAAUyQ,IAAV,GAAiB,KAAjB;AACA,GAHD;AAIA,EALD;;AAOA5hB,cAAaM,SAAb,CAAuBoG,gBAAvB,CAAwC,WAAxC,EAAqD,YAAU;AAC9D,SAAO,KAAKuK,UAAL,CAAgB3P,GAAhB,CAAoB,UAAS6P,SAAT,EAAmB;AAC7C,OAAInJ,WAAWmJ,UAAUe,WAAV,CAAsBjS,KAAtB,EAAf;AACA+H,YAAS4Z,IAAT,GAAgBzQ,UAAUyQ,IAA1B;AACA,UAAO5Z,QAAP;AACA,GAJM,CAAP;AAKA,EAND;;AAQAhI,cAAaM,SAAb,CAAuBgW,gBAAvB,CAAwC,WAAxC,EAAqD,UAASyD,SAAT,EAAmB;AACvE,MAAI3I,UAAU,oBAAd;AACA,MAAG2I,UAAUlZ,MAAV,KAAqB,KAAKoQ,UAAL,CAAgBpQ,MAAxC,EAA+C;AAC9CkZ,aAAUxZ,OAAV,CAAkB,UAASuM,KAAT,EAAgB1M,CAAhB,EAAkB;AACnC,SAAK6Q,UAAL,CAAgB7Q,CAAhB,EAAmBwhB,IAAnB,GAA0B9U,MAAM8U,IAAhC;AACA,SAAK3Q,UAAL,CAAgB7Q,CAAhB,EAAmByQ,IAAnB,CAAwB/D,KAAxB,EAA+B,CAA/B,EAAkC,IAAlC,EAAwC,IAAxC;AACA,IAHD,EAGG,IAHH;AAIA,GALD,MAKO;AACN5G,SAAMkL,OAAN;AACA,SAAMA,OAAN;AACA;AACD,EAXD;;AAcC,UAASrR,mBAAT,CAA6BiD,OAA7B,EAAsC0a,iBAAtC,EAAyD1T,OAAzD,EAAiE;AACjE,MAAIiH,UAAJ,EAAgBiJ,gBAAhB,EAAkCC,WAAlC;AACAnQ,YAAUA,WAAW,EAArB;AACAkQ,qBAAmBlQ,QAAQmH,SAAR,IAAqB,EAAxC;AACAgJ,gBAAcnQ,QAAQ6P,IAAR,IAAgB,EAA9B;AACAK,mBAAiBrO,MAAjB,GAA0BqO,iBAAiBrO,MAAjB,IAA2B7I,OAArD;AACA0a,sBAAoBrd,MAAMC,SAAN,CAAgBoW,KAAhB,CAAsB1V,IAAtB,CAA2B0c,iBAA3B,CAApB;;AAEAzM,eAAayM,kBAAkBpc,GAAlB,CAAsB,UAAS0B,OAAT,EAAiB;AACnD,UAAO,IAAIqE,OAAOzI,SAAX,CAAqBoE,OAArB,EAA8BkX,gBAA9B,CAAP;AACA,GAFY,CAAb;AAGA,SAAO,IAAIla,YAAJ,CAAiBiR,UAAjB,EAA6BkJ,WAA7B,CAAP;AACA;;SAEQpa,mB,GAAAA,mB;SAAqBC,Y,GAAAA,Y","file":"dragee.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Dragee\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dragee\"] = factory();\n\telse\n\t\troot[\"Dragee\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 6e7eb4d7b3e3ad192690\n **/","import './expandnative'\nimport {Point} from './point'\nimport {Draggable} from './draggable'\nimport {List, listFactory} from './list'\nimport {targets, Target} from './target'\nimport {targetManagers, TargetManager, targetManagerFactory} from './targetManager'\nimport {positionType, sortingFactory, positionFactory } from './positioning'\nimport {boundType, boundFactory} from './bound'\nimport {spiders, Spider} from './spider'\nimport {arcSliders, ArcSlider} from './arcslider'\nimport {charts, Chart} from './chart'\nimport {listSwitcherFactory, ListSwitcher} from './listswitcher'\n\nglobal.Point = Point\n\nexport { Draggable,\n  List, listFactory,\n  targets, Target,\n  targetManagers, TargetManager, targetManagerFactory,\n  positionType, sortingFactory, positionFactory,\n  boundType, boundFactory,\n  spiders, Spider,\n  arcSliders, ArcSlider,\n  charts, Chart,\n  listSwitcherFactory, ListSwitcher,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/*!\n * getStyleProperty v1.0.4\n * original by kangax\n * http://perfectionkills.com/feature-testing-css-properties/\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true */\n/*global define: false, exports: false, module: false */\n\n( function( window ) {\n\n'use strict';\n\nvar prefixes = 'Webkit Moz ms Ms O'.split(' ');\nvar docElemStyle = document.documentElement.style;\n\nfunction getStyleProperty( propName ) {\n  if ( !propName ) {\n    return;\n  }\n\n  // test standard property first\n  if ( typeof docElemStyle[ propName ] === 'string' ) {\n    return propName;\n  }\n\n  // capitalize\n  propName = propName.charAt(0).toUpperCase() + propName.slice(1);\n\n  // test vendor specific properties\n  var prefixed;\n  for ( var i=0, len = prefixes.length; i < len; i++ ) {\n    prefixed = prefixes[i] + propName;\n    if ( typeof docElemStyle[ prefixed ] === 'string' ) {\n      return prefixed;\n    }\n  }\n}\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( function() {\n    return getStyleProperty;\n  });\n} else if ( typeof exports === 'object' ) {\n  // CommonJS for Component\n  module.exports = getStyleProperty;\n} else {\n  // browser global\n  window.getStyleProperty = getStyleProperty;\n}\n\n})( window );\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/desandro-get-style-property/get-style-property.js\n ** module id = 1\n ** module chunks = 0\n **/","var clone = function (o) {\n    function c(o) {\n        for (var i in o) {\n            this[i] = o[i];\n        }\n    }\n    return new c(o);\n}\n\n\n/************ Array **************/\n\nif (!Array.prototype.forEach){\n    Array.prototype.forEach = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t)\n                fun.call(thisp, t[i], i, t);\n        }\n    };\n}\n\nif (!Array.prototype.filter){\n    Array.prototype.filter = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var res = [];\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t){\n                var val = t[i]; // in case fun mutates this\n                if (fun.call(thisp, val, i, t))\n                    res.push(val);\n            }\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.every){\n        Array.prototype.every = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n        throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t && !fun.call(thisp, t[i], i, t))\n                return false;\n        }\n        return true;\n    };\n}\n\nif (!Array.prototype.map){\n    Array.prototype.map = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var res = new Array(len);\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t)\n                res[i] = fun.call(thisp, t[i], i, t);\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.some){\n    Array.prototype.some = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t && fun.call(thisp, t[i], i, t))\n                return true;\n        }\n        return false;\n    };\n}\n\nif (!Array.prototype.removeItem){\n    Array.prototype.removeItem = function(val) {\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === val) {\n                this.splice(i, 1);\n                i--;\n            }\n        }\n        return this;\n    }\n}\n\n/*********** HTMLElement ***************/\nElement.prototype.hasClass = function(c){\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\");\n    return (re.test(this.className));\n}\n\nElement.prototype.addClass = function(c){\n    if (this.hasClass(c)) return this;\n    this.className = (this.className + \" \" + c).replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n    return this;\n}\n\nElement.prototype.removeClass = function(c){\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\")\n    this.className = this.className.replace(re, \"$1\").replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n    return this;\n}\n\nHTMLElement.prototype.appbeginChild = function(node) {\n    this.firstChild ? this.insertBefore(node, this.firstChild) : this.appendChild(node);\n}\n\nHTMLElement.prototype.exchange = function(refNode) {\n    var tempParentNode = refNode.parentNode;\n    var tempBeforeNode = refNode.nextElementSibling;\n    this.parentNode.insertBefore(refNode,this);\n    if(tempBeforeNode)\n        tempParentNode.insertBefore(this,tempBeforeNode);\n    else\n        tempParentNode.appendChild(this);\n\n    return refNode;\n}\n\nvar fullOffset = function(element, axis, parent_id){\n    var tor = 0;\n    while((element) && (element.id!=parent_id)){  //&& (element!=\"\")\n        if( axis == \"x\" )\n        {\n            if(element.offsetLeft)\n                tor += element.offsetLeft;\n        }\n        if( axis == \"y\" )\n        {\n            if(element.offsetTop)\n                tor += element.offsetTop;\n        }\n            element = element.parentNode;\n    }\n    return tor;\n}\n\n/*********************** 00P *************************/\nvar extend = function(Child, Parent) {\n    var F = function() { }\n    F.prototype = Parent.prototype;\n    Child.prototype = new F();\n    Child.prototype.constructor = Child;\n    Child.superclass = Parent.prototype;\n}\n\nvar augment = function(receivingClass, givingClass) {\n    /* only provide certain methods */\n    if (arguments[2]) {\n        for (var i=2, len=arguments.length; i<len; i++) {\n            receivingClass.prototype[arguments[i]] = givingClass.prototype[arguments[i]];\n        }\n    }\n    /* provide all methods*/\n    else {\n        for (methodName in givingClass.prototype) {\n            /* check to make sure the receiving class doesn't\n               have a method of the same name as the one currently\n               being processed */\n            if (!receivingClass.prototype[methodName]) {\n                receivingClass.prototype[methodName] = givingClass.prototype[methodName];\n            }\n        }\n    }\n}\n/**************************************************/\naugment(NodeList,Array,'forEach');\n\n/**************************************************/\nMath.getNearIndex = function(arr, val){\n    var delta = Math.abs(arr[0] - val);\n    var index = 0;\n    for(var i=0; i<arr.length; i++){\n        var temp = Math.abs(arr[i] - val);\n        if(temp<delta){\n            delta = temp;\n            index = i;\n        }\n    }\n    return index;\n}\n\nMath.getNearIndexWithCaptureRadius = function(arr, radius, val){\n    var delta=Math.abs(arr[0]-val);\n    var index=0;\n    for(var i=0;i<arr.length;i++){\n        var temp=Math.abs(arr[i]-val);\n        if(temp<delta){\n            delta=temp;\n            index=i;\n        }\n    }\n    if(delta>radius){\n        return -1;\n    }\n    return index;\n}\n\nMath.bound = function(min, max, val){\n    //console.log(min,max,val)\n    return Math.max(min,Math.min(max,val));\n}\nMath.boundPoint = function(min, max, val){\n    var x = Math.max(min.x, Math.min(max.x, val.x));\n    var y = Math.max(min.y, Math.min(max.y, val.y));\n    return new Point(x, y);\n}\nMath.getLength = function(p1, p2){\n    var dx = p1.x - p2.x;\n    var dy = p1.y - p2.y;\n    return Math.sqrt(dx*dx + dy*dy);\n}\n\nMath.toRadian = function(angle){\n    return ((angle % 361) * Math.PI / 180);\n}\n/********************************************/\n\nString.prototype.substrend = function(length) {\n    return this.substr(0, this.length - length);\n}\n/********************************************/\n\nfunction XmlHttpRequest() {\n    if (window.XMLHttpRequest) {\n        xmlhttp = new XMLHttpRequest();\n    } else if (window.ActiveXObject) {\n        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    if (xmlhttp == null) {\n        alert(\"Your browser does not support XMLHTTP.\");\n    }\n    return xmlhttp;\n}\n\nwindow.requestAnimationFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          window.oRequestAnimationFrame      ||\n          window.msRequestAnimationFrame     ||\n          function(/* function */ callback, /* DOMElement */ element){\n            window.setTimeout(callback, 1000 / 60);\n          };\n})();\n\ntry {\n    if(!Object.prototype.__defineGetter__ &&\n    Object.defineProperty({}, \"x\", { get: function() { return true } }).x) {\n        Object.defineProperty(Object.prototype, \"__defineGetter__\",\n     { enumerable: false, configurable: true,\n        value: function(name, func) {\n            Object.defineProperty(this, name,\n             { get: func, enumerable: true, configurable: true });\n        }\n     });\n        Object.defineProperty(Object.prototype, \"__defineSetter__\",\n     { enumerable: false, configurable: true,\n        value: function(name, func) {\n            Object.defineProperty(this, name,\n             { set: func, enumerable: true, configurable: true });\n        }\n     });\n    }\n} catch(defPropException) { /*Do nothing if an exception occurs*/ };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/expandnative.js\n **/","'use strict';\n    import util from './util'\n    var mathPoint;\n    var Dragee = { util };//todo remove after refactore\n\n\n\n    /*********************/\n    function Point(x, y){\n        this.x = x;\n        this.y = y;\n    }\n\n    Point.prototype.toString = function(){\n        return '{x=' + this.x + ',y=' + this.y + '}';\n    };\n    Point.prototype.add = function(p){\n        return new Point(this.x + p.x, this.y + p.y);\n    };\n    Point.prototype.sub = function(p){\n        return new Point(this.x - p.x, this.y - p.y);\n    };\n    Point.prototype.mult = function(k){\n        return new Point(this.x * k, this.y * k);\n    };\n    Point.prototype.negative = function(){\n        return new Point(-this.x, -this.y);\n    };\n    Point.prototype.compare = function(p){\n        return (this.x === p.x && this.y === p.y);\n    };\n    Point.prototype.clone = function(){\n        return new Point(this.x, this.y);\n    };\n\n    /****************/\n    function Rectangle(position, size){\n        this.position = position;\n        this.size = size;\n    }\n\n    Rectangle.prototype.getP1 = function(){\n        return this.position;\n    };\n    Rectangle.prototype.getP2 = function(){\n        return new Point(this.position.x + this.size.x, this.position.y);\n    };\n    Rectangle.prototype.getP3 = function(){\n        return this.position.add(this.size);\n    };\n    Rectangle.prototype.getP4 = function(){\n        return new Point(this.position.x, this.position.y + this.size.y);\n    };\n    Rectangle.prototype.getCenter = function(){\n        return this.position.add(this.size.mult(0.5));\n    };\n    Rectangle.prototype.or = function(rect){\n        var position = new Point(Math.min(this.position.x, rect.position.x), Math.min(this.position.y, rect.position.y)), size = (new Point(Math.max(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.max(this.position.y + this.size.y, rect.position.y + rect.size.y))).sub(position);\n        return new Rectangle(position, size);\n    };\n    Rectangle.prototype.and = function(rect){\n        var position = new Point(Math.max(this.position.x, rect.position.x), Math.max(this.position.y, rect.position.y)), size = (new Point(Math.min(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.min(this.position.y + this.size.y, rect.position.y + rect.size.y))).sub(position);\n        if(size.x <= 0 || size.y <= 0){\n            return null;\n        }\n        return new Rectangle(position, size);\n    };\n\tRectangle.prototype.includePoint = function(p){\n\t\treturn !(this.position.x > p.x || this.position.x + this.size.x < p.x || this.position.y > p.y || this.position.y + this.size.y < p.y);\n\t};\n\tRectangle.prototype.includeRectangle = function(rectangle){\n\t\treturn this.includePoint(rectangle.position) && this.includePoint(rectangle.getP3());\n\t};\n    Rectangle.prototype.moveToBound = function(rect, axis){\n        var selAxis, crossRectangle, thisCenter, rectCenter, sign, offset;\n        if(axis){\n            selAxis = axis;\n        }else{\n            crossRectangle = this.and(rect);\n            if(!crossRectangle){\n                return rect;\n            }\n            selAxis = crossRectangle.size.x > crossRectangle.size.y ? \"y\" : \"x\";\n        }\n        thisCenter = this.getCenter();\n        rectCenter = rect.getCenter();\n        sign = thisCenter[selAxis] > rectCenter[selAxis] ? -1 : 1;\n        offset = sign > 0 ? this.position[selAxis] + this.size[selAxis] - rect.position[selAxis] : this.position[selAxis] - (rect.position[selAxis] + rect.size[selAxis]);\n        rect.position[selAxis] = rect.position[selAxis] + offset;\n        return rect;\n    };\n    Rectangle.prototype.getSquare = function(){\n        return this.size.x * this.size.y;\n    };\n    Rectangle.prototype.styleApply = function(el){\n        el = el || document.querySelector(\"ind\");\n        el.style.left = this.position.x + \"px\";\n        el.style.top = this.position.y + \"px\";\n        el.style.width = this.size.x + \"px\";\n        el.style.height = this.size.y + \"px\";\n    };\n    Rectangle.prototype.growth = function(size){\n        this.size = this.size.add(size);\n        this.position = this.position.add(size.mult(-0.5));\n    };\n    Rectangle.prototype.getMinSide = function(){\n        return Math.min(this.size.x, this.size.y);\n    };\n\n    /*****************/\n    mathPoint = {\n        getLength: function(options){\n            if(!options || (options.x && options.y && !options.isTransformationSpace)){\n                return function(p1, p2){\n                    var dx = p1.x - p2.x, dy = p1.y - p2.y;\n                    return Math.sqrt(dx * dx + dy * dy);\n                };\n            }else{\n                if(options.x && options.y && options.isTransformationSpace){\n                    return function(p1, p2){\n                        return Math.sqrt(Math.pow(options.x * Math.abs(p1.x - p2.x), 2) + Math.pow(options.y * Math.abs(p1.y - p2.y), 2));\n                    };\n                }else{\n                    if(options.x){\n                        return function(p1, p2){\n                            return Math.abs(p1.x - p2.x);\n                        };\n                    }else{\n                        if(options.y){\n                            return function(p1, p2){\n                                return Math.abs(p1.y - p2.y);\n                            };\n                        }\n                    }\n                }\n            }\n        },\n        indexOfNearPoint: function(arr, val, radius, getLength){\n            var size, index = 0, i, temp;\n            getLength = getLength || this.getLength();\n            if(arr.length === 0){\n                return -1;\n            }\n            size = getLength(arr[0], val);\n            for(i = 0; i < arr.length; i++){\n                temp = getLength(arr[i], val);\n                if(temp < size){\n                    size = temp;\n                    index = i;\n                }\n            }\n            if(radius >= 0 && size > radius){\n                return -1;\n            }\n            return index;\n        },\n        bound: function(min, max, val){\n            return Math.max(min, Math.min(max, val));\n        },\n        boundPoint: function(min, max, val){\n            var x = Math.max(min.x, Math.min(max.x, val.x)), y = Math.max(min.y, Math.min(max.y, val.y));\n            return new Point(x, y);\n        },\n        //Return crossing point of two lines\n        directCrossing: function(L1P1, L1P2, L2P1, L2P2){\n            var temp, k1, k2, b1, b2, x, y;\n            if(L2P1.x === L2P2.x){\n                temp = L2P1;\n                L2P1 = L1P1;\n                L1P1 = temp;\n                temp = L2P2;\n                L2P2 = L1P2;\n                L1P2 = temp;\n            }\n            if(L1P1.x === L1P2.x){\n                k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n                b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n                x = L1P1.x;\n                y = x * k2 + b2;\n                return new Point(x, y);\n            }else{\n                k1 = (L1P2.y - L1P1.y) / (L1P2.x - L1P1.x);\n                b1 = (L1P2.x * L1P1.y - L1P1.x * L1P2.y) / (L1P2.x - L1P1.x);\n                k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n                b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n                x = (b1 - b2) / (k2 - k1);\n                y = x * k1 + b1;\n                return new Point(x, y);\n            }\n        },\n        //Get point and check that point belong to segment of the line\n        // if not - return the nearest point of segment\n        boundOnSegment: function(LP1, LP2, P){\n            var x, y;\n            x = mathPoint.bound(Math.min(LP1.x, LP2.x), Math.max(LP1.x, LP2.x), P.x);\n            if(x != P.x){\n                y = (x === LP1.x) ? LP1.y : LP2.y;\n                P = new Point(x, y);\n            }\n            y = mathPoint.bound(Math.min(LP1.y, LP2.y), Math.max(LP1.y, LP2.y), P.y);\n            if(y != P.y){\n                x = (y === LP1.y) ? LP1.x : LP2.x;\n                P = new Point(x, y);\n            }\n            return P;\n        },\n        boundOnLine: function(A, B, P){\n            var AP = new Point(P.x - A.x, P.y - A.y),\n                AB = new Point(B.x - A.x, B.y - A.y),\n                ab2 = AB.x * AB.x + AB.y * AB.y,\n                ap_ab = AP.x * AB.x + AP.y * AB.y,\n                t = ap_ab/ab2;\n            return new Point(A.x + AB.x * t, A.y + AB.y * t);\n        },\n        getPointInLine: function(LP1, LP2, percent){\n            var dx = LP2.x - LP1.x, dy = LP2.y - LP1.y;\n            return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n        },\n        getPointInLineByLenght: function(LP1, LP2, lenght){\n            var dx = LP2.x - LP1.x, dy = LP2.y - LP1.y, percent = lenght / this.getLength()(LP1, LP2);\n            return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n        },\n        createRectangleFromElement: function(el, parent, isContentBoxSize, isConsiderTranslate){\n            var size = this.getSizeOfElement(el, isContentBoxSize)\n            return new Rectangle(this.getOffset(el, parent || el.parentNode, isConsiderTranslate), size);\n        },\n        getSizeOfElement: function(el, isContentBoxSize){\n            var width = parseInt(window.getComputedStyle(el)['width']), height = parseInt(window.getComputedStyle(el)['height']);\n            if(!isContentBoxSize){\n                width += Dragee.util.getSumValueOfStyleRule(el, [\"padding-left\", \"padding-right\", \"border-left-width\", \"border-right-width\"]);\n                height += Dragee.util.getSumValueOfStyleRule(el, [\"padding-top\", \"padding-bottom\", \"border-top-width\", \"border-bottom-width\"]);\n            }\n            return new Point(width, height);\n        },\n        getOffset: function(el, parent, isConsiderTranslate){\n            var elRect = el.getBoundingClientRect(), parentRect = parent.getBoundingClientRect();\n            return new Point(elRect.left - parentRect.left, elRect.top - parentRect.top);\n        },\n        getPointFromRadialSystem: function(angle, length, center){\n            center = center || new Point(0, 0);\n            return center.add(new Point(length * Math.cos(angle), length * Math.sin(angle)));\n        },\n        addPointToBoundPoints: function(boundpoints, point, isRight){\n            var i, result = boundpoints.filter(function(bPoint){\n                return  bPoint.y > point.y || (isRight ? bPoint.x < point.x : bPoint.x > point.x);\n            });\n            for(i = 0; i < result.length; i++){\n                if(point.y < result[i].y){\n                    result.splice(i, 0, point);\n                    return result;\n                }\n            }\n            result.push(point);\n            return result;\n        },\n        getAngle: function(p1, p2){\n            var diff = p2.sub(p1);\n            return this.normalizeAngle(Math.atan2(diff.y, diff.x));\n        },\n        toRadian: function(angle){\n            return ((angle % 360) * Math.PI / 180);\n        },\n        toDegree: function(angle){\n            return (angle * 180 / Math.PI ) % 360;\n        },\n        boundAngle: function(min, max, val){\n            var dmin,dmax;\n            if(min < max && val > min && val < max){\n                return val;\n            }else if(max < min && ( val < max || val > min )){\n                return val;\n            }else{\n                dmin = this.getAngleDiff(min,val);\n                dmax = this.getAngleDiff(max,val);\n                if(dmin < dmax){\n                    return min;\n                }else{\n                    return max;\n                }\n            }\n        },\n        getNearestAngle:function(arr,angle){\n            var i,temp,diff = Math.PI * 2 ,value;\n            for(i = 0; i < arr.length;i++){\n                temp = mathPoint.getAngleDiff(arr[i],angle);\n                if(diff < temp){\n                    diff = temp;\n                    value = arr[i];\n                }\n            }\n            return value;\n        },\n        getAngleDiff:function(alpha,beta){\n            var minAngle = Math.min(alpha,beta),\n                maxAngle =  Math.max(alpha,beta);\n            return Math.min(maxAngle - minAngle,minAngle + Math.PI*2 - maxAngle);\n        },\n        normalizeAngle: function( val){\n            while(val < 0 ){\n                val+= 2 * Math.PI;\n            }\n            while(val > 2 * Math.PI ){\n                val-= 2 * Math.PI;\n            }\n            return val;\n        },\n        distance: function(P1, P2){\n          var xs = 0;\n          var ys = 0;\n\n          xs = P2.x - P1.x;\n          xs = xs * xs;\n\n          ys = P2.y - P1.y;\n          ys = ys * ys;\n\n          return Math.sqrt( xs + ys );\n        }\n    };\n\n    export {Point, Rectangle, mathPoint};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/point.js\n **/","    'use strict';\n\n    var util = {\n        getDefaultParent: function (element){\n            var parent = element.parentNode;\n            while(parent.parentNode && window.getComputedStyle(parent)[\"position\"] === \"static\"){\n                parent = parent.parentNode;\n            }\n            return parent;\n        },\n        bind: function(func, context){\n            return function(){\n                return func.apply(context, [].splice.call(arguments, 0));\n            };\n        },\n        getTouchByID: function(element, touchId){\n            var i;\n            for(i = 0; i < element.changedTouches.length; i++){\n                if(element.changedTouches[i].identifier === touchId){\n                    return element.changedTouches[i];\n                }\n            }\n            return false;\n        },\n        getSumValueOfStyleRule: function(element, rules){\n            return rules.reduce(function(sum, rule){\n                return sum + parseInt(window.getComputedStyle(element)[rule]||0);\n            }, 0);\n        },\n        appendFirstChild: function(element, node){\n            element.firstChild ? element.insertBefore(node, element.firstChild) : element.appendChild(node);\n        },\n        range: function(start, stop, step){\n            var result = [];\n            if(typeof stop === 'undefined'){\n                stop = start;\n                start = 0;\n            }\n            if(typeof step === 'undefined'){\n                step = 1;\n            }\n            if((step > 0 && start >= stop) || (step < 0 && start <= stop)){\n                return [];\n            }\n            for(var i = start; step > 0 ? i < stop : i > stop; i += step){\n                result.push(i);\n            }\n            return result;\n        },\n        setStyle: function(element, style){\n            style = style || {};\n            var cssText = \"\", key;\n            for(key in style){\n                if(style.hasOwnProperty(key)){\n                    cssText += key + \": \" + style[key] + \"; \";\n                }\n            }\n\n            element.style.cssText = cssText;\n        },\n        randomColor:function(){\n            var rnd = function(){\n                    return Math.round(Math.random()*255);\n                },\n                toHexString = function(digit){\n                    var str = digit.toString(16);\n                    while(str.length < 2){\n                        str = \"0\" + str;\n                    }\n                    return str;\n                },\n                red = rnd(),\n                green = rnd(),\n                blue = rnd();\n\n            return \"#\" + toHexString(red) + toHexString(green) + toHexString(blue);\n        },\n        createCanvas: function(area, rectagle){\n            var canvas;\n            if(window.getComputedStyle(area).position === \"static\"){\n                area.style.position = \"relative\";\n            }\n            canvas = document.createElement(\"canvas\");\n            canvas.setAttribute(\"width\", rectagle.size.x + \"px\");\n            canvas.setAttribute(\"height\", rectagle.size.y + \"px\");\n            util.setStyle(canvas, {\n                position: \"absolute\",\n                left: rectagle.position.y + \"px\",\n                top: rectagle.position.y + \"px\",\n                width: rectagle.size.x + \"px\",\n                height: rectagle.size.y + \"px\"\n            });\n            util.appendFirstChild(area, canvas);\n            return canvas;\n        }\n    };\n\n    export default util;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","    'use strict';\n\n\n    import util from './util'\n    import Event from './event'\n    import getStyleProperty from 'desandro-get-style-property'\n    import {boundType, boundFactory} from './bound'\n    import {mathPoint, Point, Rectangle} from './point'\n\n    var Dragee = { util, boundType, boundFactory, Event};//todo remove after refactore\n\n    var isTouch = 'ontouchstart' in window, mouseEvents = {\n        start: 'mousedown',\n        move: 'mousemove',\n        end: 'mouseup'\n    }, touchEvents = {\n        start: 'touchstart',\n        move: 'touchmove',\n        end: 'touchend'\n    },\n    events = isTouch ? touchEvents : mouseEvents,\n    draggables = [],\n    onCreateDraggable = function(draggable){\n        var message = \"for this element Dragee.Draggable is already exist, don't create it twice \";\n        if(draggables.some(function(existing){\n            return draggable.element === existing.element;\n        })){\n            throw message;\n        }\n        draggables.push(draggable);\n    },\n    transformProperty = getStyleProperty('transform'),\n    transitionProperty = getStyleProperty('transition');\n\n    //Dragee.events = events;\n\n    function Draggable(element, options){\n        options = options || {};\n        var i, that = this, displayListener, parent = options.parent || Dragee.util.getDefaultParent(element);\n        this.options = {\n            parent: parent,\n            bound: Dragee.boundFactory(Dragee.boundType.element)(parent, parent),\n            startFilter: false,\n            isContentBoxSize: false,\n            position: false\n        }\n        for(i in options){\n            if(options.hasOwnProperty(i)){\n                this.options[i] = options[i];\n            }\n        }\n        this.onEnd = new Dragee.Event(this, { isReverse: true, isStopOnTrue: true });\n        this.onMove = new Dragee.Event(this);\n        this.onStart = new Dragee.Event(this);\n\n        this.onEnd.add(function(){\n            this.move(this.position, 0, true, true);\n        });\n\n        if(options.onEnd){\n            this.onEnd.add(options.onEnd);\n        }\n        if(options.onMove){\n            this.onMove.add(options.onMove);\n        }\n        if(options.onStart){\n            this.onStart.add(options.onStart);\n        }\n        this.element = element;\n        this.bound = this.options.bound;\n        onCreateDraggable(this);\n        that.init();\n    }\n\n    Draggable.prototype.init = function(){\n        this._enable = true;\n        this.offset = mathPoint.getOffset(this.element, this.options.parent, true);\n        this.fixPosition = this.offset;\n        this.position = this.offset;\n        if(this.options.position){\n            this.initPosition = this.options.position;\n            this.move(this.initPosition, 0, true, true);\n        } else {\n            this.initPosition = this.offset;\n        }\n        this._dragStart = Dragee.util.bind(this.dragStart, this);\n        this._delayedDragStart = Dragee.util.bind(this.delayedDragStart, this);\n        this._dragMove = Dragee.util.bind(this.dragMove, this);\n        this._dragEnd = Dragee.util.bind(this.dragEnd, this);\n\n        if(this.options.delayedStart) {\n            this.element.addEventListener(touchEvents.start, this._delayedDragStart);\n            this.element.addEventListener(mouseEvents.start, this._delayedDragStart);\n        } else {\n            this.element.addEventListener(touchEvents.start, this._dragStart);\n            this.element.addEventListener(mouseEvents.start, this._dragStart);\n        }\n\n        this.bound.refresh && this.bound.refresh();\n    };\n\n    Draggable.prototype.reinit = function(){\n        this.offset = mathPoint.getOffset(this.element, this.options.parent, true);\n        this.fixPosition = this.offset;\n        this.position = this.offset;\n        if(this.options.position){\n            this.initPosition = this.options.position;\n            this.move(this.initPosition, 0, true, true);\n        } else {\n            this.initPosition = this.offset;\n        }\n\n        this.bound.refresh && this.bound.refresh();\n    };\n\n    Draggable.prototype.getSize = function(recalulate){\n        return mathPoint.getSizeOfElement(this.element, this.options.isContentBoxSize);\n    };\n\n    Draggable.prototype.getPosition = function(){\n        this.position = this.offset.add(this._transformPosition || new Point(0, 0));\n        return this.position;\n    };\n\n    Draggable.prototype.getCenter = function(){\n        return this.position.add(this.getSize().mult(0.5));\n    };\n\n    Draggable.prototype._setTranslate = function(point){\n        this._transformPosition = point;\n\n        var transform = this.element.style[transformProperty],\n            translateCss = ' translate3d(' + point.x + 'px,' + point.y + 'px, 0px)';\n\n        var ua = window.navigator.userAgent;\n        var msie = ua.indexOf(\"MSIE \");\n\n        if(msie) {\n            translateCss = ' translate(' + point.x + 'px,' + point.y + 'px)';\n            if(!/translate\\([^)]+\\)/.test(transform)){\n                transform += translateCss;\n            }else{\n                transform = transform.replace(/translate\\([^)]+\\)/, translateCss);\n            }\n        } else {\n            if(!/translate3d\\([^)]+\\)/.test(transform)){\n                transform += translateCss;\n            }else{\n                transform = transform.replace(/translate3d\\([^)]+\\)/, translateCss);\n            }\n        }\n\n        this.element.style[transformProperty] = transform;\n    };\n\n    Draggable.prototype.move = function(point, time, isFix, isSilent){\n        var that = this;\n        time = time || 0;\n        point = point.clone();\n        if(isFix){\n            this.fixPosition = point;\n        }\n\n        this.determineDirection(point);\n\n        this.position = point;\n\n        transitionProperty && (that.element.style[transitionProperty] = time + \"ms\");\n        that._setTranslate(point.sub(that.offset));\n        isSilent || that.onMove.fire();\n    };\n\n    Draggable.prototype.refreshPosition = function(){\n        this.setPosition(this.getPosition());\n    };\n\n    Draggable.prototype.setPosition = function(point){\n        point = point.clone();\n        this.position = point;\n\n        transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n        this._setTranslate(point.sub(this.offset));\n    };\n\n    Draggable.prototype.setZeroTransition = function(){\n        transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n    };\n\n    Draggable.prototype.determineDirection = function(point){\n        this.leftDirection = (this.position.x < point.x);\n        this.rightDirection = (this.position.x > point.x);\n        this.upDirection = (this.position.y > point.y);\n        this.downDirection = (this.position.y < point.y);\n    };\n\n    Draggable.prototype.delayedDragStart = function(delayedEvent){\n        var isTouchEvent = (isTouch && (delayedEvent instanceof TouchEvent)),\n            startTouchPoint = new Point(\n                isTouchEvent ? delayedEvent.changedTouches[0].pageX : delayedEvent.clientX,\n                isTouchEvent ? delayedEvent.changedTouches[0].pageY : delayedEvent.clientY\n            ),\n            that = this;\n\n        if(delayedEvent.shiftKey) return;\n\n        function checkMovement(event){\n            var isTouchEvent = (isTouch && (event instanceof TouchEvent)),\n                touchPoint = new Point(\n                    isTouchEvent ? event.changedTouches[0].pageX : event.clientX,\n                    isTouchEvent ? event.changedTouches[0].pageY : event.clientY\n                );\n\n            if(Math.abs(touchPoint.x-startTouchPoint.x) > 5\n                || Math.abs(touchPoint.y-startTouchPoint.y) > 5) {\n\n                document.removeEventListener(touchEvents.move, checkMovement);\n                document.removeEventListener(mouseEvents.move, checkMovement);\n\n                BlockSelection.startDragSelection(that, delayedEvent);\n                that.dragStart(delayedEvent);\n            }\n        }\n\n        function removeCheckMovement(event){\n            document.removeEventListener(touchEvents.move, checkMovement);\n            document.removeEventListener(mouseEvents.move, checkMovement);\n\n            document.removeEventListener(touchEvents.end, removeCheckMovement);\n            document.removeEventListener(mouseEvents.end, removeCheckMovement);\n        }\n\n        document.addEventListener(touchEvents.move, checkMovement);\n        document.addEventListener(mouseEvents.move, checkMovement);\n\n        document.addEventListener(touchEvents.end, removeCheckMovement);\n        document.addEventListener(mouseEvents.end, removeCheckMovement);\n    };\n\n    Draggable.prototype.dragStart = function(event){\n        this.currentEvent = event;\n        if(!this._enable || ( this.options.startFilter && !this.options.startFilter(event))){\n            return;\n        }\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        this._startTouchPoint = new Point(isTouchEvent ? event.changedTouches[0].pageX : event.clientX, isTouchEvent ? event.changedTouches[0].pageY : event.clientY);\n\n        this._startPosition = this.getPosition();\n        if(isTouchEvent){\n            this._touchId = event.changedTouches[0].identifier;\n        }\n        event.stopPropagation();\n        if(!(event.target instanceof HTMLInputElement\n            || event.target instanceof HTMLInputElement)){\n            event.preventDefault();\n        }else{\n            event.target.focus();\n        }\n\n        document.addEventListener(touchEvents.move, this._dragMove);\n        document.addEventListener(mouseEvents.move, this._dragMove);\n\n        document.addEventListener(touchEvents.end, this._dragEnd);\n        document.addEventListener(mouseEvents.end, this._dragEnd);\n\n        this.isDragee = true;\n\n        this.onStart.fire(event);\n        this.element.addClass(\"active\");\n        this.onMove.fire(event);\n    };\n\n    Draggable.prototype.dragMove = function(event){\n        this.currentEvent = event;\n\n        var touch, touchPoint, point;\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        if(isTouchEvent){\n            if(!(touch = Dragee.util.getTouchByID(event, this._touchId))){\n                return;\n            }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        touchPoint = new Point(isTouchEvent ? touch.pageX : event.clientX, isTouchEvent ? touch.pageY : event.clientY);\n        point = this._startPosition.add(touchPoint.sub(this._startTouchPoint));\n        point = this.bound(point, this.getSize());\n        this.touchPoint = touchPoint;\n        this.move(point, 0);\n    };\n\n    Draggable.prototype.dragEnd = function(event){\n        var touch;\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        if(isTouchEvent){\n            if(!(touch = Dragee.util.getTouchByID(event, this._touchId))){\n                return;\n            }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        this.onEnd.fire(event);\n\n        document.removeEventListener(touchEvents.move, this._dragMove);\n        document.removeEventListener(mouseEvents.move, this._dragMove);\n\n        document.removeEventListener(touchEvents.end, this._dragEnd);\n        document.removeEventListener(mouseEvents.end, this._dragEnd);\n\n        this.isDragee = false;\n        this.element.removeClass(\"active\");\n    };\n\n    Draggable.prototype.getRectangle = function(){\n        return new Rectangle(this.position, this.getSize());\n    };\n\n    Draggable.prototype.refresh = function(){\n        this.getSize(true);\n        this.bound.refresh && this.bound.refresh();\n    }\n\n    Draggable.prototype.destroy = function(){\n        this.element.removeEventListener(touchEvents.start, this._dragStart);\n        this.element.removeEventListener(mouseEvents.start, this._dragStart);\n        this.element.removeEventListener(touchEvents.move, this._dragMove);\n        this.element.removeEventListener(mouseEvents.move, this._dragMove);\n        this.element.removeEventListener(touchEvents.end, this._dragEnd);\n        this.element.removeEventListener(mouseEvents.end, this._dragEnd);\n\n        this.onEnd.reset();\n        this.onMove.reset();\n    };\n\n    Draggable.prototype.__defineGetter__(\"enable\", function(){\n        return this._enable;\n    });\n\n    Draggable.prototype.__defineSetter__(\"enable\", function(enable) {\n        if(enable) {\n            this.element.removeClass(\"disable\");\n        } else {\n            this.element.addClass(\"disable\");\n        }\n\n        return this._enable = enable;\n    });\n\n    export {Draggable, draggables, events};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/draggable.js\n **/","'use strict';\n\n    function Event(context, options){\n        options = options || {}\n        this.funcs = [];\n        this.context = context;\n        this.isReverse = options.isReverse || false;\n        this.isStopOnTrue = options.isStopOnTrue || false;\n    }\n\n    Event.prototype.fire = function(){\n        var args = [].slice.call(arguments),\n            i, retValue, fs = this.isReverse ? this.funcs.slice().reverse() : this.funcs;\n\n        for(i = 0; i < fs.length; i++){\n            retValue = fs[i].apply(this.context, args);\n            if(this.isStopOnTrue && retValue){\n                return true;\n            }\n        }\n        return !this.isStopOnTrue;\n    };\n\n    Event.prototype.add = function(f){\n        this.funcs.push(f);\n    };\n\n    Event.prototype.unshift = function(f){\n        this.funcs.unshift(f);\n    };\n\n    Event.prototype.remove = function(f){\n        var index = this.funcs.indexOf(f);\n        if(index !== -1){\n            this.funcs.splice(index, 1)\n        }\n    };\n\n    Event.prototype.reset = function(f){\n        this.funcs = [];\n    };\n\n    export default Event;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event.js\n **/","'use strict';\nimport {mathPoint} from './point'\n\n\n\tvar boundType = {\n\t\t\telement: -1,\n\t\t\trectangle: 0,\n\t\t\tlineX: 1,\n\t\t\tlineY: 2,\n\t\t\tline: 3,\n\t\t\tunificationOfRectangle: 4,\n\t\t\tcircle:5,\n\t\t\tarc:6\n\t};\n\t\n\tfunction boundFactory(type){\n\t\tswitch(type){\n\t\t\tcase boundType.element:\n\t\t\t\treturn function(element, parent){\n\t\t\t\t\tvar bound,\n\t\t\t\t\t\tretFunc = function(){\n\t\t\t\t\t\t\treturn bound.apply(this, arguments);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tretFunc.refresh = function(){\n\t\t\t\t\t\tbound = boundFactory(boundType.rectangle)(\n\t\t\t\t\t\t\tmathPoint.createRectangleFromElement(element, parent)\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\tretFunc.refresh();\n\t\t\t\t\treturn retFunc;\n\t\t\t\t};\n\t\t\tcase boundType.rectangle:\n\t\t\t\treturn function (rectangle){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone(),\n\t\t\t\t\t\t\trectP2 = rectangle.getP3();\n\n\t\t\t\t\t\tif(rectangle.position.x > calcPoint.x){\n\t\t\t\t\t\t\t(calcPoint.x = rectangle.position.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectangle.position.y > calcPoint.y){\n\t\t\t\t\t\t\tcalcPoint.y = rectangle.position.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectP2.x < calcPoint.x + size.x){\n\t\t\t\t\t\t\tcalcPoint.x = rectP2.x - size.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectP2.y < calcPoint.y + size.y){\n\t\t\t\t\t\t\tcalcPoint.y = rectP2.y - size.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.lineX:\n\t\t\t\treturn function (x, startY, endY){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone();\n\t\t\t\t\t\tcalcPoint.x = x;\n\t\t\t\t\t\tif(startY > calcPoint.y){\n\t\t\t\t\t\t\tcalcPoint.y = startY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(endY < calcPoint.y + size.y){\n\t\t\t\t\t\t\tcalcPoint.y = endY - size.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.lineY:\n\t\t\t\treturn function (y, startX, endX){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone();\n\t\t\t\t\t\tcalcPoint.y = y;\n\t\t\t\t\t\tif(startX > calcPoint.x){\n\t\t\t\t\t\t\tcalcPoint.x = startX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(endX < calcPoint.x + size.x){\n\t\t\t\t\t\t\tcalcPoint.x = endX - size.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.line:\n\t\t\t\treturn function (start, end){\n\t\t\t\t\tvar alpha = Math.atan2(end.y - start.y, end.x - start.x),\n\t\t\t\t\t\tbeta = alpha + Math.PI / 2,\n\t\t\t\t\t\tsomeK = 10,\n\t\t\t\t\t\tcosBeta = Math.cos(beta),\n\t\t\t\t\t\tsinBeta = Math.sin(beta);\n\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar point2 = new Point(point.x + someK * cosBeta, point.y + someK * sinBeta),\n\t\t\t\t\t\t\tpointCrossing = mathPoint.directCrossing(start, end, point, point2),\n\t\t\t\t\t\t\tnewEnd = mathPoint.getPointInLineByLenght(end, start, size.x);\n\n\t\t\t\t\t\tpointCrossing = mathPoint.boundOnLine(start, newEnd, pointCrossing);\n\t\t\t\t\t\treturn pointCrossing;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.circle:\n\t\t\t\treturn function(center, radius){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar boundedPoint = mathPoint.getPointInLineByLenght(center,point,radius);\n\t\t\t\t\t\treturn boundedPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.arc:\n\t\t\t\treturn function(center, radius, startAgle, endAngle){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar boundStartAngle = typeof startAgle === \"function\" ? startAgle() : startAgle,\n\t\t\t\t\t\t\tboundEndtAngle = typeof startAgle === \"function\" ? endAngle() : endAngle,\n\t\t\t\t\t\t\tangle = mathPoint.getAngle(center, point);\n\n\t\t\t\t\t\tangle = mathPoint.normalizeAngle(angle);\n\t\t\t\t\t\tangle = mathPoint.boundAngle(boundStartAngle, boundEndtAngle, angle);\n\t\t\t\t\t\treturn mathPoint.getPointFromRadialSystem(angle, radius, center);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t}\n\n  export {boundType, boundFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bound.js\n **/","'use strict';\n\n\tvar lists = [];\n\n\timport util from './util'\n\timport Event from './event'\n\timport {mathPoint, Point} from './point'\n\timport {boundType, boundFactory} from './bound'\n\timport {Draggable, draggables, events} from './draggable'\n\n\tvar Dragee = { util, boundType, boundFactory, Draggable, events, Event };//todo remove after refactore\n\n\n\tfunction List(draggables, options){\n\t\tvar i;\n\t\tthis.options = {\n\t\t\ttimeEnd: 200,\n\t\t\ttimeExcange: 400,\n\t\t\tradius: 30,\n\t\t\tgetLength: mathPoint.getLength(),\n\t\t\tisDisplacement: false\n\t\t};\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.draggables = draggables;\n\t\tlists.push(this);\n\t\tthis.onChange = new Dragee.Event(this);\n\t\tif(options && options.onChange){\n\t\t\tthis.onChange.add(options.onChange);\n\t\t}\n\t\tthis.init();\n\t}\n\n\tList.prototype.init = function(){\n\t\tthis._enable = true;\n\t\tthis.draggables.forEach(this.initDraggable, this);\n\t};\n\n\tList.prototype.initDraggable = function(draggable){\n\t\tvar moveHandler, that = this;\n\t\tdraggable.enable = this._enable;\n\t\tif(this.options.isDisplacement){\n\t\t\tmoveHandler = function(){\n\t\t\t\tif(this.isDragee){\n\t\t\t\t\tthat.onStart(this);\n\t\t\t\t\tdraggable.onMove.remove(moveHandler);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\tthat.onEndDisplaycement(this);\n\t\t\t\tdraggable.onMove.add(moveHandler);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tdraggable.onMove.add(moveHandler);\n\t\t}else{\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\tthat.onEnd(this);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tList.prototype.moveOrSave = function(draggable, position, time){\n\t\tif(draggable.isDragee){\n\t\t\tdraggable.fixPosition = position;\n\t\t}else{\n\t\t\tdraggable.move(position, time, true);\n\t\t}\n\t};\n\n\tList.prototype.onEnd = function(draggable){\n\t\tvar fixPositions = this.getCurrentFixPosition(), currentIndex, excangeIndex;\n\t\tcurrentIndex = this.draggables.indexOf(draggable);\n\t\texcangeIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif(excangeIndex === -1 || excangeIndex === currentIndex){\n\t\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t\t}else{\n\t\t\tthis.moveOrSave(this.draggables[excangeIndex], fixPositions[currentIndex], this.options.timeExcange);\n\t\t\tthis.draggables[currentIndex].move(fixPositions[excangeIndex], this.options.timeEnd, true);\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\treturn true;\n\t};\n\n\tList.prototype.onEndDisplaycement = function(draggable){\n\t\tvar currentIndex, i, targetIndex,\n\t\t\tsortedDraggables = this.getSortedDraggables(),\n\t\t\tfixPositions = sortedDraggables.map(function(draggable){\n\t\t\t\treturn draggable.fixPosition;\n\t\t\t});\n\t\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\t\ttargetIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif(targetIndex !==-1){\n\t\t\tif(targetIndex < currentIndex){\n\t\t\t\tfor(i=targetIndex; i<currentIndex; i++){\n\t\t\t\t\tthis.moveOrSave(sortedDraggables[i], fixPositions[i+1], this.options.timeExcange);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor(i=currentIndex; i<targetIndex; i++){\n\t\t\t\t\tthis.moveOrSave(sortedDraggables[i+1], fixPositions[i], this.options.timeExcange);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdraggable.move(fixPositions[targetIndex], this.options.timeEnd, true);\n\t\t} else {\n\t\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t\t}\n\t};\n\n\tList.prototype.onStart = function(draggable){\n\t\tvar currentIndex,i,\n\t\t\tsortedDraggables = this.getSortedDraggables(),\n\t\t\tfixPositions = sortedDraggables.map(function(draggable){\n\t\t\t\treturn draggable.fixPosition;\n\t\t\t});\n\n\t\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\t\tfor(i = currentIndex + 1; i < sortedDraggables.length; i++){\n\t\t\tthis.moveOrSave(sortedDraggables[i],fixPositions[i-1],this.options.timeExcange);\n\t\t}\n\t\tsortedDraggables[currentIndex].fixPosition = fixPositions[i-1];\n\t};\n\n\n\n\tList.prototype.getCurrentFixPosition = function(){\n\t\treturn this.draggables.map(function(draggable){\n\t\t\treturn draggable.fixPosition.clone();\n\t\t});\n\t};\n\n\tList.prototype.getSortedDraggables = function(){\n\t\tvar sortedDraggables,\n\t\t\tinitPositions = this.draggables.map(function(draggable){\n\t\t\t\treturn draggable.initPosition;\n\t\t\t});\n\t\tsortedDraggables = initPositions.map(function(position){\n\t\t\treturn this.draggables.filter(function(draggable){\n\t\t\t\treturn draggable.fixPosition.compare(position);\n\t\t\t},this)[0];\n\t\t},this);\n\t\treturn sortedDraggables;\n\t};\n\n\tList.prototype.reset = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.move(draggable.initPosition, 0, true, false);\n\t\t});\n\t};\n\n\tList.prototype.refresh = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.refresh();\n\t\t});\n\t};\n\n\tList.prototype.add = function(draggables){\n\t\tvar that = this;\n\t\tif(!(draggables instanceof Array)){\n\t\t\tdraggables = [draggables];\n\t\t}\n\t\tdraggables.forEach(this.initDraggable, this);\n\t\tthis.draggables = this.draggables.concat(draggables);\n\t};\n\n\tList.prototype.remove = function(draggables){\n\t\tvar j, initPositions = this.draggables.map(function(draggable){\n\t\t\t\treturn draggable.initPosition;\n\t\t\t}),\n\t\t\tlist = [],\n\t\t\tsortedDraggables = this.getSortedDraggables();\n\t\tif(!(draggables instanceof Array)){\n\t\t\tdraggables = [draggables];\n\n\t\t}\n\t\tdraggables.forEach(function(draggable){\n\t\t\tdraggable.onEnd.reset();\n\t\t\tdraggable.onMove.reset();//todo remove reset in future\n\t\t\tthis.draggables.removeItem(draggable);\n\t\t\tDragee.util.remove(this.draggables, draggable);\n\t\t}, this);\n\t\tj = 0;\n\t\tsortedDraggables.forEach(function(draggable, i){\n\t\t\tif(this.draggables.indexOf(draggable) !== -1){\n\t\t\t\tif(draggable.fixPosition !== initPositions[j]){\n\t\t\t\t\tdraggable.move(initPositions[j], this.options.timeExcange, true);\n\t\t\t\t}\n\t\t\t\tdraggable.initPosition = initPositions[j];\n\t\t\t\tj++;\n\t\t\t\tlist.push(draggable);\n\t\t\t}\n\t\t}, this);\n\t\tthis.draggables = list;\n\t};\n\n\tList.prototype.clear = function(){\n\t\tthis.remove(this.draggables.slice());\n\t};\n\n\tList.prototype.destroy = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.destroy();\n\t\t});\n\t};\n\n\tList.prototype.__defineGetter__(\"positions\", function(){\n\t\treturn this.getCurrentFixPosition();\n\t});\n\n\tList.prototype.__defineSetter__(\"positions\", function(positions){\n\t\tvar message = \"wrong array length\";\n\t\tif(positions.length === this.draggables.length){\n\t\t\tpositions.forEach(function(point, i){\n\t\t\t\tthis.draggables[i].move(point, 0, true, true);\n\t\t\t}, this);\n\t\t}else{\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\n\tList.prototype.__defineGetter__(\"enable\", function(){\n\t\treturn this._enable;\n\t});\n\n\tList.prototype.__defineSetter__(\"enable\", function(value){\n\t\tthis._enable = value;\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.enable = value;\n\t\t});\n\t});\n\n\n\tfunction listFactory(parentElement, elements, options){\n\t\tvar draggables, draggableOptions, listOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\tlistOptions = options.list || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || parentElement;\n\t\telements = Array.prototype.slice.call(elements);\n\n\t\tdraggables = elements.map(function(element){\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\n\t\treturn new List(draggables, listOptions);\n\t}\n\n  export {lists, List, listFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/list.js\n **/","\t'use strict';\n\n\timport util from './util'\n\timport Event from './event'\n\timport {mathPoint} from './point'\n\timport {positionType, sortingFactory, positionFactory} from './positioning'\n\timport {targetManagers} from './targetManager'\n\n\tvar Dragee = { util, positionType,  positionFactory, sortingFactory, targetManagers, Event };//todo remove after refactore\n\n\tvar targets = [];\n\n\tfunction Target(element, draggables, options){\n\t\toptions = options || {};\n\t\tvar i, parent = options.parent || Dragee.util.getDefaultParent(element);\n\t\tthis.options = {\n\t\t\ttimeEnd: 200,\n\t\t\ttimeExcange: 400,\n\t\t\tparent: parent,\n\t\t\tsorting: Dragee.sortingFactory(Dragee.positionType.floatLeft)(80, mathPoint.getLength({x: 1, y: 4, isTransformationSpace: true})),\n\t\t\tpositioning: Dragee.positionFactory(Dragee.positionType.floatLeft)(this.getRectangle.bind(this), {removable: true})\n\t\t};\n\t\tfor(i in options){\n\t\t\tthis.options[i] = options[i];\n\t\t}\n\t\ttargets.push(this);\n\t\tthis.element = element;\n\t\tthis.draggables = draggables;\n\t\tthis.onAdd = new Dragee.Event(this);\n\t\tthis.beforeAdd = new Dragee.Event(this);\n\t\tthis.onRemove = new Dragee.Event(this);\n\n\t\toptions.onRemove && this.onRemove.add(options.onRemove);\n\t\toptions.onAdd && this.onAdd.add(options.onAdd);\n\t\toptions.beforeAdd && this.beforeAdd.add(options.beforeAdd);\n\n\t\tthis.init();\n\t};\n\n\tTarget.prototype.getRectangle = function(){\n\t\treturn mathPoint.createRectangleFromElement(\n\t\t\tthis.element,\n\t\t\tthis.options.parent,\n\t\t\tthis.options.isContentBoxSize,\n\t\t\ttrue\n\t\t);\n\t};\n\n\tTarget.prototype.catchDraggable = function(draggable){\n\t\tif(this.options.catchDraggable) {\n\t\t\treturn this.options.catchDraggable(this, draggable);\n\t\t} else {\n\t\t\tvar targetRectangle = this.getRectangle(),\n\t\t\t\tdraggableSquare = draggable.getRectangle().getSquare();\n\n\t\t\treturn draggableSquare < targetRectangle.getSquare()\n\t\t\t\t&& targetRectangle.includePoint(draggable.getCenter());\n\t\t}\n\t};\n\n\tTarget.prototype.getPosition = function(){\n\t\treturn this.getRectangle().position;\n\t};\n\n\tTarget.prototype.getSize = function(){\n\t\treturn this.getRectangle().size;\n\t};\n\n\tTarget.prototype.init = function(){\n\t\tvar rectangles, indexesOfNew;\n\n\t\tthis.innerDraggables = this.draggables.filter(function(draggable){\n\t\t\tvar element = draggable.element.parentNode;\n\t\t\twhile(element){\n\t\t\t\tif(element === this.element){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t}, this);\n\n\t\tif(this.innerDraggables.length){\n\t\t\tindexesOfNew = Dragee.util.range(this.innerDraggables.length);\n\t\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\t\treturn draggable.getRectangle();\n\t\t\t}), indexesOfNew);\n\t\t\tthis.setPosition(rectangles, indexesOfNew);\n\t\t\tthis.innerDraggables.forEach(function(draggable){\n\t\t\t\tthis.onAdd.fire(draggable);\n\t\t\t}, this);\n\t\t}\n\t};\n\n\tTarget.prototype.destroy = function(){\n\t\tDragee.targetManagers.forEach(function(targetManager){\n\t\t\ttargetManager.targets.removeItem(this);\n\t\t}, this);\n\t}\n\n\tTarget.prototype.refresh = function(){\n\t\tvar rectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), []);\n\t\tthis.setPosition(rectangles, [], 0);\n\t};\n\n\tTarget.prototype.onEnd = function(draggable){\n\t\tvar newDraggablesIndex = [],\n\t\t\trectangles,\n\t\t\tincludePoint = this.getRectangle().includePoint(draggable.getPosition());\n\n\t\tif(!includePoint){\n\t\t\tif(this.getRectangle().includePoint(draggable.getCenter())) {\n\t\t\t\tdraggable.position = draggable.getCenter().clone();\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis.beforeAdd.fire(draggable);\n\n\t\tthis.innerDraggables = this.options.sorting(this.innerDraggables, [draggable], newDraggablesIndex);\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), newDraggablesIndex, draggable);\n\n\t\tthis.setPosition(rectangles, newDraggablesIndex);\n\t\tif(this.innerDraggables.indexOf(draggable) !== -1){\n\t\t\tthis.addRemoveOnMove(draggable);\n\t\t}\n\t\treturn true;\n\t};\n\n\tTarget.prototype.setPosition = function(rectangles, indexesOfNew, time){\n\t\tthis.innerDraggables.slice(0).forEach(function(draggable, i){\n\t\t\tvar rect = rectangles[i],\n\t\t\t\tthat = this,\n\t\t\t\ttimeEnd = time || time == 0 ? time : indexesOfNew.indexOf(i) !== -1 ? this.options.timeEnd : this.options.timeExcange;\n\n\t\t\tif(rect.removable){\n\t\t\t\tdraggable.move(draggable.initPosition, timeEnd, true, true);\n\t\t\t\tthis.innerDraggables.removeItem(draggable);\n\n\t\t\t\tthis.onRemove.fire(draggable);\n\t\t\t} else {\n\t\t\t\tdraggable.move(rect.position, timeEnd, true, true);\n\t\t\t}\n\t\t}, this);\n\t};\n\n\tTarget.prototype.add = function(draggable, time){\n\t\tvar rectangles, newDraggablesIndex = this.innerDraggables.length;\n\n\t\tthis.beforeAdd.fire(draggable);\n\n\t\tthis.pushInnerDraggable(draggable);\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), newDraggablesIndex, draggable);\n\t\tthis.setPosition(rectangles, [newDraggablesIndex], time || 0);\n\t\tif(this.innerDraggables.indexOf(draggable) !== -1){\n\t\t\tthis.addRemoveOnMove(draggable);\n\t\t}\n\t};\n\n\tTarget.prototype.pushInnerDraggable = function(draggable){\n\t\tif(this.innerDraggables.indexOf(draggable)===-1){\n\t\t\tthis.innerDraggables.push(draggable);\n\t\t}\n\t};\n\n\tTarget.prototype.addRemoveOnMove = function(draggable){\n\t\tvar that = this;\n\n\t\tdraggable.onMove.add(this.removeHandler = function(){\n\t\t\tthat.remove(draggable)\n\t\t});\n\n\t\tthis.onAdd.fire(draggable);\n\t};\n\n\tTarget.prototype.remove = function(draggable){\n\t\tvar index, rectangles;\n\t\tdraggable.onMove.remove(this.removeHandler);\n\n\t\tindex = this.innerDraggables.indexOf(draggable);\n\t\tif(index === -1){\n\t\t\treturn;\n\t\t}\n\n\t\tthis.innerDraggables.splice(index, 1);\n\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), []);\n\n\t\tthis.setPosition(rectangles, []);\n\t\tthis.onRemove.fire(draggable);\n\t};\n\n\tTarget.prototype.reset = function(){\n\t\tthis.innerDraggables.forEach(function(draggable){\n\t\t\tdraggable.move(draggable.initPosition, 0, true, true);\n\t\t\tthis.onRemove.fire(draggable);\n\t\t}, this);\n\t\tthis.innerDraggables = [];\n\t};\n\n\tTarget.prototype.getSortedDraggables = function(){\n\t\tthis.innerDraggables.slice();\n\t}\n\n\texport {targets, Target};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/target.js\n **/","'use strict';\nimport {mathPoint, Point, Rectangle} from './point'\n\n\tvar\tpositionType = {\n\t\t\tnotCrossing: 0,\n\t\t\tfloatLeft: 1,\n\t\t\tfloatRight: 2\n\t};\n\n\tfunction positionFactory(type){\n\t\tswitch(type){\n\t\t\tcase positionType.notCrossing:\n\t\t\t\treturn function(rectangle, options){\n\t\t\t\t\tvar i, opts = {\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t}\n\t\t\t\t\tfor(i in options){\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle, staticRectangleIndexes = rectangleList.reduce(function(indexes, rect, index){\n\t\t\t\t\t\t\tif(indexesOfNews.indexOf(index) === -1){\n\t\t\t\t\t\t\t\tindexes.push(index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn indexes;\n\t\t\t\t\t\t}, []);\n\t\t\t\t\t\tindexesOfNews.forEach(function(index){\n\t\t\t\t\t\t\tvar rect = rectangleList[index], removable = false;\n\t\t\t\t\t\t\tstaticRectangleIndexes.forEach(function(indexOfStatic){\n\t\t\t\t\t\t\t\tvar staticRect = rectangleList[indexOfStatic];\n\t\t\t\t\t\t\t\trect = staticRect.moveToBound(rect);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tremovable = staticRectangleIndexes.some(function(indexOfStatic){\n\t\t\t\t\t\t\t\tvar staticRect = rectangleList[indexOfStatic];\n\t\t\t\t\t\t\t\treturn  !!staticRect.and(rect);\n\t\t\t\t\t\t\t}) || rect.and(boundRect).getSquare() !== rect.getSquare();\n\t\t\t\t\t\t\tif(removable){\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tstaticRectangleIndexes.push(index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\tcase positionType.floatLeft:\n\t\t\t\treturn function(rectangle, options){\n\t\t\t\t\tvar i, opts = {\n\t\t\t\t\t\tpaddingTopLeft: new Point(0, 0),\n\t\t\t\t\t\tpaddingBottomRight: new Point(0, 0),\n\t\t\t\t\t\tyGapBetweenDraggables: 0,\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t}\n\t\t\t\t\tfor(i in options){\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle,\n\t\t\t\t\t\t\trectP2 = boundRect.getP2(), i, boundaryPoints = [boundRect.position];\n\t\t\t\t\t\trectangleList.forEach(function(rect, index){\n\t\t\t\t\t\t\tvar position, isValid = false;\n\t\t\t\t\t\t\tfor(i = 0; i < boundaryPoints.length; i++){\n\t\t\t\t\t\t\t\tposition = (new Point(boundaryPoints[i].x, i > 0 ? (boundaryPoints[i - 1].y + opts.yGapBetweenDraggables) : boundRect.position.y)).add(opts.paddingTopLeft);\n\t\t\t\t\t\t\t\tif(isValid = (position.x + rect.size.x < rectP2.x)){\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!isValid){\n\t\t\t\t\t\t\t\tposition = (new Point(boundRect.position.x, boundaryPoints[boundaryPoints.length - 1].y + opts.yGapBetweenDraggables)).add(opts.paddingTopLeft);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trect.position = position;\n\t\t\t\t\t\t\tif(opts.removable && rect.getP3().y > boundRect.getP3().y){\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tboundaryPoints = mathPoint.addPointToBoundPoints(boundaryPoints, rect.getP3().add(opts.paddingBottomRight));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase positionType.floatRight:\n\t\t\t\treturn function(rectangle, options){\n\t\t\t\t\tvar paddingTopNegRight, paddingBottomNegLeft, i, opts = {\n\t\t\t\t\t\tpaddingTopRight: new Point(5, 5),\n\t\t\t\t\t\tpaddingBottomLeft: new Point(0, 0),\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t}\n\t\t\t\t\tfor(i in options){\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\tpaddingTopNegRight = new Point(-opts.paddingTopRight.x, opts.paddingTopRight.y);\n\t\t\t\t\tpaddingBottomNegLeft = new Point(-opts.paddingBottomLeft.x, opts.paddingBottomLeft.y);\n\t\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle, i, boundaryPoints = [boundRect.getRightTopPoint()];\n\t\t\t\t\t\trectangleList.forEach(function(rect, index){\n\t\t\t\t\t\t\tvar position, isValid = false;\n\t\t\t\t\t\t\tfor(i = 0; i < boundaryPoints.length; i++){\n\t\t\t\t\t\t\t\tposition = (new Point(boundaryPoints[i].x - rect.size.x, i > 0 ? boundaryPoints[i - 1].y : boundRect.position.y)).add(paddingTopNegRight);\n\t\t\t\t\t\t\t\tif(isValid = (position.x > rect.position.x)){\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!isValid){\n\t\t\t\t\t\t\t\tposition = new Point(boundRect.getP2().x, boundaryPoints[boundaryPoints.length - 1].y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trect.position = position;\n\t\t\t\t\t\t\tif(opts.removable && rect.getLeftBottomPoint().y > boundRect.getP4().y){\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tboundaryPoints = mathPoint.addPointToBoundPoints(boundaryPoints, rect.getP4().add(paddingBottomNegLeft), true);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t};\n\n\tfunction sortingFactory(type){\n\t\tswitch(type){\n\t\t\tcase positionType.notCrossing:\n\t\t\t\treturn function(){\n\t\t\t\t\treturn function(oldObjsList, newObjs, indexOfNews){\n\t\t\t\t\t\tvar objsList = oldObjsList.concat(newObjs);\n\t\t\t\t\t\tnewObjs.forEach(function(obj){\n\t\t\t\t\t\t\tindexOfNews.push(objsList.indexOf(obj));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn objsList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase positionType.floatLeft:\n\t\t\tcase positionType.floatRight:\n\t\t\t\treturn function(radius, getLength, options){\n\t\t\t\t\tvar i, opts = {\n\t\t\t\t\t\tgetPosition: function(obj){\n\t\t\t\t\t\t\treturn obj.position;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(i in options){\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function(oldObjsList, newObjs, indexOfNews){\n\t\t\t\t\t\tvar newList = oldObjsList.concat(), listOldPosition;\n\t\t\t\t\t\tlistOldPosition = oldObjsList.map(opts.getPosition);\n\t\t\t\t\t\tnewObjs.forEach(function(newObj){\n\t\t\t\t\t\t\tvar index = mathPoint.indexOfNearPoint(listOldPosition, opts.getPosition(newObj), radius, getLength);\n\t\t\t\t\t\t\tif(index === -1){\n\t\t\t\t\t\t\t\tindex = newList.length;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindex = newList.indexOf(oldObjsList[index]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnewList.splice(index, 0, newObj);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewObjs.forEach(function(newObj){\n\t\t\t\t\t\t\tindexOfNews.push(newList.indexOf(newObj));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn newList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t};\n\n  export {positionType, sortingFactory, positionFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/positioning.js\n **/","'use strict';\n\n\timport util from './util'\n\timport Event from './event'\n\timport {Draggable} from './draggable'\n\timport {targets, Target} from './target'\n\n\tvar Dragee = { util, Draggable,  Target, Event };//todo remove after refactore\n\n\tvar\ttargetManagers = [];\n\n\tfunction TargetManager(element, draggables, targets, options){\n\t\tvar i;\n\t\tthis.element = element;\n\t\tthis.draggables = draggables;\n\t\tthis.targets = targets;\n\t\ttargetManagers.push(this);\n\t\tthis.options = {\n\t\t\ttimeEnd: 400,\n\t\t\ttimeWaitForRefresh: 500\n\t\t};\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.onChange = new Dragee.Event(this);\n\t\tif(options && options.onChange){\n\t\t\tthis.onChange.add(options.onChange);\n\t\t}\n\t\tthis.init();\n\t}\n\n\tTargetManager.prototype.init = function(){\n\t\tvar that = this;\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\treturn that.onEnd(this);\n\t\t\t});\n\t\t});\n\t};\n\n\tTargetManager.prototype.addDraggable = function(draggable){\n\t\tvar that = this;\n\n\t\tthis.draggables.push(draggable);\n\t\tdraggable.onEnd.unshift(function(){\n\t\t\treturn that.onEnd(this);\n\t\t});\n\t};\n\n\tTargetManager.prototype.onEnd = function(draggable){\n\t\tvar shotTargets = this.targets.filter(function(target){\n\t\t\treturn target.draggables.indexOf(draggable) !== -1;\n\t\t}).filter(function(target){\n\t\t\treturn target.catchDraggable(draggable);\n\t\t}).sort(function(a, b){\n\t\t\treturn a.getRectangle().getSquare() - b.getRectangle().getSquare();\n\t\t});\n\n\t\tif(shotTargets.length){\n\t\t\tshotTargets[0].onEnd(draggable);\n\t\t}else{\n\t\t\tdraggable.move(draggable.initPosition, this.options.timeEnd, true, true);\n\t\t}\n\t\tthis.onChange.fire();\n\t\treturn true;\n\t};\n\n\tTargetManager.prototype.reset = function(){\n\t\tthis.targets.forEach(function(target){\n\t\t\ttarget.reset();\n\t\t});\n\t};\n\n\tTargetManager.prototype.refresh = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.refresh();\n\t\t});\n\t\tthis.targets.forEach(function(target){\n\t\t\ttarget.refresh();\n\t\t});\n\t};\n\n\tTargetManager.prototype.__defineGetter__(\"positions\", function(){\n\t\treturn this.targets.map(function(target){\n\t\t\treturn target.innerDraggables.map(function(draggable){\n\t\t\t\treturn this.draggables.indexOf(draggable);\n\t\t\t}, this);\n\t\t}, this);\n\t});\n\n\tTargetManager.prototype.__defineSetter__(\"positions\", function(positions){\n\t\tvar message = \"wrong array length\";\n\t\tif(positions.length === this.targets.length){\n\t\t\tthis.targets.forEach(function(target){\n\t\t\t\ttarget.reset();\n\t\t\t}, this);\n\t\t\tpositions.forEach(function(targetIndexes, i){\n\t\t\t\ttargetIndexes.forEach(function(index){\n\t\t\t\t\tthis.targets[i].add(this.draggables[index]);\n\t\t\t\t}, this);\n\t\t\t}, this);\n\t\t}else{\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\n\tfunction targetManagerFactory(element, draggableElements, targetElements, options){\n\t\tvar draggables, targets, draggableOptions, targetOptions, managerOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\ttargetOptions = options.target || {};\n\t\tmanagerOptions = options.manager || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || element;\n\t\ttargetOptions.parent = targetOptions.parent || element;\n\t\tdraggableElements = Array.prototype.slice.call(draggableElements);\n\t\ttargetElements = Array.prototype.slice.call(targetElements);\n\n\t\tdraggables = draggableElements.map(function(element){\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\n\t\ttargets = targetElements.map(function(el){\n\t\t\treturn new Dragee.Target(element, draggables, targetOptions);\n\t\t});\n\t\treturn new TargetManager(element, draggables, targets, managerOptions);\n\t}\n\n  export {targetManagers, TargetManager, targetManagerFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/targetManager.js\n **/","'use strict';\n\n\timport util from './util'\n\timport {mathPoint, Point} from './point'\n\timport {boundType, boundFactory} from './bound'\n\timport {Draggable, draggables, events} from './draggable'\n\n\tvar Dragee = {util, boundFactory, boundType, Draggable};\n\tvar spiders = [];\n\n\tfunction Spider(area, elements, options){\n\t\tvar i, areaRectangle = mathPoint.createRectangleFromElement(area, area);\n\t\tthis.options = {\n\t\t\tangle: 0,\n\t\t\tdAngle: 2 * Math.PI / elements.length,\n\t\t\tcenter: areaRectangle.getCenter(),\n\t\t\tstartRadius: 50,\n\t\t\tendRadius: areaRectangle.getMinSide() / 2,\n\t\t\tlineWidth: 2,\n\t\t\tstrokeStyle: \"#ff5577\",\n\t\t\tfillStyle: \"rgba(150,255,50,0.8)\"\n\t\t};\n\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tspiders.push(this);\n\t\tthis.area = area;\n\t\tthis.areaRectangle = areaRectangle;\n\t\tthis.init(elements);\n\t}\n\n\tSpider.prototype.init = function(elements){\n\t\tvar that = this;\n\t\tthis.canvas = Dragee.util.createCanvas(this.area, this.areaRectangle);\n\t\tthis.context = this.canvas.getContext(\"2d\");\n\n\t\tthis.draggables = elements.map(function (element, i){\n\t\t\tvar angle = this.options.angle + i * this.options.dAngle,\n\t\t\t\thalfSize = mathPoint.getSizeOfElement(element).mult(0.5),\n\t\t\t\tstart = mathPoint.getPointFromRadialSystem(angle, this.options.startRadius, this.options.center).sub(halfSize),\n\t\t\t\tend = mathPoint.getPointFromRadialSystem(angle, this.options.endRadius, this.options.center).sub(halfSize),\n\t\t\t\tbound = Dragee.boundFactory(Dragee.boundType.line)(start, end);\n\n\t\t\treturn new Dragee.Draggable(element, {\n\t\t\t\tparent: this.area,\n\t\t\t\tbound: bound,\n\t\t\t\tposition: start,\n\t\t\t\tonMove:function (){\n\t\t\t\t\tthat.draw();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t}, this);\n\n\t\tthis.isInit = true;\n\t\tthis.draw();\n\t}\n\n\tSpider.prototype.draw = function (){\n\t\tvar point, i;\n\t\tif(!this.isInit){\n\t\t\treturn;\n\t\t}\n\t\tthis.context.clearRect(0, 0, this.areaRectangle.size.x, this.areaRectangle.size.y);\n\t\tthis.context.beginPath();\n\t\tpoint = this.draggables[0].getCenter();\n\t\tthis.context.moveTo(point.x, point.y);\n\t\tfor(i = 0; i < this.draggables.length; i++){\n\t\t\tpoint = this.draggables[i].getCenter();\n\t\t\tthis.context.lineTo(point.x, point.y);\n\t\t}\n\t\tthis.context.closePath();\n\t\tthis.context.lineWidth = this.options.lineWidth;\n\t\tthis.context.strokeStyle = this.options.strokeStyle;\n\t\tthis.context.stroke();\n\t\tthis.context.fillStyle = this.options.fillStyle;\n\t\tthis.context.fill();\n\t}\n\n\n\texport {spiders, Spider}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/spider.js\n **/","'use strict';\n\n\timport util from './util'\n\timport {mathPoint} from './point'\n\timport {Draggable, draggables, events} from './draggable'\n\timport {boundType, boundFactory} from './bound'\n\n\tvar Dragee = { util, boundType, boundFactory, Draggable };//todo remove after refactore\n\n\tvar arcSliders = [];\n\n\tfunction ArcSlider(area, element, options){\n\t\tvar i, areaRectangle = mathPoint.createRectangleFromElement(area, area),\n\t\t\thalfSize = mathPoint.getSizeOfElement(element).mult(0.5);\n\t\tthis.options = {\n\t\t\tcenter: areaRectangle.getCenter(),\n\t\t\tradius: areaRectangle.getMinSide() / 2,\n\t\t\tstartAngle: Math.PI,\n\t\t\tendAngle: 0,\n\t\t\tangles: [Math.PI,-Math.PI/4,0,Math.PI/4,Math.PI/2],\n\t\t\tonChange:function(){},\n\t\t\ttime: 500\n\t\t};\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.shiftedCenter = this.options.center.sub(halfSize);\n\t\tthis.onChange = this.options.onChange;\n\t\tarcSliders.push(this);\n\t\tthis.area = area;\n\t\tthis.init(element);\n\t}\n\n\tArcSlider.prototype.init = function (element){\n\t\tvar that = this,\n\t\t\tangle = this.options.startAngle,\n\t\t\tposition = mathPoint.getPointFromRadialSystem(\n\t\t\t\tangle,\n\t\t\t\tthis.options.radius,\n\t\t\t\tthis.shiftedCenter\n\t\t\t),\n\t\t\tbound = Dragee.boundFactory(Dragee.boundType.arc)(\n\t\t\t\tthat.shiftedCenter,\n\t\t\t\tthat.options.radius,\n\t\t\t\tthis.options.startAngle,\n\t\t\t\tthis.options.endAngle\n\t\t\t);\n\n\t\tthis.angle = angle;\n\t\tthis.draggable = new Dragee.Draggable(element, {\n\t\t\tparent: this.area,\n\t\t\tbound: bound,\n\t\t\tposition: position,\n\t\t\tonMove: function (){\n\t\t\t\tthat.change();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t};\n\n\tArcSlider.prototype.updateAngle = function (){\n\t\tthis.angle = mathPoint.getAngle(this.shiftedCenter, this.draggable.position);\n\t};\n\n\tArcSlider.prototype.change = function (){\n\t\tthis.updateAngle();\n//\t\tvar angle = mathPoint.getNearestAngle(this.options.angles, this.angle);\n//\t\tthis.setAngle(angle,this.options.time);\n\t\tthis.onChange(this.angle);\n\t};\n\n\tArcSlider.prototype.setAngle = function(angle, time){\n\t\tthis.angle = mathPoint.normalizeAngle(angle, position);\n\t\tvar position = mathPoint.getPointFromRadialSystem(\n\t\t\tthis.angle,\n\t\t\tthis.options.radius,\n\t\t\tthis.shiftedCenter\n\t\t);\n\t\tthis.draggable.move(position, time||0, true, true);\n\t\tthis.onChange(this.angle);\n\t};\n\n  export {arcSliders, ArcSlider};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/arcslider.js\n **/","'use strict';\n\n    import util from './util'\n  \timport {mathPoint, Point} from './point'\n  \timport {Draggable, draggables, events} from './draggable'\n    import {boundType, boundFactory} from './bound'\n\n    var Dragee = { util, boundType, boundFactory, Draggable };//todo remove after refactore\n\n    var isTouch = 'ontouchstart' in window;\n    var charts = [];\n\n    function getArrayWithBoundIndexes(index,length){\n        var retIndexes = [];\n        if(index != -1){\n            retIndexes.push(index);\n            retIndexes.push((index + 1) % length);\n        }\n        return retIndexes;\n    }\n\n\n    function Chart(area, elements, options){\n        var i, areaRectangle = mathPoint.createRectangleFromElement(area, area);\n        this.options = {\n            center: areaRectangle.getCenter(),\n            radius: areaRectangle.getMinSide() / 2,\n            touchRadius: areaRectangle.getMinSide() / 2,\n            boundAngle: Math.PI/9,\n            fillStyles: Dragee.util.range(0, elements.length).map(function(){\n                return Dragee.util.randomColor();\n            }),\n            initAngles: Dragee.util.range(-90, 270, 360 / elements.length).map(function(angle){\n                return mathPoint.toRadian(angle);\n            }),\n            onDraw:function(){},\n            limitImg: null,\n            limitImgOffset: new Point(0,0),\n            isSelectable: false\n        };\n        for(i in options){\n            if(options.hasOwnProperty(i)){\n                this.options[i] = options[i];\n            }\n        }\n\n        charts.push(this);\n        this.onDraw = this.options.onDraw;\n        this.area = area;\n        this.areaRectangle = areaRectangle;\n        this.init(elements);\n    }\n\n    Chart.prototype.init = function (elements){\n        var that = this;\n        this.canvas = Dragee.util.createCanvas(this.area, this.areaRectangle);\n        this.context = this.canvas.getContext(\"2d\");\n        this.draggables = elements.map(function (element, i){\n            var angle = this.options.initAngles[i],\n                halfSize = mathPoint.getSizeOfElement(element).mult(0.5),\n                position = mathPoint.getPointFromRadialSystem(\n                    angle,\n                    this.options.touchRadius,\n                    this.options.center.sub(halfSize)\n                ),\n                bound = Dragee.boundFactory(Dragee.boundType.arc)(\n                    that.options.center.sub(halfSize),\n                    that.options.touchRadius,\n                    that.getBoundAngle(i, false),\n                    that.getBoundAngle(i, true)\n                );\n\n            return new Dragee.Draggable(element, {\n                parent:this.area,\n                bound:bound,\n                position:position,\n                onMove:function (){\n                    that.draw();\n                    return true;\n                }\n            });\n        }, this);\n\n        this.isInit = true;\n        if(this.options.isSelectable){\n            this.initSelect();\n        }\n        this.draw();\n    };\n\n    Chart.prototype.initSelect = function (){\n        var that = this;\n        this.setActiveArc(-1);\n\n        this.canvas.addEventListener(events.start, function(e){\n            var point = new Point(\n                    isTouch ? e.changedTouches[0].pageX : e.clientX,\n                    isTouch ? e.changedTouches[0].pageY : e.clientY\n                ), index;\n\n            if(!that.canvasOffset){\n                that.canvasOffset = mathPoint.getOffset(that.canvas);\n            }\n\n            point = point.sub(that.canvasOffset);\n            index = that.getArcOnPoint(point);\n            if(index!=-1){\n                that.setActiveArc((that.activeArcIndex !== index)?index:-1);\n            }\n        });\n    };\n\n    Chart.prototype.updateAngles = function (){\n        this.angles = this.draggables.map(function(draggable){\n            var halfSize = draggable.getSize().mult(0.5);\n            return mathPoint.getAngle(this.options.center.sub(halfSize), draggable.position);\n        },this);\n    };\n\n    Chart.prototype.getBoundAngle = function(index, isClossing){\n        var that = this, sign = isClossing?1:-1;\n\n        return function(){\n            var i = (index + sign) % that.angles.length;\n            if(i < 0){\n                i += that.angles.length;\n            }\n            return mathPoint.normalizeAngle(that.angles[i] - sign * that.options.boundAngle);\n        };\n    };\n\n    Chart.prototype.draw = function (){\n        if(!this.isInit){\n            return;\n        }\n\n        this.updateAngles();\n        this.context.clearRect(0, 0, this.areaRectangle.size.x, this.areaRectangle.size.y);\n        this.draggables.forEach(function(draggable, index){\n            this.drawArc(this.context, this.options.center, this.options.radius, index);\n        }, this);\n\n        this.draggables.forEach(function(draggable, index){\n            var enableIndexes;\n            if(this.options.isSelectable){\n                enableIndexes = getArrayWithBoundIndexes(this.activeArcIndex, this.draggables.length);\n                if(enableIndexes.indexOf(index) !== -1){\n                    this.drawLimitImg(index);\n                }\n            } else {\n                this.drawLimitImg(index);\n            }\n        }, this);\n        this.onDraw();\n    };\n\n    Chart.prototype.createClone = function(element, options){\n        var i, canvas, context, opts, rectangle, cloneObj, that = this;\n        if(!this.isInit){\n            return;\n        }\n        rectangle = mathPoint.createRectangleFromElement(element, element);\n        opts = {\n            center: rectangle.getCenter(),\n            radius: rectangle.getMinSide() / 2,\n            fillStyles: this.options.fillStyles\n        };\n        for(i in options){\n            if(options.hasOwnProperty(i)){\n                opts[i] = options[i];\n            }\n        }\n        canvas = Dragee.util.createCanvas(element, rectangle);\n        context = canvas.getContext(\"2d\");\n        cloneObj = {\n            draw: function(){\n                context.clearRect(0, 0, rectangle.size.x, rectangle.size.y);\n                that.draggables.forEach(function(draggable, index){\n                    that.drawArc(context, opts.center, opts.radius, index);\n                });\n            }\n        };\n        cloneObj.draw();\n        return cloneObj;\n    };\n\n    Chart.prototype.getFillStyle = function(index){\n        if(typeof this.options.fillStyles[index] === \"function\"){\n            this.options.fillStyles[index] = this.options.fillStyles[index].call(this);\n        }\n        return this.options.fillStyles[index];\n    };\n\n    Chart.prototype.drawArc = function(context,center,radius,index){\n        var startAngle = this.angles[index],\n            endAngle = this.angles[(index+1)%this.angles.length],\n            color = this.getFillStyle(index);\n\n        context.beginPath();\n        context.moveTo(center.x, center.y);\n        context.arc(center.x, center.y, radius, startAngle, endAngle, false);\n        context.lineTo(center.x, center.y);\n        context.closePath();\n        context.fillStyle = color;\n        context.fill();\n    };\n\n    Chart.prototype.drawLimitImg = function(index){\n        var angle, point, img;\n        if(this.options.limitImg){\n            img = this.options.limitImg instanceof Array ? this.options.limitImg[index] : this.options.limitImg;\n        }\n        if(!img){\n            return ;\n        }\n        angle = mathPoint.normalizeAngle(this.angles[index]);\n        point = new Point(0, -img.height/2);\n        point = point.add(this.options.limitImgOffset);\n        this.context.translate(this.areaRectangle.size.x / 2, this.areaRectangle.size.y / 2);\n        this.context.rotate(angle);\n        this.context.drawImage(img, point.x, point.y);\n        this.context.setTransform(1, 0, 0, 1, 0, 0);\n    };\n\n    Chart.prototype.getAnglesDiff = function(){\n        var baseAngle = this.angles[0],\n            angles = this.angles.slice(1);\n\n        angles.push(baseAngle);\n        return angles.map(function(angle){\n            var diffAngle = mathPoint.normalizeAngle(angle - baseAngle);\n            baseAngle = angle;\n            return diffAngle;\n        });\n    };\n\n    Chart.prototype.getPercent = function(){\n        return this.getAnglesDiff().map(function(diffAngle){\n            return diffAngle / (2 * Math.PI);\n        });\n    };\n\n    Chart.prototype.getArcBisectrixs = function(){\n        return this.getAnglesDiff().map(function(diffAngle,i){\n            return mathPoint.normalizeAngle(this.angles[i] + diffAngle/2);\n        },this);\n    };\n\n    Chart.prototype.getArcOnPoint = function(point){\n        var angle = mathPoint.getAngle(this.options.center, point), i, offset, j,\n            radius = mathPoint.getLength()(this.options.center, point);\n        if(radius > this.options.radius ){\n            return -1;\n        }\n        offset = -1;\n        for(i = 0; i < this.angles.length; i++){\n            if(offset === -1 || this.angles[offset] > this.angles[i]){\n                offset = i;\n            }\n        }\n        for(i = 0,j = offset; i < this.angles.length; i++,j = (i + offset) % this.angles.length){\n            if(angle < this.angles[j]){\n                break;\n            }\n        }\n        if(--j < 0){\n            j += this.angles.length;\n        }\n        return j;\n    };\n\n    Chart.prototype.setAngles = function(angles){\n        this.angles = angles;\n        this.draggables.forEach(function (draggable, i){\n            var angle = this.angles[i],\n                halfSize = draggable.getSize().mult(0.5),\n                position = mathPoint.getPointFromRadialSystem(\n                    angle,\n                    this.options.touchRadius,\n                    this.options.center.sub(halfSize)\n                );\n\n            draggable.move(position, 0, true, true);\n        }, this);\n        this.draw();\n    };\n\n    Chart.prototype.setActiveArc = function(index){\n        var enableIndexes = getArrayWithBoundIndexes(index, this.draggables.length);\n        this.activeArcIndex = index;\n        this.draggables.forEach(function(draggable, i){\n            draggable.enable = enableIndexes.indexOf(i) !== -1;\n        });\n        this.draw();\n    };\n\n\n    export {charts, Chart}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/chart.js\n **/","'use strict';\n\n\n\timport {mathPoint, Point} from './point'\n\timport {Draggable} from './draggable'\n\timport {List} from './list'\n\n\tvar Dragee = { List, Draggable };//todo remove after refactore\n\n\tvar extend = function(Child, Parent) {\n\t    var F = function() { }\n\t    F.prototype = Parent.prototype;\n\t    Child.prototype = new F();\n\t    Child.prototype.constructor = Child;\n\t    Child.superclass = Parent.prototype;\n\t};//todo remove after refacore\n\n\tfunction ListSwitcher(draggables, options){\n\t\toptions = options || {};\n\t\toptions.stepOn = options.stepOn || new Point(-50, 0);\n\t\tDragee.List.call(this, draggables, options);\n\t}\n\n\textend(ListSwitcher, Dragee.List);\n\n\tListSwitcher.prototype.init = function(){\n\t\tvar that = this;\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.isOn = false;\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\tthat.onEnd(this);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t});\n\t};\n\n\tListSwitcher.prototype.onEnd = function(draggable){\n\t\tvar fixPositions = this.getCurrentFixPositionWithOff(), currentIndex, excangeIndex;\n\t\tcurrentIndex = this.draggables.indexOf(draggable);\n\t\texcangeIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif(excangeIndex === -1 || excangeIndex === currentIndex){\n\t\t\tthis.moveDraggable(currentIndex, draggable.position, fixPositions[currentIndex], this.options.timeEnd);\n\t\t} else {\n\t\t\tif(this.draggables[excangeIndex].isDragee){\n\t\t\t\tthis.fixToOff(excangeIndex, fixPositions[currentIndex]);\n\t\t\t} else {\n\t\t\t\tthis.moveDraggableToOff(excangeIndex, fixPositions[currentIndex], this.options.timeExcange);\n\t\t\t}\n\t\t\tthis.moveDraggable(currentIndex, draggable.position, fixPositions[excangeIndex], this.options.timeEnd);\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\treturn true;\n\t};\n\n\tListSwitcher.prototype.moveDraggable = function(index, position, fixOffPosition, time){\n\t\tvar positions = [fixOffPosition, fixOffPosition.add(this.options.stepOn)], isOn = mathPoint.indexOfNearPoint(positions, position, -1, mathPoint.getLength({x: true}));\n\t\tif(this.draggables[index].isOn !== !!isOn){\n\t\t\tthis.draggables[index].isOn = !!isOn;\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\tthis.draggables[index].move(positions[isOn], time, true);\n\t};\n\n\tListSwitcher.prototype.fixToOff = function(index, fixOffPosition){\n\t\tthis.draggables[index].isOn = false;\n\t\tthis.draggables[index].fixPosition = fixOffPosition;\n\t};\n\n\tListSwitcher.prototype.moveDraggableToOff = function(index, fixOffPosition, time){\n\t\tthis.draggables[index].isOn = false;\n\t\tthis.draggables[index].move(fixOffPosition, time, true);\n\t};\n\n\tListSwitcher.prototype.getCurrentFixPositionWithOff = function(){\n\t\treturn this.draggables.map(function(draggable){\n\t\t\treturn draggable.isOn ? draggable.fixPosition.sub(this.options.stepOn) : draggable.fixPosition.clone();\n\t\t}, this);\n\t};\n\n\tListSwitcher.prototype.getSortedDraggables = function(){\n\t\treturn this.draggables.map(\n\t\t\t\tfunction(draggable){\n\t\t\t\t\treturn draggable.initPosition;\n\t\t\t\t}).map(function(position){\n\t\t\t\t\treturn this.draggables.filter(function(draggable){\n\t\t\t\t\t\treturn draggable.fixPosition.compare(position) || draggable.fixPosition.compare(position.add(this.options.stepOn));\n\t\t\t\t\t}, this)[0];\n\t\t\t\t}, this);\n\t};\n\n\tListSwitcher.prototype.reset = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.move(draggable.initPosition, 0, true, false);\n\t\t\tdraggable.isOn = false;\n\t\t});\n\t};\n\n\tListSwitcher.prototype.__defineGetter__(\"positions\", function(){\n\t\treturn this.draggables.map(function(draggable){\n\t\t\tvar position = draggable.fixPosition.clone();\n\t\t\tposition.isOn = draggable.isOn;\n\t\t\treturn position;\n\t\t});\n\t});\n\n\tListSwitcher.prototype.__defineSetter__(\"positions\", function(positions){\n\t\tvar message = \"wrong array length\";\n\t\tif(positions.length === this.draggables.length){\n\t\t\tpositions.forEach(function(point, i){\n\t\t\t\tthis.draggables[i].isOn = point.isOn;\n\t\t\t\tthis.draggables[i].move(point, 0, true, true);\n\t\t\t}, this);\n\t\t} else {\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\n\n\t function listSwitcherFactory(element, draggableElements, options){\n\t\tvar draggables, draggableOptions, listOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\tlistOptions = options.list || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || element;\n\t\tdraggableElements = Array.prototype.slice.call(draggableElements);\n\n\t\tdraggables = draggableElements.map(function(element){\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\t\treturn new ListSwitcher(draggables, listOptions);\n\t}\n\n  export {listSwitcherFactory, ListSwitcher}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/listswitcher.js\n **/"],"sourceRoot":""}