{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a640e173df03a25502ca","webpack:///./src/index.js","webpack:///./src/expandnative.js","webpack:///./src/point.js","webpack:///./src/util.js","webpack:///./src/draggable.js","webpack:///./src/event.js","webpack:///./~/desandro-get-style-property/get-style-property.js","webpack:///./src/bound.js","webpack:///./src/scope.js","webpack:///./src/target.js","webpack:///./src/positioning.js","webpack:///./src/list.js","webpack:///./src/spider.js","webpack:///./src/arcslider.js","webpack:///./src/chart.js","webpack:///./src/listswitcher.js"],"names":["global","Point","Draggable","List","listFactory","targets","Target","scopes","defaultScope","Scope","scopeFactory","scope","positionType","sortingFactory","positionFactory","bound","spiders","Spider","arcSliders","ArcSlider","charts","Chart","listSwitcherFactory","ListSwitcher","clone","o","c","i","Array","prototype","forEach","fun","TypeError","t","Object","len","length","thisp","arguments","call","filter","res","val","push","every","map","some","removeItem","splice","Element","hasClass","re","RegExp","test","className","addClass","replace","removeClass","HTMLElement","appbeginChild","node","firstChild","insertBefore","appendChild","exchange","refNode","tempParentNode","parentNode","tempBeforeNode","nextElementSibling","fullOffset","element","axis","parent_id","tor","id","offsetLeft","offsetTop","extend","Child","Parent","F","constructor","superclass","augment","receivingClass","givingClass","methodName","NodeList","Math","getNearIndex","arr","delta","abs","index","temp","getNearIndexWithCaptureRadius","radius","min","max","boundPoint","x","y","toRadian","angle","PI","String","substrend","substr","XmlHttpRequest","window","XMLHttpRequest","xmlhttp","ActiveXObject","alert","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","__defineGetter__","defineProperty","get","enumerable","configurable","value","name","func","set","defPropException","mathPoint","Dragee","util","toString","add","p","sub","mult","k","negative","compare","Rectangle","position","size","getP1","getP2","getP3","getP4","getCenter","or","rect","and","includePoint","includeRectangle","rectangle","moveToBound","selAxis","crossRectangle","thisCenter","rectCenter","sign","offset","getSquare","styleApply","el","document","querySelector","style","left","top","width","height","growth","getMinSide","getDistance","p1","p2","dx","dy","sqrt","distance","getXDifference","getYDifference","transformedSpaceDistanceFactory","options","pow","indexOfNearPoint","directCrossing","L1P1","L1P2","L2P1","L2P2","k1","k2","b1","b2","boundToSegment","LP1","LP2","P","boundToLine","A","B","AP","AB","ab2","ap_ab","getPointInLine","percent","getPointInLineByLenght","lenght","createRectangleFromElement","parent","isContentBoxSize","isConsiderTranslate","getSizeOfElement","getOffset","parseInt","getComputedStyle","getSumValueOfStyleRule","elRect","getBoundingClientRect","parentRect","getPointFromRadialSystem","center","cos","sin","addPointToBoundPoints","boundpoints","point","isRight","result","bPoint","getAngle","diff","normalizeAngle","atan2","toDegree","boundAngle","dmin","dmax","getAngleDiff","getNearestAngle","alpha","beta","minAngle","maxAngle","getDefaultParent","bind","context","apply","getTouchByID","touchId","changedTouches","identifier","rules","reduce","sum","rule","appendFirstChild","range","start","stop","step","setStyle","cssText","key","hasOwnProperty","randomColor","rnd","round","random","toHexString","digit","str","red","green","blue","createCanvas","area","rectagle","canvas","createElement","setAttribute","Event","isTouch","mouseEvents","move","end","touchEvents","events","draggables","preventDoubleInit","draggable","message","existing","addToDefaultScope","addDraggable","transformProperty","transitionProperty","that","toElement","startFilter","onEnd","isReverse","isStopOnTrue","onMove","onStart","onCreate","fire","init","_enable","fixPosition","initPosition","_dragStart","dragStart","_dragMove","dragMove","_dragEnd","dragEnd","addEventListener","refresh","reinit","getSize","recalulate","getPosition","_transformPosition","_setTranslate","transform","translateCss","ua","navigator","userAgent","msie","indexOf","time","isFix","isSilent","determineDirection","refreshPosition","setPosition","setZeroTransition","leftDirection","rightDirection","upDirection","downDirection","event","currentEvent","isTouchEvent","TouchEvent","_startTouchPoint","pageX","clientX","pageY","clientY","_startPosition","_touchId","stopPropagation","target","HTMLInputElement","preventDefault","focus","isDragee","touch","touchPoint","removeEventListener","getRectangle","destroy","reset","__defineSetter__","enable","funcs","args","slice","retValue","fs","reverse","f","unshift","remove","boundToRectangle","calcPoint","rectP2","boundToElement","retFunc","boundToLineX","startY","endY","boundToLineY","startX","endX","someK","cosBeta","sinBeta","point2","pointCrossing","newEnd","boundToCircle","boundedPoint","boundToArc","startAgle","endAngle","boundStartAngle","boundEndtAngle","toRectangle","toLineX","toLineY","toLine","toCircle","toArc","timeEnd","onChange","addTarget","shotTargets","catchDraggable","sort","a","b","innerDraggables","positions","targetIndexes","fn","currentScope","addDraggableToScope","addTargetToScope","parentElement","draggableElements","targetElements","draggableOptions","targetOptions","scopeOptions","timeExcange","sorting","floatLeft","positioning","removable","onAdd","beforeAdd","onRemove","targetRectangle","draggableSquare","rectangles","indexesOfNew","newDraggablesIndex","addRemoveOnMove","pushInnerDraggable","removeHandler","getSortedDraggables","notCrossing","floatRight","type","opts","rectangleList","indexesOfNews","boundRect","staticRectangleIndexes","indexes","indexOfStatic","staticRect","paddingTopLeft","paddingBottomRight","yGapBetweenDraggables","boundaryPoints","isValid","paddingTopNegRight","paddingBottomNegLeft","paddingTopRight","paddingBottomLeft","getRightTopPoint","getLeftBottomPoint","oldObjsList","newObjs","indexOfNews","objsList","concat","obj","newList","listOldPosition","newObj","lists","isDisplacement","initDraggable","moveHandler","onEndDisplaycement","moveOrSave","fixPositions","getCurrentFixPosition","currentIndex","excangeIndex","targetIndex","sortedDraggables","initPositions","j","list","clear","elements","listOptions","areaRectangle","dAngle","startRadius","endRadius","lineWidth","strokeStyle","fillStyle","getContext","halfSize","draw","isInit","clearRect","beginPath","moveTo","lineTo","closePath","stroke","fill","startAngle","angles","shiftedCenter","change","updateAngle","setAngle","getArrayWithBoundIndexes","retIndexes","touchRadius","fillStyles","initAngles","onDraw","limitImg","limitImgOffset","isSelectable","getBoundAngle","initSelect","setActiveArc","e","canvasOffset","getArcOnPoint","activeArcIndex","updateAngles","isClossing","drawArc","enableIndexes","drawLimitImg","createClone","cloneObj","getFillStyle","color","arc","img","translate","rotate","drawImage","setTransform","getAnglesDiff","baseAngle","diffAngle","getPercent","getArcBisectrixs","setAngles","stepOn","isOn","getCurrentFixPositionWithOff","moveDraggable","fixToOff","moveDraggableToOff","fixOffPosition"],"mappings":"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","file":"dragee.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Dragee\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dragee\"] = factory();\n\telse\n\t\troot[\"Dragee\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a640e173df03a25502ca\n **/","import './expandnative'\nimport {Point} from './point'\nimport {Draggable} from './draggable'\nimport {List, listFactory} from './list'\nimport {targets, Target} from './target'\nimport {scopes, defaultScope, Scope, scopeFactory, scope} from './scope'\nimport {positionType, sortingFactory, positionFactory } from './positioning'\nimport {bound} from './bound'\nimport {spiders, Spider} from './spider'\nimport {arcSliders, ArcSlider} from './arcslider'\nimport {charts, Chart} from './chart'\nimport {listSwitcherFactory, ListSwitcher} from './listswitcher'\n\nglobal.Point = Point\n\nexport { Draggable,\n  List, listFactory,\n  targets, Target,\n  scopes, defaultScope, Scope, scopeFactory, scope,\n  positionType, sortingFactory, positionFactory,\n  bound,\n  spiders, Spider,\n  arcSliders, ArcSlider,\n  charts, Chart,\n  listSwitcherFactory, ListSwitcher,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","var clone = function (o) {\n    function c(o) {\n        for (var i in o) {\n            this[i] = o[i];\n        }\n    }\n    return new c(o);\n}\n\n\n/************ Array **************/\n\nif (!Array.prototype.forEach){\n    Array.prototype.forEach = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t)\n                fun.call(thisp, t[i], i, t);\n        }\n    };\n}\n\nif (!Array.prototype.filter){\n    Array.prototype.filter = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var res = [];\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t){\n                var val = t[i]; // in case fun mutates this\n                if (fun.call(thisp, val, i, t))\n                    res.push(val);\n            }\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.every){\n        Array.prototype.every = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n        throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t && !fun.call(thisp, t[i], i, t))\n                return false;\n        }\n        return true;\n    };\n}\n\nif (!Array.prototype.map){\n    Array.prototype.map = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var res = new Array(len);\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t)\n                res[i] = fun.call(thisp, t[i], i, t);\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.some){\n    Array.prototype.some = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t && fun.call(thisp, t[i], i, t))\n                return true;\n        }\n        return false;\n    };\n}\n\nif (!Array.prototype.removeItem){\n    Array.prototype.removeItem = function(val) {\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === val) {\n                this.splice(i, 1);\n                i--;\n            }\n        }\n        return this;\n    }\n}\n\n/*********** HTMLElement ***************/\nElement.prototype.hasClass = function(c){\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\");\n    return (re.test(this.className));\n}\n\nElement.prototype.addClass = function(c){\n    if (this.hasClass(c)) return this;\n    this.className = (this.className + \" \" + c).replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n    return this;\n}\n\nElement.prototype.removeClass = function(c){\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\")\n    this.className = this.className.replace(re, \"$1\").replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n    return this;\n}\n\nHTMLElement.prototype.appbeginChild = function(node) {\n    this.firstChild ? this.insertBefore(node, this.firstChild) : this.appendChild(node);\n}\n\nHTMLElement.prototype.exchange = function(refNode) {\n    var tempParentNode = refNode.parentNode;\n    var tempBeforeNode = refNode.nextElementSibling;\n    this.parentNode.insertBefore(refNode,this);\n    if(tempBeforeNode)\n        tempParentNode.insertBefore(this,tempBeforeNode);\n    else\n        tempParentNode.appendChild(this);\n\n    return refNode;\n}\n\nvar fullOffset = function(element, axis, parent_id){\n    var tor = 0;\n    while((element) && (element.id!=parent_id)){  //&& (element!=\"\")\n        if( axis == \"x\" )\n        {\n            if(element.offsetLeft)\n                tor += element.offsetLeft;\n        }\n        if( axis == \"y\" )\n        {\n            if(element.offsetTop)\n                tor += element.offsetTop;\n        }\n            element = element.parentNode;\n    }\n    return tor;\n}\n\n/*********************** 00P *************************/\nvar extend = function(Child, Parent) {\n    var F = function() { }\n    F.prototype = Parent.prototype;\n    Child.prototype = new F();\n    Child.prototype.constructor = Child;\n    Child.superclass = Parent.prototype;\n}\n\nvar augment = function(receivingClass, givingClass) {\n    /* only provide certain methods */\n    if (arguments[2]) {\n        for (var i=2, len=arguments.length; i<len; i++) {\n            receivingClass.prototype[arguments[i]] = givingClass.prototype[arguments[i]];\n        }\n    }\n    /* provide all methods*/\n    else {\n        for (methodName in givingClass.prototype) {\n            /* check to make sure the receiving class doesn't\n               have a method of the same name as the one currently\n               being processed */\n            if (!receivingClass.prototype[methodName]) {\n                receivingClass.prototype[methodName] = givingClass.prototype[methodName];\n            }\n        }\n    }\n}\n/**************************************************/\naugment(NodeList,Array,'forEach');\n\n/**************************************************/\nMath.getNearIndex = function(arr, val){\n    var delta = Math.abs(arr[0] - val);\n    var index = 0;\n    for(var i=0; i<arr.length; i++){\n        var temp = Math.abs(arr[i] - val);\n        if(temp<delta){\n            delta = temp;\n            index = i;\n        }\n    }\n    return index;\n}\n\nMath.getNearIndexWithCaptureRadius = function(arr, radius, val){\n    var delta=Math.abs(arr[0]-val);\n    var index=0;\n    for(var i=0;i<arr.length;i++){\n        var temp=Math.abs(arr[i]-val);\n        if(temp<delta){\n            delta=temp;\n            index=i;\n        }\n    }\n    if(delta>radius){\n        return -1;\n    }\n    return index;\n}\n\nMath.bound = function(min, max, val){\n    //console.log(min,max,val)\n    return Math.max(min,Math.min(max,val));\n}\nMath.boundPoint = function(min, max, val){\n    var x = Math.max(min.x, Math.min(max.x, val.x));\n    var y = Math.max(min.y, Math.min(max.y, val.y));\n    return new Point(x, y);\n}\n\nMath.toRadian = function(angle){\n    return ((angle % 361) * Math.PI / 180);\n}\n/********************************************/\n\nString.prototype.substrend = function(length) {\n    return this.substr(0, this.length - length);\n}\n/********************************************/\n\nfunction XmlHttpRequest() {\n    if (window.XMLHttpRequest) {\n        xmlhttp = new XMLHttpRequest();\n    } else if (window.ActiveXObject) {\n        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    if (xmlhttp == null) {\n        alert(\"Your browser does not support XMLHTTP.\");\n    }\n    return xmlhttp;\n}\n\nwindow.requestAnimationFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          window.oRequestAnimationFrame      ||\n          window.msRequestAnimationFrame     ||\n          function(/* function */ callback, /* DOMElement */ element){\n            window.setTimeout(callback, 1000 / 60);\n          };\n})();\n\ntry {\n    if(!Object.prototype.__defineGetter__ &&\n    Object.defineProperty({}, \"x\", { get: function() { return true } }).x) {\n        Object.defineProperty(Object.prototype, \"__defineGetter__\",\n     { enumerable: false, configurable: true,\n        value: function(name, func) {\n            Object.defineProperty(this, name,\n             { get: func, enumerable: true, configurable: true });\n        }\n     });\n        Object.defineProperty(Object.prototype, \"__defineSetter__\",\n     { enumerable: false, configurable: true,\n        value: function(name, func) {\n            Object.defineProperty(this, name,\n             { set: func, enumerable: true, configurable: true });\n        }\n     });\n    }\n} catch(defPropException) { /*Do nothing if an exception occurs*/ };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/expandnative.js\n **/","'use strict';\nimport util from './util'\nvar mathPoint;\nvar Dragee = { util };//todo remove after refactore\n\n\n\n/*********************/\nfunction Point(x, y){\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype.toString = function(){\n    return '{x=' + this.x + ',y=' + this.y + '}';\n};\nPoint.prototype.add = function(p){\n    return new Point(this.x + p.x, this.y + p.y);\n};\nPoint.prototype.sub = function(p){\n    return new Point(this.x - p.x, this.y - p.y);\n};\nPoint.prototype.mult = function(k){\n    return new Point(this.x * k, this.y * k);\n};\nPoint.prototype.negative = function(){\n    return new Point(-this.x, -this.y);\n};\nPoint.prototype.compare = function(p){\n    return (this.x === p.x && this.y === p.y);\n};\nPoint.prototype.clone = function(){\n    return new Point(this.x, this.y);\n};\n\n/****************/\nfunction Rectangle(position, size){\n    this.position = position;\n    this.size = size;\n}\n\nRectangle.prototype.getP1 = function(){\n    return this.position;\n};\nRectangle.prototype.getP2 = function(){\n    return new Point(this.position.x + this.size.x, this.position.y);\n};\nRectangle.prototype.getP3 = function(){\n    return this.position.add(this.size);\n};\nRectangle.prototype.getP4 = function(){\n    return new Point(this.position.x, this.position.y + this.size.y);\n};\nRectangle.prototype.getCenter = function(){\n    return this.position.add(this.size.mult(0.5));\n};\nRectangle.prototype.or = function(rect){\n    var position = new Point(Math.min(this.position.x, rect.position.x), Math.min(this.position.y, rect.position.y)), size = (new Point(Math.max(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.max(this.position.y + this.size.y, rect.position.y + rect.size.y))).sub(position);\n    return new Rectangle(position, size);\n};\nRectangle.prototype.and = function(rect){\n    var position = new Point(Math.max(this.position.x, rect.position.x), Math.max(this.position.y, rect.position.y)), size = (new Point(Math.min(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.min(this.position.y + this.size.y, rect.position.y + rect.size.y))).sub(position);\n    if(size.x <= 0 || size.y <= 0){\n        return null;\n    }\n    return new Rectangle(position, size);\n};\nRectangle.prototype.includePoint = function(p){\n\treturn !(this.position.x > p.x || this.position.x + this.size.x < p.x || this.position.y > p.y || this.position.y + this.size.y < p.y);\n};\nRectangle.prototype.includeRectangle = function(rectangle){\n\treturn this.includePoint(rectangle.position) && this.includePoint(rectangle.getP3());\n};\nRectangle.prototype.moveToBound = function(rect, axis){\n    var selAxis, crossRectangle, thisCenter, rectCenter, sign, offset;\n    if(axis){\n        selAxis = axis;\n    }else{\n        crossRectangle = this.and(rect);\n        if(!crossRectangle){\n            return rect;\n        }\n        selAxis = crossRectangle.size.x > crossRectangle.size.y ? \"y\" : \"x\";\n    }\n    thisCenter = this.getCenter();\n    rectCenter = rect.getCenter();\n    sign = thisCenter[selAxis] > rectCenter[selAxis] ? -1 : 1;\n    offset = sign > 0 ? this.position[selAxis] + this.size[selAxis] - rect.position[selAxis] : this.position[selAxis] - (rect.position[selAxis] + rect.size[selAxis]);\n    rect.position[selAxis] = rect.position[selAxis] + offset;\n    return rect;\n};\nRectangle.prototype.getSquare = function(){\n    return this.size.x * this.size.y;\n};\nRectangle.prototype.styleApply = function(el){\n    el = el || document.querySelector(\"ind\");\n    el.style.left = this.position.x + \"px\";\n    el.style.top = this.position.y + \"px\";\n    el.style.width = this.size.x + \"px\";\n    el.style.height = this.size.y + \"px\";\n};\nRectangle.prototype.growth = function(size){\n    this.size = this.size.add(size);\n    this.position = this.position.add(size.mult(-0.5));\n};\nRectangle.prototype.getMinSide = function(){\n    return Math.min(this.size.x, this.size.y);\n};\n\n/*****************/\nmathPoint = {\n    getDistance: function(p1, p2){\n        var dx = p1.x - p2.x, dy = p1.y - p2.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    },\n    distance: function(p1, p2){\n        return mathPoint.getDistance(p1, p2)\n    },\n    getXDifference: function(p1, p2){\n        return Math.abs(p1.x - p2.x);\n    },\n    getYDifference: function(p1, p2) {\n        return Math.abs(p1.y - p2.y);\n    },\n    transformedSpaceDistanceFactory: function(options) {\n        return function(p1, p2){\n            return Math.sqrt(\n                Math.pow(options.x * Math.abs(p1.x - p2.x), 2) + Math.pow(options.y * Math.abs(p1.y - p2.y), 2)\n            );\n        };\n    },\n    indexOfNearPoint: function(arr, val, radius, getDistance){\n        var size, index = 0, i, temp;\n        getDistance = getDistance || mathPoint.getDistance;\n        if(arr.length === 0){\n            return -1;\n        }\n        size = getDistance(arr[0], val);\n        for(i = 0; i < arr.length; i++){\n            temp = getDistance(arr[i], val);\n            if(temp < size){\n                size = temp;\n                index = i;\n            }\n        }\n        if(radius >= 0 && size > radius){\n            return -1;\n        }\n        return index;\n    },\n    bound: function(min, max, val){\n        return Math.max(min, Math.min(max, val));\n    },\n    boundPoint: function(min, max, val){\n        var x = Math.max(min.x, Math.min(max.x, val.x)), y = Math.max(min.y, Math.min(max.y, val.y));\n        return new Point(x, y);\n    },\n    //Return crossing point of two lines\n    directCrossing: function(L1P1, L1P2, L2P1, L2P2){\n        var temp, k1, k2, b1, b2, x, y;\n        if(L2P1.x === L2P2.x){\n            temp = L2P1;\n            L2P1 = L1P1;\n            L1P1 = temp;\n            temp = L2P2;\n            L2P2 = L1P2;\n            L1P2 = temp;\n        }\n        if(L1P1.x === L1P2.x){\n            k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n            b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n            x = L1P1.x;\n            y = x * k2 + b2;\n            return new Point(x, y);\n        }else{\n            k1 = (L1P2.y - L1P1.y) / (L1P2.x - L1P1.x);\n            b1 = (L1P2.x * L1P1.y - L1P1.x * L1P2.y) / (L1P2.x - L1P1.x);\n            k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n            b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n            x = (b1 - b2) / (k2 - k1);\n            y = x * k1 + b1;\n            return new Point(x, y);\n        }\n    },\n    //Get point and check that point belong to segment of the line\n    // if not - return the nearest point of segment\n    boundToSegment: function(LP1, LP2, P){\n        var x, y;\n        x = mathPoint.bound(Math.min(LP1.x, LP2.x), Math.max(LP1.x, LP2.x), P.x);\n        if(x != P.x){\n            y = (x === LP1.x) ? LP1.y : LP2.y;\n            P = new Point(x, y);\n        }\n        y = mathPoint.bound(Math.min(LP1.y, LP2.y), Math.max(LP1.y, LP2.y), P.y);\n        if(y != P.y){\n            x = (y === LP1.y) ? LP1.x : LP2.x;\n            P = new Point(x, y);\n        }\n        return P;\n    },\n    boundToLine: function(A, B, P){\n        var AP = new Point(P.x - A.x, P.y - A.y),\n            AB = new Point(B.x - A.x, B.y - A.y),\n            ab2 = AB.x * AB.x + AB.y * AB.y,\n            ap_ab = AP.x * AB.x + AP.y * AB.y,\n            t = ap_ab/ab2;\n        return new Point(A.x + AB.x * t, A.y + AB.y * t);\n    },\n    getPointInLine: function(LP1, LP2, percent){\n        var dx = LP2.x - LP1.x, dy = LP2.y - LP1.y;\n        return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n    },\n    getPointInLineByLenght: function(LP1, LP2, lenght){\n        var dx = LP2.x - LP1.x, dy = LP2.y - LP1.y, percent = lenght / mathPoint.distance(LP1, LP2);\n        return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n    },\n    createRectangleFromElement: function(el, parent, isContentBoxSize, isConsiderTranslate){\n        var size = this.getSizeOfElement(el, isContentBoxSize)\n        return new Rectangle(this.getOffset(el, parent || el.parentNode, isConsiderTranslate), size);\n    },\n    getSizeOfElement: function(el, isContentBoxSize){\n        var width = parseInt(window.getComputedStyle(el)['width']), height = parseInt(window.getComputedStyle(el)['height']);\n        if(!isContentBoxSize){\n            width += Dragee.util.getSumValueOfStyleRule(el, [\"padding-left\", \"padding-right\", \"border-left-width\", \"border-right-width\"]);\n            height += Dragee.util.getSumValueOfStyleRule(el, [\"padding-top\", \"padding-bottom\", \"border-top-width\", \"border-bottom-width\"]);\n        }\n        return new Point(width, height);\n    },\n    getOffset: function(el, parent, isConsiderTranslate){\n        var elRect = el.getBoundingClientRect(), parentRect = parent.getBoundingClientRect();\n        return new Point(elRect.left - parentRect.left, elRect.top - parentRect.top);\n    },\n    getPointFromRadialSystem: function(angle, length, center){\n        center = center || new Point(0, 0);\n        return center.add(new Point(length * Math.cos(angle), length * Math.sin(angle)));\n    },\n    addPointToBoundPoints: function(boundpoints, point, isRight){\n        var i, result = boundpoints.filter(function(bPoint){\n            return  bPoint.y > point.y || (isRight ? bPoint.x < point.x : bPoint.x > point.x);\n        });\n        for(i = 0; i < result.length; i++){\n            if(point.y < result[i].y){\n                result.splice(i, 0, point);\n                return result;\n            }\n        }\n        result.push(point);\n        return result;\n    },\n    getAngle: function(p1, p2){\n        var diff = p2.sub(p1);\n        return this.normalizeAngle(Math.atan2(diff.y, diff.x));\n    },\n    toRadian: function(angle){\n        return ((angle % 360) * Math.PI / 180);\n    },\n    toDegree: function(angle){\n        return (angle * 180 / Math.PI ) % 360;\n    },\n    boundAngle: function(min, max, val){\n        var dmin,dmax;\n        if(min < max && val > min && val < max){\n            return val;\n        }else if(max < min && ( val < max || val > min )){\n            return val;\n        }else{\n            dmin = this.getAngleDiff(min,val);\n            dmax = this.getAngleDiff(max,val);\n            if(dmin < dmax){\n                return min;\n            }else{\n                return max;\n            }\n        }\n    },\n    getNearestAngle:function(arr,angle){\n        var i,temp,diff = Math.PI * 2 ,value;\n        for(i = 0; i < arr.length;i++){\n            temp = mathPoint.getAngleDiff(arr[i],angle);\n            if(diff < temp){\n                diff = temp;\n                value = arr[i];\n            }\n        }\n        return value;\n    },\n    getAngleDiff:function(alpha,beta){\n        var minAngle = Math.min(alpha,beta),\n            maxAngle =  Math.max(alpha,beta);\n        return Math.min(maxAngle - minAngle,minAngle + Math.PI*2 - maxAngle);\n    },\n    normalizeAngle: function( val){\n        while(val < 0 ){\n            val+= 2 * Math.PI;\n        }\n        while(val > 2 * Math.PI ){\n            val-= 2 * Math.PI;\n        }\n        return val;\n    }\n};\n\nexport {Point, Rectangle, mathPoint};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/point.js\n **/","'use strict';\n\nvar util = {\n    getDefaultParent: function (element){\n        var parent = element.parentNode;\n        while(parent.parentNode && window.getComputedStyle(parent)[\"position\"] === \"static\"){\n            parent = parent.parentNode;\n        }\n        return parent;\n    },\n    bind: function(func, context){\n        return function(){\n            return func.apply(context, [].splice.call(arguments, 0));\n        };\n    },\n    getTouchByID: function(element, touchId){\n        var i;\n        for(i = 0; i < element.changedTouches.length; i++){\n            if(element.changedTouches[i].identifier === touchId){\n                return element.changedTouches[i];\n            }\n        }\n        return false;\n    },\n    getSumValueOfStyleRule: function(element, rules){\n        return rules.reduce(function(sum, rule){\n            return sum + parseInt(window.getComputedStyle(element)[rule]||0);\n        }, 0);\n    },\n    appendFirstChild: function(element, node){\n        element.firstChild ? element.insertBefore(node, element.firstChild) : element.appendChild(node);\n    },\n    range: function(start, stop, step){\n        var result = [];\n        if(typeof stop === 'undefined'){\n            stop = start;\n            start = 0;\n        }\n        if(typeof step === 'undefined'){\n            step = 1;\n        }\n        if((step > 0 && start >= stop) || (step < 0 && start <= stop)){\n            return [];\n        }\n        for(var i = start; step > 0 ? i < stop : i > stop; i += step){\n            result.push(i);\n        }\n        return result;\n    },\n    setStyle: function(element, style){\n        style = style || {};\n        var cssText = \"\", key;\n        for(key in style){\n            if(style.hasOwnProperty(key)){\n                cssText += key + \": \" + style[key] + \"; \";\n            }\n        }\n\n        element.style.cssText = cssText;\n    },\n    randomColor:function(){\n        var rnd = function(){\n                return Math.round(Math.random()*255);\n            },\n            toHexString = function(digit){\n                var str = digit.toString(16);\n                while(str.length < 2){\n                    str = \"0\" + str;\n                }\n                return str;\n            },\n            red = rnd(),\n            green = rnd(),\n            blue = rnd();\n\n        return \"#\" + toHexString(red) + toHexString(green) + toHexString(blue);\n    },\n    createCanvas: function(area, rectagle){\n        var canvas;\n        if(window.getComputedStyle(area).position === \"static\"){\n            area.style.position = \"relative\";\n        }\n        canvas = document.createElement(\"canvas\");\n        canvas.setAttribute(\"width\", rectagle.size.x + \"px\");\n        canvas.setAttribute(\"height\", rectagle.size.y + \"px\");\n        util.setStyle(canvas, {\n            position: \"absolute\",\n            left: rectagle.position.y + \"px\",\n            top: rectagle.position.y + \"px\",\n            width: rectagle.size.x + \"px\",\n            height: rectagle.size.y + \"px\"\n        });\n        util.appendFirstChild(area, canvas);\n        return canvas;\n    }\n};\n\nexport default util;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","'use strict';\n\nimport util from './util'\nimport Event from './event'\nimport getStyleProperty from 'desandro-get-style-property'\nimport {bound} from './bound'\nimport {mathPoint, Point, Rectangle} from './point'\nimport {defaultScope} from \"./scope\"\n\nvar Dragee = { util, bound, Event};//todo remove after refactore\n\nvar isTouch = 'ontouchstart' in window, mouseEvents = {\n    start: 'mousedown',\n    move: 'mousemove',\n    end: 'mouseup'\n}, touchEvents = {\n    start: 'touchstart',\n    move: 'touchmove',\n    end: 'touchend'\n},\nevents = isTouch ? touchEvents : mouseEvents,\ndraggables = [],\npreventDoubleInit = function(draggable){\n    var message = \"for this element Dragee.Draggable is already exist, don't create it twice \";\n    if(draggables.some(function(existing){\n        return draggable.element === existing.element;\n    })){\n        throw message;\n    }\n    draggables.push(draggable);\n},\naddToDefaultScope = function(draggable){\n    defaultScope.addDraggable(draggable);\n},\ntransformProperty = getStyleProperty('transform'),\ntransitionProperty = getStyleProperty('transition');\n\nfunction Draggable(element, options){\n    options = options || {};\n    var i, that = this, parent = options.parent || Dragee.util.getDefaultParent(element);\n    this.targets = [];\n    this.options = {\n        parent: parent,\n        bound: Dragee.bound.toElement(parent, parent),\n        startFilter: false,\n        isContentBoxSize: false,\n        position: false\n    }\n    for(i in options){\n        if(options.hasOwnProperty(i)){\n            this.options[i] = options[i];\n        }\n    }\n    this.onEnd = new Dragee.Event(this, { isReverse: true, isStopOnTrue: true });\n    this.onMove = new Dragee.Event(this);\n    this.onStart = new Dragee.Event(this);\n\n    this.onEnd.add(function(){\n        this.move(this.position, 0, true, true);\n    });\n\n    if(options.onEnd){\n        this.onEnd.add(options.onEnd);\n    }\n    if(options.onMove){\n        this.onMove.add(options.onMove);\n    }\n    if(options.onStart){\n        this.onStart.add(options.onStart);\n    }\n    this.element = element;\n    this.bound = this.options.bound;\n    preventDoubleInit(this);\n    Draggable.onCreate.fire(this);\n    that.init();\n}\n\nDraggable.onCreate = new Dragee.Event(Draggable, {isReverse: true, isStopOnTrue: true});\nDraggable.onCreate.add(addToDefaultScope);\n\nDraggable.prototype.init = function(){\n    this._enable = true;\n    this.offset = mathPoint.getOffset(this.element, this.options.parent, true);\n    this.fixPosition = this.offset;\n    this.position = this.offset;\n    if(this.options.position){\n        this.initPosition = this.options.position;\n        this.move(this.initPosition, 0, true, true);\n    } else {\n        this.initPosition = this.offset;\n    }\n    this._dragStart = Dragee.util.bind(this.dragStart, this);\n    this._dragMove = Dragee.util.bind(this.dragMove, this);\n    this._dragEnd = Dragee.util.bind(this.dragEnd, this);\n\n    this.element.addEventListener(touchEvents.start, this._dragStart);\n    this.element.addEventListener(mouseEvents.start, this._dragStart);\n\n    this.bound.refresh && this.bound.refresh();\n};\n\nDraggable.prototype.reinit = function(){\n    this.offset = mathPoint.getOffset(this.element, this.options.parent, true);\n    this.fixPosition = this.offset;\n    this.position = this.offset;\n    if(this.options.position){\n        this.initPosition = this.options.position;\n        this.move(this.initPosition, 0, true, true);\n    } else {\n        this.initPosition = this.offset;\n    }\n\n    this.bound.refresh && this.bound.refresh();\n};\n\nDraggable.prototype.getSize = function(recalulate){\n    return mathPoint.getSizeOfElement(this.element, this.options.isContentBoxSize);\n};\n\nDraggable.prototype.getPosition = function(){\n    this.position = this.offset.add(this._transformPosition || new Point(0, 0));\n    return this.position;\n};\n\nDraggable.prototype.getCenter = function(){\n    return this.position.add(this.getSize().mult(0.5));\n};\n\nDraggable.prototype._setTranslate = function(point){\n    this._transformPosition = point;\n\n    var transform = this.element.style[transformProperty],\n        translateCss = ' translate3d(' + point.x + 'px,' + point.y + 'px, 0px)';\n\n    var ua = window.navigator.userAgent;\n    var msie = ua.indexOf(\"MSIE \");\n\n    if(msie) {\n        translateCss = ' translate(' + point.x + 'px,' + point.y + 'px)';\n        if(!/translate\\([^)]+\\)/.test(transform)){\n            transform += translateCss;\n        }else{\n            transform = transform.replace(/translate\\([^)]+\\)/, translateCss);\n        }\n    } else {\n        if(!/translate3d\\([^)]+\\)/.test(transform)){\n            transform += translateCss;\n        }else{\n            transform = transform.replace(/translate3d\\([^)]+\\)/, translateCss);\n        }\n    }\n\n    this.element.style[transformProperty] = transform;\n};\n\nDraggable.prototype.move = function(point, time, isFix, isSilent){\n    var that = this;\n    time = time || 0;\n    point = point.clone();\n    if(isFix){\n        this.fixPosition = point;\n    }\n\n    this.determineDirection(point);\n\n    this.position = point;\n\n    transitionProperty && (that.element.style[transitionProperty] = time + \"ms\");\n    that._setTranslate(point.sub(that.offset));\n    isSilent || that.onMove.fire();\n};\n\nDraggable.prototype.refreshPosition = function(){\n    this.setPosition(this.getPosition());\n};\n\nDraggable.prototype.setPosition = function(point){\n    point = point.clone();\n    this.position = point;\n\n    transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n    this._setTranslate(point.sub(this.offset));\n};\n\nDraggable.prototype.setZeroTransition = function(){\n    transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n};\n\nDraggable.prototype.determineDirection = function(point){\n    this.leftDirection = (this.position.x < point.x);\n    this.rightDirection = (this.position.x > point.x);\n    this.upDirection = (this.position.y > point.y);\n    this.downDirection = (this.position.y < point.y);\n};\n\nDraggable.prototype.dragStart = function(event){\n    this.currentEvent = event;\n    if(!this._enable || ( this.options.startFilter && !this.options.startFilter(event))){\n        return;\n    }\n\n    var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n    this._startTouchPoint = new Point(isTouchEvent ? event.changedTouches[0].pageX : event.clientX, isTouchEvent ? event.changedTouches[0].pageY : event.clientY);\n\n    this._startPosition = this.getPosition();\n    if(isTouchEvent){\n        this._touchId = event.changedTouches[0].identifier;\n    }\n    event.stopPropagation();\n    if(!(event.target instanceof HTMLInputElement\n        || event.target instanceof HTMLInputElement)){\n        event.preventDefault();\n    }else{\n        event.target.focus();\n    }\n\n    document.addEventListener(touchEvents.move, this._dragMove);\n    document.addEventListener(mouseEvents.move, this._dragMove);\n\n    document.addEventListener(touchEvents.end, this._dragEnd);\n    document.addEventListener(mouseEvents.end, this._dragEnd);\n\n    this.isDragee = true;\n\n    this.onStart.fire(event);\n    this.element.addClass(\"active\");\n    this.onMove.fire(event);\n};\n\nDraggable.prototype.dragMove = function(event){\n    this.currentEvent = event;\n\n    var touch, touchPoint, point;\n\n    var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n    if(isTouchEvent){\n        if(!(touch = Dragee.util.getTouchByID(event, this._touchId))){\n            return;\n        }\n    }\n    event.stopPropagation();\n    event.preventDefault();\n    touchPoint = new Point(isTouchEvent ? touch.pageX : event.clientX, isTouchEvent ? touch.pageY : event.clientY);\n    point = this._startPosition.add(touchPoint.sub(this._startTouchPoint));\n    point = this.bound(point, this.getSize());\n    this.touchPoint = touchPoint;\n    this.move(point, 0);\n};\n\nDraggable.prototype.dragEnd = function(event){\n    var touch;\n\n    var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n    if(isTouchEvent){\n        if(!(touch = Dragee.util.getTouchByID(event, this._touchId))){\n            return;\n        }\n    }\n    event.stopPropagation();\n    event.preventDefault();\n    this.onEnd.fire(event);\n\n    document.removeEventListener(touchEvents.move, this._dragMove);\n    document.removeEventListener(mouseEvents.move, this._dragMove);\n\n    document.removeEventListener(touchEvents.end, this._dragEnd);\n    document.removeEventListener(mouseEvents.end, this._dragEnd);\n\n    this.isDragee = false;\n    this.element.removeClass(\"active\");\n};\n\nDraggable.prototype.getRectangle = function(){\n    return new Rectangle(this.position, this.getSize());\n};\n\nDraggable.prototype.refresh = function(){\n    this.getSize(true);\n    this.bound.refresh && this.bound.refresh();\n}\n\nDraggable.prototype.destroy = function(){\n    this.element.removeEventListener(touchEvents.start, this._dragStart);\n    this.element.removeEventListener(mouseEvents.start, this._dragStart);\n    this.element.removeEventListener(touchEvents.move, this._dragMove);\n    this.element.removeEventListener(mouseEvents.move, this._dragMove);\n    this.element.removeEventListener(touchEvents.end, this._dragEnd);\n    this.element.removeEventListener(mouseEvents.end, this._dragEnd);\n\n    this.onEnd.reset();\n    this.onMove.reset();\n};\n\nDraggable.prototype.__defineGetter__(\"enable\", function(){\n    return this._enable;\n});\n\nDraggable.prototype.__defineSetter__(\"enable\", function(enable) {\n    if(enable) {\n        this.element.removeClass(\"disable\");\n    } else {\n        this.element.addClass(\"disable\");\n    }\n\n    return this._enable = enable;\n});\n\nexport {Draggable, draggables, events};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/draggable.js\n **/","'use strict';\n\nfunction Event(context, options){\n    options = options || {}\n    this.funcs = [];\n    this.context = context;\n    this.isReverse = options.isReverse || false;\n    this.isStopOnTrue = options.isStopOnTrue || false;\n}\n\nEvent.prototype.fire = function(){\n    var args = [].slice.call(arguments),\n        i, retValue, fs = this.isReverse ? this.funcs.slice().reverse() : this.funcs;\n\n    for(i = 0; i < fs.length; i++){\n        retValue = fs[i].apply(this.context, args);\n        if(this.isStopOnTrue && retValue){\n            return true;\n        }\n    }\n    return !this.isStopOnTrue;\n};\n\nEvent.prototype.add = function(f){\n    this.funcs.push(f);\n};\n\nEvent.prototype.unshift = function(f){\n    this.funcs.unshift(f);\n};\n\nEvent.prototype.remove = function(f){\n    var index = this.funcs.indexOf(f);\n    if(index !== -1){\n        this.funcs.splice(index, 1)\n    }\n};\n\nEvent.prototype.reset = function(f){\n    this.funcs = [];\n};\n\nexport default Event;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/event.js\n **/","/*!\n * getStyleProperty v1.0.4\n * original by kangax\n * http://perfectionkills.com/feature-testing-css-properties/\n * MIT license\n */\n\n/*jshint browser: true, strict: true, undef: true */\n/*global define: false, exports: false, module: false */\n\n( function( window ) {\n\n'use strict';\n\nvar prefixes = 'Webkit Moz ms Ms O'.split(' ');\nvar docElemStyle = document.documentElement.style;\n\nfunction getStyleProperty( propName ) {\n  if ( !propName ) {\n    return;\n  }\n\n  // test standard property first\n  if ( typeof docElemStyle[ propName ] === 'string' ) {\n    return propName;\n  }\n\n  // capitalize\n  propName = propName.charAt(0).toUpperCase() + propName.slice(1);\n\n  // test vendor specific properties\n  var prefixed;\n  for ( var i=0, len = prefixes.length; i < len; i++ ) {\n    prefixed = prefixes[i] + propName;\n    if ( typeof docElemStyle[ prefixed ] === 'string' ) {\n      return prefixed;\n    }\n  }\n}\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( function() {\n    return getStyleProperty;\n  });\n} else if ( typeof exports === 'object' ) {\n  // CommonJS for Component\n  module.exports = getStyleProperty;\n} else {\n  // browser global\n  window.getStyleProperty = getStyleProperty;\n}\n\n})( window );\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/desandro-get-style-property/get-style-property.js\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\nimport {mathPoint} from './point'\n\nfunction boundToRectangle(rectangle) {\n    return function (point, size){\n        var calcPoint = point.clone(),\n            rectP2 = rectangle.getP3();\n\n        if(rectangle.position.x > calcPoint.x){\n            (calcPoint.x = rectangle.position.x);\n        }\n        if(rectangle.position.y > calcPoint.y){\n            calcPoint.y = rectangle.position.y;\n        }\n        if(rectP2.x < calcPoint.x + size.x){\n            calcPoint.x = rectP2.x - size.x;\n        }\n        if(rectP2.y < calcPoint.y + size.y){\n            calcPoint.y = rectP2.y - size.y;\n        }\n        return calcPoint;\n    };\n}\n\nfunction boundToElement(element, parent) {\n    var bound,\n        retFunc = function(){\n            return bound.apply(this, arguments)\n        };\n\n    retFunc.refresh = function(){\n        bound = boundToRectangle(mathPoint.createRectangleFromElement(element, parent))\n    }\n    retFunc.refresh();\n    return retFunc;\n}\n\nfunction boundToLineX(x, startY, endY) {\n    return function (point, size){\n        var calcPoint = point.clone();\n        calcPoint.x = x;\n        if(startY > calcPoint.y){\n            calcPoint.y = startY;\n        }\n        if(endY < calcPoint.y + size.y){\n            calcPoint.y = endY - size.y;\n        }\n        return calcPoint;\n    };\n}\n\nfunction boundToLineY(y, startX, endX) {\n    return function (point, size){\n        var calcPoint = point.clone();\n        calcPoint.y = y;\n        if(startX > calcPoint.x){\n            calcPoint.x = startX;\n        }\n        if(endX < calcPoint.x + size.x){\n            calcPoint.x = endX - size.x;\n        }\n        return calcPoint;\n    };\n}\n\nfunction boundToLine(start, end) {\n    var alpha = Math.atan2(end.y - start.y, end.x - start.x),\n        beta = alpha + Math.PI / 2,\n        someK = 10,\n        cosBeta = Math.cos(beta),\n        sinBeta = Math.sin(beta);\n\n    return function (point, size){\n        var point2 = new Point(point.x + someK * cosBeta, point.y + someK * sinBeta),\n            pointCrossing = mathPoint.directCrossing(start, end, point, point2),\n            newEnd = mathPoint.getPointInLineByLenght(end, start, size.x);\n\n        pointCrossing = mathPoint.boundToLine(start, newEnd, pointCrossing);\n        return pointCrossing;\n    };\n}\n\nfunction boundToCircle(center, radius){\n    return function (point, size){\n        var boundedPoint = mathPoint.getPointInLineByLenght(center, point, radius);\n        return boundedPoint;\n    };\n};\n\nfunction boundToArc(center, radius, startAgle, endAngle) {\n    return function (point, size){\n        var boundStartAngle = typeof startAgle === \"function\" ? startAgle() : startAgle,\n            boundEndtAngle = typeof startAgle === \"function\" ? endAngle() : endAngle,\n            angle = mathPoint.getAngle(center, point);\n\n        angle = mathPoint.normalizeAngle(angle);\n        angle = mathPoint.boundAngle(boundStartAngle, boundEndtAngle, angle);\n        return mathPoint.getPointFromRadialSystem(angle, radius, center);\n    };\n}\n\nvar bound = {\n    toRectangle: boundToRectangle,\n    toElement: boundToElement,\n    toLineX: boundToLineX,\n    toLineY: boundToLineY,\n    toLine: boundToLine,\n    toCircle: boundToCircle,\n    toArc: boundToArc\n}\n\nexport {bound};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bound.js\n **/","'use strict';\n\nimport util from './util'\nimport Event from './event'\nimport {Draggable} from './draggable'\nimport {targets, Target} from './target'\n\nvar Dragee = { util, Draggable,  Target, Event };//todo remove after refactore\n\nvar scopes = [], defaultScope;\n\nfunction Scope(draggables, targets, options){\n    scopes.forEach(function(scope){\n        draggables && draggables.forEach(function(draggable){\n            scope.draggables.removeItem(draggable);\n        });\n        targets && targets.forEach(function(target){\n            scope.targets.removeItem(target);\n        });\n    });\n\n    this.draggables = draggables || [];\n    this.targets = targets || [];\n    scopes.push(this);\n    this.options = {\n        timeEnd: (options && options.timeEnd) || 400\n    };\n\n    this.onChange = new Dragee.Event(this);\n    if(options && options.onChange){\n        this.onChange.add(options.onChange);\n    }\n    this.init();\n}\n\nScope.prototype.init = function(){\n    var that = this;\n    this.draggables.forEach(function(draggable){\n        draggable.onEnd.add(function(){\n            return that.onEnd(this);\n        });\n    });\n};\n\nScope.prototype.addDraggable = function(draggable){\n    var that = this;\n\n    this.draggables.push(draggable);\n    draggable.onEnd.unshift(function(){\n        return that.onEnd(this);\n    });\n};\n\nScope.prototype.addTarget = function(target){\n    this.targets.push(target);\n};\n\nScope.prototype.onEnd = function(draggable){\n    var shotTargets = this.targets.filter(function(target){\n        return target.draggables.indexOf(draggable) !== -1;\n    }).filter(function(target){\n        return target.catchDraggable(draggable);\n    }).sort(function(a, b){\n        return a.getRectangle().getSquare() - b.getRectangle().getSquare();\n    });\n\n    if(shotTargets.length){\n        shotTargets[0].onEnd(draggable);\n    } else if(draggable.targets.length) {\n        draggable.move(draggable.initPosition, this.options.timeEnd, true, true);\n    }\n    this.onChange.fire();\n    return true;\n};\n\nScope.prototype.reset = function(){\n    this.targets.forEach(function(target){\n        target.reset();\n    });\n};\n\nScope.prototype.refresh = function(){\n    this.draggables.forEach(function(draggable){\n        draggable.refresh();\n    });\n    this.targets.forEach(function(target){\n        target.refresh();\n    });\n};\n\nScope.prototype.__defineGetter__(\"positions\", function(){\n    return this.targets.map(function(target){\n        return target.innerDraggables.map(function(draggable){\n            return this.draggables.indexOf(draggable);\n        }, this);\n    }, this);\n});\n\nScope.prototype.__defineSetter__(\"positions\", function(positions){\n    var message = \"wrong array length\";\n    if(positions.length === this.targets.length){\n        this.targets.forEach(function(target){\n            target.reset();\n        }, this);\n        positions.forEach(function(targetIndexes, i){\n            targetIndexes.forEach(function(index){\n                this.targets[i].add(this.draggables[index]);\n            }, this);\n        }, this);\n    }else{\n        alert(message);\n        throw message;\n    }\n});\n\ndefaultScope = new Scope();\n\nfunction scope(fn){\n    var currentScope = new Scope(),\n        addDraggableToScope = function(draggable){\n            currentScope.addDraggable(draggable);\n            return true;\n        },\n        addTargetToScope = function(target){\n            currentScope.addTarget(target);\n            return true;\n        };\n\n    Draggable.onCreate.add(addDraggableToScope);\n    Target.onCreate.add(addTargetToScope);\n    fn.call();\n    Draggable.onCreate.remove(addDraggableToScope);\n    Target.onCreate.remove(addTargetToScope);\n    return currentScope;\n}\n\nfunction scopeFactory(parentElement, draggableElements, targetElements, options){\n    var draggables, targets, draggableOptions, targetOptions, scopeOptions;\n    options = options || {};\n    draggableOptions = options.draggable || {};\n    targetOptions = options.target || {};\n    scopeOptions = options.scope || {};\n    draggableOptions.parent = draggableOptions.parent || parentElement;\n    targetOptions.parent = targetOptions.parent || parentElement;\n    draggableElements = Array.prototype.slice.call(draggableElements);\n    targetElements = Array.prototype.slice.call(targetElements);\n\n    draggables = draggableElements.map(function(element){\n        return new Dragee.Draggable(element, draggableOptions);\n    });\n\n    targets = targetElements.map(function(el){\n        return new Dragee.Target(element, draggables, targetOptions);\n    });\n    return new Scope(draggables, targets, scopeOptions);\n}\n\nexport {scopes, defaultScope, Scope, scopeFactory, scope};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/scope.js\n **/","'use strict';\n\nimport util from './util'\nimport Event from './event'\nimport {mathPoint} from './point'\nimport {positionType, sortingFactory, positionFactory} from './positioning'\nimport {scopes, defaultScope} from './scope'\n\nvar Dragee = { util, positionType,  positionFactory, sortingFactory, scopes, Event };//todo remove after refactore\n\nvar targets = [],\n\t\taddToDefaultScope = function(target){\n\t\t\tdefaultScope.addTarget(target)\n\t\t};\n\nfunction Target(element, draggables, options){\n\toptions = options || {};\n\tvar target = this, i, parent = options.parent || Dragee.util.getDefaultParent(element);\n\tthis.options = {\n\t\ttimeEnd: 200,\n\t\ttimeExcange: 400,\n\t\tparent: parent,\n\t\tsorting: Dragee.sortingFactory(Dragee.positionType.floatLeft)(80, mathPoint.transformedSpaceDistanceFactory({x: 1, y: 4})),\n\t\tpositioning: Dragee.positionFactory(Dragee.positionType.floatLeft)(this.getRectangle.bind(this), {removable: true})\n\t};\n\tfor(i in options){\n\t\tthis.options[i] = options[i];\n\t}\n\ttargets.push(this);\n\tthis.element = element;\n\tdraggables.forEach(function(draggable){\n\t\tdraggable.targets.push(target);\n\t})\n\tthis.draggables = draggables;\n\tthis.onAdd = new Dragee.Event(this);\n\tthis.beforeAdd = new Dragee.Event(this);\n\tthis.onRemove = new Dragee.Event(this);\n\n\toptions.onRemove && this.onRemove.add(options.onRemove);\n\toptions.onAdd && this.onAdd.add(options.onAdd);\n\toptions.beforeAdd && this.beforeAdd.add(options.beforeAdd);\n\tTarget.onCreate.fire(this);\n\n\tthis.init();\n};\n\nTarget.onCreate = new Dragee.Event(Target, {isReverse: true, isStopOnTrue: true});\nTarget.onCreate.add(addToDefaultScope);\n\nTarget.prototype.getRectangle = function(){\n\treturn mathPoint.createRectangleFromElement(\n\t\tthis.element,\n\t\tthis.options.parent,\n\t\tthis.options.isContentBoxSize,\n\t\ttrue\n\t);\n};\n\nTarget.prototype.catchDraggable = function(draggable){\n\tif(this.options.catchDraggable) {\n\t\treturn this.options.catchDraggable(this, draggable);\n\t} else {\n\t\tvar targetRectangle = this.getRectangle(),\n\t\t\tdraggableSquare = draggable.getRectangle().getSquare();\n\n\t\treturn draggableSquare < targetRectangle.getSquare()\n\t\t\t&& targetRectangle.includePoint(draggable.getCenter());\n\t}\n};\n\nTarget.prototype.getPosition = function(){\n\treturn this.getRectangle().position;\n};\n\nTarget.prototype.getSize = function(){\n\treturn this.getRectangle().size;\n};\n\nTarget.prototype.init = function(){\n\tvar rectangles, indexesOfNew;\n\n\tthis.innerDraggables = this.draggables.filter(function(draggable){\n\t\tvar element = draggable.element.parentNode;\n\t\twhile(element){\n\t\t\tif(element === this.element){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telement = element.parentNode;\n\t\t}\n\t\treturn false;\n\t}, this);\n\n\tif(this.innerDraggables.length){\n\t\tindexesOfNew = Dragee.util.range(this.innerDraggables.length);\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), indexesOfNew);\n\t\tthis.setPosition(rectangles, indexesOfNew);\n\t\tthis.innerDraggables.forEach(function(draggable){\n\t\t\tthis.onAdd.fire(draggable);\n\t\t}, this);\n\t}\n};\n\nTarget.prototype.destroy = function(){\n\tDragee.scopes.forEach(function(scope){\n\t\tscope.targets.removeItem(this);\n\t}, this);\n}\n\nTarget.prototype.refresh = function(){\n\tvar rectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\treturn draggable.getRectangle();\n\t}), []);\n\tthis.setPosition(rectangles, [], 0);\n};\n\nTarget.prototype.onEnd = function(draggable){\n\tvar newDraggablesIndex = [],\n\t\trectangles,\n\t\tincludePoint = this.getRectangle().includePoint(draggable.getPosition());\n\n\tif(!includePoint){\n\t\tif(this.getRectangle().includePoint(draggable.getCenter())) {\n\t\t\tdraggable.position = draggable.getCenter().clone();\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tthis.beforeAdd.fire(draggable);\n\n\tthis.innerDraggables = this.options.sorting(this.innerDraggables, [draggable], newDraggablesIndex);\n\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\treturn draggable.getRectangle();\n\t}), newDraggablesIndex, draggable);\n\n\tthis.setPosition(rectangles, newDraggablesIndex);\n\tif(this.innerDraggables.indexOf(draggable) !== -1){\n\t\tthis.addRemoveOnMove(draggable);\n\t}\n\treturn true;\n};\n\nTarget.prototype.setPosition = function(rectangles, indexesOfNew, time){\n\tthis.innerDraggables.slice(0).forEach(function(draggable, i){\n\t\tvar rect = rectangles[i],\n\t\t\ttimeEnd = time || time == 0 ? time : indexesOfNew.indexOf(i) !== -1 ? this.options.timeEnd : this.options.timeExcange;\n\n\t\tif(rect.removable){\n\t\t\tdraggable.move(draggable.initPosition, timeEnd, true, true);\n\t\t\tthis.innerDraggables.removeItem(draggable);\n\n\t\t\tthis.onRemove.fire(draggable);\n\t\t} else {\n\t\t\tdraggable.move(rect.position, timeEnd, true, true);\n\t\t}\n\t}, this);\n};\n\nTarget.prototype.add = function(draggable, time){\n\tvar rectangles, newDraggablesIndex = this.innerDraggables.length;\n\n\tthis.beforeAdd.fire(draggable);\n\n\tthis.pushInnerDraggable(draggable);\n\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\treturn draggable.getRectangle();\n\t}), newDraggablesIndex, draggable);\n\tthis.setPosition(rectangles, [newDraggablesIndex], time || 0);\n\tif(this.innerDraggables.indexOf(draggable) !== -1){\n\t\tthis.addRemoveOnMove(draggable);\n\t}\n};\n\nTarget.prototype.pushInnerDraggable = function(draggable){\n\tif(this.innerDraggables.indexOf(draggable)===-1){\n\t\tthis.innerDraggables.push(draggable);\n\t}\n};\n\nTarget.prototype.addRemoveOnMove = function(draggable){\n\tvar that = this;\n\n\tdraggable.onMove.add(this.removeHandler = function(){\n\t\tthat.remove(draggable)\n\t});\n\n\tthis.onAdd.fire(draggable);\n};\n\nTarget.prototype.remove = function(draggable){\n\tvar index, rectangles;\n\tdraggable.onMove.remove(this.removeHandler);\n\n\tindex = this.innerDraggables.indexOf(draggable);\n\tif(index === -1){\n\t\treturn;\n\t}\n\n\tthis.innerDraggables.splice(index, 1);\n\n\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\treturn draggable.getRectangle();\n\t}), []);\n\n\tthis.setPosition(rectangles, []);\n\tthis.onRemove.fire(draggable);\n};\n\nTarget.prototype.reset = function(){\n\tthis.innerDraggables.forEach(function(draggable){\n\t\tdraggable.move(draggable.initPosition, 0, true, true);\n\t\tthis.onRemove.fire(draggable);\n\t}, this);\n\tthis.innerDraggables = [];\n};\n\nTarget.prototype.getSortedDraggables = function(){\n\tthis.innerDraggables.slice();\n}\n\nexport {targets, Target};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/target.js\n **/","'use strict';\nimport {mathPoint, Point, Rectangle} from './point'\n\nvar\tpositionType = {\n\t\tnotCrossing: 0,\n\t\tfloatLeft: 1,\n\t\tfloatRight: 2\n};\n\nfunction positionFactory(type){\n\tswitch(type){\n\t\tcase positionType.notCrossing:\n\t\t\treturn function(rectangle, options){\n\t\t\t\tvar i, opts = {\n\t\t\t\t\tremovable: true\n\t\t\t\t}\n\t\t\t\tfor(i in options){\n\t\t\t\t\topts[i] = options[i];\n\t\t\t\t}\n\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle, staticRectangleIndexes = rectangleList.reduce(function(indexes, rect, index){\n\t\t\t\t\t\tif(indexesOfNews.indexOf(index) === -1){\n\t\t\t\t\t\t\tindexes.push(index);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn indexes;\n\t\t\t\t\t}, []);\n\t\t\t\t\tindexesOfNews.forEach(function(index){\n\t\t\t\t\t\tvar rect = rectangleList[index], removable = false;\n\t\t\t\t\t\tstaticRectangleIndexes.forEach(function(indexOfStatic){\n\t\t\t\t\t\t\tvar staticRect = rectangleList[indexOfStatic];\n\t\t\t\t\t\t\trect = staticRect.moveToBound(rect);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tremovable = staticRectangleIndexes.some(function(indexOfStatic){\n\t\t\t\t\t\t\tvar staticRect = rectangleList[indexOfStatic];\n\t\t\t\t\t\t\treturn  !!staticRect.and(rect);\n\t\t\t\t\t\t}) || rect.and(boundRect).getSquare() !== rect.getSquare();\n\t\t\t\t\t\tif(removable){\n\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tstaticRectangleIndexes.push(index);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn rectangleList;\n\t\t\t\t}\n\t\t\t};\n\t\tcase positionType.floatLeft:\n\t\t\treturn function(rectangle, options){\n\t\t\t\tvar i, opts = {\n\t\t\t\t\tpaddingTopLeft: new Point(0, 0),\n\t\t\t\t\tpaddingBottomRight: new Point(0, 0),\n\t\t\t\t\tyGapBetweenDraggables: 0,\n\t\t\t\t\tremovable: true\n\t\t\t\t}\n\t\t\t\tfor(i in options){\n\t\t\t\t\topts[i] = options[i];\n\t\t\t\t}\n\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle,\n\t\t\t\t\t\trectP2 = boundRect.getP2(), i, boundaryPoints = [boundRect.position];\n\t\t\t\t\trectangleList.forEach(function(rect, index){\n\t\t\t\t\t\tvar position, isValid = false;\n\t\t\t\t\t\tfor(i = 0; i < boundaryPoints.length; i++){\n\t\t\t\t\t\t\tposition = (new Point(boundaryPoints[i].x, i > 0 ? (boundaryPoints[i - 1].y + opts.yGapBetweenDraggables) : boundRect.position.y)).add(opts.paddingTopLeft);\n\t\t\t\t\t\t\tif(isValid = (position.x + rect.size.x < rectP2.x)){\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!isValid){\n\t\t\t\t\t\t\tposition = (new Point(boundRect.position.x, boundaryPoints[boundaryPoints.length - 1].y + opts.yGapBetweenDraggables)).add(opts.paddingTopLeft);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trect.position = position;\n\t\t\t\t\t\tif(opts.removable && rect.getP3().y > boundRect.getP3().y){\n\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboundaryPoints = mathPoint.addPointToBoundPoints(boundaryPoints, rect.getP3().add(opts.paddingBottomRight));\n\t\t\t\t\t});\n\t\t\t\t\treturn rectangleList;\n\t\t\t\t};\n\t\t\t};\n\t\tcase positionType.floatRight:\n\t\t\treturn function(rectangle, options){\n\t\t\t\tvar paddingTopNegRight, paddingBottomNegLeft, i, opts = {\n\t\t\t\t\tpaddingTopRight: new Point(5, 5),\n\t\t\t\t\tpaddingBottomLeft: new Point(0, 0),\n\t\t\t\t\tremovable: true\n\t\t\t\t}\n\t\t\t\tfor(i in options){\n\t\t\t\t\topts[i] = options[i];\n\t\t\t\t}\n\t\t\t\tpaddingTopNegRight = new Point(-opts.paddingTopRight.x, opts.paddingTopRight.y);\n\t\t\t\tpaddingBottomNegLeft = new Point(-opts.paddingBottomLeft.x, opts.paddingBottomLeft.y);\n\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle, i, boundaryPoints = [boundRect.getRightTopPoint()];\n\t\t\t\t\trectangleList.forEach(function(rect, index){\n\t\t\t\t\t\tvar position, isValid = false;\n\t\t\t\t\t\tfor(i = 0; i < boundaryPoints.length; i++){\n\t\t\t\t\t\t\tposition = (new Point(boundaryPoints[i].x - rect.size.x, i > 0 ? boundaryPoints[i - 1].y : boundRect.position.y)).add(paddingTopNegRight);\n\t\t\t\t\t\t\tif(isValid = (position.x > rect.position.x)){\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!isValid){\n\t\t\t\t\t\t\tposition = new Point(boundRect.getP2().x, boundaryPoints[boundaryPoints.length - 1].y);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trect.position = position;\n\t\t\t\t\t\tif(opts.removable && rect.getLeftBottomPoint().y > boundRect.getP4().y){\n\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tboundaryPoints = mathPoint.addPointToBoundPoints(boundaryPoints, rect.getP4().add(paddingBottomNegLeft), true);\n\t\t\t\t\t});\n\t\t\t\t\treturn rectangleList;\n\t\t\t\t};\n\t\t\t};\n\t}\n};\n\nfunction sortingFactory(type){\n\tswitch(type){\n\t\tcase positionType.notCrossing:\n\t\t\treturn function(){\n\t\t\t\treturn function(oldObjsList, newObjs, indexOfNews){\n\t\t\t\t\tvar objsList = oldObjsList.concat(newObjs);\n\t\t\t\t\tnewObjs.forEach(function(obj){\n\t\t\t\t\t\tindexOfNews.push(objsList.indexOf(obj));\n\t\t\t\t\t});\n\t\t\t\t\treturn objsList;\n\t\t\t\t};\n\t\t\t};\n\t\tcase positionType.floatLeft:\n\t\tcase positionType.floatRight:\n\t\t\treturn function(radius, getDistance, options){\n\t\t\t\tvar i, opts = {\n\t\t\t\t\tgetPosition: function(obj){\n\t\t\t\t\t\treturn obj.position;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(i in options){\n\t\t\t\t\topts[i] = options[i];\n\t\t\t\t}\n\t\t\t\treturn function(oldObjsList, newObjs, indexOfNews){\n\t\t\t\t\tvar newList = oldObjsList.concat(), listOldPosition;\n\t\t\t\t\tlistOldPosition = oldObjsList.map(opts.getPosition);\n\t\t\t\t\tnewObjs.forEach(function(newObj){\n\t\t\t\t\t\tvar index = mathPoint.indexOfNearPoint(listOldPosition, opts.getPosition(newObj), radius, getDistance);\n\t\t\t\t\t\tif(index === -1){\n\t\t\t\t\t\t\tindex = newList.length;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = newList.indexOf(oldObjsList[index]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewList.splice(index, 0, newObj);\n\t\t\t\t\t});\n\t\t\t\t\tnewObjs.forEach(function(newObj){\n\t\t\t\t\t\tindexOfNews.push(newList.indexOf(newObj));\n\t\t\t\t\t});\n\t\t\t\t\treturn newList;\n\t\t\t\t};\n\t\t\t};\n\t}\n};\n\nexport {positionType, sortingFactory, positionFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/positioning.js\n **/","'use strict';\n\nvar lists = [];\n\nimport util from './util'\nimport Event from './event'\nimport {mathPoint, Point} from './point'\nimport {bound} from './bound'\nimport {Draggable, draggables, events} from './draggable'\n\nvar Dragee = { util, bound, Draggable, events, Event };//todo remove after refactore\n\n\nfunction List(draggables, options){\n\tvar i;\n\tthis.options = {\n\t\ttimeEnd: 200,\n\t\ttimeExcange: 400,\n\t\tradius: 30,\n\t\tgetDistance: mathPoint.getDistance,\n\t\tisDisplacement: false\n\t};\n\tfor(i in options){\n\t\tif(options.hasOwnProperty(i)){\n\t\t\tthis.options[i] = options[i];\n\t\t}\n\t}\n\tthis.draggables = draggables;\n\tlists.push(this);\n\tthis.onChange = new Dragee.Event(this);\n\tif(options && options.onChange){\n\t\tthis.onChange.add(options.onChange);\n\t}\n\tthis.init();\n}\n\nList.prototype.init = function(){\n\tthis._enable = true;\n\tthis.draggables.forEach(this.initDraggable, this);\n};\n\nList.prototype.initDraggable = function(draggable){\n\tvar moveHandler, that = this;\n\tdraggable.enable = this._enable;\n\tif(this.options.isDisplacement){\n\t\tmoveHandler = function(){\n\t\t\tif(this.isDragee){\n\t\t\t\tthat.onStart(this);\n\t\t\t\tdraggable.onMove.remove(moveHandler);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t};\n\t\tdraggable.onEnd.add(function(){\n\t\t\tthat.onEndDisplaycement(this);\n\t\t\tdraggable.onMove.add(moveHandler);\n\t\t\treturn true;\n\t\t});\n\t\tdraggable.onMove.add(moveHandler);\n\t}else{\n\t\tdraggable.onEnd.add(function(){\n\t\t\tthat.onEnd(this);\n\t\t\treturn true;\n\t\t});\n\t}\n};\n\nList.prototype.moveOrSave = function(draggable, position, time){\n\tif(draggable.isDragee){\n\t\tdraggable.fixPosition = position;\n\t}else{\n\t\tdraggable.move(position, time, true);\n\t}\n};\n\nList.prototype.onEnd = function(draggable){\n\tvar fixPositions = this.getCurrentFixPosition(), currentIndex, excangeIndex;\n\tcurrentIndex = this.draggables.indexOf(draggable);\n\texcangeIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getDistance);\n\tif(excangeIndex === -1 || excangeIndex === currentIndex){\n\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t}else{\n\t\tthis.moveOrSave(this.draggables[excangeIndex], fixPositions[currentIndex], this.options.timeExcange);\n\t\tthis.draggables[currentIndex].move(fixPositions[excangeIndex], this.options.timeEnd, true);\n\t\tthis.onChange.fire();\n\t}\n\treturn true;\n};\n\nList.prototype.onEndDisplaycement = function(draggable){\n\tvar currentIndex, i, targetIndex,\n\t\tsortedDraggables = this.getSortedDraggables(),\n\t\tfixPositions = sortedDraggables.map(function(draggable){\n\t\t\treturn draggable.fixPosition;\n\t\t});\n\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\ttargetIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getDistance);\n\tif(targetIndex !==-1){\n\t\tif(targetIndex < currentIndex){\n\t\t\tfor(i=targetIndex; i<currentIndex; i++){\n\t\t\t\tthis.moveOrSave(sortedDraggables[i], fixPositions[i+1], this.options.timeExcange);\n\t\t\t}\n\t\t} else {\n\t\t\tfor(i=currentIndex; i<targetIndex; i++){\n\t\t\t\tthis.moveOrSave(sortedDraggables[i+1], fixPositions[i], this.options.timeExcange);\n\t\t\t}\n\t\t}\n\t\tdraggable.move(fixPositions[targetIndex], this.options.timeEnd, true);\n\t} else {\n\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t}\n};\n\nList.prototype.onStart = function(draggable){\n\tvar currentIndex,i,\n\t\tsortedDraggables = this.getSortedDraggables(),\n\t\tfixPositions = sortedDraggables.map(function(draggable){\n\t\t\treturn draggable.fixPosition;\n\t\t});\n\n\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\tfor(i = currentIndex + 1; i < sortedDraggables.length; i++){\n\t\tthis.moveOrSave(sortedDraggables[i],fixPositions[i-1],this.options.timeExcange);\n\t}\n\tsortedDraggables[currentIndex].fixPosition = fixPositions[i-1];\n};\n\n\n\nList.prototype.getCurrentFixPosition = function(){\n\treturn this.draggables.map(function(draggable){\n\t\treturn draggable.fixPosition.clone();\n\t});\n};\n\nList.prototype.getSortedDraggables = function(){\n\tvar sortedDraggables,\n\t\tinitPositions = this.draggables.map(function(draggable){\n\t\t\treturn draggable.initPosition;\n\t\t});\n\tsortedDraggables = initPositions.map(function(position){\n\t\treturn this.draggables.filter(function(draggable){\n\t\t\treturn draggable.fixPosition.compare(position);\n\t\t},this)[0];\n\t},this);\n\treturn sortedDraggables;\n};\n\nList.prototype.reset = function(){\n\tthis.draggables.forEach(function(draggable){\n\t\tdraggable.move(draggable.initPosition, 0, true, false);\n\t});\n};\n\nList.prototype.refresh = function(){\n\tthis.draggables.forEach(function(draggable){\n\t\tdraggable.refresh();\n\t});\n};\n\nList.prototype.add = function(draggables){\n\tif(!(draggables instanceof Array)){\n\t\tdraggables = [draggables];\n\t}\n\tdraggables.forEach(this.initDraggable, this);\n\tthis.draggables = this.draggables.concat(draggables);\n};\n\nList.prototype.remove = function(draggables){\n\tvar j, initPositions = this.draggables.map(function(draggable){\n\t\t\treturn draggable.initPosition;\n\t\t}),\n\t\tlist = [],\n\t\tsortedDraggables = this.getSortedDraggables();\n\tif(!(draggables instanceof Array)){\n\t\tdraggables = [draggables];\n\n\t}\n\tdraggables.forEach(function(draggable){\n\t\tdraggable.onEnd.reset();\n\t\tdraggable.onMove.reset();//todo remove reset in future\n\t\tthis.draggables.removeItem(draggable);\n\t\tDragee.util.remove(this.draggables, draggable);\n\t}, this);\n\tj = 0;\n\tsortedDraggables.forEach(function(draggable, i){\n\t\tif(this.draggables.indexOf(draggable) !== -1){\n\t\t\tif(draggable.fixPosition !== initPositions[j]){\n\t\t\t\tdraggable.move(initPositions[j], this.options.timeExcange, true);\n\t\t\t}\n\t\t\tdraggable.initPosition = initPositions[j];\n\t\t\tj++;\n\t\t\tlist.push(draggable);\n\t\t}\n\t}, this);\n\tthis.draggables = list;\n};\n\nList.prototype.clear = function(){\n\tthis.remove(this.draggables.slice());\n};\n\nList.prototype.destroy = function(){\n\tthis.draggables.forEach(function(draggable){\n\t\tdraggable.destroy();\n\t});\n};\n\nList.prototype.__defineGetter__(\"positions\", function(){\n\treturn this.getCurrentFixPosition();\n});\n\nList.prototype.__defineSetter__(\"positions\", function(positions){\n\tvar message = \"wrong array length\";\n\tif(positions.length === this.draggables.length){\n\t\tpositions.forEach(function(point, i){\n\t\t\tthis.draggables[i].move(point, 0, true, true);\n\t\t}, this);\n\t}else{\n\t\talert(message);\n\t\tthrow message;\n\t}\n});\n\nList.prototype.__defineGetter__(\"enable\", function(){\n\treturn this._enable;\n});\n\nList.prototype.__defineSetter__(\"enable\", function(value){\n\tthis._enable = value;\n\tthis.draggables.forEach(function(draggable){\n\t\tdraggable.enable = value;\n\t});\n});\n\n\nfunction listFactory(parentElement, elements, options){\n\tvar draggables, draggableOptions, listOptions;\n\toptions = options || {};\n\tdraggableOptions = options.draggable || {};\n\tlistOptions = options.list || {};\n\tdraggableOptions.parent = draggableOptions.parent || parentElement;\n\telements = Array.prototype.slice.call(elements);\n\n\tdraggables = elements.map(function(element){\n\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t});\n\n\treturn new List(draggables, listOptions);\n}\n\nexport {lists, List, listFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/list.js\n **/","'use strict';\n\nimport util from './util'\nimport {mathPoint, Point} from './point'\nimport {bound} from './bound'\nimport {Draggable, draggables, events} from './draggable'\n\nvar Dragee = {util, bound, Draggable};\nvar spiders = [];\n\nfunction Spider(area, elements, options){\n\tvar i, areaRectangle = mathPoint.createRectangleFromElement(area, area);\n\tthis.options = {\n\t\tangle: 0,\n\t\tdAngle: 2 * Math.PI / elements.length,\n\t\tcenter: areaRectangle.getCenter(),\n\t\tstartRadius: 50,\n\t\tendRadius: areaRectangle.getMinSide() / 2,\n\t\tlineWidth: 2,\n\t\tstrokeStyle: \"#ff5577\",\n\t\tfillStyle: \"rgba(150,255,50,0.8)\"\n\t};\n\n\tfor(i in options){\n\t\tif(options.hasOwnProperty(i)){\n\t\t\tthis.options[i] = options[i];\n\t\t}\n\t}\n\tspiders.push(this);\n\tthis.area = area;\n\tthis.areaRectangle = areaRectangle;\n\tthis.init(elements);\n}\n\nSpider.prototype.init = function(elements){\n\tvar that = this;\n\tthis.canvas = Dragee.util.createCanvas(this.area, this.areaRectangle);\n\tthis.context = this.canvas.getContext(\"2d\");\n\n\tthis.draggables = elements.map(function (element, i){\n\t\tvar angle = this.options.angle + i * this.options.dAngle,\n\t\t\thalfSize = mathPoint.getSizeOfElement(element).mult(0.5),\n\t\t\tstart = mathPoint.getPointFromRadialSystem(angle, this.options.startRadius, this.options.center).sub(halfSize),\n\t\t\tend = mathPoint.getPointFromRadialSystem(angle, this.options.endRadius, this.options.center).sub(halfSize),\n\t\t\tbound = Dragee.bound.toLine(start, end);\n\n\t\treturn new Dragee.Draggable(element, {\n\t\t\tparent: this.area,\n\t\t\tbound: bound,\n\t\t\tposition: start,\n\t\t\tonMove:function (){\n\t\t\t\tthat.draw();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t}, this);\n\n\tthis.isInit = true;\n\tthis.draw();\n}\n\nSpider.prototype.draw = function (){\n\tvar point, i;\n\tif(!this.isInit){\n\t\treturn;\n\t}\n\tthis.context.clearRect(0, 0, this.areaRectangle.size.x, this.areaRectangle.size.y);\n\tthis.context.beginPath();\n\tpoint = this.draggables[0].getCenter();\n\tthis.context.moveTo(point.x, point.y);\n\tfor(i = 0; i < this.draggables.length; i++){\n\t\tpoint = this.draggables[i].getCenter();\n\t\tthis.context.lineTo(point.x, point.y);\n\t}\n\tthis.context.closePath();\n\tthis.context.lineWidth = this.options.lineWidth;\n\tthis.context.strokeStyle = this.options.strokeStyle;\n\tthis.context.stroke();\n\tthis.context.fillStyle = this.options.fillStyle;\n\tthis.context.fill();\n}\n\n\nexport {spiders, Spider}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/spider.js\n **/","'use strict';\n\nimport util from './util'\nimport {mathPoint} from './point'\nimport {Draggable, draggables, events} from './draggable'\nimport {bound} from './bound'\n\nvar Dragee = { util, Draggable, bound };//todo remove after refactore\n\nvar arcSliders = [];\n\nfunction ArcSlider(area, element, options){\n\tvar i, areaRectangle = mathPoint.createRectangleFromElement(area, area),\n\t\thalfSize = mathPoint.getSizeOfElement(element).mult(0.5);\n\tthis.options = {\n\t\tcenter: areaRectangle.getCenter(),\n\t\tradius: areaRectangle.getMinSide() / 2,\n\t\tstartAngle: Math.PI,\n\t\tendAngle: 0,\n\t\tangles: [Math.PI,-Math.PI/4,0,Math.PI/4,Math.PI/2],\n\t\tonChange:function(){},\n\t\ttime: 500\n\t};\n\tfor(i in options){\n\t\tif(options.hasOwnProperty(i)){\n\t\t\tthis.options[i] = options[i];\n\t\t}\n\t}\n\tthis.shiftedCenter = this.options.center.sub(halfSize);\n\tthis.onChange = this.options.onChange;\n\tarcSliders.push(this);\n\tthis.area = area;\n\tthis.init(element);\n}\n\nArcSlider.prototype.init = function (element){\n\tvar that = this,\n\t\tangle = this.options.startAngle,\n\t\tposition = mathPoint.getPointFromRadialSystem(\n\t\t\tangle,\n\t\t\tthis.options.radius,\n\t\t\tthis.shiftedCenter\n\t\t),\n\t\tbound = Dragee.bound.toArc(\n\t\t\tthat.shiftedCenter,\n\t\t\tthat.options.radius,\n\t\t\tthis.options.startAngle,\n\t\t\tthis.options.endAngle\n\t\t);\n\n\tthis.angle = angle;\n\tthis.draggable = new Dragee.Draggable(element, {\n\t\tparent: this.area,\n\t\tbound: bound,\n\t\tposition: position,\n\t\tonMove: function (){\n\t\t\tthat.change();\n\t\t\treturn true;\n\t\t}\n\t});\n};\n\nArcSlider.prototype.updateAngle = function (){\n\tthis.angle = mathPoint.getAngle(this.shiftedCenter, this.draggable.position);\n};\n\nArcSlider.prototype.change = function (){\n\tthis.updateAngle();\n//\t\tvar angle = mathPoint.getNearestAngle(this.options.angles, this.angle);\n//\t\tthis.setAngle(angle,this.options.time);\n\tthis.onChange(this.angle);\n};\n\nArcSlider.prototype.setAngle = function(angle, time){\n\tthis.angle = mathPoint.normalizeAngle(angle, position);\n\tvar position = mathPoint.getPointFromRadialSystem(\n\t\tthis.angle,\n\t\tthis.options.radius,\n\t\tthis.shiftedCenter\n\t);\n\tthis.draggable.move(position, time||0, true, true);\n\tthis.onChange(this.angle);\n};\n\nexport {arcSliders, ArcSlider};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/arcslider.js\n **/","'use strict';\n\nimport util from './util'\nimport {mathPoint, Point} from './point'\nimport {Draggable, draggables, events} from './draggable'\nimport {bound} from './bound'\n\nvar Dragee = { util, bound, Draggable };//todo remove after refactore\n\nvar isTouch = 'ontouchstart' in window;\nvar charts = [];\n\nfunction getArrayWithBoundIndexes(index,length){\n    var retIndexes = [];\n    if(index != -1){\n        retIndexes.push(index);\n        retIndexes.push((index + 1) % length);\n    }\n    return retIndexes;\n}\n\n\nfunction Chart(area, elements, options){\n    var i, areaRectangle = mathPoint.createRectangleFromElement(area, area);\n    this.options = {\n        center: areaRectangle.getCenter(),\n        radius: areaRectangle.getMinSide() / 2,\n        touchRadius: areaRectangle.getMinSide() / 2,\n        boundAngle: Math.PI/9,\n        fillStyles: Dragee.util.range(0, elements.length).map(function(){\n            return Dragee.util.randomColor();\n        }),\n        initAngles: Dragee.util.range(-90, 270, 360 / elements.length).map(function(angle){\n            return mathPoint.toRadian(angle);\n        }),\n        onDraw:function(){},\n        limitImg: null,\n        limitImgOffset: new Point(0,0),\n        isSelectable: false\n    };\n    for(i in options){\n        if(options.hasOwnProperty(i)){\n            this.options[i] = options[i];\n        }\n    }\n\n    charts.push(this);\n    this.onDraw = this.options.onDraw;\n    this.area = area;\n    this.areaRectangle = areaRectangle;\n    this.init(elements);\n}\n\nChart.prototype.init = function (elements){\n    var that = this;\n    this.canvas = Dragee.util.createCanvas(this.area, this.areaRectangle);\n    this.context = this.canvas.getContext(\"2d\");\n    this.draggables = elements.map(function (element, i){\n        var angle = this.options.initAngles[i],\n            halfSize = mathPoint.getSizeOfElement(element).mult(0.5),\n            position = mathPoint.getPointFromRadialSystem(\n                angle,\n                this.options.touchRadius,\n                this.options.center.sub(halfSize)\n            ),\n            bound = Dragee.bound.toArc(\n                that.options.center.sub(halfSize),\n                that.options.touchRadius,\n                that.getBoundAngle(i, false),\n                that.getBoundAngle(i, true)\n            );\n\n        return new Dragee.Draggable(element, {\n            parent:this.area,\n            bound:bound,\n            position:position,\n            onMove:function (){\n                that.draw();\n                return true;\n            }\n        });\n    }, this);\n\n    this.isInit = true;\n    if(this.options.isSelectable){\n        this.initSelect();\n    }\n    this.draw();\n};\n\nChart.prototype.initSelect = function (){\n    var that = this;\n    this.setActiveArc(-1);\n\n    this.canvas.addEventListener(events.start, function(e){\n        var point = new Point(\n                isTouch ? e.changedTouches[0].pageX : e.clientX,\n                isTouch ? e.changedTouches[0].pageY : e.clientY\n            ), index;\n\n        if(!that.canvasOffset){\n            that.canvasOffset = mathPoint.getOffset(that.canvas);\n        }\n\n        point = point.sub(that.canvasOffset);\n        index = that.getArcOnPoint(point);\n        if(index!=-1){\n            that.setActiveArc((that.activeArcIndex !== index)?index:-1);\n        }\n    });\n};\n\nChart.prototype.updateAngles = function (){\n    this.angles = this.draggables.map(function(draggable){\n        var halfSize = draggable.getSize().mult(0.5);\n        return mathPoint.getAngle(this.options.center.sub(halfSize), draggable.position);\n    },this);\n};\n\nChart.prototype.getBoundAngle = function(index, isClossing){\n    var that = this, sign = isClossing?1:-1;\n\n    return function(){\n        var i = (index + sign) % that.angles.length;\n        if(i < 0){\n            i += that.angles.length;\n        }\n        return mathPoint.normalizeAngle(that.angles[i] - sign * that.options.boundAngle);\n    };\n};\n\nChart.prototype.draw = function (){\n    if(!this.isInit){\n        return;\n    }\n\n    this.updateAngles();\n    this.context.clearRect(0, 0, this.areaRectangle.size.x, this.areaRectangle.size.y);\n    this.draggables.forEach(function(draggable, index){\n        this.drawArc(this.context, this.options.center, this.options.radius, index);\n    }, this);\n\n    this.draggables.forEach(function(draggable, index){\n        var enableIndexes;\n        if(this.options.isSelectable){\n            enableIndexes = getArrayWithBoundIndexes(this.activeArcIndex, this.draggables.length);\n            if(enableIndexes.indexOf(index) !== -1){\n                this.drawLimitImg(index);\n            }\n        } else {\n            this.drawLimitImg(index);\n        }\n    }, this);\n    this.onDraw();\n};\n\nChart.prototype.createClone = function(element, options){\n    var i, canvas, context, opts, rectangle, cloneObj, that = this;\n    if(!this.isInit){\n        return;\n    }\n    rectangle = mathPoint.createRectangleFromElement(element, element);\n    opts = {\n        center: rectangle.getCenter(),\n        radius: rectangle.getMinSide() / 2,\n        fillStyles: this.options.fillStyles\n    };\n    for(i in options){\n        if(options.hasOwnProperty(i)){\n            opts[i] = options[i];\n        }\n    }\n    canvas = Dragee.util.createCanvas(element, rectangle);\n    context = canvas.getContext(\"2d\");\n    cloneObj = {\n        draw: function(){\n            context.clearRect(0, 0, rectangle.size.x, rectangle.size.y);\n            that.draggables.forEach(function(draggable, index){\n                that.drawArc(context, opts.center, opts.radius, index);\n            });\n        }\n    };\n    cloneObj.draw();\n    return cloneObj;\n};\n\nChart.prototype.getFillStyle = function(index){\n    if(typeof this.options.fillStyles[index] === \"function\"){\n        this.options.fillStyles[index] = this.options.fillStyles[index].call(this);\n    }\n    return this.options.fillStyles[index];\n};\n\nChart.prototype.drawArc = function(context,center,radius,index){\n    var startAngle = this.angles[index],\n        endAngle = this.angles[(index+1)%this.angles.length],\n        color = this.getFillStyle(index);\n\n    context.beginPath();\n    context.moveTo(center.x, center.y);\n    context.arc(center.x, center.y, radius, startAngle, endAngle, false);\n    context.lineTo(center.x, center.y);\n    context.closePath();\n    context.fillStyle = color;\n    context.fill();\n};\n\nChart.prototype.drawLimitImg = function(index){\n    var angle, point, img;\n    if(this.options.limitImg){\n        img = this.options.limitImg instanceof Array ? this.options.limitImg[index] : this.options.limitImg;\n    }\n    if(!img){\n        return ;\n    }\n    angle = mathPoint.normalizeAngle(this.angles[index]);\n    point = new Point(0, -img.height/2);\n    point = point.add(this.options.limitImgOffset);\n    this.context.translate(this.areaRectangle.size.x / 2, this.areaRectangle.size.y / 2);\n    this.context.rotate(angle);\n    this.context.drawImage(img, point.x, point.y);\n    this.context.setTransform(1, 0, 0, 1, 0, 0);\n};\n\nChart.prototype.getAnglesDiff = function(){\n    var baseAngle = this.angles[0],\n        angles = this.angles.slice(1);\n\n    angles.push(baseAngle);\n    return angles.map(function(angle){\n        var diffAngle = mathPoint.normalizeAngle(angle - baseAngle);\n        baseAngle = angle;\n        return diffAngle;\n    });\n};\n\nChart.prototype.getPercent = function(){\n    return this.getAnglesDiff().map(function(diffAngle){\n        return diffAngle / (2 * Math.PI);\n    });\n};\n\nChart.prototype.getArcBisectrixs = function(){\n    return this.getAnglesDiff().map(function(diffAngle,i){\n        return mathPoint.normalizeAngle(this.angles[i] + diffAngle/2);\n    },this);\n};\n\nChart.prototype.getArcOnPoint = function(point){\n    var angle = mathPoint.getAngle(this.options.center, point), i, offset, j,\n        radius = mathPoint.getDistance(this.options.center, point);\n    if(radius > this.options.radius ){\n        return -1;\n    }\n    offset = -1;\n    for(i = 0; i < this.angles.length; i++){\n        if(offset === -1 || this.angles[offset] > this.angles[i]){\n            offset = i;\n        }\n    }\n    for(i = 0,j = offset; i < this.angles.length; i++,j = (i + offset) % this.angles.length){\n        if(angle < this.angles[j]){\n            break;\n        }\n    }\n    if(--j < 0){\n        j += this.angles.length;\n    }\n    return j;\n};\n\nChart.prototype.setAngles = function(angles){\n    this.angles = angles;\n    this.draggables.forEach(function (draggable, i){\n        var angle = this.angles[i],\n            halfSize = draggable.getSize().mult(0.5),\n            position = mathPoint.getPointFromRadialSystem(\n                angle,\n                this.options.touchRadius,\n                this.options.center.sub(halfSize)\n            );\n\n        draggable.move(position, 0, true, true);\n    }, this);\n    this.draw();\n};\n\nChart.prototype.setActiveArc = function(index){\n    var enableIndexes = getArrayWithBoundIndexes(index, this.draggables.length);\n    this.activeArcIndex = index;\n    this.draggables.forEach(function(draggable, i){\n        draggable.enable = enableIndexes.indexOf(i) !== -1;\n    });\n    this.draw();\n};\n\n\nexport {charts, Chart}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/chart.js\n **/","'use strict';\n\n\nimport {mathPoint, Point} from './point'\nimport {Draggable} from './draggable'\nimport {List} from './list'\n\nvar Dragee = { List, Draggable };//todo remove after refactore\n\nvar extend = function(Child, Parent) {\n    var F = function() { }\n    F.prototype = Parent.prototype;\n    Child.prototype = new F();\n    Child.prototype.constructor = Child;\n    Child.superclass = Parent.prototype;\n};//todo remove after refacore\n\nfunction ListSwitcher(draggables, options){\n  options = options || {};\n  options.stepOn = options.stepOn || new Point(-50, 0);\n  Dragee.List.call(this, draggables, options);\n}\n\nextend(ListSwitcher, Dragee.List);\n\nListSwitcher.prototype.init = function(){\n  var that = this;\n  this.draggables.forEach(function(draggable){\n    draggable.isOn = false;\n    draggable.onEnd.add(function(){\n      that.onEnd(this);\n      return true;\n    });\n  });\n};\n\nListSwitcher.prototype.onEnd = function(draggable){\n  var fixPositions = this.getCurrentFixPositionWithOff(), currentIndex, excangeIndex;\n  currentIndex = this.draggables.indexOf(draggable);\n  excangeIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getDistance);\n  if(excangeIndex === -1 || excangeIndex === currentIndex){\n    this.moveDraggable(currentIndex, draggable.position, fixPositions[currentIndex], this.options.timeEnd);\n  } else {\n    if(this.draggables[excangeIndex].isDragee){\n      this.fixToOff(excangeIndex, fixPositions[currentIndex]);\n    } else {\n      this.moveDraggableToOff(excangeIndex, fixPositions[currentIndex], this.options.timeExcange);\n    }\n    this.moveDraggable(currentIndex, draggable.position, fixPositions[excangeIndex], this.options.timeEnd);\n    this.onChange.fire();\n  }\n  return true;\n};\n\nListSwitcher.prototype.moveDraggable = function(index, position, fixOffPosition, time){\n  var positions = [fixOffPosition, fixOffPosition.add(this.options.stepOn)], isOn = mathPoint.indexOfNearPoint(positions, position, -1, mathPoint.getXDifference);\n  if(this.draggables[index].isOn !== !!isOn){\n    this.draggables[index].isOn = !!isOn;\n    this.onChange.fire();\n  }\n  this.draggables[index].move(positions[isOn], time, true);\n};\n\nListSwitcher.prototype.fixToOff = function(index, fixOffPosition){\n  this.draggables[index].isOn = false;\n  this.draggables[index].fixPosition = fixOffPosition;\n};\n\nListSwitcher.prototype.moveDraggableToOff = function(index, fixOffPosition, time){\n  this.draggables[index].isOn = false;\n  this.draggables[index].move(fixOffPosition, time, true);\n};\n\nListSwitcher.prototype.getCurrentFixPositionWithOff = function(){\n  return this.draggables.map(function(draggable){\n    return draggable.isOn ? draggable.fixPosition.sub(this.options.stepOn) : draggable.fixPosition.clone();\n  }, this);\n};\n\nListSwitcher.prototype.getSortedDraggables = function(){\n  return this.draggables.map(\n      function(draggable){\n        return draggable.initPosition;\n      }).map(function(position){\n        return this.draggables.filter(function(draggable){\n          return draggable.fixPosition.compare(position) || draggable.fixPosition.compare(position.add(this.options.stepOn));\n        }, this)[0];\n      }, this);\n};\n\nListSwitcher.prototype.reset = function(){\n  this.draggables.forEach(function(draggable){\n    draggable.move(draggable.initPosition, 0, true, false);\n    draggable.isOn = false;\n  });\n};\n\nListSwitcher.prototype.__defineGetter__(\"positions\", function(){\n  return this.draggables.map(function(draggable){\n    var position = draggable.fixPosition.clone();\n    position.isOn = draggable.isOn;\n    return position;\n  });\n});\n\nListSwitcher.prototype.__defineSetter__(\"positions\", function(positions){\n  var message = \"wrong array length\";\n  if(positions.length === this.draggables.length){\n    positions.forEach(function(point, i){\n      this.draggables[i].isOn = point.isOn;\n      this.draggables[i].move(point, 0, true, true);\n    }, this);\n  } else {\n    alert(message);\n    throw message;\n  }\n});\n\n\nfunction listSwitcherFactory(element, draggableElements, options){\n  var draggables, draggableOptions, listOptions;\n  options = options || {};\n  draggableOptions = options.draggable || {};\n  listOptions = options.list || {};\n  draggableOptions.parent = draggableOptions.parent || element;\n  draggableElements = Array.prototype.slice.call(draggableElements);\n\n  draggables = draggableElements.map(function(element){\n    return new Dragee.Draggable(element, draggableOptions);\n  });\n  return new ListSwitcher(draggables, listOptions);\n}\n\nexport {listSwitcherFactory, ListSwitcher}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/listswitcher.js\n **/"],"sourceRoot":""}