{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///dragee.min.js","webpack:///webpack/bootstrap c09e3d7420b59e24c6a7","webpack:///./src/index.js","webpack:///./src/expandnative.js","webpack:///./src/point.js","webpack:///./src/util.js","webpack:///./src/draggable.js","webpack:///./src/bound.js","webpack:///./src/list.js","webpack:///./src/target.js","webpack:///./src/positioning.js","webpack:///./src/targetManager.js","webpack:///./src/spider.js","webpack:///./src/arcslider.js","webpack:///./src/chart.js","webpack:///./src/listswitcher.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","global","Object","defineProperty","value","ListSwitcher","listSwitcherFactory","Chart","charts","ArcSlider","arcSliders","Spider","spiders","boundFactory","boundType","positionFactory","sortingFactory","positionType","targetManagerFactory","TargetManager","targetManagers","Target","targets","listFactory","List","Draggable","undefined","_point","_draggable","_list","_target","_targetManager","_positioning","_bound","_spider","_arcslider","_chart","_listswitcher","Point","Array","prototype","forEach","fun","TypeError","t","len","length","thisp","arguments","i","filter","res","val","push","every","map","some","removeItem","splice","Element","hasClass","re","RegExp","test","className","addClass","replace","removeClass","HTMLElement","appbeginChild","node","firstChild","insertBefore","appendChild","exchange","refNode","tempParentNode","parentNode","tempBeforeNode","nextElementSibling","augment","receivingClass","givingClass","methodName","NodeList","Math","getNearIndex","arr","delta","abs","index","temp","getNearIndexWithCaptureRadius","radius","bound","min","max","boundPoint","x","y","getLength","p1","p2","dx","dy","sqrt","toRadian","angle","PI","String","substrend","substr","window","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","setTimeout","__defineGetter__","get","enumerable","configurable","name","func","set","defPropException","_interopRequireDefault","obj","__esModule","default","Rectangle","position","size","mathPoint","_util","_util2","Dragee","util","toString","add","sub","mult","k","negative","compare","clone","getP1","getP2","getP3","getP4","getCenter","or","rect","and","includePoint","includeRectangle","rectangle","moveToBound","axis","selAxis","crossRectangle","thisCenter","rectCenter","sign","offset","getSquare","styleApply","el","document","querySelector","style","left","top","width","height","growth","getMinSide","options","isTransformationSpace","pow","indexOfNearPoint","directCrossing","L1P1","L1P2","L2P1","L2P2","k1","k2","b1","b2","boundOnSegment","LP1","LP2","P","boundOnLine","A","B","AP","AB","ab2","ap_ab","getPointInLine","percent","getPointInLineByLenght","lenght","createRectangleFromElement","parent","isContentBoxSize","isConsiderTranslate","getSizeOfElement","getOffset","parseInt","getComputedStyle","getSumValueOfStyleRule","elRect","getBoundingClientRect","parentRect","getPointFromRadialSystem","center","cos","sin","addPointToBoundPoints","boundpoints","point","isRight","result","bPoint","getAngle","diff","normalizeAngle","atan2","toDegree","boundAngle","dmin","dmax","getAngleDiff","getNearestAngle","alpha","beta","minAngle","maxAngle","distance","P1","P2","xs","ys","getDefaultParent","bind","context","apply","getTouchByID","touchId","changedTouches","identifier","rules","reduce","sum","rule","appendFirstChild","range","start","stop","step","setStyle","key","cssText","hasOwnProperty","triggerFactory","opts","funcs","isReverse","isStopOnTrue","fire","retValue","args","slice","fs","reverse","f","unshift","remove","indexOf","reset","randomColor","rnd","round","random","toHexString","digit","str","red","green","blue","createCanvas","area","rectagle","canvas","createElement","setAttribute","that","startFilter","onEnd","onMove","onStart","move","onCreateDraggable","init","events","draggables","isTouch","mouseEvents","end","touchEvents","draggable","message","existing","transformProperty","getStyleProperty","transitionProperty","_enable","fixPosition","initPosition","_dragStart","dragStart","_delayedDragStart","delayedDragStart","_dragMove","dragMove","_dragEnd","dragEnd","delayedStart","addEventListener","refresh","reinit","getSize","recalulate","getPosition","_transformPosition","_setTranslate","transform","translateCss","ua","navigator","userAgent","msie","time","isFix","isSilent","determineDirection","refreshPosition","setPosition","setZeroTransition","leftDirection","rightDirection","upDirection","downDirection","delayedEvent","checkMovement","event","isTouchEvent","TouchEvent","touchPoint","pageX","clientX","pageY","clientY","startTouchPoint","removeEventListener","BlockSelection","startDragSelection","removeCheckMovement","shiftKey","currentEvent","_startTouchPoint","_startPosition","_touchId","stopPropagation","target","HTMLInputElement","focus","preventDefault","isDragee","touch","getRectangle","destroy","__defineSetter__","enable","type","retFunc","calcPoint","rectP2","lineX","startY","endY","lineY","startX","endX","line","someK","cosBeta","sinBeta","point2","pointCrossing","newEnd","circle","boundedPoint","arc","startAgle","endAngle","boundStartAngle","boundEndtAngle","unificationOfRectangle","timeEnd","timeExcange","isDisplacement","lists","onChange","parentElement","elements","draggableOptions","listOptions","list","initDraggable","moveHandler","onEndDisplaycement","moveOrSave","currentIndex","excangeIndex","fixPositions","getCurrentFixPosition","targetIndex","sortedDraggables","getSortedDraggables","initPositions","concat","j","clear","positions","alert","sorting","floatLeft","positioning","removable","onAdd","beforeAdd","onRemove","catchDraggable","targetRectangle","draggableSquare","rectangles","indexesOfNew","innerDraggables","targetManager","newDraggablesIndex","addRemoveOnMove","pushInnerDraggable","removeHandler","notCrossing","rectangleList","indexesOfNews","boundRect","staticRectangleIndexes","indexes","indexOfStatic","staticRect","paddingTopLeft","paddingBottomRight","yGapBetweenDraggables","boundaryPoints","isValid","floatRight","paddingTopNegRight","paddingBottomNegLeft","paddingTopRight","paddingBottomLeft","getRightTopPoint","getLeftBottomPoint","oldObjsList","newObjs","indexOfNews","objsList","listOldPosition","newList","newObj","timeWaitForRefresh","draggableElements","targetElements","targetOptions","managerOptions","manager","addDraggable","shotTargets","sort","a","b","targetIndexes","areaRectangle","dAngle","startRadius","endRadius","lineWidth","strokeStyle","fillStyle","getContext","halfSize","draw","isInit","clearRect","beginPath","moveTo","lineTo","closePath","stroke","fill","startAngle","angles","shiftedCenter","change","updateAngle","setAngle","getArrayWithBoundIndexes","retIndexes","touchRadius","fillStyles","initAngles","onDraw","limitImg","limitImgOffset","isSelectable","getBoundAngle","initSelect","setActiveArc","e","canvasOffset","getArcOnPoint","activeArcIndex","updateAngles","isClossing","drawArc","enableIndexes","drawLimitImg","createClone","cloneObj","getFillStyle","color","img","translate","rotate","drawImage","setTransform","getAnglesDiff","baseAngle","diffAngle","getPercent","getArcBisectrixs","setAngles","stepOn","extend","isOn","getCurrentFixPositionWithOff","moveDraggable","fixToOff","moveDraggableToOff","fixOffPosition"],"mappings":"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","file":"dragee.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Dragee\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dragee\"] = factory();\n\telse\n\t\troot[\"Dragee\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Dragee\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dragee\"] = factory();\n\telse\n\t\troot[\"Dragee\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.ListSwitcher = exports.listSwitcherFactory = exports.Chart = exports.charts = exports.ArcSlider = exports.arcSliders = exports.Spider = exports.spiders = exports.boundFactory = exports.boundType = exports.positionFactory = exports.sortingFactory = exports.positionType = exports.targetManagerFactory = exports.TargetManager = exports.targetManagers = exports.Target = exports.targets = exports.listFactory = exports.List = exports.Draggable = undefined;\n\t\n\t__webpack_require__(1);\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar _draggable = __webpack_require__(4);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tvar _target = __webpack_require__(7);\n\t\n\tvar _targetManager = __webpack_require__(9);\n\t\n\tvar _positioning = __webpack_require__(8);\n\t\n\tvar _bound = __webpack_require__(5);\n\t\n\tvar _spider = __webpack_require__(10);\n\t\n\tvar _arcslider = __webpack_require__(11);\n\t\n\tvar _chart = __webpack_require__(12);\n\t\n\tvar _listswitcher = __webpack_require__(13);\n\t\n\tglobal.Point = _point.Point;\n\t\n\texports.Draggable = _draggable.Draggable;\n\texports.List = _list.List;\n\texports.listFactory = _list.listFactory;\n\texports.targets = _target.targets;\n\texports.Target = _target.Target;\n\texports.targetManagers = _targetManager.targetManagers;\n\texports.TargetManager = _targetManager.TargetManager;\n\texports.targetManagerFactory = _targetManager.targetManagerFactory;\n\texports.positionType = _positioning.positionType;\n\texports.sortingFactory = _positioning.sortingFactory;\n\texports.positionFactory = _positioning.positionFactory;\n\texports.boundType = _bound.boundType;\n\texports.boundFactory = _bound.boundFactory;\n\texports.spiders = _spider.spiders;\n\texports.Spider = _spider.Spider;\n\texports.arcSliders = _arcslider.arcSliders;\n\texports.ArcSlider = _arcslider.ArcSlider;\n\texports.charts = _chart.charts;\n\texports.Chart = _chart.Chart;\n\texports.listSwitcherFactory = _listswitcher.listSwitcherFactory;\n\texports.ListSwitcher = _listswitcher.ListSwitcher;\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar clone = function clone(o) {\n\t    function c(o) {\n\t        for (var i in o) {\n\t            this[i] = o[i];\n\t        }\n\t    }\n\t    return new c(o);\n\t};\n\t\n\t/************ Array **************/\n\t\n\tif (!Array.prototype.forEach) {\n\t    Array.prototype.forEach = function (fun /*, thisp */) {\n\t        if (this === void 0 || this === null) throw new TypeError();\n\t        var t = Object(this);\n\t        var len = t.length >>> 0;\n\t        if (typeof fun !== \"function\") throw new TypeError();\n\t        var thisp = arguments[1];\n\t        for (var i = 0; i < len; i++) {\n\t            if (i in t) fun.call(thisp, t[i], i, t);\n\t        }\n\t    };\n\t}\n\t\n\tif (!Array.prototype.filter) {\n\t    Array.prototype.filter = function (fun /*, thisp */) {\n\t        if (this === void 0 || this === null) throw new TypeError();\n\t        var t = Object(this);\n\t        var len = t.length >>> 0;\n\t        if (typeof fun !== \"function\") throw new TypeError();\n\t        var res = [];\n\t        var thisp = arguments[1];\n\t        for (var i = 0; i < len; i++) {\n\t            if (i in t) {\n\t                var val = t[i]; // in case fun mutates this\n\t                if (fun.call(thisp, val, i, t)) res.push(val);\n\t            }\n\t        }\n\t        return res;\n\t    };\n\t}\n\t\n\tif (!Array.prototype.every) {\n\t    Array.prototype.every = function (fun /*, thisp */) {\n\t        if (this === void 0 || this === null) throw new TypeError();\n\t        var t = Object(this);\n\t        var len = t.length >>> 0;\n\t        if (typeof fun !== \"function\") throw new TypeError();\n\t        var thisp = arguments[1];\n\t        for (var i = 0; i < len; i++) {\n\t            if (i in t && !fun.call(thisp, t[i], i, t)) return false;\n\t        }\n\t        return true;\n\t    };\n\t}\n\t\n\tif (!Array.prototype.map) {\n\t    Array.prototype.map = function (fun /*, thisp */) {\n\t        if (this === void 0 || this === null) throw new TypeError();\n\t        var t = Object(this);\n\t        var len = t.length >>> 0;\n\t        if (typeof fun !== \"function\") throw new TypeError();\n\t        var res = new Array(len);\n\t        var thisp = arguments[1];\n\t        for (var i = 0; i < len; i++) {\n\t            if (i in t) res[i] = fun.call(thisp, t[i], i, t);\n\t        }\n\t        return res;\n\t    };\n\t}\n\t\n\tif (!Array.prototype.some) {\n\t    Array.prototype.some = function (fun /*, thisp */) {\n\t        if (this === void 0 || this === null) throw new TypeError();\n\t        var t = Object(this);\n\t        var len = t.length >>> 0;\n\t        if (typeof fun !== \"function\") throw new TypeError();\n\t        var thisp = arguments[1];\n\t        for (var i = 0; i < len; i++) {\n\t            if (i in t && fun.call(thisp, t[i], i, t)) return true;\n\t        }\n\t        return false;\n\t    };\n\t}\n\t\n\tif (!Array.prototype.removeItem) {\n\t    Array.prototype.removeItem = function (val) {\n\t        for (var i = 0; i < this.length; i++) {\n\t            if (this[i] === val) {\n\t                this.splice(i, 1);\n\t                i--;\n\t            }\n\t        }\n\t        return this;\n\t    };\n\t}\n\t\n\t/*********** HTMLElement ***************/\n\tElement.prototype.hasClass = function (c) {\n\t    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\");\n\t    return re.test(this.className);\n\t};\n\t\n\tElement.prototype.addClass = function (c) {\n\t    if (this.hasClass(c)) return this;\n\t    this.className = (this.className + \" \" + c).replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n\t    return this;\n\t};\n\t\n\tElement.prototype.removeClass = function (c) {\n\t    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\");\n\t    this.className = this.className.replace(re, \"$1\").replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n\t    return this;\n\t};\n\t\n\tHTMLElement.prototype.appbeginChild = function (node) {\n\t    this.firstChild ? this.insertBefore(node, this.firstChild) : this.appendChild(node);\n\t};\n\t\n\tHTMLElement.prototype.exchange = function (refNode) {\n\t    var tempParentNode = refNode.parentNode;\n\t    var tempBeforeNode = refNode.nextElementSibling;\n\t    this.parentNode.insertBefore(refNode, this);\n\t    if (tempBeforeNode) tempParentNode.insertBefore(this, tempBeforeNode);else tempParentNode.appendChild(this);\n\t\n\t    return refNode;\n\t};\n\t\n\tvar fullOffset = function fullOffset(element, axis, parent_id) {\n\t    var tor = 0;\n\t    while (element && element.id != parent_id) {\n\t        //&& (element!=\"\")\n\t        if (axis == \"x\") {\n\t            if (element.offsetLeft) tor += element.offsetLeft;\n\t        }\n\t        if (axis == \"y\") {\n\t            if (element.offsetTop) tor += element.offsetTop;\n\t        }\n\t        element = element.parentNode;\n\t    }\n\t    return tor;\n\t};\n\t\n\t/*********************** 00P *************************/\n\tvar extend = function extend(Child, Parent) {\n\t    var F = function F() {};\n\t    F.prototype = Parent.prototype;\n\t    Child.prototype = new F();\n\t    Child.prototype.constructor = Child;\n\t    Child.superclass = Parent.prototype;\n\t};\n\t\n\tvar augment = function augment(receivingClass, givingClass) {\n\t    /* only provide certain methods */\n\t    if (arguments[2]) {\n\t        for (var i = 2, len = arguments.length; i < len; i++) {\n\t            receivingClass.prototype[arguments[i]] = givingClass.prototype[arguments[i]];\n\t        }\n\t    }\n\t    /* provide all methods*/\n\t    else {\n\t            for (methodName in givingClass.prototype) {\n\t                /* check to make sure the receiving class doesn't\n\t                   have a method of the same name as the one currently\n\t                   being processed */\n\t                if (!receivingClass.prototype[methodName]) {\n\t                    receivingClass.prototype[methodName] = givingClass.prototype[methodName];\n\t                }\n\t            }\n\t        }\n\t};\n\t/**************************************************/\n\taugment(NodeList, Array, 'forEach');\n\t\n\t/**************************************************/\n\tMath.getNearIndex = function (arr, val) {\n\t    var delta = Math.abs(arr[0] - val);\n\t    var index = 0;\n\t    for (var i = 0; i < arr.length; i++) {\n\t        var temp = Math.abs(arr[i] - val);\n\t        if (temp < delta) {\n\t            delta = temp;\n\t            index = i;\n\t        }\n\t    }\n\t    return index;\n\t};\n\t\n\tMath.getNearIndexWithCaptureRadius = function (arr, radius, val) {\n\t    var delta = Math.abs(arr[0] - val);\n\t    var index = 0;\n\t    for (var i = 0; i < arr.length; i++) {\n\t        var temp = Math.abs(arr[i] - val);\n\t        if (temp < delta) {\n\t            delta = temp;\n\t            index = i;\n\t        }\n\t    }\n\t    if (delta > radius) {\n\t        return -1;\n\t    }\n\t    return index;\n\t};\n\t\n\tMath.bound = function (min, max, val) {\n\t    //console.log(min,max,val)\n\t    return Math.max(min, Math.min(max, val));\n\t};\n\tMath.boundPoint = function (min, max, val) {\n\t    var x = Math.max(min.x, Math.min(max.x, val.x));\n\t    var y = Math.max(min.y, Math.min(max.y, val.y));\n\t    return new Point(x, y);\n\t};\n\tMath.getLength = function (p1, p2) {\n\t    var dx = p1.x - p2.x;\n\t    var dy = p1.y - p2.y;\n\t    return Math.sqrt(dx * dx + dy * dy);\n\t};\n\t\n\tMath.toRadian = function (angle) {\n\t    return angle % 361 * Math.PI / 180;\n\t};\n\t/********************************************/\n\t\n\tString.prototype.substrend = function (length) {\n\t    return this.substr(0, this.length - length);\n\t};\n\t/********************************************/\n\t\n\tfunction XmlHttpRequest() {\n\t    if (window.XMLHttpRequest) {\n\t        xmlhttp = new XMLHttpRequest();\n\t    } else if (window.ActiveXObject) {\n\t        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n\t    }\n\t    if (xmlhttp == null) {\n\t        alert(\"Your browser does not support XMLHTTP.\");\n\t    }\n\t    return xmlhttp;\n\t}\n\t\n\twindow.requestAnimationFrame = function () {\n\t    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function ( /* function */callback, /* DOMElement */element) {\n\t        window.setTimeout(callback, 1000 / 60);\n\t    };\n\t}();\n\t\n\ttry {\n\t    if (!Object.prototype.__defineGetter__ && Object.defineProperty({}, \"x\", { get: function get() {\n\t            return true;\n\t        } }).x) {\n\t        Object.defineProperty(Object.prototype, \"__defineGetter__\", { enumerable: false, configurable: true,\n\t            value: function value(name, func) {\n\t                Object.defineProperty(this, name, { get: func, enumerable: true, configurable: true });\n\t            }\n\t        });\n\t        Object.defineProperty(Object.prototype, \"__defineSetter__\", { enumerable: false, configurable: true,\n\t            value: function value(name, func) {\n\t                Object.defineProperty(this, name, { set: func, enumerable: true, configurable: true });\n\t            }\n\t        });\n\t    }\n\t} catch (defPropException) {/*Do nothing if an exception occurs*/};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.mathPoint = exports.Rectangle = exports.Point = undefined;\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar mathPoint;\n\tvar Dragee = { util: _util2.default }; //todo remove after refactore\n\t\n\t\n\t/*********************/\n\tfunction Point(x, y) {\n\t    this.x = x;\n\t    this.y = y;\n\t}\n\t\n\tPoint.prototype.toString = function () {\n\t    return '{x=' + this.x + ',y=' + this.y + '}';\n\t};\n\tPoint.prototype.add = function (p) {\n\t    return new Point(this.x + p.x, this.y + p.y);\n\t};\n\tPoint.prototype.sub = function (p) {\n\t    return new Point(this.x - p.x, this.y - p.y);\n\t};\n\tPoint.prototype.mult = function (k) {\n\t    return new Point(this.x * k, this.y * k);\n\t};\n\tPoint.prototype.negative = function () {\n\t    return new Point(-this.x, -this.y);\n\t};\n\tPoint.prototype.compare = function (p) {\n\t    return this.x === p.x && this.y === p.y;\n\t};\n\tPoint.prototype.clone = function () {\n\t    return new Point(this.x, this.y);\n\t};\n\t\n\t/****************/\n\tfunction Rectangle(position, size) {\n\t    this.position = position;\n\t    this.size = size;\n\t}\n\t\n\tRectangle.prototype.getP1 = function () {\n\t    return this.position;\n\t};\n\tRectangle.prototype.getP2 = function () {\n\t    return new Point(this.position.x + this.size.x, this.position.y);\n\t};\n\tRectangle.prototype.getP3 = function () {\n\t    return this.position.add(this.size);\n\t};\n\tRectangle.prototype.getP4 = function () {\n\t    return new Point(this.position.x, this.position.y + this.size.y);\n\t};\n\tRectangle.prototype.getCenter = function () {\n\t    return this.position.add(this.size.mult(0.5));\n\t};\n\tRectangle.prototype.or = function (rect) {\n\t    var position = new Point(Math.min(this.position.x, rect.position.x), Math.min(this.position.y, rect.position.y)),\n\t        size = new Point(Math.max(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.max(this.position.y + this.size.y, rect.position.y + rect.size.y)).sub(position);\n\t    return new Rectangle(position, size);\n\t};\n\tRectangle.prototype.and = function (rect) {\n\t    var position = new Point(Math.max(this.position.x, rect.position.x), Math.max(this.position.y, rect.position.y)),\n\t        size = new Point(Math.min(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.min(this.position.y + this.size.y, rect.position.y + rect.size.y)).sub(position);\n\t    if (size.x <= 0 || size.y <= 0) {\n\t        return null;\n\t    }\n\t    return new Rectangle(position, size);\n\t};\n\tRectangle.prototype.includePoint = function (p) {\n\t    return !(this.position.x > p.x || this.position.x + this.size.x < p.x || this.position.y > p.y || this.position.y + this.size.y < p.y);\n\t};\n\tRectangle.prototype.includeRectangle = function (rectangle) {\n\t    return this.includePoint(rectangle.position) && this.includePoint(rectangle.getP3());\n\t};\n\tRectangle.prototype.moveToBound = function (rect, axis) {\n\t    var selAxis, crossRectangle, thisCenter, rectCenter, sign, offset;\n\t    if (axis) {\n\t        selAxis = axis;\n\t    } else {\n\t        crossRectangle = this.and(rect);\n\t        if (!crossRectangle) {\n\t            return rect;\n\t        }\n\t        selAxis = crossRectangle.size.x > crossRectangle.size.y ? \"y\" : \"x\";\n\t    }\n\t    thisCenter = this.getCenter();\n\t    rectCenter = rect.getCenter();\n\t    sign = thisCenter[selAxis] > rectCenter[selAxis] ? -1 : 1;\n\t    offset = sign > 0 ? this.position[selAxis] + this.size[selAxis] - rect.position[selAxis] : this.position[selAxis] - (rect.position[selAxis] + rect.size[selAxis]);\n\t    rect.position[selAxis] = rect.position[selAxis] + offset;\n\t    return rect;\n\t};\n\tRectangle.prototype.getSquare = function () {\n\t    return this.size.x * this.size.y;\n\t};\n\tRectangle.prototype.styleApply = function (el) {\n\t    el = el || document.querySelector(\"ind\");\n\t    el.style.left = this.position.x + \"px\";\n\t    el.style.top = this.position.y + \"px\";\n\t    el.style.width = this.size.x + \"px\";\n\t    el.style.height = this.size.y + \"px\";\n\t};\n\tRectangle.prototype.growth = function (size) {\n\t    this.size = this.size.add(size);\n\t    this.position = this.position.add(size.mult(-0.5));\n\t};\n\tRectangle.prototype.getMinSide = function () {\n\t    return Math.min(this.size.x, this.size.y);\n\t};\n\t\n\t/*****************/\n\texports.mathPoint = mathPoint = {\n\t    getLength: function getLength(options) {\n\t        if (!options || options.x && options.y && !options.isTransformationSpace) {\n\t            return function (p1, p2) {\n\t                var dx = p1.x - p2.x,\n\t                    dy = p1.y - p2.y;\n\t                return Math.sqrt(dx * dx + dy * dy);\n\t            };\n\t        } else {\n\t            if (options.x && options.y && options.isTransformationSpace) {\n\t                return function (p1, p2) {\n\t                    return Math.sqrt(Math.pow(options.x * Math.abs(p1.x - p2.x), 2) + Math.pow(options.y * Math.abs(p1.y - p2.y), 2));\n\t                };\n\t            } else {\n\t                if (options.x) {\n\t                    return function (p1, p2) {\n\t                        return Math.abs(p1.x - p2.x);\n\t                    };\n\t                } else {\n\t                    if (options.y) {\n\t                        return function (p1, p2) {\n\t                            return Math.abs(p1.y - p2.y);\n\t                        };\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    },\n\t    indexOfNearPoint: function indexOfNearPoint(arr, val, radius, getLength) {\n\t        var size,\n\t            index = 0,\n\t            i,\n\t            temp;\n\t        getLength = getLength || this.getLength();\n\t        if (arr.length === 0) {\n\t            return -1;\n\t        }\n\t        size = getLength(arr[0], val);\n\t        for (i = 0; i < arr.length; i++) {\n\t            temp = getLength(arr[i], val);\n\t            if (temp < size) {\n\t                size = temp;\n\t                index = i;\n\t            }\n\t        }\n\t        if (radius >= 0 && size > radius) {\n\t            return -1;\n\t        }\n\t        return index;\n\t    },\n\t    bound: function bound(min, max, val) {\n\t        return Math.max(min, Math.min(max, val));\n\t    },\n\t    boundPoint: function boundPoint(min, max, val) {\n\t        var x = Math.max(min.x, Math.min(max.x, val.x)),\n\t            y = Math.max(min.y, Math.min(max.y, val.y));\n\t        return new Point(x, y);\n\t    },\n\t    //Return crossing point of two lines\n\t    directCrossing: function directCrossing(L1P1, L1P2, L2P1, L2P2) {\n\t        var temp, k1, k2, b1, b2, x, y;\n\t        if (L2P1.x === L2P2.x) {\n\t            temp = L2P1;\n\t            L2P1 = L1P1;\n\t            L1P1 = temp;\n\t            temp = L2P2;\n\t            L2P2 = L1P2;\n\t            L1P2 = temp;\n\t        }\n\t        if (L1P1.x === L1P2.x) {\n\t            k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n\t            b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n\t            x = L1P1.x;\n\t            y = x * k2 + b2;\n\t            return new Point(x, y);\n\t        } else {\n\t            k1 = (L1P2.y - L1P1.y) / (L1P2.x - L1P1.x);\n\t            b1 = (L1P2.x * L1P1.y - L1P1.x * L1P2.y) / (L1P2.x - L1P1.x);\n\t            k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n\t            b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n\t            x = (b1 - b2) / (k2 - k1);\n\t            y = x * k1 + b1;\n\t            return new Point(x, y);\n\t        }\n\t    },\n\t    //Get point and check that point belong to segment of the line\n\t    // if not - return the nearest point of segment\n\t    boundOnSegment: function boundOnSegment(LP1, LP2, P) {\n\t        var x, y;\n\t        x = mathPoint.bound(Math.min(LP1.x, LP2.x), Math.max(LP1.x, LP2.x), P.x);\n\t        if (x != P.x) {\n\t            y = x === LP1.x ? LP1.y : LP2.y;\n\t            P = new Point(x, y);\n\t        }\n\t        y = mathPoint.bound(Math.min(LP1.y, LP2.y), Math.max(LP1.y, LP2.y), P.y);\n\t        if (y != P.y) {\n\t            x = y === LP1.y ? LP1.x : LP2.x;\n\t            P = new Point(x, y);\n\t        }\n\t        return P;\n\t    },\n\t    boundOnLine: function boundOnLine(A, B, P) {\n\t        var AP = new Point(P.x - A.x, P.y - A.y),\n\t            AB = new Point(B.x - A.x, B.y - A.y),\n\t            ab2 = AB.x * AB.x + AB.y * AB.y,\n\t            ap_ab = AP.x * AB.x + AP.y * AB.y,\n\t            t = ap_ab / ab2;\n\t        return new Point(A.x + AB.x * t, A.y + AB.y * t);\n\t    },\n\t    getPointInLine: function getPointInLine(LP1, LP2, percent) {\n\t        var dx = LP2.x - LP1.x,\n\t            dy = LP2.y - LP1.y;\n\t        return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n\t    },\n\t    getPointInLineByLenght: function getPointInLineByLenght(LP1, LP2, lenght) {\n\t        var dx = LP2.x - LP1.x,\n\t            dy = LP2.y - LP1.y,\n\t            percent = lenght / this.getLength()(LP1, LP2);\n\t        return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n\t    },\n\t    createRectangleFromElement: function createRectangleFromElement(el, parent, isContentBoxSize, isConsiderTranslate) {\n\t        var size = this.getSizeOfElement(el, isContentBoxSize);\n\t        return new Rectangle(this.getOffset(el, parent || el.parentNode, isConsiderTranslate), size);\n\t    },\n\t    getSizeOfElement: function getSizeOfElement(el, isContentBoxSize) {\n\t        var width = parseInt(window.getComputedStyle(el)['width']),\n\t            height = parseInt(window.getComputedStyle(el)['height']);\n\t        if (!isContentBoxSize) {\n\t            width += Dragee.util.getSumValueOfStyleRule(el, [\"padding-left\", \"padding-right\", \"border-left-width\", \"border-right-width\"]);\n\t            height += Dragee.util.getSumValueOfStyleRule(el, [\"padding-top\", \"padding-bottom\", \"border-top-width\", \"border-bottom-width\"]);\n\t        }\n\t        return new Point(width, height);\n\t    },\n\t    getOffset: function getOffset(el, parent, isConsiderTranslate) {\n\t        var elRect = el.getBoundingClientRect(),\n\t            parentRect = parent.getBoundingClientRect();\n\t        return new Point(elRect.left - parentRect.left, elRect.top - parentRect.top);\n\t    },\n\t    getPointFromRadialSystem: function getPointFromRadialSystem(angle, length, center) {\n\t        center = center || new Point(0, 0);\n\t        return center.add(new Point(length * Math.cos(angle), length * Math.sin(angle)));\n\t    },\n\t    addPointToBoundPoints: function addPointToBoundPoints(boundpoints, point, isRight) {\n\t        var i,\n\t            result = boundpoints.filter(function (bPoint) {\n\t            return bPoint.y > point.y || (isRight ? bPoint.x < point.x : bPoint.x > point.x);\n\t        });\n\t        for (i = 0; i < result.length; i++) {\n\t            if (point.y < result[i].y) {\n\t                result.splice(i, 0, point);\n\t                return result;\n\t            }\n\t        }\n\t        result.push(point);\n\t        return result;\n\t    },\n\t    getAngle: function getAngle(p1, p2) {\n\t        var diff = p2.sub(p1);\n\t        return this.normalizeAngle(Math.atan2(diff.y, diff.x));\n\t    },\n\t    toRadian: function toRadian(angle) {\n\t        return angle % 360 * Math.PI / 180;\n\t    },\n\t    toDegree: function toDegree(angle) {\n\t        return angle * 180 / Math.PI % 360;\n\t    },\n\t    boundAngle: function boundAngle(min, max, val) {\n\t        var dmin, dmax;\n\t        if (min < max && val > min && val < max) {\n\t            return val;\n\t        } else if (max < min && (val < max || val > min)) {\n\t            return val;\n\t        } else {\n\t            dmin = this.getAngleDiff(min, val);\n\t            dmax = this.getAngleDiff(max, val);\n\t            if (dmin < dmax) {\n\t                return min;\n\t            } else {\n\t                return max;\n\t            }\n\t        }\n\t    },\n\t    getNearestAngle: function getNearestAngle(arr, angle) {\n\t        var i,\n\t            temp,\n\t            diff = Math.PI * 2,\n\t            value;\n\t        for (i = 0; i < arr.length; i++) {\n\t            temp = mathPoint.getAngleDiff(arr[i], angle);\n\t            if (diff < temp) {\n\t                diff = temp;\n\t                value = arr[i];\n\t            }\n\t        }\n\t        return value;\n\t    },\n\t    getAngleDiff: function getAngleDiff(alpha, beta) {\n\t        var minAngle = Math.min(alpha, beta),\n\t            maxAngle = Math.max(alpha, beta);\n\t        return Math.min(maxAngle - minAngle, minAngle + Math.PI * 2 - maxAngle);\n\t    },\n\t    normalizeAngle: function normalizeAngle(val) {\n\t        while (val < 0) {\n\t            val += 2 * Math.PI;\n\t        }\n\t        while (val > 2 * Math.PI) {\n\t            val -= 2 * Math.PI;\n\t        }\n\t        return val;\n\t    },\n\t    distance: function distance(P1, P2) {\n\t        var xs = 0;\n\t        var ys = 0;\n\t\n\t        xs = P2.x - P1.x;\n\t        xs = xs * xs;\n\t\n\t        ys = P2.y - P1.y;\n\t        ys = ys * ys;\n\t\n\t        return Math.sqrt(xs + ys);\n\t    }\n\t};\n\t\n\texports.Point = Point;\n\texports.Rectangle = Rectangle;\n\texports.mathPoint = mathPoint;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar util = {\n\t    getDefaultParent: function getDefaultParent(element) {\n\t        var parent = element.parentNode;\n\t        while (parent.parentNode && window.getComputedStyle(parent)[\"position\"] === \"static\") {\n\t            parent = parent.parentNode;\n\t        }\n\t        return parent;\n\t    },\n\t    bind: function bind(func, context) {\n\t        return function () {\n\t            return func.apply(context, [].splice.call(arguments, 0));\n\t        };\n\t    },\n\t    getTouchByID: function getTouchByID(element, touchId) {\n\t        var i;\n\t        for (i = 0; i < element.changedTouches.length; i++) {\n\t            if (element.changedTouches[i].identifier === touchId) {\n\t                return element.changedTouches[i];\n\t            }\n\t        }\n\t        return false;\n\t    },\n\t    getSumValueOfStyleRule: function getSumValueOfStyleRule(element, rules) {\n\t        return rules.reduce(function (sum, rule) {\n\t            return sum + parseInt(window.getComputedStyle(element)[rule] || 0);\n\t        }, 0);\n\t    },\n\t    appendFirstChild: function appendFirstChild(element, node) {\n\t        element.firstChild ? element.insertBefore(node, element.firstChild) : element.appendChild(node);\n\t    },\n\t    range: function range(start, stop, step) {\n\t        var result = [];\n\t        if (typeof stop === 'undefined') {\n\t            stop = start;\n\t            start = 0;\n\t        }\n\t        if (typeof step === 'undefined') {\n\t            step = 1;\n\t        }\n\t        if (step > 0 && start >= stop || step < 0 && start <= stop) {\n\t            return [];\n\t        }\n\t        for (var i = start; step > 0 ? i < stop : i > stop; i += step) {\n\t            result.push(i);\n\t        }\n\t        return result;\n\t    },\n\t    setStyle: function setStyle(element, style) {\n\t        style = style || {};\n\t        var cssText = \"\",\n\t            key;\n\t        for (key in style) {\n\t            if (style.hasOwnProperty(key)) {\n\t                cssText += key + \": \" + style[key] + \"; \";\n\t            }\n\t        }\n\t\n\t        element.style.cssText = cssText;\n\t    },\n\t    triggerFactory: function triggerFactory(opts) {\n\t        var funcs = [],\n\t            i,\n\t            options = {\n\t            isReverse: false,\n\t            isStopOnTrue: false,\n\t            context: window\n\t        };\n\t        for (i in opts) {\n\t            if (opts.hasOwnProperty(i)) {\n\t                options[i] = opts[i];\n\t            }\n\t        };\n\t        return {\n\t            fire: function fire() {\n\t                var args = [].slice.call(arguments),\n\t                    i,\n\t                    retValue,\n\t                    fs = options.isReverse ? funcs.slice().reverse() : funcs;\n\t\n\t                for (i = 0; i < fs.length; i++) {\n\t                    retValue = fs[i].apply(options.context, args);\n\t                    if (options.isStopOnTrue && retValue) {\n\t                        return true;\n\t                    }\n\t                }\n\t                return !options.isStopOnTrue;\n\t            },\n\t            add: function add(f) {\n\t                funcs.push(f);\n\t            },\n\t            unshift: function unshift(f) {\n\t                funcs.unshift(f);\n\t            },\n\t            remove: function remove(f) {\n\t                var index = funcs.indexOf(f);\n\t                if (index !== -1) {\n\t                    funcs.splice(index, 1);\n\t                }\n\t            },\n\t            reset: function reset() {\n\t                funcs = [];\n\t            }\n\t        };\n\t    },\n\t    randomColor: function randomColor() {\n\t        var rnd = function rnd() {\n\t            return Math.round(Math.random() * 255);\n\t        },\n\t            toHexString = function toHexString(digit) {\n\t            var str = digit.toString(16);\n\t            while (str.length < 2) {\n\t                str = \"0\" + str;\n\t            }\n\t            return str;\n\t        },\n\t            red = rnd(),\n\t            green = rnd(),\n\t            blue = rnd();\n\t\n\t        return \"#\" + toHexString(red) + toHexString(green) + toHexString(blue);\n\t    },\n\t    createCanvas: function createCanvas(area, rectagle) {\n\t        var canvas;\n\t        if (window.getComputedStyle(area).position === \"static\") {\n\t            area.style.position = \"relative\";\n\t        }\n\t        canvas = document.createElement(\"canvas\");\n\t        canvas.setAttribute(\"width\", rectagle.size.x + \"px\");\n\t        canvas.setAttribute(\"height\", rectagle.size.y + \"px\");\n\t        util.setStyle(canvas, {\n\t            position: \"absolute\",\n\t            left: rectagle.position.y + \"px\",\n\t            top: rectagle.position.y + \"px\",\n\t            width: rectagle.size.x + \"px\",\n\t            height: rectagle.size.y + \"px\"\n\t        });\n\t        util.appendFirstChild(area, canvas);\n\t        return canvas;\n\t    }\n\t};\n\t\n\texports.default = util;\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.events = exports.draggables = exports.Draggable = undefined;\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _bound = __webpack_require__(5);\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Dragee = { util: _util2.default, boundType: _bound.boundType, boundFactory: _bound.boundFactory }; //todo remove after refactore\n\t\n\tvar isTouch = 'ontouchstart' in window,\n\t    mouseEvents = {\n\t    start: 'mousedown',\n\t    move: 'mousemove',\n\t    end: 'mouseup'\n\t},\n\t    touchEvents = {\n\t    start: 'touchstart',\n\t    move: 'touchmove',\n\t    end: 'touchend'\n\t},\n\t    events = isTouch ? touchEvents : mouseEvents,\n\t    draggables = [],\n\t    onCreateDraggable = function onCreateDraggable(draggable) {\n\t    var message = \"for this element Dragee.Draggable is already exist, don't create it twice \";\n\t    if (draggables.some(function (existing) {\n\t        return draggable.element === existing.element;\n\t    })) {\n\t        throw message;\n\t    }\n\t    draggables.push(draggable);\n\t},\n\t    transformProperty = getStyleProperty('transform'),\n\t    transitionProperty = getStyleProperty('transition');\n\t\n\t//Dragee.events = events;\n\t\n\tfunction Draggable(element, options) {\n\t    options = options || {};\n\t    var i,\n\t        that = this,\n\t        displayListener,\n\t        parent = options.parent || Dragee.util.getDefaultParent(element);\n\t    this.options = {\n\t        parent: parent,\n\t        bound: Dragee.boundFactory(Dragee.boundType.element)(parent, parent),\n\t        startFilter: false,\n\t        isContentBoxSize: false,\n\t        position: false\n\t    };\n\t    for (i in options) {\n\t        if (options.hasOwnProperty(i)) {\n\t            this.options[i] = options[i];\n\t        }\n\t    }\n\t    this.onEnd = Dragee.util.triggerFactory({\n\t        context: this, isReverse: true, isStopOnTrue: true\n\t    });\n\t    this.onMove = Dragee.util.triggerFactory({ context: this });\n\t    this.onStart = Dragee.util.triggerFactory({ context: this });\n\t\n\t    this.onEnd.add(function () {\n\t        this.move(this.position, 0, true, true);\n\t    });\n\t\n\t    if (options.onEnd) {\n\t        this.onEnd.add(options.onEnd);\n\t    }\n\t    if (options.onMove) {\n\t        this.onMove.add(options.onMove);\n\t    }\n\t    if (options.onStart) {\n\t        this.onStart.add(options.onStart);\n\t    }\n\t    this.element = element;\n\t    this.bound = this.options.bound;\n\t    onCreateDraggable(this);\n\t    that.init();\n\t}\n\t\n\tDraggable.prototype.init = function () {\n\t    this._enable = true;\n\t    this.offset = _point.mathPoint.getOffset(this.element, this.options.parent, true);\n\t    this.fixPosition = this.offset;\n\t    this.position = this.offset;\n\t    if (this.options.position) {\n\t        this.initPosition = this.options.position;\n\t        this.move(this.initPosition, 0, true, true);\n\t    } else {\n\t        this.initPosition = this.offset;\n\t    }\n\t    this._dragStart = Dragee.util.bind(this.dragStart, this);\n\t    this._delayedDragStart = Dragee.util.bind(this.delayedDragStart, this);\n\t    this._dragMove = Dragee.util.bind(this.dragMove, this);\n\t    this._dragEnd = Dragee.util.bind(this.dragEnd, this);\n\t\n\t    if (this.options.delayedStart) {\n\t        this.element.addEventListener(touchEvents.start, this._delayedDragStart);\n\t        this.element.addEventListener(mouseEvents.start, this._delayedDragStart);\n\t    } else {\n\t        this.element.addEventListener(touchEvents.start, this._dragStart);\n\t        this.element.addEventListener(mouseEvents.start, this._dragStart);\n\t    }\n\t\n\t    this.bound.refresh && this.bound.refresh();\n\t};\n\t\n\tDraggable.prototype.reinit = function () {\n\t    this.offset = _point.mathPoint.getOffset(this.element, this.options.parent, true);\n\t    this.fixPosition = this.offset;\n\t    this.position = this.offset;\n\t    if (this.options.position) {\n\t        this.initPosition = this.options.position;\n\t        this.move(this.initPosition, 0, true, true);\n\t    } else {\n\t        this.initPosition = this.offset;\n\t    }\n\t\n\t    this.bound.refresh && this.bound.refresh();\n\t};\n\t\n\tDraggable.prototype.getSize = function (recalulate) {\n\t    return _point.mathPoint.getSizeOfElement(this.element, this.options.isContentBoxSize);\n\t};\n\t\n\tDraggable.prototype.getPosition = function () {\n\t    this.position = this.offset.add(this._transformPosition || new _point.Point(0, 0));\n\t    return this.position;\n\t};\n\t\n\tDraggable.prototype.getCenter = function () {\n\t    return this.position.add(this.getSize().mult(0.5));\n\t};\n\t\n\tDraggable.prototype._setTranslate = function (point) {\n\t    this._transformPosition = point;\n\t\n\t    var transform = this.element.style[transformProperty],\n\t        translateCss = ' translate3d(' + point.x + 'px,' + point.y + 'px, 0px)';\n\t\n\t    var ua = window.navigator.userAgent;\n\t    var msie = ua.indexOf(\"MSIE \");\n\t\n\t    if (msie) {\n\t        translateCss = ' translate(' + point.x + 'px,' + point.y + 'px)';\n\t        if (!/translate\\([^)]+\\)/.test(transform)) {\n\t            transform += translateCss;\n\t        } else {\n\t            transform = transform.replace(/translate\\([^)]+\\)/, translateCss);\n\t        }\n\t    } else {\n\t        if (!/translate3d\\([^)]+\\)/.test(transform)) {\n\t            transform += translateCss;\n\t        } else {\n\t            transform = transform.replace(/translate3d\\([^)]+\\)/, translateCss);\n\t        }\n\t    }\n\t\n\t    this.element.style[transformProperty] = transform;\n\t};\n\t\n\tDraggable.prototype.move = function (point, time, isFix, isSilent) {\n\t    var that = this;\n\t    time = time || 0;\n\t    point = point.clone();\n\t    if (isFix) {\n\t        this.fixPosition = point;\n\t    }\n\t\n\t    this.determineDirection(point);\n\t\n\t    this.position = point;\n\t\n\t    transitionProperty && (that.element.style[transitionProperty] = time + \"ms\");\n\t    that._setTranslate(point.sub(that.offset));\n\t    isSilent || that.onMove.fire();\n\t};\n\t\n\tDraggable.prototype.refreshPosition = function () {\n\t    this.setPosition(this.getPosition());\n\t};\n\t\n\tDraggable.prototype.setPosition = function (point) {\n\t    point = point.clone();\n\t    this.position = point;\n\t\n\t    transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n\t    this._setTranslate(point.sub(this.offset));\n\t};\n\t\n\tDraggable.prototype.setZeroTransition = function () {\n\t    transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n\t};\n\t\n\tDraggable.prototype.determineDirection = function (point) {\n\t    this.leftDirection = this.position.x < point.x;\n\t    this.rightDirection = this.position.x > point.x;\n\t    this.upDirection = this.position.y > point.y;\n\t    this.downDirection = this.position.y < point.y;\n\t};\n\t\n\tDraggable.prototype.delayedDragStart = function (delayedEvent) {\n\t    var isTouchEvent = isTouch && delayedEvent instanceof TouchEvent,\n\t        startTouchPoint = new _point.Point(isTouchEvent ? delayedEvent.changedTouches[0].pageX : delayedEvent.clientX, isTouchEvent ? delayedEvent.changedTouches[0].pageY : delayedEvent.clientY),\n\t        that = this;\n\t\n\t    if (delayedEvent.shiftKey) return;\n\t\n\t    function checkMovement(event) {\n\t        var isTouchEvent = isTouch && event instanceof TouchEvent,\n\t            touchPoint = new _point.Point(isTouchEvent ? event.changedTouches[0].pageX : event.clientX, isTouchEvent ? event.changedTouches[0].pageY : event.clientY);\n\t\n\t        if (Math.abs(touchPoint.x - startTouchPoint.x) > 5 || Math.abs(touchPoint.y - startTouchPoint.y) > 5) {\n\t\n\t            document.removeEventListener(touchEvents.move, checkMovement);\n\t            document.removeEventListener(mouseEvents.move, checkMovement);\n\t\n\t            BlockSelection.startDragSelection(that, delayedEvent);\n\t            that.dragStart(delayedEvent);\n\t        }\n\t    }\n\t\n\t    function removeCheckMovement(event) {\n\t        document.removeEventListener(touchEvents.move, checkMovement);\n\t        document.removeEventListener(mouseEvents.move, checkMovement);\n\t\n\t        document.removeEventListener(touchEvents.end, removeCheckMovement);\n\t        document.removeEventListener(mouseEvents.end, removeCheckMovement);\n\t    }\n\t\n\t    document.addEventListener(touchEvents.move, checkMovement);\n\t    document.addEventListener(mouseEvents.move, checkMovement);\n\t\n\t    document.addEventListener(touchEvents.end, removeCheckMovement);\n\t    document.addEventListener(mouseEvents.end, removeCheckMovement);\n\t};\n\t\n\tDraggable.prototype.dragStart = function (event) {\n\t    this.currentEvent = event;\n\t    if (!this._enable || this.options.startFilter && !this.options.startFilter(event)) {\n\t        return;\n\t    }\n\t\n\t    var isTouchEvent = isTouch && event instanceof TouchEvent;\n\t\n\t    this._startTouchPoint = new _point.Point(isTouchEvent ? event.changedTouches[0].pageX : event.clientX, isTouchEvent ? event.changedTouches[0].pageY : event.clientY);\n\t\n\t    this._startPosition = this.getPosition();\n\t    if (isTouchEvent) {\n\t        this._touchId = event.changedTouches[0].identifier;\n\t    }\n\t    event.stopPropagation();\n\t    if (!(event.target instanceof HTMLInputElement || event.target instanceof HTMLInputElement)) {\n\t        event.preventDefault();\n\t    } else {\n\t        event.target.focus();\n\t    }\n\t\n\t    document.addEventListener(touchEvents.move, this._dragMove);\n\t    document.addEventListener(mouseEvents.move, this._dragMove);\n\t\n\t    document.addEventListener(touchEvents.end, this._dragEnd);\n\t    document.addEventListener(mouseEvents.end, this._dragEnd);\n\t\n\t    this.isDragee = true;\n\t\n\t    this.onStart.fire(event);\n\t    this.element.addClass(\"active\");\n\t    this.onMove.fire(event);\n\t};\n\t\n\tDraggable.prototype.dragMove = function (event) {\n\t    this.currentEvent = event;\n\t\n\t    var touch, touchPoint, point;\n\t\n\t    var isTouchEvent = isTouch && event instanceof TouchEvent;\n\t\n\t    if (isTouchEvent) {\n\t        if (!(touch = Dragee.util.getTouchByID(event, this._touchId))) {\n\t            return;\n\t        }\n\t    }\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t    touchPoint = new _point.Point(isTouchEvent ? touch.pageX : event.clientX, isTouchEvent ? touch.pageY : event.clientY);\n\t    point = this._startPosition.add(touchPoint.sub(this._startTouchPoint));\n\t    point = this.bound(point, this.getSize());\n\t    this.touchPoint = touchPoint;\n\t    this.move(point, 0);\n\t};\n\t\n\tDraggable.prototype.dragEnd = function (event) {\n\t    var touch;\n\t\n\t    var isTouchEvent = isTouch && event instanceof TouchEvent;\n\t\n\t    if (isTouchEvent) {\n\t        if (!(touch = Dragee.util.getTouchByID(event, this._touchId))) {\n\t            return;\n\t        }\n\t    }\n\t    event.stopPropagation();\n\t    event.preventDefault();\n\t    this.onEnd.fire(event);\n\t\n\t    document.removeEventListener(touchEvents.move, this._dragMove);\n\t    document.removeEventListener(mouseEvents.move, this._dragMove);\n\t\n\t    document.removeEventListener(touchEvents.end, this._dragEnd);\n\t    document.removeEventListener(mouseEvents.end, this._dragEnd);\n\t\n\t    this.isDragee = false;\n\t    this.element.removeClass(\"active\");\n\t};\n\t\n\tDraggable.prototype.getRectangle = function () {\n\t    return new _point.Rectangle(this.position, this.getSize());\n\t};\n\t\n\tDraggable.prototype.refresh = function () {\n\t    this.getSize(true);\n\t    this.bound.refresh && this.bound.refresh();\n\t};\n\t\n\tDraggable.prototype.destroy = function () {\n\t    this.element.removeEventListener(touchEvents.start, this._dragStart);\n\t    this.element.removeEventListener(mouseEvents.start, this._dragStart);\n\t    this.element.removeEventListener(touchEvents.move, this._dragMove);\n\t    this.element.removeEventListener(mouseEvents.move, this._dragMove);\n\t    this.element.removeEventListener(touchEvents.end, this._dragEnd);\n\t    this.element.removeEventListener(mouseEvents.end, this._dragEnd);\n\t\n\t    this.onEnd.reset();\n\t    this.onMove.reset();\n\t};\n\t\n\tDraggable.prototype.__defineGetter__(\"enable\", function () {\n\t    return this._enable;\n\t});\n\t\n\tDraggable.prototype.__defineSetter__(\"enable\", function (enable) {\n\t    if (enable) {\n\t        this.element.removeClass(\"disable\");\n\t    } else {\n\t        this.element.addClass(\"disable\");\n\t    }\n\t\n\t    return this._enable = enable;\n\t});\n\t\n\texports.Draggable = Draggable;\n\texports.draggables = draggables;\n\texports.events = events;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.boundFactory = exports.boundType = undefined;\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar boundType = {\n\t\telement: -1,\n\t\trectangle: 0,\n\t\tlineX: 1,\n\t\tlineY: 2,\n\t\tline: 3,\n\t\tunificationOfRectangle: 4,\n\t\tcircle: 5,\n\t\tarc: 6\n\t};\n\t\n\tfunction boundFactory(type) {\n\t\tswitch (type) {\n\t\t\tcase boundType.element:\n\t\t\t\treturn function (element, parent) {\n\t\t\t\t\tvar bound,\n\t\t\t\t\t    retFunc = function retFunc() {\n\t\t\t\t\t\treturn bound.apply(this, arguments);\n\t\t\t\t\t};\n\t\n\t\t\t\t\tretFunc.refresh = function () {\n\t\t\t\t\t\tbound = boundFactory(boundType.rectangle)(_point.mathPoint.createRectangleFromElement(element, parent));\n\t\t\t\t\t};\n\t\n\t\t\t\t\tretFunc.refresh();\n\t\t\t\t\treturn retFunc;\n\t\t\t\t};\n\t\t\tcase boundType.rectangle:\n\t\t\t\treturn function (rectangle) {\n\t\t\t\t\treturn function (point, size) {\n\t\t\t\t\t\tvar calcPoint = point.clone(),\n\t\t\t\t\t\t    rectP2 = rectangle.getP3();\n\t\n\t\t\t\t\t\tif (rectangle.position.x > calcPoint.x) {\n\t\t\t\t\t\t\tcalcPoint.x = rectangle.position.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (rectangle.position.y > calcPoint.y) {\n\t\t\t\t\t\t\tcalcPoint.y = rectangle.position.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (rectP2.x < calcPoint.x + size.x) {\n\t\t\t\t\t\t\tcalcPoint.x = rectP2.x - size.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (rectP2.y < calcPoint.y + size.y) {\n\t\t\t\t\t\t\tcalcPoint.y = rectP2.y - size.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.lineX:\n\t\t\t\treturn function (x, startY, endY) {\n\t\t\t\t\treturn function (point, size) {\n\t\t\t\t\t\tvar calcPoint = point.clone();\n\t\t\t\t\t\tcalcPoint.x = x;\n\t\t\t\t\t\tif (startY > calcPoint.y) {\n\t\t\t\t\t\t\tcalcPoint.y = startY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (endY < calcPoint.y + size.y) {\n\t\t\t\t\t\t\tcalcPoint.y = endY - size.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.lineY:\n\t\t\t\treturn function (y, startX, endX) {\n\t\t\t\t\treturn function (point, size) {\n\t\t\t\t\t\tvar calcPoint = point.clone();\n\t\t\t\t\t\tcalcPoint.y = y;\n\t\t\t\t\t\tif (startX > calcPoint.x) {\n\t\t\t\t\t\t\tcalcPoint.x = startX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (endX < calcPoint.x + size.x) {\n\t\t\t\t\t\t\tcalcPoint.x = endX - size.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.line:\n\t\t\t\treturn function (start, end) {\n\t\t\t\t\tvar alpha = Math.atan2(end.y - start.y, end.x - start.x),\n\t\t\t\t\t    beta = alpha + Math.PI / 2,\n\t\t\t\t\t    someK = 10,\n\t\t\t\t\t    cosBeta = Math.cos(beta),\n\t\t\t\t\t    sinBeta = Math.sin(beta);\n\t\n\t\t\t\t\treturn function (point, size) {\n\t\t\t\t\t\tvar point2 = new Point(point.x + someK * cosBeta, point.y + someK * sinBeta),\n\t\t\t\t\t\t    pointCrossing = _point.mathPoint.directCrossing(start, end, point, point2),\n\t\t\t\t\t\t    newEnd = _point.mathPoint.getPointInLineByLenght(end, start, size.x);\n\t\n\t\t\t\t\t\tpointCrossing = _point.mathPoint.boundOnLine(start, newEnd, pointCrossing);\n\t\t\t\t\t\treturn pointCrossing;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.circle:\n\t\t\t\treturn function (center, radius) {\n\t\t\t\t\treturn function (point, size) {\n\t\t\t\t\t\tvar boundedPoint = _point.mathPoint.getPointInLineByLenght(center, point, radius);\n\t\t\t\t\t\treturn boundedPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.arc:\n\t\t\t\treturn function (center, radius, startAgle, endAngle) {\n\t\t\t\t\treturn function (point, size) {\n\t\t\t\t\t\tvar boundStartAngle = typeof startAgle === \"function\" ? startAgle() : startAgle,\n\t\t\t\t\t\t    boundEndtAngle = typeof startAgle === \"function\" ? endAngle() : endAngle,\n\t\t\t\t\t\t    angle = _point.mathPoint.getAngle(center, point);\n\t\n\t\t\t\t\t\tangle = _point.mathPoint.normalizeAngle(angle);\n\t\t\t\t\t\tangle = _point.mathPoint.boundAngle(boundStartAngle, boundEndtAngle, angle);\n\t\t\t\t\t\treturn _point.mathPoint.getPointFromRadialSystem(angle, radius, center);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t}\n\t\n\texports.boundType = boundType;\n\texports.boundFactory = boundFactory;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.listFactory = exports.List = exports.lists = undefined;\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar _bound = __webpack_require__(5);\n\t\n\tvar _draggable = __webpack_require__(4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar lists = [];\n\t\n\tvar Dragee = { util: _util2.default, boundType: _bound.boundType, boundFactory: _bound.boundFactory, Draggable: _draggable.Draggable, events: _draggable.events }; //todo remove after refactore\n\t\n\t\n\tfunction List(draggables, options) {\n\t\tvar i;\n\t\tthis.options = {\n\t\t\ttimeEnd: 200,\n\t\t\ttimeExcange: 400,\n\t\t\tradius: 30,\n\t\t\tgetLength: _point.mathPoint.getLength(),\n\t\t\tisDisplacement: false\n\t\t};\n\t\tfor (i in options) {\n\t\t\tif (options.hasOwnProperty(i)) {\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.draggables = draggables;\n\t\tlists.push(this);\n\t\tthis.onChange = Dragee.util.triggerFactory({ context: this });\n\t\tif (options && options.onChange) {\n\t\t\tthis.onChange.add(options.onChange);\n\t\t}\n\t\tthis.init();\n\t}\n\t\n\tList.prototype.init = function () {\n\t\tthis._enable = true;\n\t\tthis.draggables.forEach(this.initDraggable, this);\n\t};\n\t\n\tList.prototype.initDraggable = function (draggable) {\n\t\tvar _moveHandler,\n\t\t    that = this;\n\t\tdraggable.enable = this._enable;\n\t\tif (this.options.isDisplacement) {\n\t\t\t_moveHandler = function moveHandler() {\n\t\t\t\tif (this.isDragee) {\n\t\t\t\t\tthat.onStart(this);\n\t\t\t\t\tdraggable.onMove.remove(_moveHandler);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tdraggable.onEnd.add(function () {\n\t\t\t\tthat.onEndDisplaycement(this);\n\t\t\t\tdraggable.onMove.add(_moveHandler);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tdraggable.onMove.add(_moveHandler);\n\t\t} else {\n\t\t\tdraggable.onEnd.add(function () {\n\t\t\t\tthat.onEnd(this);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\t\n\tList.prototype.moveOrSave = function (draggable, position, time) {\n\t\tif (draggable.isDragee) {\n\t\t\tdraggable.fixPosition = position;\n\t\t} else {\n\t\t\tdraggable.move(position, time, true);\n\t\t}\n\t};\n\t\n\tList.prototype.onEnd = function (draggable) {\n\t\tvar fixPositions = this.getCurrentFixPosition(),\n\t\t    currentIndex,\n\t\t    excangeIndex;\n\t\tcurrentIndex = this.draggables.indexOf(draggable);\n\t\texcangeIndex = _point.mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif (excangeIndex === -1 || excangeIndex === currentIndex) {\n\t\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t\t} else {\n\t\t\tthis.moveOrSave(this.draggables[excangeIndex], fixPositions[currentIndex], this.options.timeExcange);\n\t\t\tthis.draggables[currentIndex].move(fixPositions[excangeIndex], this.options.timeEnd, true);\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\treturn true;\n\t};\n\t\n\tList.prototype.onEndDisplaycement = function (draggable) {\n\t\tvar currentIndex,\n\t\t    i,\n\t\t    targetIndex,\n\t\t    sortedDraggables = this.getSortedDraggables(),\n\t\t    fixPositions = sortedDraggables.map(function (draggable) {\n\t\t\treturn draggable.fixPosition;\n\t\t});\n\t\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\t\ttargetIndex = _point.mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif (targetIndex !== -1) {\n\t\t\tif (targetIndex < currentIndex) {\n\t\t\t\tfor (i = targetIndex; i < currentIndex; i++) {\n\t\t\t\t\tthis.moveOrSave(sortedDraggables[i], fixPositions[i + 1], this.options.timeExcange);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (i = currentIndex; i < targetIndex; i++) {\n\t\t\t\t\tthis.moveOrSave(sortedDraggables[i + 1], fixPositions[i], this.options.timeExcange);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdraggable.move(fixPositions[targetIndex], this.options.timeEnd, true);\n\t\t} else {\n\t\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t\t}\n\t};\n\t\n\tList.prototype.onStart = function (draggable) {\n\t\tvar currentIndex,\n\t\t    i,\n\t\t    sortedDraggables = this.getSortedDraggables(),\n\t\t    fixPositions = sortedDraggables.map(function (draggable) {\n\t\t\treturn draggable.fixPosition;\n\t\t});\n\t\n\t\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\t\tfor (i = currentIndex + 1; i < sortedDraggables.length; i++) {\n\t\t\tthis.moveOrSave(sortedDraggables[i], fixPositions[i - 1], this.options.timeExcange);\n\t\t}\n\t\tsortedDraggables[currentIndex].fixPosition = fixPositions[i - 1];\n\t};\n\t\n\tList.prototype.getCurrentFixPosition = function () {\n\t\treturn this.draggables.map(function (draggable) {\n\t\t\treturn draggable.fixPosition.clone();\n\t\t});\n\t};\n\t\n\tList.prototype.getSortedDraggables = function () {\n\t\tvar sortedDraggables,\n\t\t    initPositions = this.draggables.map(function (draggable) {\n\t\t\treturn draggable.initPosition;\n\t\t});\n\t\tsortedDraggables = initPositions.map(function (position) {\n\t\t\treturn this.draggables.filter(function (draggable) {\n\t\t\t\treturn draggable.fixPosition.compare(position);\n\t\t\t}, this)[0];\n\t\t}, this);\n\t\treturn sortedDraggables;\n\t};\n\t\n\tList.prototype.reset = function () {\n\t\tthis.draggables.forEach(function (draggable) {\n\t\t\tdraggable.move(draggable.initPosition, 0, true, false);\n\t\t});\n\t};\n\t\n\tList.prototype.refresh = function () {\n\t\tthis.draggables.forEach(function (draggable) {\n\t\t\tdraggable.refresh();\n\t\t});\n\t};\n\t\n\tList.prototype.add = function (draggables) {\n\t\tvar that = this;\n\t\tif (!(draggables instanceof Array)) {\n\t\t\tdraggables = [draggables];\n\t\t}\n\t\tdraggables.forEach(this.initDraggable, this);\n\t\tthis.draggables = this.draggables.concat(draggables);\n\t};\n\t\n\tList.prototype.remove = function (draggables) {\n\t\tvar j,\n\t\t    initPositions = this.draggables.map(function (draggable) {\n\t\t\treturn draggable.initPosition;\n\t\t}),\n\t\t    list = [],\n\t\t    sortedDraggables = this.getSortedDraggables();\n\t\tif (!(draggables instanceof Array)) {\n\t\t\tdraggables = [draggables];\n\t\t}\n\t\tdraggables.forEach(function (draggable) {\n\t\t\tdraggable.onEnd.reset();\n\t\t\tdraggable.onMove.reset(); //todo remove reset in future\n\t\t\tthis.draggables.removeItem(draggable);\n\t\t\tDragee.util.remove(this.draggables, draggable);\n\t\t}, this);\n\t\tj = 0;\n\t\tsortedDraggables.forEach(function (draggable, i) {\n\t\t\tif (this.draggables.indexOf(draggable) !== -1) {\n\t\t\t\tif (draggable.fixPosition !== initPositions[j]) {\n\t\t\t\t\tdraggable.move(initPositions[j], this.options.timeExcange, true);\n\t\t\t\t}\n\t\t\t\tdraggable.initPosition = initPositions[j];\n\t\t\t\tj++;\n\t\t\t\tlist.push(draggable);\n\t\t\t}\n\t\t}, this);\n\t\tthis.draggables = list;\n\t};\n\t\n\tList.prototype.clear = function () {\n\t\tthis.remove(this.draggables.slice());\n\t};\n\t\n\tList.prototype.destroy = function () {\n\t\tthis.draggables.forEach(function (draggable) {\n\t\t\tdraggable.destroy();\n\t\t});\n\t};\n\t\n\tList.prototype.__defineGetter__(\"positions\", function () {\n\t\treturn this.getCurrentFixPosition();\n\t});\n\t\n\tList.prototype.__defineSetter__(\"positions\", function (positions) {\n\t\tvar message = \"wrong array length\";\n\t\tif (positions.length === this.draggables.length) {\n\t\t\tpositions.forEach(function (point, i) {\n\t\t\t\tthis.draggables[i].move(point, 0, true, true);\n\t\t\t}, this);\n\t\t} else {\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\t\n\tList.prototype.__defineGetter__(\"enable\", function () {\n\t\treturn this._enable;\n\t});\n\t\n\tList.prototype.__defineSetter__(\"enable\", function (value) {\n\t\tthis._enable = value;\n\t\tthis.draggables.forEach(function (draggable) {\n\t\t\tdraggable.enable = value;\n\t\t});\n\t});\n\t\n\tfunction listFactory(parentElement, elements, options) {\n\t\tvar draggables, draggableOptions, listOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\tlistOptions = options.list || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || parentElement;\n\t\telements = Array.prototype.slice.call(elements);\n\t\n\t\tdraggables = elements.map(function (element) {\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\t\n\t\treturn new List(draggables, listOptions);\n\t}\n\t\n\texports.lists = lists;\n\texports.List = List;\n\texports.listFactory = listFactory;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.Target = exports.targets = undefined;\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar _positioning = __webpack_require__(8);\n\t\n\tvar _targetManager = __webpack_require__(9);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Dragee = { util: _util2.default, positionType: _positioning.positionType, positionFactory: _positioning.positionFactory, sortingFactory: _positioning.sortingFactory, targetManagers: _targetManager.targetManagers }; //todo remove after refactore\n\t\n\tvar targets = [];\n\t\n\tfunction Target(element, draggables, options) {\n\t\toptions = options || {};\n\t\tvar i,\n\t\t    parent = options.parent || Dragee.util.getDefaultParent(element);\n\t\tthis.options = {\n\t\t\ttimeEnd: 200,\n\t\t\ttimeExcange: 400,\n\t\t\tparent: parent,\n\t\t\tsorting: Dragee.sortingFactory(Dragee.positionType.floatLeft)(80, _point.mathPoint.getLength({ x: 1, y: 4, isTransformationSpace: true })),\n\t\t\tpositioning: Dragee.positionFactory(Dragee.positionType.floatLeft)(this.getRectangle.bind(this), { removable: true })\n\t\t};\n\t\tfor (i in options) {\n\t\t\tthis.options[i] = options[i];\n\t\t}\n\t\ttargets.push(this);\n\t\tthis.element = element;\n\t\tthis.draggables = draggables;\n\t\tthis.onAdd = Dragee.util.triggerFactory({ context: this });\n\t\tthis.beforeAdd = Dragee.util.triggerFactory({ context: this });\n\t\tthis.onRemove = Dragee.util.triggerFactory({ context: this });\n\t\n\t\toptions.onRemove && this.onRemove.add(options.onRemove);\n\t\toptions.onAdd && this.onAdd.add(options.onAdd);\n\t\toptions.beforeAdd && this.beforeAdd.add(options.beforeAdd);\n\t\n\t\tthis.init();\n\t};\n\t\n\tTarget.prototype.getRectangle = function () {\n\t\treturn _point.mathPoint.createRectangleFromElement(this.element, this.options.parent, this.options.isContentBoxSize, true);\n\t};\n\t\n\tTarget.prototype.catchDraggable = function (draggable) {\n\t\tif (this.options.catchDraggable) {\n\t\t\treturn this.options.catchDraggable(this, draggable);\n\t\t} else {\n\t\t\tvar targetRectangle = this.getRectangle(),\n\t\t\t    draggableSquare = draggable.getRectangle().getSquare();\n\t\n\t\t\treturn draggableSquare < targetRectangle.getSquare() && targetRectangle.includePoint(draggable.getCenter());\n\t\t}\n\t};\n\t\n\tTarget.prototype.getPosition = function () {\n\t\treturn this.getRectangle().position;\n\t};\n\t\n\tTarget.prototype.getSize = function () {\n\t\treturn this.getRectangle().size;\n\t};\n\t\n\tTarget.prototype.init = function () {\n\t\tvar rectangles, indexesOfNew;\n\t\n\t\tthis.innerDraggables = this.draggables.filter(function (draggable) {\n\t\t\tvar element = draggable.element.parentNode;\n\t\t\twhile (element) {\n\t\t\t\tif (element === this.element) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t}, this);\n\t\n\t\tif (this.innerDraggables.length) {\n\t\t\tindexesOfNew = Dragee.util.range(this.innerDraggables.length);\n\t\t\trectangles = this.options.positioning(this.innerDraggables.map(function (draggable) {\n\t\t\t\treturn draggable.getRectangle();\n\t\t\t}), indexesOfNew);\n\t\t\tthis.setPosition(rectangles, indexesOfNew);\n\t\t\tthis.innerDraggables.forEach(function (draggable) {\n\t\t\t\tthis.onAdd.fire(draggable);\n\t\t\t}, this);\n\t\t}\n\t};\n\t\n\tTarget.prototype.destroy = function () {\n\t\tDragee.targetManagers.forEach(function (targetManager) {\n\t\t\ttargetManager.targets.removeItem(this);\n\t\t}, this);\n\t};\n\t\n\tTarget.prototype.refresh = function () {\n\t\tvar rectangles = this.options.positioning(this.innerDraggables.map(function (draggable) {\n\t\t\treturn draggable.getRectangle();\n\t\t}), []);\n\t\tthis.setPosition(rectangles, [], 0);\n\t};\n\t\n\tTarget.prototype.onEnd = function (draggable) {\n\t\tvar newDraggablesIndex = [],\n\t\t    rectangles,\n\t\t    includePoint = this.getRectangle().includePoint(draggable.getPosition());\n\t\n\t\tif (!includePoint) {\n\t\t\tif (this.getRectangle().includePoint(draggable.getCenter())) {\n\t\t\t\tdraggable.position = draggable.getCenter().clone();\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\n\t\tthis.beforeAdd.fire(draggable);\n\t\n\t\tthis.innerDraggables = this.options.sorting(this.innerDraggables, [draggable], newDraggablesIndex);\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function (draggable) {\n\t\t\treturn draggable.getRectangle();\n\t\t}), newDraggablesIndex, draggable);\n\t\n\t\tthis.setPosition(rectangles, newDraggablesIndex);\n\t\tif (this.innerDraggables.indexOf(draggable) !== -1) {\n\t\t\tthis.addRemoveOnMove(draggable);\n\t\t}\n\t\treturn true;\n\t};\n\t\n\tTarget.prototype.setPosition = function (rectangles, indexesOfNew, time) {\n\t\tthis.innerDraggables.slice(0).forEach(function (draggable, i) {\n\t\t\tvar rect = rectangles[i],\n\t\t\t    that = this,\n\t\t\t    timeEnd = time || time == 0 ? time : indexesOfNew.indexOf(i) !== -1 ? this.options.timeEnd : this.options.timeExcange;\n\t\n\t\t\tif (rect.removable) {\n\t\t\t\tdraggable.move(draggable.initPosition, timeEnd, true, true);\n\t\t\t\tthis.innerDraggables.removeItem(draggable);\n\t\n\t\t\t\tthis.onRemove.fire(draggable);\n\t\t\t} else {\n\t\t\t\tdraggable.move(rect.position, timeEnd, true, true);\n\t\t\t}\n\t\t}, this);\n\t};\n\t\n\tTarget.prototype.add = function (draggable, time) {\n\t\tvar rectangles,\n\t\t    newDraggablesIndex = this.innerDraggables.length;\n\t\n\t\tthis.beforeAdd.fire(draggable);\n\t\n\t\tthis.pushInnerDraggable(draggable);\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function (draggable) {\n\t\t\treturn draggable.getRectangle();\n\t\t}), newDraggablesIndex, draggable);\n\t\tthis.setPosition(rectangles, [newDraggablesIndex], time || 0);\n\t\tif (this.innerDraggables.indexOf(draggable) !== -1) {\n\t\t\tthis.addRemoveOnMove(draggable);\n\t\t}\n\t};\n\t\n\tTarget.prototype.pushInnerDraggable = function (draggable) {\n\t\tif (this.innerDraggables.indexOf(draggable) === -1) {\n\t\t\tthis.innerDraggables.push(draggable);\n\t\t}\n\t};\n\t\n\tTarget.prototype.addRemoveOnMove = function (draggable) {\n\t\tvar that = this;\n\t\n\t\tdraggable.onMove.add(this.removeHandler = function () {\n\t\t\tthat.remove(draggable);\n\t\t});\n\t\n\t\tthis.onAdd.fire(draggable);\n\t};\n\t\n\tTarget.prototype.remove = function (draggable) {\n\t\tvar index, rectangles;\n\t\tdraggable.onMove.remove(this.removeHandler);\n\t\n\t\tindex = this.innerDraggables.indexOf(draggable);\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tthis.innerDraggables.splice(index, 1);\n\t\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function (draggable) {\n\t\t\treturn draggable.getRectangle();\n\t\t}), []);\n\t\n\t\tthis.setPosition(rectangles, []);\n\t\tthis.onRemove.fire(draggable);\n\t};\n\t\n\tTarget.prototype.reset = function () {\n\t\tthis.innerDraggables.forEach(function (draggable) {\n\t\t\tdraggable.move(draggable.initPosition, 0, true, true);\n\t\t\tthis.onRemove.fire(draggable);\n\t\t}, this);\n\t\tthis.innerDraggables = [];\n\t};\n\t\n\tTarget.prototype.getSortedDraggables = function () {\n\t\tthis.innerDraggables.slice();\n\t};\n\t\n\texports.targets = targets;\n\texports.Target = Target;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.positionFactory = exports.sortingFactory = exports.positionType = undefined;\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar positionType = {\n\t\tnotCrossing: 0,\n\t\tfloatLeft: 1,\n\t\tfloatRight: 2\n\t};\n\t\n\tfunction positionFactory(type) {\n\t\tswitch (type) {\n\t\t\tcase positionType.notCrossing:\n\t\t\t\treturn function (rectangle, options) {\n\t\t\t\t\tvar i,\n\t\t\t\t\t    opts = {\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t};\n\t\t\t\t\tfor (i in options) {\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function (rectangleList, indexesOfNews) {\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle,\n\t\t\t\t\t\t    staticRectangleIndexes = rectangleList.reduce(function (indexes, rect, index) {\n\t\t\t\t\t\t\tif (indexesOfNews.indexOf(index) === -1) {\n\t\t\t\t\t\t\t\tindexes.push(index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn indexes;\n\t\t\t\t\t\t}, []);\n\t\t\t\t\t\tindexesOfNews.forEach(function (index) {\n\t\t\t\t\t\t\tvar rect = rectangleList[index],\n\t\t\t\t\t\t\t    removable = false;\n\t\t\t\t\t\t\tstaticRectangleIndexes.forEach(function (indexOfStatic) {\n\t\t\t\t\t\t\t\tvar staticRect = rectangleList[indexOfStatic];\n\t\t\t\t\t\t\t\trect = staticRect.moveToBound(rect);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tremovable = staticRectangleIndexes.some(function (indexOfStatic) {\n\t\t\t\t\t\t\t\tvar staticRect = rectangleList[indexOfStatic];\n\t\t\t\t\t\t\t\treturn !!staticRect.and(rect);\n\t\t\t\t\t\t\t}) || rect.and(boundRect).getSquare() !== rect.getSquare();\n\t\t\t\t\t\t\tif (removable) {\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstaticRectangleIndexes.push(index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase positionType.floatLeft:\n\t\t\t\treturn function (rectangle, options) {\n\t\t\t\t\tvar i,\n\t\t\t\t\t    opts = {\n\t\t\t\t\t\tpaddingTopLeft: new _point.Point(0, 0),\n\t\t\t\t\t\tpaddingBottomRight: new _point.Point(0, 0),\n\t\t\t\t\t\tyGapBetweenDraggables: 0,\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t};\n\t\t\t\t\tfor (i in options) {\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function (rectangleList, indexesOfNews) {\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle,\n\t\t\t\t\t\t    rectP2 = boundRect.getP2(),\n\t\t\t\t\t\t    i,\n\t\t\t\t\t\t    boundaryPoints = [boundRect.position];\n\t\t\t\t\t\trectangleList.forEach(function (rect, index) {\n\t\t\t\t\t\t\tvar position,\n\t\t\t\t\t\t\t    isValid = false;\n\t\t\t\t\t\t\tfor (i = 0; i < boundaryPoints.length; i++) {\n\t\t\t\t\t\t\t\tposition = new _point.Point(boundaryPoints[i].x, i > 0 ? boundaryPoints[i - 1].y + opts.yGapBetweenDraggables : boundRect.position.y).add(opts.paddingTopLeft);\n\t\t\t\t\t\t\t\tif (isValid = position.x + rect.size.x < rectP2.x) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!isValid) {\n\t\t\t\t\t\t\t\tposition = new _point.Point(boundRect.position.x, boundaryPoints[boundaryPoints.length - 1].y + opts.yGapBetweenDraggables).add(opts.paddingTopLeft);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trect.position = position;\n\t\t\t\t\t\t\tif (opts.removable && rect.getP3().y > boundRect.getP3().y) {\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tboundaryPoints = _point.mathPoint.addPointToBoundPoints(boundaryPoints, rect.getP3().add(opts.paddingBottomRight));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase positionType.floatRight:\n\t\t\t\treturn function (rectangle, options) {\n\t\t\t\t\tvar paddingTopNegRight,\n\t\t\t\t\t    paddingBottomNegLeft,\n\t\t\t\t\t    i,\n\t\t\t\t\t    opts = {\n\t\t\t\t\t\tpaddingTopRight: new _point.Point(5, 5),\n\t\t\t\t\t\tpaddingBottomLeft: new _point.Point(0, 0),\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t};\n\t\t\t\t\tfor (i in options) {\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\tpaddingTopNegRight = new _point.Point(-opts.paddingTopRight.x, opts.paddingTopRight.y);\n\t\t\t\t\tpaddingBottomNegLeft = new _point.Point(-opts.paddingBottomLeft.x, opts.paddingBottomLeft.y);\n\t\t\t\t\treturn function (rectangleList, indexesOfNews) {\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle,\n\t\t\t\t\t\t    i,\n\t\t\t\t\t\t    boundaryPoints = [boundRect.getRightTopPoint()];\n\t\t\t\t\t\trectangleList.forEach(function (rect, index) {\n\t\t\t\t\t\t\tvar position,\n\t\t\t\t\t\t\t    isValid = false;\n\t\t\t\t\t\t\tfor (i = 0; i < boundaryPoints.length; i++) {\n\t\t\t\t\t\t\t\tposition = new _point.Point(boundaryPoints[i].x - rect.size.x, i > 0 ? boundaryPoints[i - 1].y : boundRect.position.y).add(paddingTopNegRight);\n\t\t\t\t\t\t\t\tif (isValid = position.x > rect.position.x) {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!isValid) {\n\t\t\t\t\t\t\t\tposition = new _point.Point(boundRect.getP2().x, boundaryPoints[boundaryPoints.length - 1].y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trect.position = position;\n\t\t\t\t\t\t\tif (opts.removable && rect.getLeftBottomPoint().y > boundRect.getP4().y) {\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tboundaryPoints = _point.mathPoint.addPointToBoundPoints(boundaryPoints, rect.getP4().add(paddingBottomNegLeft), true);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t};\n\t\n\tfunction sortingFactory(type) {\n\t\tswitch (type) {\n\t\t\tcase positionType.notCrossing:\n\t\t\t\treturn function () {\n\t\t\t\t\treturn function (oldObjsList, newObjs, indexOfNews) {\n\t\t\t\t\t\tvar objsList = oldObjsList.concat(newObjs);\n\t\t\t\t\t\tnewObjs.forEach(function (obj) {\n\t\t\t\t\t\t\tindexOfNews.push(objsList.indexOf(obj));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn objsList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase positionType.floatLeft:\n\t\t\tcase positionType.floatRight:\n\t\t\t\treturn function (radius, getLength, options) {\n\t\t\t\t\tvar i,\n\t\t\t\t\t    opts = {\n\t\t\t\t\t\tgetPosition: function getPosition(obj) {\n\t\t\t\t\t\t\treturn obj.position;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tfor (i in options) {\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function (oldObjsList, newObjs, indexOfNews) {\n\t\t\t\t\t\tvar newList = oldObjsList.concat(),\n\t\t\t\t\t\t    listOldPosition;\n\t\t\t\t\t\tlistOldPosition = oldObjsList.map(opts.getPosition);\n\t\t\t\t\t\tnewObjs.forEach(function (newObj) {\n\t\t\t\t\t\t\tvar index = _point.mathPoint.indexOfNearPoint(listOldPosition, opts.getPosition(newObj), radius, getLength);\n\t\t\t\t\t\t\tif (index === -1) {\n\t\t\t\t\t\t\t\tindex = newList.length;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindex = newList.indexOf(oldObjsList[index]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnewList.splice(index, 0, newObj);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewObjs.forEach(function (newObj) {\n\t\t\t\t\t\t\tindexOfNews.push(newList.indexOf(newObj));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn newList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t};\n\t\n\texports.positionType = positionType;\n\texports.sortingFactory = sortingFactory;\n\texports.positionFactory = positionFactory;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.targetManagerFactory = exports.TargetManager = exports.targetManagers = undefined;\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _draggable = __webpack_require__(4);\n\t\n\tvar _target = __webpack_require__(7);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Dragee = { util: _util2.default, Draggable: _draggable.Draggable, Target: _target.Target }; //todo remove after refactore\n\t\n\tvar targetManagers = [];\n\t\n\tfunction TargetManager(element, draggables, targets, options) {\n\t\tvar i;\n\t\tthis.element = element;\n\t\tthis.draggables = draggables;\n\t\tthis.targets = targets;\n\t\ttargetManagers.push(this);\n\t\tthis.options = {\n\t\t\ttimeEnd: 400,\n\t\t\ttimeWaitForRefresh: 500\n\t\t};\n\t\tfor (i in options) {\n\t\t\tif (options.hasOwnProperty(i)) {\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.onChange = Dragee.util.triggerFactory({ context: this });\n\t\tif (options && options.onChange) {\n\t\t\tthis.onChange.add(options.onChange);\n\t\t}\n\t\tthis.init();\n\t}\n\t\n\tTargetManager.prototype.init = function () {\n\t\tvar that = this;\n\t\tthis.draggables.forEach(function (draggable) {\n\t\t\tdraggable.onEnd.add(function () {\n\t\t\t\treturn that.onEnd(this);\n\t\t\t});\n\t\t});\n\t};\n\t\n\tTargetManager.prototype.addDraggable = function (draggable) {\n\t\tvar that = this;\n\t\n\t\tthis.draggables.push(draggable);\n\t\tdraggable.onEnd.unshift(function () {\n\t\t\treturn that.onEnd(this);\n\t\t});\n\t};\n\t\n\tTargetManager.prototype.onEnd = function (draggable) {\n\t\tvar shotTargets = this.targets.filter(function (target) {\n\t\t\treturn target.draggables.indexOf(draggable) !== -1;\n\t\t}).filter(function (target) {\n\t\t\treturn target.catchDraggable(draggable);\n\t\t}).sort(function (a, b) {\n\t\t\treturn a.getRectangle().getSquare() - b.getRectangle().getSquare();\n\t\t});\n\t\n\t\tif (shotTargets.length) {\n\t\t\tshotTargets[0].onEnd(draggable);\n\t\t} else {\n\t\t\tdraggable.move(draggable.initPosition, this.options.timeEnd, true, true);\n\t\t}\n\t\tthis.onChange.fire();\n\t\treturn true;\n\t};\n\t\n\tTargetManager.prototype.reset = function () {\n\t\tthis.targets.forEach(function (target) {\n\t\t\ttarget.reset();\n\t\t});\n\t};\n\t\n\tTargetManager.prototype.refresh = function () {\n\t\tthis.draggables.forEach(function (draggable) {\n\t\t\tdraggable.refresh();\n\t\t});\n\t\tthis.targets.forEach(function (target) {\n\t\t\ttarget.refresh();\n\t\t});\n\t};\n\t\n\tTargetManager.prototype.__defineGetter__(\"positions\", function () {\n\t\treturn this.targets.map(function (target) {\n\t\t\treturn target.innerDraggables.map(function (draggable) {\n\t\t\t\treturn this.draggables.indexOf(draggable);\n\t\t\t}, this);\n\t\t}, this);\n\t});\n\t\n\tTargetManager.prototype.__defineSetter__(\"positions\", function (positions) {\n\t\tvar message = \"wrong array length\";\n\t\tif (positions.length === this.targets.length) {\n\t\t\tthis.targets.forEach(function (target) {\n\t\t\t\ttarget.reset();\n\t\t\t}, this);\n\t\t\tpositions.forEach(function (targetIndexes, i) {\n\t\t\t\ttargetIndexes.forEach(function (index) {\n\t\t\t\t\tthis.targets[i].add(this.draggables[index]);\n\t\t\t\t}, this);\n\t\t\t}, this);\n\t\t} else {\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\t\n\tfunction targetManagerFactory(element, draggableElements, targetElements, options) {\n\t\tvar draggables, targets, draggableOptions, targetOptions, managerOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\ttargetOptions = options.target || {};\n\t\tmanagerOptions = options.manager || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || element;\n\t\ttargetOptions.parent = targetOptions.parent || element;\n\t\tdraggableElements = Array.prototype.slice.call(draggableElements);\n\t\ttargetElements = Array.prototype.slice.call(targetElements);\n\t\n\t\tdraggables = draggableElements.map(function (element) {\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\t\n\t\ttargets = targetElements.map(function (el) {\n\t\t\treturn new Dragee.Target(element, draggables, targetOptions);\n\t\t});\n\t\treturn new TargetManager(element, draggables, targets, managerOptions);\n\t}\n\t\n\texports.targetManagers = targetManagers;\n\texports.TargetManager = TargetManager;\n\texports.targetManagerFactory = targetManagerFactory;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.Spider = exports.spiders = undefined;\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar _bound = __webpack_require__(5);\n\t\n\tvar _draggable = __webpack_require__(4);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Dragee = { util: _util2.default, boundFactory: _bound.boundFactory, boundType: _bound.boundType, Draggable: _draggable.Draggable };\n\tvar spiders = [];\n\t\n\tfunction Spider(area, elements, options) {\n\t\tvar i,\n\t\t    areaRectangle = _point.mathPoint.createRectangleFromElement(area, area);\n\t\tthis.options = {\n\t\t\tangle: 0,\n\t\t\tdAngle: 2 * Math.PI / elements.length,\n\t\t\tcenter: areaRectangle.getCenter(),\n\t\t\tstartRadius: 50,\n\t\t\tendRadius: areaRectangle.getMinSide() / 2,\n\t\t\tlineWidth: 2,\n\t\t\tstrokeStyle: \"#ff5577\",\n\t\t\tfillStyle: \"rgba(150,255,50,0.8)\"\n\t\t};\n\t\n\t\tfor (i in options) {\n\t\t\tif (options.hasOwnProperty(i)) {\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tspiders.push(this);\n\t\tthis.area = area;\n\t\tthis.areaRectangle = areaRectangle;\n\t\tthis.init(elements);\n\t}\n\t\n\tSpider.prototype.init = function (elements) {\n\t\tvar that = this;\n\t\tthis.canvas = Dragee.util.createCanvas(this.area, this.areaRectangle);\n\t\tthis.context = this.canvas.getContext(\"2d\");\n\t\n\t\tthis.draggables = elements.map(function (element, i) {\n\t\t\tvar angle = this.options.angle + i * this.options.dAngle,\n\t\t\t    halfSize = _point.mathPoint.getSizeOfElement(element).mult(0.5),\n\t\t\t    start = _point.mathPoint.getPointFromRadialSystem(angle, this.options.startRadius, this.options.center).sub(halfSize),\n\t\t\t    end = _point.mathPoint.getPointFromRadialSystem(angle, this.options.endRadius, this.options.center).sub(halfSize),\n\t\t\t    bound = Dragee.boundFactory(Dragee.boundType.line)(start, end);\n\t\n\t\t\treturn new Dragee.Draggable(element, {\n\t\t\t\tparent: this.area,\n\t\t\t\tbound: bound,\n\t\t\t\tposition: start,\n\t\t\t\tonMove: function onMove() {\n\t\t\t\t\tthat.draw();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t}, this);\n\t\n\t\tthis.isInit = true;\n\t\tthis.draw();\n\t};\n\t\n\tSpider.prototype.draw = function () {\n\t\tvar point, i;\n\t\tif (!this.isInit) {\n\t\t\treturn;\n\t\t}\n\t\tthis.context.clearRect(0, 0, this.areaRectangle.size.x, this.areaRectangle.size.y);\n\t\tthis.context.beginPath();\n\t\tpoint = this.draggables[0].getCenter();\n\t\tthis.context.moveTo(point.x, point.y);\n\t\tfor (i = 0; i < this.draggables.length; i++) {\n\t\t\tpoint = this.draggables[i].getCenter();\n\t\t\tthis.context.lineTo(point.x, point.y);\n\t\t}\n\t\tthis.context.closePath();\n\t\tthis.context.lineWidth = this.options.lineWidth;\n\t\tthis.context.strokeStyle = this.options.strokeStyle;\n\t\tthis.context.stroke();\n\t\tthis.context.fillStyle = this.options.fillStyle;\n\t\tthis.context.fill();\n\t};\n\t\n\texports.spiders = spiders;\n\texports.Spider = Spider;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ArcSlider = exports.arcSliders = undefined;\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar _draggable = __webpack_require__(4);\n\t\n\tvar _positioning = __webpack_require__(8);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Dragee = { util: _util2.default, boundType: boundType, boundFactory: boundFactory, Draggable: _draggable.Draggable }; //todo remove after refactore\n\t\n\tvar arcSliders = [];\n\t\n\tfunction ArcSlider(area, element, options) {\n\t\tvar i,\n\t\t    areaRectangle = _point.mathPoint.createRectangleFromElement(area, area),\n\t\t    halfSize = _point.mathPoint.getSizeOfElement(element).mult(0.5);\n\t\tthis.options = {\n\t\t\tcenter: areaRectangle.getCenter(),\n\t\t\tradius: areaRectangle.getMinSide() / 2,\n\t\t\tstartAngle: Math.PI,\n\t\t\tendAngle: 0,\n\t\t\tangles: [Math.PI, -Math.PI / 4, 0, Math.PI / 4, Math.PI / 2],\n\t\t\tonChange: function onChange() {},\n\t\t\ttime: 500\n\t\t};\n\t\tfor (i in options) {\n\t\t\tif (options.hasOwnProperty(i)) {\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.shiftedCenter = this.options.center.sub(halfSize);\n\t\tthis.onChange = this.options.onChange;\n\t\tarcSliders.push(this);\n\t\tthis.area = area;\n\t\tthis.init(element);\n\t}\n\t\n\tArcSlider.prototype.init = function (element) {\n\t\tvar that = this,\n\t\t    angle = this.options.startAngle,\n\t\t    position = _point.mathPoint.getPointFromRadialSystem(angle, this.options.radius, this.shiftedCenter),\n\t\t    bound = Dragee.boundFactory(Dragee.boundType.arc)(that.shiftedCenter, that.options.radius, this.options.startAngle, this.options.endAngle);\n\t\n\t\tthis.angle = angle;\n\t\tthis.draggable = new Dragee.Draggable(element, {\n\t\t\tparent: this.area,\n\t\t\tbound: bound,\n\t\t\tposition: position,\n\t\t\tonMove: function onMove() {\n\t\t\t\tthat.change();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t};\n\t\n\tArcSlider.prototype.updateAngle = function () {\n\t\tthis.angle = _point.mathPoint.getAngle(this.shiftedCenter, this.draggable.position);\n\t};\n\t\n\tArcSlider.prototype.change = function () {\n\t\tthis.updateAngle();\n\t\t//\t\tvar angle = mathPoint.getNearestAngle(this.options.angles, this.angle);\n\t\t//\t\tthis.setAngle(angle,this.options.time);\n\t\tthis.onChange(this.angle);\n\t};\n\t\n\tArcSlider.prototype.setAngle = function (angle, time) {\n\t\tthis.angle = _point.mathPoint.normalizeAngle(angle, position);\n\t\tvar position = _point.mathPoint.getPointFromRadialSystem(this.angle, this.options.radius, this.shiftedCenter);\n\t\tthis.draggable.move(position, time || 0, true, true);\n\t\tthis.onChange(this.angle);\n\t};\n\t\n\texports.arcSliders = arcSliders;\n\texports.ArcSlider = ArcSlider;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Chart = exports.charts = undefined;\n\t\n\tvar _util = __webpack_require__(3);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar _draggable = __webpack_require__(4);\n\t\n\tvar _positioning = __webpack_require__(8);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Dragee = { util: _util2.default, boundType: boundType, boundFactory: boundFactory, Draggable: _draggable.Draggable }; //todo remove after refactore\n\t\n\tvar isTouch = 'ontouchstart' in window;\n\tvar charts = [];\n\t\n\tfunction getArrayWithBoundIndexes(index, length) {\n\t    var retIndexes = [];\n\t    if (index != -1) {\n\t        retIndexes.push(index);\n\t        retIndexes.push((index + 1) % length);\n\t    }\n\t    return retIndexes;\n\t}\n\t\n\tfunction Chart(area, elements, options) {\n\t    var i,\n\t        areaRectangle = _point.mathPoint.createRectangleFromElement(area, area);\n\t    this.options = {\n\t        center: areaRectangle.getCenter(),\n\t        radius: areaRectangle.getMinSide() / 2,\n\t        touchRadius: areaRectangle.getMinSide() / 2,\n\t        boundAngle: Math.PI / 9,\n\t        fillStyles: Dragee.util.range(0, elements.length).map(function () {\n\t            return Dragee.util.randomColor();\n\t        }),\n\t        initAngles: Dragee.util.range(-90, 270, 360 / elements.length).map(function (angle) {\n\t            return _point.mathPoint.toRadian(angle);\n\t        }),\n\t        onDraw: function onDraw() {},\n\t        limitImg: null,\n\t        limitImgOffset: new _point.Point(0, 0),\n\t        isSelectable: false\n\t    };\n\t    for (i in options) {\n\t        if (options.hasOwnProperty(i)) {\n\t            this.options[i] = options[i];\n\t        }\n\t    }\n\t\n\t    charts.push(this);\n\t    this.onDraw = this.options.onDraw;\n\t    this.area = area;\n\t    this.areaRectangle = areaRectangle;\n\t    this.init(elements);\n\t}\n\t\n\tChart.prototype.init = function (elements) {\n\t    var that = this;\n\t    this.canvas = Dragee.util.createCanvas(this.area, this.areaRectangle);\n\t    this.context = this.canvas.getContext(\"2d\");\n\t    this.draggables = elements.map(function (element, i) {\n\t        var angle = this.options.initAngles[i],\n\t            halfSize = _point.mathPoint.getSizeOfElement(element).mult(0.5),\n\t            position = _point.mathPoint.getPointFromRadialSystem(angle, this.options.touchRadius, this.options.center.sub(halfSize)),\n\t            bound = Dragee.boundFactory(Dragee.boundType.arc)(that.options.center.sub(halfSize), that.options.touchRadius, that.getBoundAngle(i, false), that.getBoundAngle(i, true));\n\t\n\t        return new Dragee.Draggable(element, {\n\t            parent: this.area,\n\t            bound: bound,\n\t            position: position,\n\t            onMove: function onMove() {\n\t                that.draw();\n\t                return true;\n\t            }\n\t        });\n\t    }, this);\n\t\n\t    this.isInit = true;\n\t    if (this.options.isSelectable) {\n\t        this.initSelect();\n\t    }\n\t    this.draw();\n\t};\n\t\n\tChart.prototype.initSelect = function () {\n\t    var that = this;\n\t    this.setActiveArc(-1);\n\t\n\t    this.canvas.addEventListener(_draggable.events.start, function (e) {\n\t        var point = new _point.Point(isTouch ? e.changedTouches[0].pageX : e.clientX, isTouch ? e.changedTouches[0].pageY : e.clientY),\n\t            index;\n\t\n\t        if (!that.canvasOffset) {\n\t            that.canvasOffset = _point.mathPoint.getOffset(that.canvas);\n\t        }\n\t\n\t        point = point.sub(that.canvasOffset);\n\t        index = that.getArcOnPoint(point);\n\t        if (index != -1) {\n\t            that.setActiveArc(that.activeArcIndex !== index ? index : -1);\n\t        }\n\t    });\n\t};\n\t\n\tChart.prototype.updateAngles = function () {\n\t    this.angles = this.draggables.map(function (draggable) {\n\t        var halfSize = draggable.getSize().mult(0.5);\n\t        return _point.mathPoint.getAngle(this.options.center.sub(halfSize), draggable.position);\n\t    }, this);\n\t};\n\t\n\tChart.prototype.getBoundAngle = function (index, isClossing) {\n\t    var that = this,\n\t        sign = isClossing ? 1 : -1;\n\t\n\t    return function () {\n\t        var i = (index + sign) % that.angles.length;\n\t        if (i < 0) {\n\t            i += that.angles.length;\n\t        }\n\t        return _point.mathPoint.normalizeAngle(that.angles[i] - sign * that.options.boundAngle);\n\t    };\n\t};\n\t\n\tChart.prototype.draw = function () {\n\t    if (!this.isInit) {\n\t        return;\n\t    }\n\t\n\t    this.updateAngles();\n\t    this.context.clearRect(0, 0, this.areaRectangle.size.x, this.areaRectangle.size.y);\n\t    this.draggables.forEach(function (draggable, index) {\n\t        this.drawArc(this.context, this.options.center, this.options.radius, index);\n\t    }, this);\n\t\n\t    this.draggables.forEach(function (draggable, index) {\n\t        var enableIndexes;\n\t        if (this.options.isSelectable) {\n\t            enableIndexes = getArrayWithBoundIndexes(this.activeArcIndex, this.draggables.length);\n\t            if (enableIndexes.indexOf(index) !== -1) {\n\t                this.drawLimitImg(index);\n\t            }\n\t        } else {\n\t            this.drawLimitImg(index);\n\t        }\n\t    }, this);\n\t    this.onDraw();\n\t};\n\t\n\tChart.prototype.createClone = function (element, options) {\n\t    var i,\n\t        canvas,\n\t        context,\n\t        opts,\n\t        rectangle,\n\t        cloneObj,\n\t        that = this;\n\t    if (!this.isInit) {\n\t        return;\n\t    }\n\t    rectangle = _point.mathPoint.createRectangleFromElement(element, element);\n\t    opts = {\n\t        center: rectangle.getCenter(),\n\t        radius: rectangle.getMinSide() / 2,\n\t        fillStyles: this.options.fillStyles\n\t    };\n\t    for (i in options) {\n\t        if (options.hasOwnProperty(i)) {\n\t            opts[i] = options[i];\n\t        }\n\t    }\n\t    canvas = Dragee.util.createCanvas(element, rectangle);\n\t    context = canvas.getContext(\"2d\");\n\t    cloneObj = {\n\t        draw: function draw() {\n\t            context.clearRect(0, 0, rectangle.size.x, rectangle.size.y);\n\t            that.draggables.forEach(function (draggable, index) {\n\t                that.drawArc(context, opts.center, opts.radius, index);\n\t            });\n\t        }\n\t    };\n\t    cloneObj.draw();\n\t    return cloneObj;\n\t};\n\t\n\tChart.prototype.getFillStyle = function (index) {\n\t    if (typeof this.options.fillStyles[index] === \"function\") {\n\t        this.options.fillStyles[index] = this.options.fillStyles[index].call(this);\n\t    }\n\t    return this.options.fillStyles[index];\n\t};\n\t\n\tChart.prototype.drawArc = function (context, center, radius, index) {\n\t    var startAngle = this.angles[index],\n\t        endAngle = this.angles[(index + 1) % this.angles.length],\n\t        color = this.getFillStyle(index);\n\t\n\t    context.beginPath();\n\t    context.moveTo(center.x, center.y);\n\t    context.arc(center.x, center.y, radius, startAngle, endAngle, false);\n\t    context.lineTo(center.x, center.y);\n\t    context.closePath();\n\t    context.fillStyle = color;\n\t    context.fill();\n\t};\n\t\n\tChart.prototype.drawLimitImg = function (index) {\n\t    var angle, point, img;\n\t    if (this.options.limitImg) {\n\t        img = this.options.limitImg instanceof Array ? this.options.limitImg[index] : this.options.limitImg;\n\t    }\n\t    if (!img) {\n\t        return;\n\t    }\n\t    angle = _point.mathPoint.normalizeAngle(this.angles[index]);\n\t    point = new _point.Point(0, -img.height / 2);\n\t    point = point.add(this.options.limitImgOffset);\n\t    this.context.translate(this.areaRectangle.size.x / 2, this.areaRectangle.size.y / 2);\n\t    this.context.rotate(angle);\n\t    this.context.drawImage(img, point.x, point.y);\n\t    this.context.setTransform(1, 0, 0, 1, 0, 0);\n\t};\n\t\n\tChart.prototype.getAnglesDiff = function () {\n\t    var baseAngle = this.angles[0],\n\t        angles = this.angles.slice(1);\n\t\n\t    angles.push(baseAngle);\n\t    return angles.map(function (angle) {\n\t        var diffAngle = _point.mathPoint.normalizeAngle(angle - baseAngle);\n\t        baseAngle = angle;\n\t        return diffAngle;\n\t    });\n\t};\n\t\n\tChart.prototype.getPercent = function () {\n\t    return this.getAnglesDiff().map(function (diffAngle) {\n\t        return diffAngle / (2 * Math.PI);\n\t    });\n\t};\n\t\n\tChart.prototype.getArcBisectrixs = function () {\n\t    return this.getAnglesDiff().map(function (diffAngle, i) {\n\t        return _point.mathPoint.normalizeAngle(this.angles[i] + diffAngle / 2);\n\t    }, this);\n\t};\n\t\n\tChart.prototype.getArcOnPoint = function (point) {\n\t    var angle = _point.mathPoint.getAngle(this.options.center, point),\n\t        i,\n\t        offset,\n\t        j,\n\t        radius = _point.mathPoint.getLength()(this.options.center, point);\n\t    if (radius > this.options.radius) {\n\t        return -1;\n\t    }\n\t    offset = -1;\n\t    for (i = 0; i < this.angles.length; i++) {\n\t        if (offset === -1 || this.angles[offset] > this.angles[i]) {\n\t            offset = i;\n\t        }\n\t    }\n\t    for (i = 0, j = offset; i < this.angles.length; i++, j = (i + offset) % this.angles.length) {\n\t        if (angle < this.angles[j]) {\n\t            break;\n\t        }\n\t    }\n\t    if (--j < 0) {\n\t        j += this.angles.length;\n\t    }\n\t    return j;\n\t};\n\t\n\tChart.prototype.setAngles = function (angles) {\n\t    this.angles = angles;\n\t    this.draggables.forEach(function (draggable, i) {\n\t        var angle = this.angles[i],\n\t            halfSize = draggable.getSize().mult(0.5),\n\t            position = _point.mathPoint.getPointFromRadialSystem(angle, this.options.touchRadius, this.options.center.sub(halfSize));\n\t\n\t        draggable.move(position, 0, true, true);\n\t    }, this);\n\t    this.draw();\n\t};\n\t\n\tChart.prototype.setActiveArc = function (index) {\n\t    var enableIndexes = getArrayWithBoundIndexes(index, this.draggables.length);\n\t    this.activeArcIndex = index;\n\t    this.draggables.forEach(function (draggable, i) {\n\t        draggable.enable = enableIndexes.indexOf(i) !== -1;\n\t    });\n\t    this.draw();\n\t};\n\t\n\texports.charts = charts;\n\texports.Chart = Chart;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\texports.ListSwitcher = exports.listSwitcherFactory = undefined;\n\t\n\tvar _point = __webpack_require__(2);\n\t\n\tvar _draggable = __webpack_require__(4);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tvar Dragee = { List: _list.List, Draggable: _draggable.Draggable }; //todo remove after refactore\n\t\n\tfunction ListSwitcher(draggables, options) {\n\t\toptions = options || {};\n\t\toptions.stepOn = options.stepOn || new _point.Point(-50, 0);\n\t\tDragee.List.call(this, draggables, options);\n\t}\n\t\n\textend(ListSwitcher, Dragee.List);\n\t\n\tListSwitcher.prototype.init = function () {\n\t\tvar that = this;\n\t\tthis.draggables.forEach(function (draggable) {\n\t\t\tdraggable.isOn = false;\n\t\t\tdraggable.onEnd.add(function () {\n\t\t\t\tthat.onEnd(this);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t});\n\t};\n\t\n\tListSwitcher.prototype.onEnd = function (draggable) {\n\t\tvar fixPositions = this.getCurrentFixPositionWithOff(),\n\t\t    currentIndex,\n\t\t    excangeIndex;\n\t\tcurrentIndex = this.draggables.indexOf(draggable);\n\t\texcangeIndex = _point.mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif (excangeIndex === -1 || excangeIndex === currentIndex) {\n\t\t\tthis.moveDraggable(currentIndex, draggable.position, fixPositions[currentIndex], this.options.timeEnd);\n\t\t} else {\n\t\t\tif (this.draggables[excangeIndex].isDragee) {\n\t\t\t\tthis.fixToOff(excangeIndex, fixPositions[currentIndex]);\n\t\t\t} else {\n\t\t\t\tthis.moveDraggableToOff(excangeIndex, fixPositions[currentIndex], this.options.timeExcange);\n\t\t\t}\n\t\t\tthis.moveDraggable(currentIndex, draggable.position, fixPositions[excangeIndex], this.options.timeEnd);\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\treturn true;\n\t};\n\t\n\tListSwitcher.prototype.moveDraggable = function (index, position, fixOffPosition, time) {\n\t\tvar positions = [fixOffPosition, fixOffPosition.add(this.options.stepOn)],\n\t\t    isOn = _point.mathPoint.indexOfNearPoint(positions, position, -1, _point.mathPoint.getLength({ x: true }));\n\t\tif (this.draggables[index].isOn !== !!isOn) {\n\t\t\tthis.draggables[index].isOn = !!isOn;\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\tthis.draggables[index].move(positions[isOn], time, true);\n\t};\n\t\n\tListSwitcher.prototype.fixToOff = function (index, fixOffPosition) {\n\t\tthis.draggables[index].isOn = false;\n\t\tthis.draggables[index].fixPosition = fixOffPosition;\n\t};\n\t\n\tListSwitcher.prototype.moveDraggableToOff = function (index, fixOffPosition, time) {\n\t\tthis.draggables[index].isOn = false;\n\t\tthis.draggables[index].move(fixOffPosition, time, true);\n\t};\n\t\n\tListSwitcher.prototype.getCurrentFixPositionWithOff = function () {\n\t\treturn this.draggables.map(function (draggable) {\n\t\t\treturn draggable.isOn ? draggable.fixPosition.sub(this.options.stepOn) : draggable.fixPosition.clone();\n\t\t}, this);\n\t};\n\t\n\tListSwitcher.prototype.getSortedDraggables = function () {\n\t\treturn this.draggables.map(function (draggable) {\n\t\t\treturn draggable.initPosition;\n\t\t}).map(function (position) {\n\t\t\treturn this.draggables.filter(function (draggable) {\n\t\t\t\treturn draggable.fixPosition.compare(position) || draggable.fixPosition.compare(position.add(this.options.stepOn));\n\t\t\t}, this)[0];\n\t\t}, this);\n\t};\n\t\n\tListSwitcher.prototype.reset = function () {\n\t\tthis.draggables.forEach(function (draggable) {\n\t\t\tdraggable.move(draggable.initPosition, 0, true, false);\n\t\t\tdraggable.isOn = false;\n\t\t});\n\t};\n\t\n\tListSwitcher.prototype.__defineGetter__(\"positions\", function () {\n\t\treturn this.draggables.map(function (draggable) {\n\t\t\tvar position = draggable.fixPosition.clone();\n\t\t\tposition.isOn = draggable.isOn;\n\t\t\treturn position;\n\t\t});\n\t});\n\t\n\tListSwitcher.prototype.__defineSetter__(\"positions\", function (positions) {\n\t\tvar message = \"wrong array length\";\n\t\tif (positions.length === this.draggables.length) {\n\t\t\tpositions.forEach(function (point, i) {\n\t\t\t\tthis.draggables[i].isOn = point.isOn;\n\t\t\t\tthis.draggables[i].move(point, 0, true, true);\n\t\t\t}, this);\n\t\t} else {\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\t\n\tfunction listSwitcherFactory(element, draggableElements, options) {\n\t\tvar draggables, draggableOptions, listOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\tlistOptions = options.list || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || element;\n\t\tdraggableElements = Array.prototype.slice.call(draggableElements);\n\t\n\t\tdraggables = draggableElements.map(function (element) {\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\t\treturn new ListSwitcher(draggables, listOptions);\n\t}\n\t\n\texports.listSwitcherFactory = listSwitcherFactory;\n\texports.ListSwitcher = ListSwitcher;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** dragee.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c09e3d7420b59e24c6a7\n **/","import './expandnative'\nimport {Point} from './point'\nimport {Draggable} from './draggable'\nimport {List, listFactory} from './list'\nimport {targets, Target} from './target'\nimport {targetManagers, TargetManager, targetManagerFactory} from './targetManager'\nimport {positionType, sortingFactory, positionFactory } from './positioning'\nimport {boundType, boundFactory} from './bound'\nimport {spiders, Spider} from './spider'\nimport {arcSliders, ArcSlider} from './arcslider'\nimport {charts, Chart} from './chart'\nimport {listSwitcherFactory, ListSwitcher} from './listswitcher'\n\nglobal.Point = Point\n\nexport { Draggable,\n  List, listFactory,\n  targets, Target,\n  targetManagers, TargetManager, targetManagerFactory,\n  positionType, sortingFactory, positionFactory,\n  boundType, boundFactory,\n  spiders, Spider,\n  arcSliders, ArcSlider,\n  charts, Chart,\n  listSwitcherFactory, ListSwitcher,\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","var clone = function (o) {\n    function c(o) {\n        for (var i in o) {\n            this[i] = o[i];\n        }\n    }\n    return new c(o);\n}\n\n\n/************ Array **************/\n\nif (!Array.prototype.forEach){\n    Array.prototype.forEach = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t)\n                fun.call(thisp, t[i], i, t);\n        }\n    };\n}\n\nif (!Array.prototype.filter){\n    Array.prototype.filter = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var res = [];\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t){\n                var val = t[i]; // in case fun mutates this\n                if (fun.call(thisp, val, i, t))\n                    res.push(val);\n            }\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.every){\n        Array.prototype.every = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n        throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t && !fun.call(thisp, t[i], i, t))\n                return false;\n        }\n        return true;\n    };\n}\n\nif (!Array.prototype.map){\n    Array.prototype.map = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var res = new Array(len);\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t)\n                res[i] = fun.call(thisp, t[i], i, t);\n        }\n        return res;\n    };\n}\n\nif (!Array.prototype.some){\n    Array.prototype.some = function(fun /*, thisp */){\n        if (this === void 0 || this === null)\n            throw new TypeError();\n        var t = Object(this);\n        var len = t.length >>> 0;\n        if (typeof fun !== \"function\")\n            throw new TypeError();\n        var thisp = arguments[1];\n        for (var i = 0; i < len; i++){\n            if (i in t && fun.call(thisp, t[i], i, t))\n                return true;\n        }\n        return false;\n    };\n}\n\nif (!Array.prototype.removeItem){\n    Array.prototype.removeItem = function(val) {\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === val) {\n                this.splice(i, 1);\n                i--;\n            }\n        }\n        return this;\n    }\n}\n\n/*********** HTMLElement ***************/\nElement.prototype.hasClass = function(c){\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\");\n    return (re.test(this.className));\n}\n\nElement.prototype.addClass = function(c){\n    if (this.hasClass(c)) return this;\n    this.className = (this.className + \" \" + c).replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n    return this;\n}\n\nElement.prototype.removeClass = function(c){\n    var re = new RegExp(\"(^|\\\\s)\" + c + \"(\\\\s|$)\", \"g\")\n    this.className = this.className.replace(re, \"$1\").replace(/\\s+/g, \" \").replace(/(^ | $)/g, \"\");\n    return this;\n}\n\nHTMLElement.prototype.appbeginChild = function(node) {\n    this.firstChild ? this.insertBefore(node, this.firstChild) : this.appendChild(node);\n}\n\nHTMLElement.prototype.exchange = function(refNode) {\n    var tempParentNode = refNode.parentNode;\n    var tempBeforeNode = refNode.nextElementSibling;\n    this.parentNode.insertBefore(refNode,this);\n    if(tempBeforeNode)\n        tempParentNode.insertBefore(this,tempBeforeNode);\n    else\n        tempParentNode.appendChild(this);\n\n    return refNode;\n}\n\nvar fullOffset = function(element, axis, parent_id){\n    var tor = 0;\n    while((element) && (element.id!=parent_id)){  //&& (element!=\"\")\n        if( axis == \"x\" )\n        {\n            if(element.offsetLeft)\n                tor += element.offsetLeft;\n        }\n        if( axis == \"y\" )\n        {\n            if(element.offsetTop)\n                tor += element.offsetTop;\n        }\n            element = element.parentNode;\n    }\n    return tor;\n}\n\n/*********************** 00P *************************/\nvar extend = function(Child, Parent) {\n    var F = function() { }\n    F.prototype = Parent.prototype;\n    Child.prototype = new F();\n    Child.prototype.constructor = Child;\n    Child.superclass = Parent.prototype;\n}\n\nvar augment = function(receivingClass, givingClass) {\n    /* only provide certain methods */\n    if (arguments[2]) {\n        for (var i=2, len=arguments.length; i<len; i++) {\n            receivingClass.prototype[arguments[i]] = givingClass.prototype[arguments[i]];\n        }\n    }\n    /* provide all methods*/\n    else {\n        for (methodName in givingClass.prototype) {\n            /* check to make sure the receiving class doesn't\n               have a method of the same name as the one currently\n               being processed */\n            if (!receivingClass.prototype[methodName]) {\n                receivingClass.prototype[methodName] = givingClass.prototype[methodName];\n            }\n        }\n    }\n}\n/**************************************************/\naugment(NodeList,Array,'forEach');\n\n/**************************************************/\nMath.getNearIndex = function(arr, val){\n    var delta = Math.abs(arr[0] - val);\n    var index = 0;\n    for(var i=0; i<arr.length; i++){\n        var temp = Math.abs(arr[i] - val);\n        if(temp<delta){\n            delta = temp;\n            index = i;\n        }\n    }\n    return index;\n}\n\nMath.getNearIndexWithCaptureRadius = function(arr, radius, val){\n    var delta=Math.abs(arr[0]-val);\n    var index=0;\n    for(var i=0;i<arr.length;i++){\n        var temp=Math.abs(arr[i]-val);\n        if(temp<delta){\n            delta=temp;\n            index=i;\n        }\n    }\n    if(delta>radius){\n        return -1;\n    }\n    return index;\n}\n\nMath.bound = function(min, max, val){\n    //console.log(min,max,val)\n    return Math.max(min,Math.min(max,val));\n}\nMath.boundPoint = function(min, max, val){\n    var x = Math.max(min.x, Math.min(max.x, val.x));\n    var y = Math.max(min.y, Math.min(max.y, val.y));\n    return new Point(x, y);\n}\nMath.getLength = function(p1, p2){\n    var dx = p1.x - p2.x;\n    var dy = p1.y - p2.y;\n    return Math.sqrt(dx*dx + dy*dy);\n}\n\nMath.toRadian = function(angle){\n    return ((angle % 361) * Math.PI / 180);\n}\n/********************************************/\n\nString.prototype.substrend = function(length) {\n    return this.substr(0, this.length - length);\n}\n/********************************************/\n\nfunction XmlHttpRequest() {\n    if (window.XMLHttpRequest) {\n        xmlhttp = new XMLHttpRequest();\n    } else if (window.ActiveXObject) {\n        xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    if (xmlhttp == null) {\n        alert(\"Your browser does not support XMLHTTP.\");\n    }\n    return xmlhttp;\n}\n\nwindow.requestAnimationFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          window.oRequestAnimationFrame      ||\n          window.msRequestAnimationFrame     ||\n          function(/* function */ callback, /* DOMElement */ element){\n            window.setTimeout(callback, 1000 / 60);\n          };\n})();\n\ntry {\n    if(!Object.prototype.__defineGetter__ &&\n    Object.defineProperty({}, \"x\", { get: function() { return true } }).x) {\n        Object.defineProperty(Object.prototype, \"__defineGetter__\",\n     { enumerable: false, configurable: true,\n        value: function(name, func) {\n            Object.defineProperty(this, name,\n             { get: func, enumerable: true, configurable: true });\n        }\n     });\n        Object.defineProperty(Object.prototype, \"__defineSetter__\",\n     { enumerable: false, configurable: true,\n        value: function(name, func) {\n            Object.defineProperty(this, name,\n             { set: func, enumerable: true, configurable: true });\n        }\n     });\n    }\n} catch(defPropException) { /*Do nothing if an exception occurs*/ };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/expandnative.js\n **/","'use strict';\n    import util from './util'\n    var mathPoint;\n    var Dragee = { util };//todo remove after refactore\n\n\n\n    /*********************/\n    function Point(x, y){\n        this.x = x;\n        this.y = y;\n    }\n\n    Point.prototype.toString = function(){\n        return '{x=' + this.x + ',y=' + this.y + '}';\n    };\n    Point.prototype.add = function(p){\n        return new Point(this.x + p.x, this.y + p.y);\n    };\n    Point.prototype.sub = function(p){\n        return new Point(this.x - p.x, this.y - p.y);\n    };\n    Point.prototype.mult = function(k){\n        return new Point(this.x * k, this.y * k);\n    };\n    Point.prototype.negative = function(){\n        return new Point(-this.x, -this.y);\n    };\n    Point.prototype.compare = function(p){\n        return (this.x === p.x && this.y === p.y);\n    };\n    Point.prototype.clone = function(){\n        return new Point(this.x, this.y);\n    };\n\n    /****************/\n    function Rectangle(position, size){\n        this.position = position;\n        this.size = size;\n    }\n\n    Rectangle.prototype.getP1 = function(){\n        return this.position;\n    };\n    Rectangle.prototype.getP2 = function(){\n        return new Point(this.position.x + this.size.x, this.position.y);\n    };\n    Rectangle.prototype.getP3 = function(){\n        return this.position.add(this.size);\n    };\n    Rectangle.prototype.getP4 = function(){\n        return new Point(this.position.x, this.position.y + this.size.y);\n    };\n    Rectangle.prototype.getCenter = function(){\n        return this.position.add(this.size.mult(0.5));\n    };\n    Rectangle.prototype.or = function(rect){\n        var position = new Point(Math.min(this.position.x, rect.position.x), Math.min(this.position.y, rect.position.y)), size = (new Point(Math.max(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.max(this.position.y + this.size.y, rect.position.y + rect.size.y))).sub(position);\n        return new Rectangle(position, size);\n    };\n    Rectangle.prototype.and = function(rect){\n        var position = new Point(Math.max(this.position.x, rect.position.x), Math.max(this.position.y, rect.position.y)), size = (new Point(Math.min(this.position.x + this.size.x, rect.position.x + rect.size.x), Math.min(this.position.y + this.size.y, rect.position.y + rect.size.y))).sub(position);\n        if(size.x <= 0 || size.y <= 0){\n            return null;\n        }\n        return new Rectangle(position, size);\n    };\n\tRectangle.prototype.includePoint = function(p){\n\t\treturn !(this.position.x > p.x || this.position.x + this.size.x < p.x || this.position.y > p.y || this.position.y + this.size.y < p.y);\n\t};\n\tRectangle.prototype.includeRectangle = function(rectangle){\n\t\treturn this.includePoint(rectangle.position) && this.includePoint(rectangle.getP3());\n\t};\n    Rectangle.prototype.moveToBound = function(rect, axis){\n        var selAxis, crossRectangle, thisCenter, rectCenter, sign, offset;\n        if(axis){\n            selAxis = axis;\n        }else{\n            crossRectangle = this.and(rect);\n            if(!crossRectangle){\n                return rect;\n            }\n            selAxis = crossRectangle.size.x > crossRectangle.size.y ? \"y\" : \"x\";\n        }\n        thisCenter = this.getCenter();\n        rectCenter = rect.getCenter();\n        sign = thisCenter[selAxis] > rectCenter[selAxis] ? -1 : 1;\n        offset = sign > 0 ? this.position[selAxis] + this.size[selAxis] - rect.position[selAxis] : this.position[selAxis] - (rect.position[selAxis] + rect.size[selAxis]);\n        rect.position[selAxis] = rect.position[selAxis] + offset;\n        return rect;\n    };\n    Rectangle.prototype.getSquare = function(){\n        return this.size.x * this.size.y;\n    };\n    Rectangle.prototype.styleApply = function(el){\n        el = el || document.querySelector(\"ind\");\n        el.style.left = this.position.x + \"px\";\n        el.style.top = this.position.y + \"px\";\n        el.style.width = this.size.x + \"px\";\n        el.style.height = this.size.y + \"px\";\n    };\n    Rectangle.prototype.growth = function(size){\n        this.size = this.size.add(size);\n        this.position = this.position.add(size.mult(-0.5));\n    };\n    Rectangle.prototype.getMinSide = function(){\n        return Math.min(this.size.x, this.size.y);\n    };\n\n    /*****************/\n    mathPoint = {\n        getLength: function(options){\n            if(!options || (options.x && options.y && !options.isTransformationSpace)){\n                return function(p1, p2){\n                    var dx = p1.x - p2.x, dy = p1.y - p2.y;\n                    return Math.sqrt(dx * dx + dy * dy);\n                };\n            }else{\n                if(options.x && options.y && options.isTransformationSpace){\n                    return function(p1, p2){\n                        return Math.sqrt(Math.pow(options.x * Math.abs(p1.x - p2.x), 2) + Math.pow(options.y * Math.abs(p1.y - p2.y), 2));\n                    };\n                }else{\n                    if(options.x){\n                        return function(p1, p2){\n                            return Math.abs(p1.x - p2.x);\n                        };\n                    }else{\n                        if(options.y){\n                            return function(p1, p2){\n                                return Math.abs(p1.y - p2.y);\n                            };\n                        }\n                    }\n                }\n            }\n        },\n        indexOfNearPoint: function(arr, val, radius, getLength){\n            var size, index = 0, i, temp;\n            getLength = getLength || this.getLength();\n            if(arr.length === 0){\n                return -1;\n            }\n            size = getLength(arr[0], val);\n            for(i = 0; i < arr.length; i++){\n                temp = getLength(arr[i], val);\n                if(temp < size){\n                    size = temp;\n                    index = i;\n                }\n            }\n            if(radius >= 0 && size > radius){\n                return -1;\n            }\n            return index;\n        },\n        bound: function(min, max, val){\n            return Math.max(min, Math.min(max, val));\n        },\n        boundPoint: function(min, max, val){\n            var x = Math.max(min.x, Math.min(max.x, val.x)), y = Math.max(min.y, Math.min(max.y, val.y));\n            return new Point(x, y);\n        },\n        //Return crossing point of two lines\n        directCrossing: function(L1P1, L1P2, L2P1, L2P2){\n            var temp, k1, k2, b1, b2, x, y;\n            if(L2P1.x === L2P2.x){\n                temp = L2P1;\n                L2P1 = L1P1;\n                L1P1 = temp;\n                temp = L2P2;\n                L2P2 = L1P2;\n                L1P2 = temp;\n            }\n            if(L1P1.x === L1P2.x){\n                k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n                b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n                x = L1P1.x;\n                y = x * k2 + b2;\n                return new Point(x, y);\n            }else{\n                k1 = (L1P2.y - L1P1.y) / (L1P2.x - L1P1.x);\n                b1 = (L1P2.x * L1P1.y - L1P1.x * L1P2.y) / (L1P2.x - L1P1.x);\n                k2 = (L2P2.y - L2P1.y) / (L2P2.x - L2P1.x);\n                b2 = (L2P2.x * L2P1.y - L2P1.x * L2P2.y) / (L2P2.x - L2P1.x);\n                x = (b1 - b2) / (k2 - k1);\n                y = x * k1 + b1;\n                return new Point(x, y);\n            }\n        },\n        //Get point and check that point belong to segment of the line\n        // if not - return the nearest point of segment\n        boundOnSegment: function(LP1, LP2, P){\n            var x, y;\n            x = mathPoint.bound(Math.min(LP1.x, LP2.x), Math.max(LP1.x, LP2.x), P.x);\n            if(x != P.x){\n                y = (x === LP1.x) ? LP1.y : LP2.y;\n                P = new Point(x, y);\n            }\n            y = mathPoint.bound(Math.min(LP1.y, LP2.y), Math.max(LP1.y, LP2.y), P.y);\n            if(y != P.y){\n                x = (y === LP1.y) ? LP1.x : LP2.x;\n                P = new Point(x, y);\n            }\n            return P;\n        },\n        boundOnLine: function(A, B, P){\n            var AP = new Point(P.x - A.x, P.y - A.y),\n                AB = new Point(B.x - A.x, B.y - A.y),\n                ab2 = AB.x * AB.x + AB.y * AB.y,\n                ap_ab = AP.x * AB.x + AP.y * AB.y,\n                t = ap_ab/ab2;\n            return new Point(A.x + AB.x * t, A.y + AB.y * t);\n        },\n        getPointInLine: function(LP1, LP2, percent){\n            var dx = LP2.x - LP1.x, dy = LP2.y - LP1.y;\n            return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n        },\n        getPointInLineByLenght: function(LP1, LP2, lenght){\n            var dx = LP2.x - LP1.x, dy = LP2.y - LP1.y, percent = lenght / this.getLength()(LP1, LP2);\n            return new Point(LP1.x + percent * dx, LP1.y + percent * dy);\n        },\n        createRectangleFromElement: function(el, parent, isContentBoxSize, isConsiderTranslate){\n            var size = this.getSizeOfElement(el, isContentBoxSize)\n            return new Rectangle(this.getOffset(el, parent || el.parentNode, isConsiderTranslate), size);\n        },\n        getSizeOfElement: function(el, isContentBoxSize){\n            var width = parseInt(window.getComputedStyle(el)['width']), height = parseInt(window.getComputedStyle(el)['height']);\n            if(!isContentBoxSize){\n                width += Dragee.util.getSumValueOfStyleRule(el, [\"padding-left\", \"padding-right\", \"border-left-width\", \"border-right-width\"]);\n                height += Dragee.util.getSumValueOfStyleRule(el, [\"padding-top\", \"padding-bottom\", \"border-top-width\", \"border-bottom-width\"]);\n            }\n            return new Point(width, height);\n        },\n        getOffset: function(el, parent, isConsiderTranslate){\n            var elRect = el.getBoundingClientRect(), parentRect = parent.getBoundingClientRect();\n            return new Point(elRect.left - parentRect.left, elRect.top - parentRect.top);\n        },\n        getPointFromRadialSystem: function(angle, length, center){\n            center = center || new Point(0, 0);\n            return center.add(new Point(length * Math.cos(angle), length * Math.sin(angle)));\n        },\n        addPointToBoundPoints: function(boundpoints, point, isRight){\n            var i, result = boundpoints.filter(function(bPoint){\n                return  bPoint.y > point.y || (isRight ? bPoint.x < point.x : bPoint.x > point.x);\n            });\n            for(i = 0; i < result.length; i++){\n                if(point.y < result[i].y){\n                    result.splice(i, 0, point);\n                    return result;\n                }\n            }\n            result.push(point);\n            return result;\n        },\n        getAngle: function(p1, p2){\n            var diff = p2.sub(p1);\n            return this.normalizeAngle(Math.atan2(diff.y, diff.x));\n        },\n        toRadian: function(angle){\n            return ((angle % 360) * Math.PI / 180);\n        },\n        toDegree: function(angle){\n            return (angle * 180 / Math.PI ) % 360;\n        },\n        boundAngle: function(min, max, val){\n            var dmin,dmax;\n            if(min < max && val > min && val < max){\n                return val;\n            }else if(max < min && ( val < max || val > min )){\n                return val;\n            }else{\n                dmin = this.getAngleDiff(min,val);\n                dmax = this.getAngleDiff(max,val);\n                if(dmin < dmax){\n                    return min;\n                }else{\n                    return max;\n                }\n            }\n        },\n        getNearestAngle:function(arr,angle){\n            var i,temp,diff = Math.PI * 2 ,value;\n            for(i = 0; i < arr.length;i++){\n                temp = mathPoint.getAngleDiff(arr[i],angle);\n                if(diff < temp){\n                    diff = temp;\n                    value = arr[i];\n                }\n            }\n            return value;\n        },\n        getAngleDiff:function(alpha,beta){\n            var minAngle = Math.min(alpha,beta),\n                maxAngle =  Math.max(alpha,beta);\n            return Math.min(maxAngle - minAngle,minAngle + Math.PI*2 - maxAngle);\n        },\n        normalizeAngle: function( val){\n            while(val < 0 ){\n                val+= 2 * Math.PI;\n            }\n            while(val > 2 * Math.PI ){\n                val-= 2 * Math.PI;\n            }\n            return val;\n        },\n        distance: function(P1, P2){\n          var xs = 0;\n          var ys = 0;\n\n          xs = P2.x - P1.x;\n          xs = xs * xs;\n\n          ys = P2.y - P1.y;\n          ys = ys * ys;\n\n          return Math.sqrt( xs + ys );\n        }\n    };\n\n    export {Point, Rectangle, mathPoint};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/point.js\n **/","    'use strict';\n\n    var util = {\n        getDefaultParent: function (element){\n            var parent = element.parentNode;\n            while(parent.parentNode && window.getComputedStyle(parent)[\"position\"] === \"static\"){\n                parent = parent.parentNode;\n            }\n            return parent;\n        },\n        bind: function(func, context){\n            return function(){\n                return func.apply(context, [].splice.call(arguments, 0));\n            };\n        },\n        getTouchByID: function(element, touchId){\n            var i;\n            for(i = 0; i < element.changedTouches.length; i++){\n                if(element.changedTouches[i].identifier === touchId){\n                    return element.changedTouches[i];\n                }\n            }\n            return false;\n        },\n        getSumValueOfStyleRule: function(element, rules){\n            return rules.reduce(function(sum, rule){\n                return sum + parseInt(window.getComputedStyle(element)[rule]||0);\n            }, 0);\n        },\n        appendFirstChild: function(element, node){\n            element.firstChild ? element.insertBefore(node, element.firstChild) : element.appendChild(node);\n        },\n        range: function(start, stop, step){\n            var result = [];\n            if(typeof stop === 'undefined'){\n                stop = start;\n                start = 0;\n            }\n            if(typeof step === 'undefined'){\n                step = 1;\n            }\n            if((step > 0 && start >= stop) || (step < 0 && start <= stop)){\n                return [];\n            }\n            for(var i = start; step > 0 ? i < stop : i > stop; i += step){\n                result.push(i);\n            }\n            return result;\n        },\n        setStyle: function(element, style){\n            style = style || {};\n            var cssText = \"\", key;\n            for(key in style){\n                if(style.hasOwnProperty(key)){\n                    cssText += key + \": \" + style[key] + \"; \";\n                }\n            }\n\n            element.style.cssText = cssText;\n        },\n        triggerFactory: function(opts){\n            var funcs = [], i, options = {\n                isReverse: false,\n                isStopOnTrue: false,\n                context: window\n            };\n            for(i in opts){\n                if(opts.hasOwnProperty(i)){\n                    options[i] = opts[i];\n                }\n            };\n            return {\n                fire: function(){\n                    var args = [].slice.call(arguments),\n                        i, retValue, fs = options.isReverse ? funcs.slice().reverse() : funcs;\n\n                    for(i = 0; i < fs.length; i++){\n                        retValue = fs[i].apply(options.context, args);\n                        if(options.isStopOnTrue && retValue){\n                            return true;\n                        }\n                    }\n                    return !options.isStopOnTrue;\n                },\n                add: function(f){\n                    funcs.push(f);\n                },\n                unshift: function(f){\n                    funcs.unshift(f);\n                },\n                remove: function(f){\n                    var index = funcs.indexOf(f);\n                    if(index !== -1){\n                        funcs.splice(index, 1)\n                    }\n                },\n                reset:function(){\n                    funcs = [];\n                }\n            }\n        },\n        randomColor:function(){\n            var rnd = function(){\n                    return Math.round(Math.random()*255);\n                },\n                toHexString = function(digit){\n                    var str = digit.toString(16);\n                    while(str.length < 2){\n                        str = \"0\" + str;\n                    }\n                    return str;\n                },\n                red = rnd(),\n                green = rnd(),\n                blue = rnd();\n\n            return \"#\" + toHexString(red) + toHexString(green) + toHexString(blue);\n        },\n        createCanvas: function(area, rectagle){\n            var canvas;\n            if(window.getComputedStyle(area).position === \"static\"){\n                area.style.position = \"relative\";\n            }\n            canvas = document.createElement(\"canvas\");\n            canvas.setAttribute(\"width\", rectagle.size.x + \"px\");\n            canvas.setAttribute(\"height\", rectagle.size.y + \"px\");\n            util.setStyle(canvas, {\n                position: \"absolute\",\n                left: rectagle.position.y + \"px\",\n                top: rectagle.position.y + \"px\",\n                width: rectagle.size.x + \"px\",\n                height: rectagle.size.y + \"px\"\n            });\n            util.appendFirstChild(area, canvas);\n            return canvas;\n        }\n    };\n\n    export default util;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","    'use strict';\n\n\n    import util from './util'\n    import {boundType, boundFactory} from './bound'\n    import {mathPoint, Point, Rectangle} from './point'\n\n    var Dragee = { util, boundType, boundFactory };//todo remove after refactore\n\n    var isTouch = 'ontouchstart' in window, mouseEvents = {\n        start: 'mousedown',\n        move: 'mousemove',\n        end: 'mouseup'\n    }, touchEvents = {\n        start: 'touchstart',\n        move: 'touchmove',\n        end: 'touchend'\n    },\n    events = isTouch ? touchEvents : mouseEvents,\n    draggables = [],\n    onCreateDraggable = function(draggable){\n        var message = \"for this element Dragee.Draggable is already exist, don't create it twice \";\n        if(draggables.some(function(existing){\n            return draggable.element === existing.element;\n        })){\n            throw message;\n        }\n        draggables.push(draggable);\n    },\n    transformProperty = getStyleProperty('transform'),\n    transitionProperty = getStyleProperty('transition');\n\n    //Dragee.events = events;\n\n    function Draggable(element, options){\n        options = options || {};\n        var i, that = this, displayListener, parent = options.parent || Dragee.util.getDefaultParent(element);\n        this.options = {\n            parent: parent,\n            bound: Dragee.boundFactory(Dragee.boundType.element)(parent, parent),\n            startFilter: false,\n            isContentBoxSize: false,\n            position: false\n        }\n        for(i in options){\n            if(options.hasOwnProperty(i)){\n                this.options[i] = options[i];\n            }\n        }\n        this.onEnd = Dragee.util.triggerFactory({\n            context: this, isReverse: true, isStopOnTrue: true\n        });\n        this.onMove = Dragee.util.triggerFactory({context: this});\n        this.onStart = Dragee.util.triggerFactory({context: this});\n\n        this.onEnd.add(function(){\n            this.move(this.position, 0, true, true);\n        });\n\n        if(options.onEnd){\n            this.onEnd.add(options.onEnd);\n        }\n        if(options.onMove){\n            this.onMove.add(options.onMove);\n        }\n        if(options.onStart){\n            this.onStart.add(options.onStart);\n        }\n        this.element = element;\n        this.bound = this.options.bound;\n        onCreateDraggable(this);\n        that.init();\n    }\n\n    Draggable.prototype.init = function(){\n        this._enable = true;\n        this.offset = mathPoint.getOffset(this.element, this.options.parent, true);\n        this.fixPosition = this.offset;\n        this.position = this.offset;\n        if(this.options.position){\n            this.initPosition = this.options.position;\n            this.move(this.initPosition, 0, true, true);\n        } else {\n            this.initPosition = this.offset;\n        }\n        this._dragStart = Dragee.util.bind(this.dragStart, this);\n        this._delayedDragStart = Dragee.util.bind(this.delayedDragStart, this);\n        this._dragMove = Dragee.util.bind(this.dragMove, this);\n        this._dragEnd = Dragee.util.bind(this.dragEnd, this);\n\n        if(this.options.delayedStart) {\n            this.element.addEventListener(touchEvents.start, this._delayedDragStart);\n            this.element.addEventListener(mouseEvents.start, this._delayedDragStart);\n        } else {\n            this.element.addEventListener(touchEvents.start, this._dragStart);\n            this.element.addEventListener(mouseEvents.start, this._dragStart);\n        }\n\n        this.bound.refresh && this.bound.refresh();\n    };\n\n    Draggable.prototype.reinit = function(){\n        this.offset = mathPoint.getOffset(this.element, this.options.parent, true);\n        this.fixPosition = this.offset;\n        this.position = this.offset;\n        if(this.options.position){\n            this.initPosition = this.options.position;\n            this.move(this.initPosition, 0, true, true);\n        } else {\n            this.initPosition = this.offset;\n        }\n\n        this.bound.refresh && this.bound.refresh();\n    };\n\n    Draggable.prototype.getSize = function(recalulate){\n        return mathPoint.getSizeOfElement(this.element, this.options.isContentBoxSize);\n    };\n\n    Draggable.prototype.getPosition = function(){\n        this.position = this.offset.add(this._transformPosition || new Point(0, 0));\n        return this.position;\n    };\n\n    Draggable.prototype.getCenter = function(){\n        return this.position.add(this.getSize().mult(0.5));\n    };\n\n    Draggable.prototype._setTranslate = function(point){\n        this._transformPosition = point;\n\n        var transform = this.element.style[transformProperty],\n            translateCss = ' translate3d(' + point.x + 'px,' + point.y + 'px, 0px)';\n\n        var ua = window.navigator.userAgent;\n        var msie = ua.indexOf(\"MSIE \");\n\n        if(msie) {\n            translateCss = ' translate(' + point.x + 'px,' + point.y + 'px)';\n            if(!/translate\\([^)]+\\)/.test(transform)){\n                transform += translateCss;\n            }else{\n                transform = transform.replace(/translate\\([^)]+\\)/, translateCss);\n            }\n        } else {\n            if(!/translate3d\\([^)]+\\)/.test(transform)){\n                transform += translateCss;\n            }else{\n                transform = transform.replace(/translate3d\\([^)]+\\)/, translateCss);\n            }\n        }\n\n        this.element.style[transformProperty] = transform;\n    };\n\n    Draggable.prototype.move = function(point, time, isFix, isSilent){\n        var that = this;\n        time = time || 0;\n        point = point.clone();\n        if(isFix){\n            this.fixPosition = point;\n        }\n\n        this.determineDirection(point);\n\n        this.position = point;\n\n        transitionProperty && (that.element.style[transitionProperty] = time + \"ms\");\n        that._setTranslate(point.sub(that.offset));\n        isSilent || that.onMove.fire();\n    };\n\n    Draggable.prototype.refreshPosition = function(){\n        this.setPosition(this.getPosition());\n    };\n\n    Draggable.prototype.setPosition = function(point){\n        point = point.clone();\n        this.position = point;\n\n        transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n        this._setTranslate(point.sub(this.offset));\n    };\n\n    Draggable.prototype.setZeroTransition = function(){\n        transitionProperty && (this.element.style[transitionProperty] = \"0ms\");\n    };\n\n    Draggable.prototype.determineDirection = function(point){\n        this.leftDirection = (this.position.x < point.x);\n        this.rightDirection = (this.position.x > point.x);\n        this.upDirection = (this.position.y > point.y);\n        this.downDirection = (this.position.y < point.y);\n    };\n\n    Draggable.prototype.delayedDragStart = function(delayedEvent){\n        var isTouchEvent = (isTouch && (delayedEvent instanceof TouchEvent)),\n            startTouchPoint = new Point(\n                isTouchEvent ? delayedEvent.changedTouches[0].pageX : delayedEvent.clientX,\n                isTouchEvent ? delayedEvent.changedTouches[0].pageY : delayedEvent.clientY\n            ),\n            that = this;\n\n        if(delayedEvent.shiftKey) return;\n\n        function checkMovement(event){\n            var isTouchEvent = (isTouch && (event instanceof TouchEvent)),\n                touchPoint = new Point(\n                    isTouchEvent ? event.changedTouches[0].pageX : event.clientX,\n                    isTouchEvent ? event.changedTouches[0].pageY : event.clientY\n                );\n\n            if(Math.abs(touchPoint.x-startTouchPoint.x) > 5\n                || Math.abs(touchPoint.y-startTouchPoint.y) > 5) {\n\n                document.removeEventListener(touchEvents.move, checkMovement);\n                document.removeEventListener(mouseEvents.move, checkMovement);\n\n                BlockSelection.startDragSelection(that, delayedEvent);\n                that.dragStart(delayedEvent);\n            }\n        }\n\n        function removeCheckMovement(event){\n            document.removeEventListener(touchEvents.move, checkMovement);\n            document.removeEventListener(mouseEvents.move, checkMovement);\n\n            document.removeEventListener(touchEvents.end, removeCheckMovement);\n            document.removeEventListener(mouseEvents.end, removeCheckMovement);\n        }\n\n        document.addEventListener(touchEvents.move, checkMovement);\n        document.addEventListener(mouseEvents.move, checkMovement);\n\n        document.addEventListener(touchEvents.end, removeCheckMovement);\n        document.addEventListener(mouseEvents.end, removeCheckMovement);\n    };\n\n    Draggable.prototype.dragStart = function(event){\n        this.currentEvent = event;\n        if(!this._enable || ( this.options.startFilter && !this.options.startFilter(event))){\n            return;\n        }\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        this._startTouchPoint = new Point(isTouchEvent ? event.changedTouches[0].pageX : event.clientX, isTouchEvent ? event.changedTouches[0].pageY : event.clientY);\n\n        this._startPosition = this.getPosition();\n        if(isTouchEvent){\n            this._touchId = event.changedTouches[0].identifier;\n        }\n        event.stopPropagation();\n        if(!(event.target instanceof HTMLInputElement\n            || event.target instanceof HTMLInputElement)){\n            event.preventDefault();\n        }else{\n            event.target.focus();\n        }\n\n        document.addEventListener(touchEvents.move, this._dragMove);\n        document.addEventListener(mouseEvents.move, this._dragMove);\n\n        document.addEventListener(touchEvents.end, this._dragEnd);\n        document.addEventListener(mouseEvents.end, this._dragEnd);\n\n        this.isDragee = true;\n\n        this.onStart.fire(event);\n        this.element.addClass(\"active\");\n        this.onMove.fire(event);\n    };\n\n    Draggable.prototype.dragMove = function(event){\n        this.currentEvent = event;\n\n        var touch, touchPoint, point;\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        if(isTouchEvent){\n            if(!(touch = Dragee.util.getTouchByID(event, this._touchId))){\n                return;\n            }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        touchPoint = new Point(isTouchEvent ? touch.pageX : event.clientX, isTouchEvent ? touch.pageY : event.clientY);\n        point = this._startPosition.add(touchPoint.sub(this._startTouchPoint));\n        point = this.bound(point, this.getSize());\n        this.touchPoint = touchPoint;\n        this.move(point, 0);\n    };\n\n    Draggable.prototype.dragEnd = function(event){\n        var touch;\n\n        var isTouchEvent = (isTouch && (event instanceof TouchEvent));\n\n        if(isTouchEvent){\n            if(!(touch = Dragee.util.getTouchByID(event, this._touchId))){\n                return;\n            }\n        }\n        event.stopPropagation();\n        event.preventDefault();\n        this.onEnd.fire(event);\n\n        document.removeEventListener(touchEvents.move, this._dragMove);\n        document.removeEventListener(mouseEvents.move, this._dragMove);\n\n        document.removeEventListener(touchEvents.end, this._dragEnd);\n        document.removeEventListener(mouseEvents.end, this._dragEnd);\n\n        this.isDragee = false;\n        this.element.removeClass(\"active\");\n    };\n\n    Draggable.prototype.getRectangle = function(){\n        return new Rectangle(this.position, this.getSize());\n    };\n\n    Draggable.prototype.refresh = function(){\n        this.getSize(true);\n        this.bound.refresh && this.bound.refresh();\n    }\n\n    Draggable.prototype.destroy = function(){\n        this.element.removeEventListener(touchEvents.start, this._dragStart);\n        this.element.removeEventListener(mouseEvents.start, this._dragStart);\n        this.element.removeEventListener(touchEvents.move, this._dragMove);\n        this.element.removeEventListener(mouseEvents.move, this._dragMove);\n        this.element.removeEventListener(touchEvents.end, this._dragEnd);\n        this.element.removeEventListener(mouseEvents.end, this._dragEnd);\n\n        this.onEnd.reset();\n        this.onMove.reset();\n    };\n\n    Draggable.prototype.__defineGetter__(\"enable\", function(){\n        return this._enable;\n    });\n\n    Draggable.prototype.__defineSetter__(\"enable\", function(enable) {\n        if(enable) {\n            this.element.removeClass(\"disable\");\n        } else {\n            this.element.addClass(\"disable\");\n        }\n\n        return this._enable = enable;\n    });\n\n    export {Draggable, draggables, events};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/draggable.js\n **/","'use strict';\nimport {mathPoint} from './point'\n\n\n\tvar boundType = {\n\t\t\telement: -1,\n\t\t\trectangle: 0,\n\t\t\tlineX: 1,\n\t\t\tlineY: 2,\n\t\t\tline: 3,\n\t\t\tunificationOfRectangle: 4,\n\t\t\tcircle:5,\n\t\t\tarc:6\n\t};\n\t\n\tfunction boundFactory(type){\n\t\tswitch(type){\n\t\t\tcase boundType.element:\n\t\t\t\treturn function(element, parent){\n\t\t\t\t\tvar bound,\n\t\t\t\t\t\tretFunc = function(){\n\t\t\t\t\t\t\treturn bound.apply(this, arguments);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tretFunc.refresh = function(){\n\t\t\t\t\t\tbound = boundFactory(boundType.rectangle)(\n\t\t\t\t\t\t\tmathPoint.createRectangleFromElement(element, parent)\n\t\t\t\t\t\t);\n\t\t\t\t\t};\n\n\t\t\t\t\tretFunc.refresh();\n\t\t\t\t\treturn retFunc;\n\t\t\t\t};\n\t\t\tcase boundType.rectangle:\n\t\t\t\treturn function (rectangle){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone(),\n\t\t\t\t\t\t\trectP2 = rectangle.getP3();\n\n\t\t\t\t\t\tif(rectangle.position.x > calcPoint.x){\n\t\t\t\t\t\t\t(calcPoint.x = rectangle.position.x);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectangle.position.y > calcPoint.y){\n\t\t\t\t\t\t\tcalcPoint.y = rectangle.position.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectP2.x < calcPoint.x + size.x){\n\t\t\t\t\t\t\tcalcPoint.x = rectP2.x - size.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(rectP2.y < calcPoint.y + size.y){\n\t\t\t\t\t\t\tcalcPoint.y = rectP2.y - size.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.lineX:\n\t\t\t\treturn function (x, startY, endY){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone();\n\t\t\t\t\t\tcalcPoint.x = x;\n\t\t\t\t\t\tif(startY > calcPoint.y){\n\t\t\t\t\t\t\tcalcPoint.y = startY;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(endY < calcPoint.y + size.y){\n\t\t\t\t\t\t\tcalcPoint.y = endY - size.y;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.lineY:\n\t\t\t\treturn function (y, startX, endX){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar calcPoint = point.clone();\n\t\t\t\t\t\tcalcPoint.y = y;\n\t\t\t\t\t\tif(startX > calcPoint.x){\n\t\t\t\t\t\t\tcalcPoint.x = startX;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(endX < calcPoint.x + size.x){\n\t\t\t\t\t\t\tcalcPoint.x = endX - size.x;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn calcPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.line:\n\t\t\t\treturn function (start, end){\n\t\t\t\t\tvar alpha = Math.atan2(end.y - start.y, end.x - start.x),\n\t\t\t\t\t\tbeta = alpha + Math.PI / 2,\n\t\t\t\t\t\tsomeK = 10,\n\t\t\t\t\t\tcosBeta = Math.cos(beta),\n\t\t\t\t\t\tsinBeta = Math.sin(beta);\n\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar point2 = new Point(point.x + someK * cosBeta, point.y + someK * sinBeta),\n\t\t\t\t\t\t\tpointCrossing = mathPoint.directCrossing(start, end, point, point2),\n\t\t\t\t\t\t\tnewEnd = mathPoint.getPointInLineByLenght(end, start, size.x);\n\n\t\t\t\t\t\tpointCrossing = mathPoint.boundOnLine(start, newEnd, pointCrossing);\n\t\t\t\t\t\treturn pointCrossing;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.circle:\n\t\t\t\treturn function(center, radius){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar boundedPoint = mathPoint.getPointInLineByLenght(center,point,radius);\n\t\t\t\t\t\treturn boundedPoint;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase boundType.arc:\n\t\t\t\treturn function(center, radius, startAgle, endAngle){\n\t\t\t\t\treturn function (point, size){\n\t\t\t\t\t\tvar boundStartAngle = typeof startAgle === \"function\" ? startAgle() : startAgle,\n\t\t\t\t\t\t\tboundEndtAngle = typeof startAgle === \"function\" ? endAngle() : endAngle,\n\t\t\t\t\t\t\tangle = mathPoint.getAngle(center, point);\n\n\t\t\t\t\t\tangle = mathPoint.normalizeAngle(angle);\n\t\t\t\t\t\tangle = mathPoint.boundAngle(boundStartAngle, boundEndtAngle, angle);\n\t\t\t\t\t\treturn mathPoint.getPointFromRadialSystem(angle, radius, center);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t}\n\n  export {boundType, boundFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/bound.js\n **/","'use strict';\n\n\tvar lists = [];\n\n\timport util from './util'\n\timport {mathPoint, Point} from './point'\n\timport {boundType, boundFactory} from './bound'\n\timport {Draggable, draggables, events} from './draggable'\n\n\tvar Dragee = { util, boundType, boundFactory, Draggable, events };//todo remove after refactore\n\n\n\tfunction List(draggables, options){\n\t\tvar i;\n\t\tthis.options = {\n\t\t\ttimeEnd: 200,\n\t\t\ttimeExcange: 400,\n\t\t\tradius: 30,\n\t\t\tgetLength: mathPoint.getLength(),\n\t\t\tisDisplacement: false\n\t\t};\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.draggables = draggables;\n\t\tlists.push(this);\n\t\tthis.onChange = Dragee.util.triggerFactory({context: this});\n\t\tif(options && options.onChange){\n\t\t\tthis.onChange.add(options.onChange);\n\t\t}\n\t\tthis.init();\n\t}\n\n\tList.prototype.init = function(){\n\t\tthis._enable = true;\n\t\tthis.draggables.forEach(this.initDraggable, this);\n\t};\n\n\tList.prototype.initDraggable = function(draggable){\n\t\tvar moveHandler, that = this;\n\t\tdraggable.enable = this._enable;\n\t\tif(this.options.isDisplacement){\n\t\t\tmoveHandler = function(){\n\t\t\t\tif(this.isDragee){\n\t\t\t\t\tthat.onStart(this);\n\t\t\t\t\tdraggable.onMove.remove(moveHandler);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\tthat.onEndDisplaycement(this);\n\t\t\t\tdraggable.onMove.add(moveHandler);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t\tdraggable.onMove.add(moveHandler);\n\t\t}else{\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\tthat.onEnd(this);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tList.prototype.moveOrSave = function(draggable, position, time){\n\t\tif(draggable.isDragee){\n\t\t\tdraggable.fixPosition = position;\n\t\t}else{\n\t\t\tdraggable.move(position, time, true);\n\t\t}\n\t};\n\n\tList.prototype.onEnd = function(draggable){\n\t\tvar fixPositions = this.getCurrentFixPosition(), currentIndex, excangeIndex;\n\t\tcurrentIndex = this.draggables.indexOf(draggable);\n\t\texcangeIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif(excangeIndex === -1 || excangeIndex === currentIndex){\n\t\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t\t}else{\n\t\t\tthis.moveOrSave(this.draggables[excangeIndex], fixPositions[currentIndex], this.options.timeExcange);\n\t\t\tthis.draggables[currentIndex].move(fixPositions[excangeIndex], this.options.timeEnd, true);\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\treturn true;\n\t};\n\n\tList.prototype.onEndDisplaycement = function(draggable){\n\t\tvar currentIndex, i, targetIndex,\n\t\t\tsortedDraggables = this.getSortedDraggables(),\n\t\t\tfixPositions = sortedDraggables.map(function(draggable){\n\t\t\t\treturn draggable.fixPosition;\n\t\t\t});\n\t\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\t\ttargetIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif(targetIndex !==-1){\n\t\t\tif(targetIndex < currentIndex){\n\t\t\t\tfor(i=targetIndex; i<currentIndex; i++){\n\t\t\t\t\tthis.moveOrSave(sortedDraggables[i], fixPositions[i+1], this.options.timeExcange);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor(i=currentIndex; i<targetIndex; i++){\n\t\t\t\t\tthis.moveOrSave(sortedDraggables[i+1], fixPositions[i], this.options.timeExcange);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdraggable.move(fixPositions[targetIndex], this.options.timeEnd, true);\n\t\t} else {\n\t\t\tdraggable.move(draggable.fixPosition, this.options.timeEnd, true);\n\t\t}\n\t};\n\n\tList.prototype.onStart = function(draggable){\n\t\tvar currentIndex,i,\n\t\t\tsortedDraggables = this.getSortedDraggables(),\n\t\t\tfixPositions = sortedDraggables.map(function(draggable){\n\t\t\t\treturn draggable.fixPosition;\n\t\t\t});\n\n\t\tcurrentIndex = sortedDraggables.indexOf(draggable);\n\t\tfor(i = currentIndex + 1; i < sortedDraggables.length; i++){\n\t\t\tthis.moveOrSave(sortedDraggables[i],fixPositions[i-1],this.options.timeExcange);\n\t\t}\n\t\tsortedDraggables[currentIndex].fixPosition = fixPositions[i-1];\n\t};\n\n\n\n\tList.prototype.getCurrentFixPosition = function(){\n\t\treturn this.draggables.map(function(draggable){\n\t\t\treturn draggable.fixPosition.clone();\n\t\t});\n\t};\n\n\tList.prototype.getSortedDraggables = function(){\n\t\tvar sortedDraggables,\n\t\t\tinitPositions = this.draggables.map(function(draggable){\n\t\t\t\treturn draggable.initPosition;\n\t\t\t});\n\t\tsortedDraggables = initPositions.map(function(position){\n\t\t\treturn this.draggables.filter(function(draggable){\n\t\t\t\treturn draggable.fixPosition.compare(position);\n\t\t\t},this)[0];\n\t\t},this);\n\t\treturn sortedDraggables;\n\t};\n\n\tList.prototype.reset = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.move(draggable.initPosition, 0, true, false);\n\t\t});\n\t};\n\n\tList.prototype.refresh = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.refresh();\n\t\t});\n\t};\n\n\tList.prototype.add = function(draggables){\n\t\tvar that = this;\n\t\tif(!(draggables instanceof Array)){\n\t\t\tdraggables = [draggables];\n\t\t}\n\t\tdraggables.forEach(this.initDraggable, this);\n\t\tthis.draggables = this.draggables.concat(draggables);\n\t};\n\n\tList.prototype.remove = function(draggables){\n\t\tvar j, initPositions = this.draggables.map(function(draggable){\n\t\t\t\treturn draggable.initPosition;\n\t\t\t}),\n\t\t\tlist = [],\n\t\t\tsortedDraggables = this.getSortedDraggables();\n\t\tif(!(draggables instanceof Array)){\n\t\t\tdraggables = [draggables];\n\n\t\t}\n\t\tdraggables.forEach(function(draggable){\n\t\t\tdraggable.onEnd.reset();\n\t\t\tdraggable.onMove.reset();//todo remove reset in future\n\t\t\tthis.draggables.removeItem(draggable);\n\t\t\tDragee.util.remove(this.draggables, draggable);\n\t\t}, this);\n\t\tj = 0;\n\t\tsortedDraggables.forEach(function(draggable, i){\n\t\t\tif(this.draggables.indexOf(draggable) !== -1){\n\t\t\t\tif(draggable.fixPosition !== initPositions[j]){\n\t\t\t\t\tdraggable.move(initPositions[j], this.options.timeExcange, true);\n\t\t\t\t}\n\t\t\t\tdraggable.initPosition = initPositions[j];\n\t\t\t\tj++;\n\t\t\t\tlist.push(draggable);\n\t\t\t}\n\t\t}, this);\n\t\tthis.draggables = list;\n\t};\n\n\tList.prototype.clear = function(){\n\t\tthis.remove(this.draggables.slice());\n\t};\n\n\tList.prototype.destroy = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.destroy();\n\t\t});\n\t};\n\n\tList.prototype.__defineGetter__(\"positions\", function(){\n\t\treturn this.getCurrentFixPosition();\n\t});\n\n\tList.prototype.__defineSetter__(\"positions\", function(positions){\n\t\tvar message = \"wrong array length\";\n\t\tif(positions.length === this.draggables.length){\n\t\t\tpositions.forEach(function(point, i){\n\t\t\t\tthis.draggables[i].move(point, 0, true, true);\n\t\t\t}, this);\n\t\t}else{\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\n\tList.prototype.__defineGetter__(\"enable\", function(){\n\t\treturn this._enable;\n\t});\n\n\tList.prototype.__defineSetter__(\"enable\", function(value){\n\t\tthis._enable = value;\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.enable = value;\n\t\t});\n\t});\n\n\n\tfunction listFactory(parentElement, elements, options){\n\t\tvar draggables, draggableOptions, listOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\tlistOptions = options.list || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || parentElement;\n\t\telements = Array.prototype.slice.call(elements);\n\n\t\tdraggables = elements.map(function(element){\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\n\t\treturn new List(draggables, listOptions);\n\t}\n\n  export {lists, List, listFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/list.js\n **/","\t'use strict';\n\n\n\timport util from './util'\n\timport {mathPoint} from './point'\n\timport {positionType, sortingFactory, positionFactory} from './positioning'\n\timport {targetManagers} from './targetManager'\n\n\tvar Dragee = { util, positionType,  positionFactory, sortingFactory, targetManagers };//todo remove after refactore\n\n\tvar targets = [];\n\n\tfunction Target(element, draggables, options){\n\t\toptions = options || {};\n\t\tvar i, parent = options.parent || Dragee.util.getDefaultParent(element);\n\t\tthis.options = {\n\t\t\ttimeEnd: 200,\n\t\t\ttimeExcange: 400,\n\t\t\tparent: parent,\n\t\t\tsorting: Dragee.sortingFactory(Dragee.positionType.floatLeft)(80, mathPoint.getLength({x: 1, y: 4, isTransformationSpace: true})),\n\t\t\tpositioning: Dragee.positionFactory(Dragee.positionType.floatLeft)(this.getRectangle.bind(this), {removable: true})\n\t\t};\n\t\tfor(i in options){\n\t\t\tthis.options[i] = options[i];\n\t\t}\n\t\ttargets.push(this);\n\t\tthis.element = element;\n\t\tthis.draggables = draggables;\n\t\tthis.onAdd = Dragee.util.triggerFactory({context: this});\n\t\tthis.beforeAdd = Dragee.util.triggerFactory({context: this});\n\t\tthis.onRemove = Dragee.util.triggerFactory({context: this});\n\n\t\toptions.onRemove && this.onRemove.add(options.onRemove);\n\t\toptions.onAdd && this.onAdd.add(options.onAdd);\n\t\toptions.beforeAdd && this.beforeAdd.add(options.beforeAdd);\n\n\t\tthis.init();\n\t};\n\n\tTarget.prototype.getRectangle = function(){\n\t\treturn mathPoint.createRectangleFromElement(\n\t\t\tthis.element,\n\t\t\tthis.options.parent,\n\t\t\tthis.options.isContentBoxSize,\n\t\t\ttrue\n\t\t);\n\t};\n\n\tTarget.prototype.catchDraggable = function(draggable){\n\t\tif(this.options.catchDraggable) {\n\t\t\treturn this.options.catchDraggable(this, draggable);\n\t\t} else {\n\t\t\tvar targetRectangle = this.getRectangle(),\n\t\t\t\tdraggableSquare = draggable.getRectangle().getSquare();\n\n\t\t\treturn draggableSquare < targetRectangle.getSquare()\n\t\t\t\t&& targetRectangle.includePoint(draggable.getCenter());\n\t\t}\n\t};\n\n\tTarget.prototype.getPosition = function(){\n\t\treturn this.getRectangle().position;\n\t};\n\n\tTarget.prototype.getSize = function(){\n\t\treturn this.getRectangle().size;\n\t};\n\n\tTarget.prototype.init = function(){\n\t\tvar rectangles, indexesOfNew;\n\n\t\tthis.innerDraggables = this.draggables.filter(function(draggable){\n\t\t\tvar element = draggable.element.parentNode;\n\t\t\twhile(element){\n\t\t\t\tif(element === this.element){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telement = element.parentNode;\n\t\t\t}\n\t\t\treturn false;\n\t\t}, this);\n\n\t\tif(this.innerDraggables.length){\n\t\t\tindexesOfNew = Dragee.util.range(this.innerDraggables.length);\n\t\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\t\treturn draggable.getRectangle();\n\t\t\t}), indexesOfNew);\n\t\t\tthis.setPosition(rectangles, indexesOfNew);\n\t\t\tthis.innerDraggables.forEach(function(draggable){\n\t\t\t\tthis.onAdd.fire(draggable);\n\t\t\t}, this);\n\t\t}\n\t};\n\n\tTarget.prototype.destroy = function(){\n\t\tDragee.targetManagers.forEach(function(targetManager){\n\t\t\ttargetManager.targets.removeItem(this);\n\t\t}, this);\n\t}\n\n\tTarget.prototype.refresh = function(){\n\t\tvar rectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), []);\n\t\tthis.setPosition(rectangles, [], 0);\n\t};\n\n\tTarget.prototype.onEnd = function(draggable){\n\t\tvar newDraggablesIndex = [],\n\t\t\trectangles,\n\t\t\tincludePoint = this.getRectangle().includePoint(draggable.getPosition());\n\n\t\tif(!includePoint){\n\t\t\tif(this.getRectangle().includePoint(draggable.getCenter())) {\n\t\t\t\tdraggable.position = draggable.getCenter().clone();\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis.beforeAdd.fire(draggable);\n\n\t\tthis.innerDraggables = this.options.sorting(this.innerDraggables, [draggable], newDraggablesIndex);\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), newDraggablesIndex, draggable);\n\n\t\tthis.setPosition(rectangles, newDraggablesIndex);\n\t\tif(this.innerDraggables.indexOf(draggable) !== -1){\n\t\t\tthis.addRemoveOnMove(draggable);\n\t\t}\n\t\treturn true;\n\t};\n\n\tTarget.prototype.setPosition = function(rectangles, indexesOfNew, time){\n\t\tthis.innerDraggables.slice(0).forEach(function(draggable, i){\n\t\t\tvar rect = rectangles[i],\n\t\t\t\tthat = this,\n\t\t\t\ttimeEnd = time || time == 0 ? time : indexesOfNew.indexOf(i) !== -1 ? this.options.timeEnd : this.options.timeExcange;\n\n\t\t\tif(rect.removable){\n\t\t\t\tdraggable.move(draggable.initPosition, timeEnd, true, true);\n\t\t\t\tthis.innerDraggables.removeItem(draggable);\n\n\t\t\t\tthis.onRemove.fire(draggable);\n\t\t\t} else {\n\t\t\t\tdraggable.move(rect.position, timeEnd, true, true);\n\t\t\t}\n\t\t}, this);\n\t};\n\n\tTarget.prototype.add = function(draggable, time){\n\t\tvar rectangles, newDraggablesIndex = this.innerDraggables.length;\n\n\t\tthis.beforeAdd.fire(draggable);\n\n\t\tthis.pushInnerDraggable(draggable);\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), newDraggablesIndex, draggable);\n\t\tthis.setPosition(rectangles, [newDraggablesIndex], time || 0);\n\t\tif(this.innerDraggables.indexOf(draggable) !== -1){\n\t\t\tthis.addRemoveOnMove(draggable);\n\t\t}\n\t};\n\n\tTarget.prototype.pushInnerDraggable = function(draggable){\n\t\tif(this.innerDraggables.indexOf(draggable)===-1){\n\t\t\tthis.innerDraggables.push(draggable);\n\t\t}\n\t};\n\n\tTarget.prototype.addRemoveOnMove = function(draggable){\n\t\tvar that = this;\n\n\t\tdraggable.onMove.add(this.removeHandler = function(){\n\t\t\tthat.remove(draggable)\n\t\t});\n\n\t\tthis.onAdd.fire(draggable);\n\t};\n\n\tTarget.prototype.remove = function(draggable){\n\t\tvar index, rectangles;\n\t\tdraggable.onMove.remove(this.removeHandler);\n\n\t\tindex = this.innerDraggables.indexOf(draggable);\n\t\tif(index === -1){\n\t\t\treturn;\n\t\t}\n\n\t\tthis.innerDraggables.splice(index, 1);\n\n\t\trectangles = this.options.positioning(this.innerDraggables.map(function(draggable){\n\t\t\treturn draggable.getRectangle();\n\t\t}), []);\n\n\t\tthis.setPosition(rectangles, []);\n\t\tthis.onRemove.fire(draggable);\n\t};\n\n\tTarget.prototype.reset = function(){\n\t\tthis.innerDraggables.forEach(function(draggable){\n\t\t\tdraggable.move(draggable.initPosition, 0, true, true);\n\t\t\tthis.onRemove.fire(draggable);\n\t\t}, this);\n\t\tthis.innerDraggables = [];\n\t};\n\n\tTarget.prototype.getSortedDraggables = function(){\n\t\tthis.innerDraggables.slice();\n\t}\n\n\texport {targets, Target};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/target.js\n **/","'use strict';\nimport {mathPoint, Point, Rectangle} from './point'\n\n\tvar\tpositionType = {\n\t\t\tnotCrossing: 0,\n\t\t\tfloatLeft: 1,\n\t\t\tfloatRight: 2\n\t};\n\n\tfunction positionFactory(type){\n\t\tswitch(type){\n\t\t\tcase positionType.notCrossing:\n\t\t\t\treturn function(rectangle, options){\n\t\t\t\t\tvar i, opts = {\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t}\n\t\t\t\t\tfor(i in options){\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle, staticRectangleIndexes = rectangleList.reduce(function(indexes, rect, index){\n\t\t\t\t\t\t\tif(indexesOfNews.indexOf(index) === -1){\n\t\t\t\t\t\t\t\tindexes.push(index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn indexes;\n\t\t\t\t\t\t}, []);\n\t\t\t\t\t\tindexesOfNews.forEach(function(index){\n\t\t\t\t\t\t\tvar rect = rectangleList[index], removable = false;\n\t\t\t\t\t\t\tstaticRectangleIndexes.forEach(function(indexOfStatic){\n\t\t\t\t\t\t\t\tvar staticRect = rectangleList[indexOfStatic];\n\t\t\t\t\t\t\t\trect = staticRect.moveToBound(rect);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tremovable = staticRectangleIndexes.some(function(indexOfStatic){\n\t\t\t\t\t\t\t\tvar staticRect = rectangleList[indexOfStatic];\n\t\t\t\t\t\t\t\treturn  !!staticRect.and(rect);\n\t\t\t\t\t\t\t}) || rect.and(boundRect).getSquare() !== rect.getSquare();\n\t\t\t\t\t\t\tif(removable){\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tstaticRectangleIndexes.push(index);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\tcase positionType.floatLeft:\n\t\t\t\treturn function(rectangle, options){\n\t\t\t\t\tvar i, opts = {\n\t\t\t\t\t\tpaddingTopLeft: new Point(0, 0),\n\t\t\t\t\t\tpaddingBottomRight: new Point(0, 0),\n\t\t\t\t\t\tyGapBetweenDraggables: 0,\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t}\n\t\t\t\t\tfor(i in options){\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle,\n\t\t\t\t\t\t\trectP2 = boundRect.getP2(), i, boundaryPoints = [boundRect.position];\n\t\t\t\t\t\trectangleList.forEach(function(rect, index){\n\t\t\t\t\t\t\tvar position, isValid = false;\n\t\t\t\t\t\t\tfor(i = 0; i < boundaryPoints.length; i++){\n\t\t\t\t\t\t\t\tposition = (new Point(boundaryPoints[i].x, i > 0 ? (boundaryPoints[i - 1].y + opts.yGapBetweenDraggables) : boundRect.position.y)).add(opts.paddingTopLeft);\n\t\t\t\t\t\t\t\tif(isValid = (position.x + rect.size.x < rectP2.x)){\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!isValid){\n\t\t\t\t\t\t\t\tposition = (new Point(boundRect.position.x, boundaryPoints[boundaryPoints.length - 1].y + opts.yGapBetweenDraggables)).add(opts.paddingTopLeft);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trect.position = position;\n\t\t\t\t\t\t\tif(opts.removable && rect.getP3().y > boundRect.getP3().y){\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tboundaryPoints = mathPoint.addPointToBoundPoints(boundaryPoints, rect.getP3().add(opts.paddingBottomRight));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase positionType.floatRight:\n\t\t\t\treturn function(rectangle, options){\n\t\t\t\t\tvar paddingTopNegRight, paddingBottomNegLeft, i, opts = {\n\t\t\t\t\t\tpaddingTopRight: new Point(5, 5),\n\t\t\t\t\t\tpaddingBottomLeft: new Point(0, 0),\n\t\t\t\t\t\tremovable: true\n\t\t\t\t\t}\n\t\t\t\t\tfor(i in options){\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\tpaddingTopNegRight = new Point(-opts.paddingTopRight.x, opts.paddingTopRight.y);\n\t\t\t\t\tpaddingBottomNegLeft = new Point(-opts.paddingBottomLeft.x, opts.paddingBottomLeft.y);\n\t\t\t\t\treturn function(rectangleList, indexesOfNews){\n\t\t\t\t\t\tvar boundRect = typeof rectangle === \"function\" ? rectangle() : rectangle, i, boundaryPoints = [boundRect.getRightTopPoint()];\n\t\t\t\t\t\trectangleList.forEach(function(rect, index){\n\t\t\t\t\t\t\tvar position, isValid = false;\n\t\t\t\t\t\t\tfor(i = 0; i < boundaryPoints.length; i++){\n\t\t\t\t\t\t\t\tposition = (new Point(boundaryPoints[i].x - rect.size.x, i > 0 ? boundaryPoints[i - 1].y : boundRect.position.y)).add(paddingTopNegRight);\n\t\t\t\t\t\t\t\tif(isValid = (position.x > rect.position.x)){\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(!isValid){\n\t\t\t\t\t\t\t\tposition = new Point(boundRect.getP2().x, boundaryPoints[boundaryPoints.length - 1].y);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trect.position = position;\n\t\t\t\t\t\t\tif(opts.removable && rect.getLeftBottomPoint().y > boundRect.getP4().y){\n\t\t\t\t\t\t\t\trect.removable = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tboundaryPoints = mathPoint.addPointToBoundPoints(boundaryPoints, rect.getP4().add(paddingBottomNegLeft), true);\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn rectangleList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t};\n\n\tfunction sortingFactory(type){\n\t\tswitch(type){\n\t\t\tcase positionType.notCrossing:\n\t\t\t\treturn function(){\n\t\t\t\t\treturn function(oldObjsList, newObjs, indexOfNews){\n\t\t\t\t\t\tvar objsList = oldObjsList.concat(newObjs);\n\t\t\t\t\t\tnewObjs.forEach(function(obj){\n\t\t\t\t\t\t\tindexOfNews.push(objsList.indexOf(obj));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn objsList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\tcase positionType.floatLeft:\n\t\t\tcase positionType.floatRight:\n\t\t\t\treturn function(radius, getLength, options){\n\t\t\t\t\tvar i, opts = {\n\t\t\t\t\t\tgetPosition: function(obj){\n\t\t\t\t\t\t\treturn obj.position;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfor(i in options){\n\t\t\t\t\t\topts[i] = options[i];\n\t\t\t\t\t}\n\t\t\t\t\treturn function(oldObjsList, newObjs, indexOfNews){\n\t\t\t\t\t\tvar newList = oldObjsList.concat(), listOldPosition;\n\t\t\t\t\t\tlistOldPosition = oldObjsList.map(opts.getPosition);\n\t\t\t\t\t\tnewObjs.forEach(function(newObj){\n\t\t\t\t\t\t\tvar index = mathPoint.indexOfNearPoint(listOldPosition, opts.getPosition(newObj), radius, getLength);\n\t\t\t\t\t\t\tif(index === -1){\n\t\t\t\t\t\t\t\tindex = newList.length;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindex = newList.indexOf(oldObjsList[index]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnewList.splice(index, 0, newObj);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewObjs.forEach(function(newObj){\n\t\t\t\t\t\t\tindexOfNews.push(newList.indexOf(newObj));\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn newList;\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t}\n\t};\n\n  export {positionType, sortingFactory, positionFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/positioning.js\n **/","'use strict';\n\n\timport util from './util'\n\timport {Draggable} from './draggable'\n\timport {targets, Target} from './target'\n\n\tvar Dragee = { util, Draggable,  Target };//todo remove after refactore\n\n\tvar\ttargetManagers = [];\n\n\tfunction TargetManager(element, draggables, targets, options){\n\t\tvar i;\n\t\tthis.element = element;\n\t\tthis.draggables = draggables;\n\t\tthis.targets = targets;\n\t\ttargetManagers.push(this);\n\t\tthis.options = {\n\t\t\ttimeEnd: 400,\n\t\t\ttimeWaitForRefresh: 500\n\t\t};\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.onChange = Dragee.util.triggerFactory({context: this});\n\t\tif(options && options.onChange){\n\t\t\tthis.onChange.add(options.onChange);\n\t\t}\n\t\tthis.init();\n\t}\n\n\tTargetManager.prototype.init = function(){\n\t\tvar that = this;\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\treturn that.onEnd(this);\n\t\t\t});\n\t\t});\n\t};\n\n\tTargetManager.prototype.addDraggable = function(draggable){\n\t\tvar that = this;\n\n\t\tthis.draggables.push(draggable);\n\t\tdraggable.onEnd.unshift(function(){\n\t\t\treturn that.onEnd(this);\n\t\t});\n\t};\n\n\tTargetManager.prototype.onEnd = function(draggable){\n\t\tvar shotTargets = this.targets.filter(function(target){\n\t\t\treturn target.draggables.indexOf(draggable) !== -1;\n\t\t}).filter(function(target){\n\t\t\treturn target.catchDraggable(draggable);\n\t\t}).sort(function(a, b){\n\t\t\treturn a.getRectangle().getSquare() - b.getRectangle().getSquare();\n\t\t});\n\n\t\tif(shotTargets.length){\n\t\t\tshotTargets[0].onEnd(draggable);\n\t\t}else{\n\t\t\tdraggable.move(draggable.initPosition, this.options.timeEnd, true, true);\n\t\t}\n\t\tthis.onChange.fire();\n\t\treturn true;\n\t};\n\n\tTargetManager.prototype.reset = function(){\n\t\tthis.targets.forEach(function(target){\n\t\t\ttarget.reset();\n\t\t});\n\t};\n\n\tTargetManager.prototype.refresh = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.refresh();\n\t\t});\n\t\tthis.targets.forEach(function(target){\n\t\t\ttarget.refresh();\n\t\t});\n\t};\n\n\tTargetManager.prototype.__defineGetter__(\"positions\", function(){\n\t\treturn this.targets.map(function(target){\n\t\t\treturn target.innerDraggables.map(function(draggable){\n\t\t\t\treturn this.draggables.indexOf(draggable);\n\t\t\t}, this);\n\t\t}, this);\n\t});\n\n\tTargetManager.prototype.__defineSetter__(\"positions\", function(positions){\n\t\tvar message = \"wrong array length\";\n\t\tif(positions.length === this.targets.length){\n\t\t\tthis.targets.forEach(function(target){\n\t\t\t\ttarget.reset();\n\t\t\t}, this);\n\t\t\tpositions.forEach(function(targetIndexes, i){\n\t\t\t\ttargetIndexes.forEach(function(index){\n\t\t\t\t\tthis.targets[i].add(this.draggables[index]);\n\t\t\t\t}, this);\n\t\t\t}, this);\n\t\t}else{\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\n\tfunction targetManagerFactory(element, draggableElements, targetElements, options){\n\t\tvar draggables, targets, draggableOptions, targetOptions, managerOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\ttargetOptions = options.target || {};\n\t\tmanagerOptions = options.manager || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || element;\n\t\ttargetOptions.parent = targetOptions.parent || element;\n\t\tdraggableElements = Array.prototype.slice.call(draggableElements);\n\t\ttargetElements = Array.prototype.slice.call(targetElements);\n\n\t\tdraggables = draggableElements.map(function(element){\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\n\t\ttargets = targetElements.map(function(el){\n\t\t\treturn new Dragee.Target(element, draggables, targetOptions);\n\t\t});\n\t\treturn new TargetManager(element, draggables, targets, managerOptions);\n\t}\n\n  export {targetManagers, TargetManager, targetManagerFactory};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/targetManager.js\n **/","'use strict';\n\n\timport util from './util'\n\timport {mathPoint, Point} from './point'\n\timport {boundType, boundFactory} from './bound'\n\timport {Draggable, draggables, events} from './draggable'\n\n\tvar Dragee = {util, boundFactory, boundType, Draggable};\n\tvar spiders = [];\n\n\tfunction Spider(area, elements, options){\n\t\tvar i, areaRectangle = mathPoint.createRectangleFromElement(area, area);\n\t\tthis.options = {\n\t\t\tangle: 0,\n\t\t\tdAngle: 2 * Math.PI / elements.length,\n\t\t\tcenter: areaRectangle.getCenter(),\n\t\t\tstartRadius: 50,\n\t\t\tendRadius: areaRectangle.getMinSide() / 2,\n\t\t\tlineWidth: 2,\n\t\t\tstrokeStyle: \"#ff5577\",\n\t\t\tfillStyle: \"rgba(150,255,50,0.8)\"\n\t\t};\n\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tspiders.push(this);\n\t\tthis.area = area;\n\t\tthis.areaRectangle = areaRectangle;\n\t\tthis.init(elements);\n\t}\n\n\tSpider.prototype.init = function(elements){\n\t\tvar that = this;\n\t\tthis.canvas = Dragee.util.createCanvas(this.area, this.areaRectangle);\n\t\tthis.context = this.canvas.getContext(\"2d\");\n\n\t\tthis.draggables = elements.map(function (element, i){\n\t\t\tvar angle = this.options.angle + i * this.options.dAngle,\n\t\t\t\thalfSize = mathPoint.getSizeOfElement(element).mult(0.5),\n\t\t\t\tstart = mathPoint.getPointFromRadialSystem(angle, this.options.startRadius, this.options.center).sub(halfSize),\n\t\t\t\tend = mathPoint.getPointFromRadialSystem(angle, this.options.endRadius, this.options.center).sub(halfSize),\n\t\t\t\tbound = Dragee.boundFactory(Dragee.boundType.line)(start, end);\n\n\t\t\treturn new Dragee.Draggable(element, {\n\t\t\t\tparent: this.area,\n\t\t\t\tbound: bound,\n\t\t\t\tposition: start,\n\t\t\t\tonMove:function (){\n\t\t\t\t\tthat.draw();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t}, this);\n\n\t\tthis.isInit = true;\n\t\tthis.draw();\n\t}\n\n\tSpider.prototype.draw = function (){\n\t\tvar point, i;\n\t\tif(!this.isInit){\n\t\t\treturn;\n\t\t}\n\t\tthis.context.clearRect(0, 0, this.areaRectangle.size.x, this.areaRectangle.size.y);\n\t\tthis.context.beginPath();\n\t\tpoint = this.draggables[0].getCenter();\n\t\tthis.context.moveTo(point.x, point.y);\n\t\tfor(i = 0; i < this.draggables.length; i++){\n\t\t\tpoint = this.draggables[i].getCenter();\n\t\t\tthis.context.lineTo(point.x, point.y);\n\t\t}\n\t\tthis.context.closePath();\n\t\tthis.context.lineWidth = this.options.lineWidth;\n\t\tthis.context.strokeStyle = this.options.strokeStyle;\n\t\tthis.context.stroke();\n\t\tthis.context.fillStyle = this.options.fillStyle;\n\t\tthis.context.fill();\n\t}\n\n\n\texport {spiders, Spider}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/spider.js\n **/","'use strict';\n\n\timport util from './util'\n\timport {mathPoint} from './point'\n\timport {Draggable, draggables, events} from './draggable'\n\timport {positionType, sortingFactory, positionFactory} from './positioning'\n\n\tvar Dragee = { util, boundType, boundFactory, Draggable };//todo remove after refactore\n\n\tvar arcSliders = [];\n\n\tfunction ArcSlider(area, element, options){\n\t\tvar i, areaRectangle = mathPoint.createRectangleFromElement(area, area),\n\t\t\thalfSize = mathPoint.getSizeOfElement(element).mult(0.5);\n\t\tthis.options = {\n\t\t\tcenter: areaRectangle.getCenter(),\n\t\t\tradius: areaRectangle.getMinSide() / 2,\n\t\t\tstartAngle: Math.PI,\n\t\t\tendAngle: 0,\n\t\t\tangles: [Math.PI,-Math.PI/4,0,Math.PI/4,Math.PI/2],\n\t\t\tonChange:function(){},\n\t\t\ttime: 500\n\t\t};\n\t\tfor(i in options){\n\t\t\tif(options.hasOwnProperty(i)){\n\t\t\t\tthis.options[i] = options[i];\n\t\t\t}\n\t\t}\n\t\tthis.shiftedCenter = this.options.center.sub(halfSize);\n\t\tthis.onChange = this.options.onChange;\n\t\tarcSliders.push(this);\n\t\tthis.area = area;\n\t\tthis.init(element);\n\t}\n\n\tArcSlider.prototype.init = function (element){\n\t\tvar that = this,\n\t\t\tangle = this.options.startAngle,\n\t\t\tposition = mathPoint.getPointFromRadialSystem(\n\t\t\t\tangle,\n\t\t\t\tthis.options.radius,\n\t\t\t\tthis.shiftedCenter\n\t\t\t),\n\t\t\tbound = Dragee.boundFactory(Dragee.boundType.arc)(\n\t\t\t\tthat.shiftedCenter,\n\t\t\t\tthat.options.radius,\n\t\t\t\tthis.options.startAngle,\n\t\t\t\tthis.options.endAngle\n\t\t\t);\n\n\t\tthis.angle = angle;\n\t\tthis.draggable = new Dragee.Draggable(element, {\n\t\t\tparent: this.area,\n\t\t\tbound: bound,\n\t\t\tposition: position,\n\t\t\tonMove: function (){\n\t\t\t\tthat.change();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t};\n\n\tArcSlider.prototype.updateAngle = function (){\n\t\tthis.angle = mathPoint.getAngle(this.shiftedCenter, this.draggable.position);\n\t};\n\n\tArcSlider.prototype.change = function (){\n\t\tthis.updateAngle();\n//\t\tvar angle = mathPoint.getNearestAngle(this.options.angles, this.angle);\n//\t\tthis.setAngle(angle,this.options.time);\n\t\tthis.onChange(this.angle);\n\t};\n\n\tArcSlider.prototype.setAngle = function(angle, time){\n\t\tthis.angle = mathPoint.normalizeAngle(angle, position);\n\t\tvar position = mathPoint.getPointFromRadialSystem(\n\t\t\tthis.angle,\n\t\t\tthis.options.radius,\n\t\t\tthis.shiftedCenter\n\t\t);\n\t\tthis.draggable.move(position, time||0, true, true);\n\t\tthis.onChange(this.angle);\n\t};\n\n  export {arcSliders, ArcSlider};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/arcslider.js\n **/","'use strict';\n\n    import util from './util'\n  \timport {mathPoint, Point} from './point'\n  \timport {Draggable, draggables, events} from './draggable'\n  \timport {positionType, sortingFactory, positionFactory} from './positioning'\n\n    var Dragee = { util, boundType, boundFactory, Draggable };//todo remove after refactore\n\n    var isTouch = 'ontouchstart' in window;\n    var charts = [];\n\n    function getArrayWithBoundIndexes(index,length){\n        var retIndexes = [];\n        if(index != -1){\n            retIndexes.push(index);\n            retIndexes.push((index + 1) % length);\n        }\n        return retIndexes;\n    }\n\n\n    function Chart(area, elements, options){\n        var i, areaRectangle = mathPoint.createRectangleFromElement(area, area);\n        this.options = {\n            center: areaRectangle.getCenter(),\n            radius: areaRectangle.getMinSide() / 2,\n            touchRadius: areaRectangle.getMinSide() / 2,\n            boundAngle: Math.PI/9,\n            fillStyles: Dragee.util.range(0, elements.length).map(function(){\n                return Dragee.util.randomColor();\n            }),\n            initAngles: Dragee.util.range(-90, 270, 360 / elements.length).map(function(angle){\n                return mathPoint.toRadian(angle);\n            }),\n            onDraw:function(){},\n            limitImg: null,\n            limitImgOffset: new Point(0,0),\n            isSelectable: false\n        };\n        for(i in options){\n            if(options.hasOwnProperty(i)){\n                this.options[i] = options[i];\n            }\n        }\n\n        charts.push(this);\n        this.onDraw = this.options.onDraw;\n        this.area = area;\n        this.areaRectangle = areaRectangle;\n        this.init(elements);\n    }\n\n    Chart.prototype.init = function (elements){\n        var that = this;\n        this.canvas = Dragee.util.createCanvas(this.area, this.areaRectangle);\n        this.context = this.canvas.getContext(\"2d\");\n        this.draggables = elements.map(function (element, i){\n            var angle = this.options.initAngles[i],\n                halfSize = mathPoint.getSizeOfElement(element).mult(0.5),\n                position = mathPoint.getPointFromRadialSystem(\n                    angle,\n                    this.options.touchRadius,\n                    this.options.center.sub(halfSize)\n                ),\n                bound = Dragee.boundFactory(Dragee.boundType.arc)(\n                    that.options.center.sub(halfSize),\n                    that.options.touchRadius,\n                    that.getBoundAngle(i, false),\n                    that.getBoundAngle(i, true)\n                );\n\n            return new Dragee.Draggable(element, {\n                parent:this.area,\n                bound:bound,\n                position:position,\n                onMove:function (){\n                    that.draw();\n                    return true;\n                }\n            });\n        }, this);\n\n        this.isInit = true;\n        if(this.options.isSelectable){\n            this.initSelect();\n        }\n        this.draw();\n    };\n\n    Chart.prototype.initSelect = function (){\n        var that = this;\n        this.setActiveArc(-1);\n\n        this.canvas.addEventListener(events.start, function(e){\n            var point = new Point(\n                    isTouch ? e.changedTouches[0].pageX : e.clientX,\n                    isTouch ? e.changedTouches[0].pageY : e.clientY\n                ), index;\n\n            if(!that.canvasOffset){\n                that.canvasOffset = mathPoint.getOffset(that.canvas);\n            }\n\n            point = point.sub(that.canvasOffset);\n            index = that.getArcOnPoint(point);\n            if(index!=-1){\n                that.setActiveArc((that.activeArcIndex !== index)?index:-1);\n            }\n        });\n    };\n\n    Chart.prototype.updateAngles = function (){\n        this.angles = this.draggables.map(function(draggable){\n            var halfSize = draggable.getSize().mult(0.5);\n            return mathPoint.getAngle(this.options.center.sub(halfSize), draggable.position);\n        },this);\n    };\n\n    Chart.prototype.getBoundAngle = function(index, isClossing){\n        var that = this, sign = isClossing?1:-1;\n\n        return function(){\n            var i = (index + sign) % that.angles.length;\n            if(i < 0){\n                i += that.angles.length;\n            }\n            return mathPoint.normalizeAngle(that.angles[i] - sign * that.options.boundAngle);\n        };\n    };\n\n    Chart.prototype.draw = function (){\n        if(!this.isInit){\n            return;\n        }\n\n        this.updateAngles();\n        this.context.clearRect(0, 0, this.areaRectangle.size.x, this.areaRectangle.size.y);\n        this.draggables.forEach(function(draggable, index){\n            this.drawArc(this.context, this.options.center, this.options.radius, index);\n        }, this);\n\n        this.draggables.forEach(function(draggable, index){\n            var enableIndexes;\n            if(this.options.isSelectable){\n                enableIndexes = getArrayWithBoundIndexes(this.activeArcIndex, this.draggables.length);\n                if(enableIndexes.indexOf(index) !== -1){\n                    this.drawLimitImg(index);\n                }\n            } else {\n                this.drawLimitImg(index);\n            }\n        }, this);\n        this.onDraw();\n    };\n\n    Chart.prototype.createClone = function(element, options){\n        var i, canvas, context, opts, rectangle, cloneObj, that = this;\n        if(!this.isInit){\n            return;\n        }\n        rectangle = mathPoint.createRectangleFromElement(element, element);\n        opts = {\n            center: rectangle.getCenter(),\n            radius: rectangle.getMinSide() / 2,\n            fillStyles: this.options.fillStyles\n        };\n        for(i in options){\n            if(options.hasOwnProperty(i)){\n                opts[i] = options[i];\n            }\n        }\n        canvas = Dragee.util.createCanvas(element, rectangle);\n        context = canvas.getContext(\"2d\");\n        cloneObj = {\n            draw: function(){\n                context.clearRect(0, 0, rectangle.size.x, rectangle.size.y);\n                that.draggables.forEach(function(draggable, index){\n                    that.drawArc(context, opts.center, opts.radius, index);\n                });\n            }\n        };\n        cloneObj.draw();\n        return cloneObj;\n    };\n\n    Chart.prototype.getFillStyle = function(index){\n        if(typeof this.options.fillStyles[index] === \"function\"){\n            this.options.fillStyles[index] = this.options.fillStyles[index].call(this);\n        }\n        return this.options.fillStyles[index];\n    };\n\n    Chart.prototype.drawArc = function(context,center,radius,index){\n        var startAngle = this.angles[index],\n            endAngle = this.angles[(index+1)%this.angles.length],\n            color = this.getFillStyle(index);\n\n        context.beginPath();\n        context.moveTo(center.x, center.y);\n        context.arc(center.x, center.y, radius, startAngle, endAngle, false);\n        context.lineTo(center.x, center.y);\n        context.closePath();\n        context.fillStyle = color;\n        context.fill();\n    };\n\n    Chart.prototype.drawLimitImg = function(index){\n        var angle, point, img;\n        if(this.options.limitImg){\n            img = this.options.limitImg instanceof Array ? this.options.limitImg[index] : this.options.limitImg;\n        }\n        if(!img){\n            return ;\n        }\n        angle = mathPoint.normalizeAngle(this.angles[index]);\n        point = new Point(0, -img.height/2);\n        point = point.add(this.options.limitImgOffset);\n        this.context.translate(this.areaRectangle.size.x / 2, this.areaRectangle.size.y / 2);\n        this.context.rotate(angle);\n        this.context.drawImage(img, point.x, point.y);\n        this.context.setTransform(1, 0, 0, 1, 0, 0);\n    };\n\n    Chart.prototype.getAnglesDiff = function(){\n        var baseAngle = this.angles[0],\n            angles = this.angles.slice(1);\n\n        angles.push(baseAngle);\n        return angles.map(function(angle){\n            var diffAngle = mathPoint.normalizeAngle(angle - baseAngle);\n            baseAngle = angle;\n            return diffAngle;\n        });\n    };\n\n    Chart.prototype.getPercent = function(){\n        return this.getAnglesDiff().map(function(diffAngle){\n            return diffAngle / (2 * Math.PI);\n        });\n    };\n\n    Chart.prototype.getArcBisectrixs = function(){\n        return this.getAnglesDiff().map(function(diffAngle,i){\n            return mathPoint.normalizeAngle(this.angles[i] + diffAngle/2);\n        },this);\n    };\n\n    Chart.prototype.getArcOnPoint = function(point){\n        var angle = mathPoint.getAngle(this.options.center, point), i, offset, j,\n            radius = mathPoint.getLength()(this.options.center, point);\n        if(radius > this.options.radius ){\n            return -1;\n        }\n        offset = -1;\n        for(i = 0; i < this.angles.length; i++){\n            if(offset === -1 || this.angles[offset] > this.angles[i]){\n                offset = i;\n            }\n        }\n        for(i = 0,j = offset; i < this.angles.length; i++,j = (i + offset) % this.angles.length){\n            if(angle < this.angles[j]){\n                break;\n            }\n        }\n        if(--j < 0){\n            j += this.angles.length;\n        }\n        return j;\n    };\n\n    Chart.prototype.setAngles = function(angles){\n        this.angles = angles;\n        this.draggables.forEach(function (draggable, i){\n            var angle = this.angles[i],\n                halfSize = draggable.getSize().mult(0.5),\n                position = mathPoint.getPointFromRadialSystem(\n                    angle,\n                    this.options.touchRadius,\n                    this.options.center.sub(halfSize)\n                );\n\n            draggable.move(position, 0, true, true);\n        }, this);\n        this.draw();\n    };\n\n    Chart.prototype.setActiveArc = function(index){\n        var enableIndexes = getArrayWithBoundIndexes(index, this.draggables.length);\n        this.activeArcIndex = index;\n        this.draggables.forEach(function(draggable, i){\n            draggable.enable = enableIndexes.indexOf(i) !== -1;\n        });\n        this.draw();\n    };\n\n\n    export {charts, Chart}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/chart.js\n **/","'use strict';\n\n\timport {mathPoint, Point} from './point'\n\timport {Draggable} from './draggable'\n\timport {List} from './list'\n\n\tvar Dragee = { List, Draggable };//todo remove after refactore\n\n\tfunction ListSwitcher(draggables, options){\n\t\toptions = options || {};\n\t\toptions.stepOn = options.stepOn || new Point(-50, 0);\n\t\tDragee.List.call(this, draggables, options);\n\t}\n\n\textend(ListSwitcher, Dragee.List);\n\n\tListSwitcher.prototype.init = function(){\n\t\tvar that = this;\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.isOn = false;\n\t\t\tdraggable.onEnd.add(function(){\n\t\t\t\tthat.onEnd(this);\n\t\t\t\treturn true;\n\t\t\t});\n\t\t});\n\t};\n\n\tListSwitcher.prototype.onEnd = function(draggable){\n\t\tvar fixPositions = this.getCurrentFixPositionWithOff(), currentIndex, excangeIndex;\n\t\tcurrentIndex = this.draggables.indexOf(draggable);\n\t\texcangeIndex = mathPoint.indexOfNearPoint(fixPositions, draggable.position, this.options.radius, this.options.getLength);\n\t\tif(excangeIndex === -1 || excangeIndex === currentIndex){\n\t\t\tthis.moveDraggable(currentIndex, draggable.position, fixPositions[currentIndex], this.options.timeEnd);\n\t\t} else {\n\t\t\tif(this.draggables[excangeIndex].isDragee){\n\t\t\t\tthis.fixToOff(excangeIndex, fixPositions[currentIndex]);\n\t\t\t} else {\n\t\t\t\tthis.moveDraggableToOff(excangeIndex, fixPositions[currentIndex], this.options.timeExcange);\n\t\t\t}\n\t\t\tthis.moveDraggable(currentIndex, draggable.position, fixPositions[excangeIndex], this.options.timeEnd);\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\treturn true;\n\t};\n\n\tListSwitcher.prototype.moveDraggable = function(index, position, fixOffPosition, time){\n\t\tvar positions = [fixOffPosition, fixOffPosition.add(this.options.stepOn)], isOn = mathPoint.indexOfNearPoint(positions, position, -1, mathPoint.getLength({x: true}));\n\t\tif(this.draggables[index].isOn !== !!isOn){\n\t\t\tthis.draggables[index].isOn = !!isOn;\n\t\t\tthis.onChange.fire();\n\t\t}\n\t\tthis.draggables[index].move(positions[isOn], time, true);\n\t};\n\n\tListSwitcher.prototype.fixToOff = function(index, fixOffPosition){\n\t\tthis.draggables[index].isOn = false;\n\t\tthis.draggables[index].fixPosition = fixOffPosition;\n\t};\n\n\tListSwitcher.prototype.moveDraggableToOff = function(index, fixOffPosition, time){\n\t\tthis.draggables[index].isOn = false;\n\t\tthis.draggables[index].move(fixOffPosition, time, true);\n\t};\n\n\tListSwitcher.prototype.getCurrentFixPositionWithOff = function(){\n\t\treturn this.draggables.map(function(draggable){\n\t\t\treturn draggable.isOn ? draggable.fixPosition.sub(this.options.stepOn) : draggable.fixPosition.clone();\n\t\t}, this);\n\t};\n\n\tListSwitcher.prototype.getSortedDraggables = function(){\n\t\treturn this.draggables.map(\n\t\t\t\tfunction(draggable){\n\t\t\t\t\treturn draggable.initPosition;\n\t\t\t\t}).map(function(position){\n\t\t\t\t\treturn this.draggables.filter(function(draggable){\n\t\t\t\t\t\treturn draggable.fixPosition.compare(position) || draggable.fixPosition.compare(position.add(this.options.stepOn));\n\t\t\t\t\t}, this)[0];\n\t\t\t\t}, this);\n\t};\n\n\tListSwitcher.prototype.reset = function(){\n\t\tthis.draggables.forEach(function(draggable){\n\t\t\tdraggable.move(draggable.initPosition, 0, true, false);\n\t\t\tdraggable.isOn = false;\n\t\t});\n\t};\n\n\tListSwitcher.prototype.__defineGetter__(\"positions\", function(){\n\t\treturn this.draggables.map(function(draggable){\n\t\t\tvar position = draggable.fixPosition.clone();\n\t\t\tposition.isOn = draggable.isOn;\n\t\t\treturn position;\n\t\t});\n\t});\n\n\tListSwitcher.prototype.__defineSetter__(\"positions\", function(positions){\n\t\tvar message = \"wrong array length\";\n\t\tif(positions.length === this.draggables.length){\n\t\t\tpositions.forEach(function(point, i){\n\t\t\t\tthis.draggables[i].isOn = point.isOn;\n\t\t\t\tthis.draggables[i].move(point, 0, true, true);\n\t\t\t}, this);\n\t\t} else {\n\t\t\talert(message);\n\t\t\tthrow message;\n\t\t}\n\t});\n\n\n\t function listSwitcherFactory(element, draggableElements, options){\n\t\tvar draggables, draggableOptions, listOptions;\n\t\toptions = options || {};\n\t\tdraggableOptions = options.draggable || {};\n\t\tlistOptions = options.list || {};\n\t\tdraggableOptions.parent = draggableOptions.parent || element;\n\t\tdraggableElements = Array.prototype.slice.call(draggableElements);\n\n\t\tdraggables = draggableElements.map(function(element){\n\t\t\treturn new Dragee.Draggable(element, draggableOptions);\n\t\t});\n\t\treturn new ListSwitcher(draggables, listOptions);\n\t}\n\n  export {listSwitcherFactory, ListSwitcher}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/listswitcher.js\n **/"],"sourceRoot":""}