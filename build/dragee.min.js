!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Dragee",[],e):"object"==typeof exports?exports.Dragee=e():t.Dragee=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){(function(t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ListSwitcher=e.listSwitcherFactory=e.Chart=e.charts=e.ArcSlider=e.arcSliders=e.Spider=e.spiders=e.bound=e.positionFactory=e.sortingFactory=e.positionType=e.scope=e.scopeFactory=e.Scope=e.defaultScope=e.scopes=e.Target=e.targets=e.listFactory=e.List=e.Draggable=void 0,n(1);var i=n(2),o=n(4),r=n(11),s=n(9),a=n(8),h=n(10),u=n(7),c=n(12),p=n(13),f=n(14),g=n(15);t.Point=i.Point,e.Draggable=o.Draggable,e.List=r.List,e.listFactory=r.listFactory,e.targets=s.targets,e.Target=s.Target,e.scopes=a.scopes,e.defaultScope=a.defaultScope,e.Scope=a.Scope,e.scopeFactory=a.scopeFactory,e.scope=a.scope,e.positionType=h.positionType,e.sortingFactory=h.sortingFactory,e.positionFactory=h.positionFactory,e.bound=u.bound,e.spiders=c.spiders,e.Spider=c.Spider,e.arcSliders=p.arcSliders,e.ArcSlider=p.ArcSlider,e.charts=f.charts,e.Chart=f.Chart,e.listSwitcherFactory=g.listSwitcherFactory,e.ListSwitcher=g.ListSwitcher}).call(e,function(){return this}())},function(t,e){"use strict";Array.prototype.forEach||(Array.prototype.forEach=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=arguments[1],o=0;o<n;o++)o in e&&t.call(i,e[o],o,e)}),Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=[],o=arguments[1],r=0;r<n;r++)if(r in e){var s=e[r];t.call(o,s,r,e)&&i.push(s)}return i}),Array.prototype.every||(Array.prototype.every=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=arguments[1],o=0;o<n;o++)if(o in e&&!t.call(i,e[o],o,e))return!1;return!0}),Array.prototype.map||(Array.prototype.map=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=new Array(n),o=arguments[1],r=0;r<n;r++)r in e&&(i[r]=t.call(o,e[r],r,e));return i}),Array.prototype.some||(Array.prototype.some=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=arguments[1],o=0;o<n;o++)if(o in e&&t.call(i,e[o],o,e))return!0;return!1}),Array.prototype.removeItem||(Array.prototype.removeItem=function(t){for(var e=0;e<this.length;e++)this[e]===t&&(this.splice(e,1),e--);return this}),Element.prototype.hasClass=function(t){var e=new RegExp("(^|\\s)"+t+"(\\s|$)","g");return e.test(this.className)},Element.prototype.addClass=function(t){return this.hasClass(t)?this:(this.className=(this.className+" "+t).replace(/\s+/g," ").replace(/(^ | $)/g,""),this)},Element.prototype.removeClass=function(t){var e=new RegExp("(^|\\s)"+t+"(\\s|$)","g");return this.className=this.className.replace(e,"$1").replace(/\s+/g," ").replace(/(^ | $)/g,""),this},HTMLElement.prototype.appbeginChild=function(t){this.firstChild?this.insertBefore(t,this.firstChild):this.appendChild(t)},HTMLElement.prototype.exchange=function(t){var e=t.parentNode,n=t.nextElementSibling;return this.parentNode.insertBefore(t,this),n?e.insertBefore(this,n):e.appendChild(this),t};var n=function(t,e){if(arguments[2])for(var n=2,i=arguments.length;n<i;n++)t.prototype[arguments[n]]=e.prototype[arguments[n]];else for(methodName in e.prototype)t.prototype[methodName]||(t.prototype[methodName]=e.prototype[methodName])};n(NodeList,Array,"forEach"),Math.getNearIndex=function(t,e){for(var n=Math.abs(t[0]-e),i=0,o=0;o<t.length;o++){var r=Math.abs(t[o]-e);r<n&&(n=r,i=o)}return i},Math.getNearIndexWithCaptureRadius=function(t,e,n){for(var i=Math.abs(t[0]-n),o=0,r=0;r<t.length;r++){var s=Math.abs(t[r]-n);s<i&&(i=s,o=r)}return i>e?-1:o},Math.bound=function(t,e,n){return Math.max(t,Math.min(e,n))},Math.boundPoint=function(t,e,n){var i=Math.max(t.x,Math.min(e.x,n.x)),o=Math.max(t.y,Math.min(e.y,n.y));return new Point(i,o)},Math.toRadian=function(t){return t%361*Math.PI/180},String.prototype.substrend=function(t){return this.substr(0,this.length-t)},window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)}}();try{!Object.prototype.__defineGetter__&&Object.defineProperty({},"x",{get:function(){return!0}}).x&&(Object.defineProperty(Object.prototype,"__defineGetter__",{enumerable:!1,configurable:!0,value:function(t,e){Object.defineProperty(this,t,{get:e,enumerable:!0,configurable:!0})}}),Object.defineProperty(Object.prototype,"__defineSetter__",{enumerable:!1,configurable:!0,value:function(t,e){Object.defineProperty(this,t,{set:e,enumerable:!0,configurable:!0})}}))}catch(i){}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){this.x=t,this.y=e}function r(t,e){this.position=t,this.size=e}Object.defineProperty(e,"__esModule",{value:!0}),e.mathPoint=e.Rectangle=e.Point=void 0;var s,a=n(3),h=i(a),u={util:h["default"]};o.prototype.toString=function(){return"{x="+this.x+",y="+this.y+"}"},o.prototype.add=function(t){return new o(this.x+t.x,this.y+t.y)},o.prototype.sub=function(t){return new o(this.x-t.x,this.y-t.y)},o.prototype.mult=function(t){return new o(this.x*t,this.y*t)},o.prototype.negative=function(){return new o((-this.x),(-this.y))},o.prototype.compare=function(t){return this.x===t.x&&this.y===t.y},o.prototype.clone=function(){return new o(this.x,this.y)},r.prototype.getP1=function(){return this.position},r.prototype.getP2=function(){return new o(this.position.x+this.size.x,this.position.y)},r.prototype.getP3=function(){return this.position.add(this.size)},r.prototype.getP4=function(){return new o(this.position.x,this.position.y+this.size.y)},r.prototype.getCenter=function(){return this.position.add(this.size.mult(.5))},r.prototype.or=function(t){var e=new o(Math.min(this.position.x,t.position.x),Math.min(this.position.y,t.position.y)),n=new o(Math.max(this.position.x+this.size.x,t.position.x+t.size.x),Math.max(this.position.y+this.size.y,t.position.y+t.size.y)).sub(e);return new r(e,n)},r.prototype.and=function(t){var e=new o(Math.max(this.position.x,t.position.x),Math.max(this.position.y,t.position.y)),n=new o(Math.min(this.position.x+this.size.x,t.position.x+t.size.x),Math.min(this.position.y+this.size.y,t.position.y+t.size.y)).sub(e);return n.x<=0||n.y<=0?null:new r(e,n)},r.prototype.includePoint=function(t){return!(this.position.x>t.x||this.position.x+this.size.x<t.x||this.position.y>t.y||this.position.y+this.size.y<t.y)},r.prototype.includeRectangle=function(t){return this.includePoint(t.position)&&this.includePoint(t.getP3())},r.prototype.moveToBound=function(t,e){var n,i,o,r,s,a;if(e)n=e;else{if(i=this.and(t),!i)return t;n=i.size.x>i.size.y?"y":"x"}return o=this.getCenter(),r=t.getCenter(),s=o[n]>r[n]?-1:1,a=s>0?this.position[n]+this.size[n]-t.position[n]:this.position[n]-(t.position[n]+t.size[n]),t.position[n]=t.position[n]+a,t},r.prototype.getSquare=function(){return this.size.x*this.size.y},r.prototype.styleApply=function(t){t=t||document.querySelector("ind"),t.style.left=this.position.x+"px",t.style.top=this.position.y+"px",t.style.width=this.size.x+"px",t.style.height=this.size.y+"px"},r.prototype.growth=function(t){this.size=this.size.add(t),this.position=this.position.add(t.mult(-.5))},r.prototype.getMinSide=function(){return Math.min(this.size.x,this.size.y)},e.mathPoint=s={getDistance:function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},distance:function(t,e){return s.getDistance(t,e)},getXDifference:function(t,e){return Math.abs(t.x-e.x)},getYDifference:function(t,e){return Math.abs(t.y-e.y)},transformedSpaceDistanceFactory:function(t){return function(e,n){return Math.sqrt(Math.pow(t.x*Math.abs(e.x-n.x),2)+Math.pow(t.y*Math.abs(e.y-n.y),2))}},indexOfNearPoint:function(t,e,n,i){var o,r,a,h=0;if(i=i||s.getDistance,0===t.length)return-1;for(o=i(t[0],e),r=0;r<t.length;r++)a=i(t[r],e),a<o&&(o=a,h=r);return n>=0&&o>n?-1:h},bound:function(t,e,n){return Math.max(t,Math.min(e,n))},boundPoint:function(t,e,n){var i=Math.max(t.x,Math.min(e.x,n.x)),r=Math.max(t.y,Math.min(e.y,n.y));return new o(i,r)},directCrossing:function(t,e,n,i){var r,s,a,h,u,c,p;return n.x===i.x&&(r=n,n=t,t=r,r=i,i=e,e=r),t.x===e.x?(a=(i.y-n.y)/(i.x-n.x),u=(i.x*n.y-n.x*i.y)/(i.x-n.x),c=t.x,p=c*a+u,new o(c,p)):(s=(e.y-t.y)/(e.x-t.x),h=(e.x*t.y-t.x*e.y)/(e.x-t.x),a=(i.y-n.y)/(i.x-n.x),u=(i.x*n.y-n.x*i.y)/(i.x-n.x),c=(h-u)/(a-s),p=c*s+h,new o(c,p))},boundToSegment:function(t,e,n){var i,r;return i=s.bound(Math.min(t.x,e.x),Math.max(t.x,e.x),n.x),i!=n.x&&(r=i===t.x?t.y:e.y,n=new o(i,r)),r=s.bound(Math.min(t.y,e.y),Math.max(t.y,e.y),n.y),r!=n.y&&(i=r===t.y?t.x:e.x,n=new o(i,r)),n},boundToLine:function(t,e,n){var i=new o(n.x-t.x,n.y-t.y),r=new o(e.x-t.x,e.y-t.y),s=r.x*r.x+r.y*r.y,a=i.x*r.x+i.y*r.y,h=a/s;return new o(t.x+r.x*h,t.y+r.y*h)},getPointInLine:function(t,e,n){var i=e.x-t.x,r=e.y-t.y;return new o(t.x+n*i,t.y+n*r)},getPointInLineByLenght:function(t,e,n){var i=e.x-t.x,r=e.y-t.y,a=n/s.distance(t,e);return new o(t.x+a*i,t.y+a*r)},createRectangleFromElement:function(t,e,n,i){var o=this.getSizeOfElement(t,n);return new r(this.getOffset(t,e||t.parentNode,i),o)},getSizeOfElement:function(t,e){var n=parseInt(window.getComputedStyle(t).width),i=parseInt(window.getComputedStyle(t).height);return e||(n+=u.util.getSumValueOfStyleRule(t,["padding-left","padding-right","border-left-width","border-right-width"]),i+=u.util.getSumValueOfStyleRule(t,["padding-top","padding-bottom","border-top-width","border-bottom-width"])),new o(n,i)},getOffset:function(t,e,n){var i=t.getBoundingClientRect(),r=e.getBoundingClientRect();return new o(i.left-r.left,i.top-r.top)},getPointFromRadialSystem:function(t,e,n){return n=n||new o(0,0),n.add(new o(e*Math.cos(t),e*Math.sin(t)))},addPointToBoundPoints:function(t,e,n){var i,o=t.filter(function(t){return t.y>e.y||(n?t.x<e.x:t.x>e.x)});for(i=0;i<o.length;i++)if(e.y<o[i].y)return o.splice(i,0,e),o;return o.push(e),o},getAngle:function(t,e){var n=e.sub(t);return this.normalizeAngle(Math.atan2(n.y,n.x))},toRadian:function(t){return t%360*Math.PI/180},toDegree:function(t){return 180*t/Math.PI%360},boundAngle:function(t,e,n){var i,o;return t<e&&n>t&&n<e?n:e<t&&(n<e||n>t)?n:(i=this.getAngleDiff(t,n),o=this.getAngleDiff(e,n),i<o?t:e)},getNearestAngle:function(t,e){var n,i,o,r=2*Math.PI;for(n=0;n<t.length;n++)i=s.getAngleDiff(t[n],e),r<i&&(r=i,o=t[n]);return o},getAngleDiff:function(t,e){var n=Math.min(t,e),i=Math.max(t,e);return Math.min(i-n,n+2*Math.PI-i)},normalizeAngle:function(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}},e.Point=o,e.Rectangle=r,e.mathPoint=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={getDefaultParent:function(t){for(var e=t.parentNode;e.parentNode&&"static"===window.getComputedStyle(e).position;)e=e.parentNode;return e},bind:function(t,e){return function(){return t.apply(e,[].splice.call(arguments,0))}},getTouchByID:function(t,e){var n;for(n=0;n<t.changedTouches.length;n++)if(t.changedTouches[n].identifier===e)return t.changedTouches[n];return!1},getSumValueOfStyleRule:function(t,e){return e.reduce(function(e,n){return e+parseInt(window.getComputedStyle(t)[n]||0)},0)},appendFirstChild:function(t,e){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},range:function(t,e,n){var i=[];if("undefined"==typeof e&&(e=t,t=0),"undefined"==typeof n&&(n=1),n>0&&t>=e||n<0&&t<=e)return[];for(var o=t;n>0?o<e:o>e;o+=n)i.push(o);return i},setStyle:function(t,e){e=e||{};var n,i="";for(n in e)e.hasOwnProperty(n)&&(i+=n+": "+e[n]+"; ");t.style.cssText=i},randomColor:function(){var t=function(){return Math.round(255*Math.random())},e=function(t){for(var e=t.toString(16);e.length<2;)e="0"+e;return e},n=t(),i=t(),o=t();return"#"+e(n)+e(i)+e(o)},createCanvas:function(t,e){var i;return"static"===window.getComputedStyle(t).position&&(t.style.position="relative"),i=document.createElement("canvas"),i.setAttribute("width",e.size.x+"px"),i.setAttribute("height",e.size.y+"px"),n.setStyle(i,{position:"absolute",left:e.position.y+"px",top:e.position.y+"px",width:e.size.x+"px",height:e.size.y+"px"}),n.appendFirstChild(t,i),i}};e["default"]=n,t.exports=e["default"]},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){e=e||{};var n,i=this,r=e.parent||l.util.getDefaultParent(t);this.targets=[],this.options={parent:r,bound:l.bound.toElement(r,r),startFilter:!1,isContentBoxSize:!1,position:!1};for(n in e)e.hasOwnProperty(n)&&(this.options[n]=e[n]);this.onEnd=new l.Event(this,{isReverse:!0,isStopOnTrue:!0}),this.onMove=new l.Event(this),this.onStart=new l.Event(this),this.onEnd.add(function(){this.move(this.position,0,!0,!0)}),e.onEnd&&this.onEnd.add(e.onEnd),e.onMove&&this.onMove.add(e.onMove),e.onStart&&this.onStart.add(e.onStart),this.element=t,this.bound=this.options.bound,x(this),o.onCreate.fire(this),i.init()}Object.defineProperty(e,"__esModule",{value:!0}),e.events=e.draggables=e.Draggable=void 0;var r=n(3),s=i(r),a=n(5),h=i(a),u=n(6),c=i(u),p=n(7),f=n(2),g=n(8),l={util:s["default"],bound:p.bound,Event:h["default"]},d="ontouchstart"in window,y={start:"mousedown",move:"mousemove",end:"mouseup"},m={start:"touchstart",move:"touchmove",end:"touchend"},v=d?m:y,b=[],x=function(t){var e="for this element Dragee.Draggable is already exist, don't create it twice ";if(b.some(function(e){return t.element===e.element}))throw e;b.push(t)},P=function(t){g.defaultScope.addDraggable(t)},w=(0,c["default"])("transform"),E=(0,c["default"])("transition");o.onCreate=new l.Event(o,{isReverse:!0,isStopOnTrue:!0}),o.onCreate.add(P),o.prototype.init=function(){this._enable=!0,this.offset=f.mathPoint.getOffset(this.element,this.options.parent,!0),this.fixPosition=this.offset,this.position=this.offset,this.options.position?(this.initPosition=this.options.position,this.move(this.initPosition,0,!0,!0)):this.initPosition=this.offset,this._dragStart=l.util.bind(this.dragStart,this),this._dragMove=l.util.bind(this.dragMove,this),this._dragEnd=l.util.bind(this.dragEnd,this),this.element.addEventListener(m.start,this._dragStart),this.element.addEventListener(y.start,this._dragStart),this.bound.refresh&&this.bound.refresh()},o.prototype.reinit=function(){this.offset=f.mathPoint.getOffset(this.element,this.options.parent,!0),this.fixPosition=this.offset,this.position=this.offset,this.options.position?(this.initPosition=this.options.position,this.move(this.initPosition,0,!0,!0)):this.initPosition=this.offset,this.bound.refresh&&this.bound.refresh()},o.prototype.getSize=function(t){return f.mathPoint.getSizeOfElement(this.element,this.options.isContentBoxSize)},o.prototype.getPosition=function(){return this.position=this.offset.add(this._transformPosition||new f.Point(0,0)),this.position},o.prototype.getCenter=function(){return this.position.add(this.getSize().mult(.5))},o.prototype._setTranslate=function(t){this._transformPosition=t;var e=this.element.style[w],n=" translate3d("+t.x+"px,"+t.y+"px, 0px)",i=window.navigator.userAgent,o=i.indexOf("MSIE ");o?(n=" translate("+t.x+"px,"+t.y+"px)",/translate\([^)]+\)/.test(e)?e=e.replace(/translate\([^)]+\)/,n):e+=n):/translate3d\([^)]+\)/.test(e)?e=e.replace(/translate3d\([^)]+\)/,n):e+=n,this.element.style[w]=e},o.prototype.move=function(t,e,n,i){var o=this;e=e||0,t=t.clone(),n&&(this.fixPosition=t),this.determineDirection(t),this.position=t,E&&(o.element.style[E]=e+"ms"),o._setTranslate(t.sub(o.offset)),i||o.onMove.fire()},o.prototype.refreshPosition=function(){this.setPosition(this.getPosition())},o.prototype.setPosition=function(t){t=t.clone(),this.position=t,E&&(this.element.style[E]="0ms"),this._setTranslate(t.sub(this.offset))},o.prototype.setZeroTransition=function(){E&&(this.element.style[E]="0ms")},o.prototype.determineDirection=function(t){this.leftDirection=this.position.x<t.x,this.rightDirection=this.position.x>t.x,this.upDirection=this.position.y>t.y,this.downDirection=this.position.y<t.y},o.prototype.dragStart=function(t){if(this.currentEvent=t,this._enable&&(!this.options.startFilter||this.options.startFilter(t))){var e=d&&t instanceof TouchEvent;this._startTouchPoint=new f.Point(e?t.changedTouches[0].pageX:t.clientX,e?t.changedTouches[0].pageY:t.clientY),this._startPosition=this.getPosition(),e&&(this._touchId=t.changedTouches[0].identifier),t.stopPropagation(),t.target instanceof HTMLInputElement||t.target instanceof HTMLInputElement?t.target.focus():t.preventDefault(),document.addEventListener(m.move,this._dragMove),document.addEventListener(y.move,this._dragMove),document.addEventListener(m.end,this._dragEnd),document.addEventListener(y.end,this._dragEnd),this.isDragee=!0,this.onStart.fire(t),this.element.addClass("active"),this.onMove.fire(t)}},o.prototype.dragMove=function(t){this.currentEvent=t;var e,n,i,o=d&&t instanceof TouchEvent;o&&!(e=l.util.getTouchByID(t,this._touchId))||(t.stopPropagation(),t.preventDefault(),n=new f.Point(o?e.pageX:t.clientX,o?e.pageY:t.clientY),i=this._startPosition.add(n.sub(this._startTouchPoint)),i=this.bound(i,this.getSize()),this.touchPoint=n,this.move(i,0))},o.prototype.dragEnd=function(t){var e,n=d&&t instanceof TouchEvent;n&&!(e=l.util.getTouchByID(t,this._touchId))||(t.stopPropagation(),t.preventDefault(),this.onEnd.fire(t),document.removeEventListener(m.move,this._dragMove),document.removeEventListener(y.move,this._dragMove),document.removeEventListener(m.end,this._dragEnd),document.removeEventListener(y.end,this._dragEnd),this.isDragee=!1,this.element.removeClass("active"))},o.prototype.getRectangle=function(){return new f.Rectangle(this.position,this.getSize())},o.prototype.refresh=function(){this.getSize(!0),this.bound.refresh&&this.bound.refresh()},o.prototype.destroy=function(){this.element.removeEventListener(m.start,this._dragStart),this.element.removeEventListener(y.start,this._dragStart),this.element.removeEventListener(m.move,this._dragMove),this.element.removeEventListener(y.move,this._dragMove),this.element.removeEventListener(m.end,this._dragEnd),this.element.removeEventListener(y.end,this._dragEnd),this.onEnd.reset(),this.onMove.reset()},o.prototype.__defineGetter__("enable",function(){return this._enable}),o.prototype.__defineSetter__("enable",function(t){return t?this.element.removeClass("disable"):this.element.addClass("disable"),this._enable=t}),e.Draggable=o,e.draggables=b,e.events=v},function(t,e){"use strict";function n(t,e){e=e||{},this.funcs=[],this.context=t,this.isReverse=e.isReverse||!1,this.isStopOnTrue=e.isStopOnTrue||!1}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype.fire=function(){var t,e,n=[].slice.call(arguments),i=this.isReverse?this.funcs.slice().reverse():this.funcs;for(t=0;t<i.length;t++)if(e=i[t].apply(this.context,n),this.isStopOnTrue&&e)return!0;return!this.isStopOnTrue},n.prototype.add=function(t){this.funcs.push(t)},n.prototype.unshift=function(t){this.funcs.unshift(t)},n.prototype.remove=function(t){var e=this.funcs.indexOf(t);e!==-1&&this.funcs.splice(e,1)},n.prototype.reset=function(t){this.funcs=[]},e["default"]=n,t.exports=e["default"]},function(t,e,n){var i;/*!
	 * getStyleProperty v1.0.4
	 * original by kangax
	 * http://perfectionkills.com/feature-testing-css-properties/
	 * MIT license
	 */
!function(o){"use strict";function r(t){if(t){if("string"==typeof a[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,n=0,i=s.length;n<i;n++)if(e=s[n]+t,"string"==typeof a[e])return e}}var s="Webkit Moz ms Ms O".split(" "),a=document.documentElement.style;i=function(){return r}.call(e,n,e,t),!(void 0!==i&&(t.exports=i))}(window)},function(t,e,n){"use strict";function i(t){return function(e,n){var i=e.clone(),o=t.getP3();return t.position.x>i.x&&(i.x=t.position.x),t.position.y>i.y&&(i.y=t.position.y),o.x<i.x+n.x&&(i.x=o.x-n.x),o.y<i.y+n.y&&(i.y=o.y-n.y),i}}function o(t,e){var n,o=function(){return n.apply(this,arguments)};return o.refresh=function(){n=i(c.mathPoint.createRectangleFromElement(t,e))},o.refresh(),o}function r(t,e,n){return function(i,o){var r=i.clone();return r.x=t,e>r.y&&(r.y=e),n<r.y+o.y&&(r.y=n-o.y),r}}function s(t,e,n){return function(i,o){var r=i.clone();return r.y=t,e>r.x&&(r.x=e),n<r.x+o.x&&(r.x=n-o.x),r}}function a(t,e){var n=Math.atan2(e.y-t.y,e.x-t.x),i=n+Math.PI/2,o=10,r=Math.cos(i),s=Math.sin(i);return function(n,i){var a=new Point(n.x+o*r,n.y+o*s),h=c.mathPoint.directCrossing(t,e,n,a),u=c.mathPoint.getPointInLineByLenght(e,t,i.x);return h=c.mathPoint.boundToLine(t,u,h)}}function h(t,e){return function(n,i){var o=c.mathPoint.getPointInLineByLenght(t,n,e);return o}}function u(t,e,n,i){return function(o,r){var s="function"==typeof n?n():n,a="function"==typeof n?i():i,h=c.mathPoint.getAngle(t,o);return h=c.mathPoint.normalizeAngle(h),h=c.mathPoint.boundAngle(s,a,h),c.mathPoint.getPointFromRadialSystem(h,e,t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.bound=void 0;var c=n(2),p={toRectangle:i,toElement:o,toLineX:r,toLineY:s,toLine:a,toCircle:h,toArc:u};e.bound=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){d.forEach(function(n){t&&t.forEach(function(t){n.draggables.removeItem(t)}),e&&e.forEach(function(t){n.targets.removeItem(t)})}),this.draggables=t||[],this.targets=e||[],d.push(this),this.options={timeEnd:n&&n.timeEnd||400},this.onChange=new l.Event(this),n&&n.onChange&&this.onChange.add(n.onChange),this.init()}function r(t){var e=new o,n=function(t){return e.addDraggable(t),!0},i=function(t){return e.addTarget(t),!0};return f.Draggable.onCreate.add(n),g.Target.onCreate.add(i),t.call(),f.Draggable.onCreate.remove(n),g.Target.onCreate.remove(i),e}function s(t,e,n,i){var r,s,a,h,u;return i=i||{},a=i.draggable||{},h=i.target||{},u=i.scope||{},a.parent=a.parent||t,h.parent=h.parent||t,e=Array.prototype.slice.call(e),n=Array.prototype.slice.call(n),r=e.map(function(t){return new l.Draggable(t,a)}),s=n.map(function(t){return new l.Target(element,r,h)}),new o(r,s,u)}Object.defineProperty(e,"__esModule",{value:!0}),e.scope=e.scopeFactory=e.Scope=e.defaultScope=e.scopes=void 0;var a,h=n(3),u=i(h),c=n(5),p=i(c),f=n(4),g=n(9),l={util:u["default"],Draggable:f.Draggable,Target:g.Target,Event:p["default"]},d=[];o.prototype.init=function(){var t=this;this.draggables.forEach(function(e){e.onEnd.add(function(){return t.onEnd(this)})})},o.prototype.addDraggable=function(t){var e=this;this.draggables.push(t),t.onEnd.unshift(function(){return e.onEnd(this)})},o.prototype.addTarget=function(t){this.targets.push(t)},o.prototype.onEnd=function(t){var e=this.targets.filter(function(e){return e.draggables.indexOf(t)!==-1}).filter(function(e){return e.catchDraggable(t)}).sort(function(t,e){return t.getRectangle().getSquare()-e.getRectangle().getSquare()});return e.length?e[0].onEnd(t):t.targets.length&&t.move(t.initPosition,this.options.timeEnd,!0,!0),this.onChange.fire(),!0},o.prototype.reset=function(){this.targets.forEach(function(t){t.reset()})},o.prototype.refresh=function(){this.draggables.forEach(function(t){t.refresh()}),this.targets.forEach(function(t){t.refresh()})},o.prototype.__defineGetter__("positions",function(){return this.targets.map(function(t){return t.innerDraggables.map(function(t){return this.draggables.indexOf(t)},this)},this)}),o.prototype.__defineSetter__("positions",function(t){var e="wrong array length";if(t.length!==this.targets.length)throw alert(e),e;this.targets.forEach(function(t){t.reset()},this),t.forEach(function(t,e){t.forEach(function(t){this.targets[e].add(this.draggables[t])},this)},this)}),e.defaultScope=a=new o,e.scopes=d,e.defaultScope=a,e.Scope=o,e.scopeFactory=s,e.scope=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){n=n||{};var i,r=this,s=n.parent||f.util.getDefaultParent(t);this.options={timeEnd:200,timeExcange:400,parent:s,sorting:f.sortingFactory(f.positionType.floatLeft)(80,u.mathPoint.transformedSpaceDistanceFactory({x:1,y:4})),positioning:f.positionFactory(f.positionType.floatLeft)(this.getRectangle.bind(this),{removable:!0})};for(i in n)this.options[i]=n[i];g.push(this),this.element=t,e.forEach(function(t){t.targets.push(r)}),this.draggables=e,this.onAdd=new f.Event(this),this.beforeAdd=new f.Event(this),this.onRemove=new f.Event(this),n.onRemove&&this.onRemove.add(n.onRemove),n.onAdd&&this.onAdd.add(n.onAdd),n.beforeAdd&&this.beforeAdd.add(n.beforeAdd),o.onCreate.fire(this),this.init()}Object.defineProperty(e,"__esModule",{value:!0}),e.Target=e.targets=void 0;var r=n(3),s=i(r),a=n(5),h=i(a),u=n(2),c=n(10),p=n(8),f={util:s["default"],positionType:c.positionType,positionFactory:c.positionFactory,sortingFactory:c.sortingFactory,scopes:p.scopes,Event:h["default"]},g=[],l=function(t){p.defaultScope.addTarget(t)};o.onCreate=new f.Event(o,{isReverse:!0,isStopOnTrue:!0}),o.onCreate.add(l),o.prototype.getRectangle=function(){return u.mathPoint.createRectangleFromElement(this.element,this.options.parent,this.options.isContentBoxSize,!0)},o.prototype.catchDraggable=function(t){if(this.options.catchDraggable)return this.options.catchDraggable(this,t);var e=this.getRectangle(),n=t.getRectangle().getSquare();return n<e.getSquare()&&e.includePoint(t.getCenter())},o.prototype.getPosition=function(){return this.getRectangle().position},o.prototype.getSize=function(){return this.getRectangle().size},o.prototype.init=function(){var t,e;this.innerDraggables=this.draggables.filter(function(t){for(var e=t.element.parentNode;e;){if(e===this.element)return!0;e=e.parentNode}return!1},this),this.innerDraggables.length&&(e=f.util.range(this.innerDraggables.length),t=this.options.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),e),this.setPosition(t,e),this.innerDraggables.forEach(function(t){this.onAdd.fire(t)},this))},o.prototype.destroy=function(){f.scopes.forEach(function(t){t.targets.removeItem(this)},this)},o.prototype.refresh=function(){var t=this.options.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),[]);this.setPosition(t,[],0)},o.prototype.onEnd=function(t){var e,n=[],i=this.getRectangle().includePoint(t.getPosition());if(!i){if(!this.getRectangle().includePoint(t.getCenter()))return!1;t.position=t.getCenter().clone()}return this.beforeAdd.fire(t),this.innerDraggables=this.options.sorting(this.innerDraggables,[t],n),e=this.options.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),n,t),this.setPosition(e,n),this.innerDraggables.indexOf(t)!==-1&&this.addRemoveOnMove(t),!0},o.prototype.setPosition=function(t,e,n){this.innerDraggables.slice(0).forEach(function(i,o){var r=t[o],s=n||0==n?n:e.indexOf(o)!==-1?this.options.timeEnd:this.options.timeExcange;r.removable?(i.move(i.initPosition,s,!0,!0),this.innerDraggables.removeItem(i),this.onRemove.fire(i)):i.move(r.position,s,!0,!0)},this)},o.prototype.add=function(t,e){var n,i=this.innerDraggables.length;this.beforeAdd.fire(t),this.pushInnerDraggable(t),n=this.options.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),i,t),this.setPosition(n,[i],e||0),this.innerDraggables.indexOf(t)!==-1&&this.addRemoveOnMove(t)},o.prototype.pushInnerDraggable=function(t){this.innerDraggables.indexOf(t)===-1&&this.innerDraggables.push(t)},o.prototype.addRemoveOnMove=function(t){var e=this;t.onMove.add(this.removeHandler=function(){e.remove(t)}),this.onAdd.fire(t)},o.prototype.remove=function(t){var e,n;t.onMove.remove(this.removeHandler),e=this.innerDraggables.indexOf(t),e!==-1&&(this.innerDraggables.splice(e,1),n=this.options.positioning(this.innerDraggables.map(function(t){return t.getRectangle()}),[]),this.setPosition(n,[]),this.onRemove.fire(t))},o.prototype.reset=function(){this.innerDraggables.forEach(function(t){t.move(t.initPosition,0,!0,!0),this.onRemove.fire(t)},this),this.innerDraggables=[]},o.prototype.getSortedDraggables=function(){this.innerDraggables.slice()},e.targets=g,e.Target=o},function(t,e,n){"use strict";function i(t){switch(t){case s.notCrossing:return function(t,e){var n,i={removable:!0};for(n in e)i[n]=e[n];return function(e,n){var i="function"==typeof t?t():t,o=e.reduce(function(t,e,i){return n.indexOf(i)===-1&&t.push(i),t},[]);return n.forEach(function(t){var n=e[t],r=!1;o.forEach(function(t){var i=e[t];n=i.moveToBound(n)}),r=o.some(function(t){var i=e[t];return!!i.and(n)})||n.and(i).getSquare()!==n.getSquare(),r?n.removable=!0:o.push(t)}),e}};case s.floatLeft:return function(t,e){var n,i={paddingTopLeft:new r.Point(0,0),paddingBottomRight:new r.Point(0,0),yGapBetweenDraggables:0,removable:!0};for(n in e)i[n]=e[n];return function(e,n){var o,s="function"==typeof t?t():t,a=s.getP2(),h=[s.position];return e.forEach(function(t,e){var n,u=!1;for(o=0;o<h.length&&(n=new r.Point(h[o].x,o>0?h[o-1].y+i.yGapBetweenDraggables:s.position.y).add(i.paddingTopLeft),!(u=n.x+t.size.x<a.x));o++);u||(n=new r.Point(s.position.x,h[h.length-1].y+i.yGapBetweenDraggables).add(i.paddingTopLeft)),t.position=n,i.removable&&t.getP3().y>s.getP3().y&&(t.removable=!0),h=r.mathPoint.addPointToBoundPoints(h,t.getP3().add(i.paddingBottomRight))}),e}};case s.floatRight:return function(t,e){var n,i,o,s={paddingTopRight:new r.Point(5,5),paddingBottomLeft:new r.Point(0,0),removable:!0};for(o in e)s[o]=e[o];return n=new r.Point((-s.paddingTopRight.x),s.paddingTopRight.y),i=new r.Point((-s.paddingBottomLeft.x),s.paddingBottomLeft.y),function(e,o){var a,h="function"==typeof t?t():t,u=[h.getRightTopPoint()];return e.forEach(function(t,e){var o,c=!1;for(a=0;a<u.length&&(o=new r.Point(u[a].x-t.size.x,a>0?u[a-1].y:h.position.y).add(n),!(c=o.x>t.position.x));a++);c||(o=new r.Point(h.getP2().x,u[u.length-1].y)),t.position=o,s.removable&&t.getLeftBottomPoint().y>h.getP4().y&&(t.removable=!0),u=r.mathPoint.addPointToBoundPoints(u,t.getP4().add(i),!0)}),e}}}}function o(t){switch(t){case s.notCrossing:return function(){return function(t,e,n){var i=t.concat(e);return e.forEach(function(t){n.push(i.indexOf(t))}),i}};case s.floatLeft:case s.floatRight:return function(t,e,n){var i,o={getPosition:function(t){return t.position}};for(i in n)o[i]=n[i];return function(n,i,s){var a,h=n.concat();return a=n.map(o.getPosition),i.forEach(function(i){var s=r.mathPoint.indexOfNearPoint(a,o.getPosition(i),t,e);s=s===-1?h.length:h.indexOf(n[s]),h.splice(s,0,i)}),i.forEach(function(t){s.push(h.indexOf(t))}),h}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.positionFactory=e.sortingFactory=e.positionType=void 0;var r=n(2),s={notCrossing:0,floatLeft:1,floatRight:2};e.positionType=s,e.sortingFactory=o,e.positionFactory=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n;this.options={timeEnd:200,timeExcange:400,radius:30,getDistance:c.mathPoint.getDistance,isDisplacement:!1};for(n in e)e.hasOwnProperty(n)&&(this.options[n]=e[n]);this.draggables=t,g.push(this),this.onChange=new l.Event(this),e&&e.onChange&&this.onChange.add(e.onChange),this.init()}function r(t,e,n){var i,r,s;return n=n||{},r=n.draggable||{},s=n.list||{},r.parent=r.parent||t,e=Array.prototype.slice.call(e),i=e.map(function(t){return new l.Draggable(t,r)}),new o(i,s)}Object.defineProperty(e,"__esModule",{value:!0}),e.listFactory=e.List=e.lists=void 0;var s=n(3),a=i(s),h=n(5),u=i(h),c=n(2),p=n(7),f=n(4),g=[],l={util:a["default"],bound:p.bound,Draggable:f.Draggable,events:f.events,Event:u["default"]};o.prototype.init=function(){this._enable=!0,this.draggables.forEach(this.initDraggable,this)},o.prototype.initDraggable=function(t){var e,n=this;t.enable=this._enable,this.options.isDisplacement?(e=function(){if(this.isDragee)return n.onStart(this),t.onMove.remove(e),!0},t.onEnd.add(function(){return n.onEndDisplaycement(this),t.onMove.add(e),!0}),t.onMove.add(e)):t.onEnd.add(function(){return n.onEnd(this),!0})},o.prototype.moveOrSave=function(t,e,n){t.isDragee?t.fixPosition=e:t.move(e,n,!0)},o.prototype.onEnd=function(t){var e,n,i=this.getCurrentFixPosition();return e=this.draggables.indexOf(t),n=c.mathPoint.indexOfNearPoint(i,t.position,this.options.radius,this.options.getDistance),n===-1||n===e?t.move(t.fixPosition,this.options.timeEnd,!0):(this.moveOrSave(this.draggables[n],i[e],this.options.timeExcange),this.draggables[e].move(i[n],this.options.timeEnd,!0),this.onChange.fire()),!0},o.prototype.onEndDisplaycement=function(t){var e,n,i,o=this.getSortedDraggables(),r=o.map(function(t){return t.fixPosition});if(e=o.indexOf(t),i=c.mathPoint.indexOfNearPoint(r,t.position,this.options.radius,this.options.getDistance),i!==-1){if(i<e)for(n=i;n<e;n++)this.moveOrSave(o[n],r[n+1],this.options.timeExcange);else for(n=e;n<i;n++)this.moveOrSave(o[n+1],r[n],this.options.timeExcange);t.move(r[i],this.options.timeEnd,!0)}else t.move(t.fixPosition,this.options.timeEnd,!0)},o.prototype.onStart=function(t){var e,n,i=this.getSortedDraggables(),o=i.map(function(t){return t.fixPosition});for(e=i.indexOf(t),n=e+1;n<i.length;n++)this.moveOrSave(i[n],o[n-1],this.options.timeExcange);i[e].fixPosition=o[n-1]},o.prototype.getCurrentFixPosition=function(){return this.draggables.map(function(t){return t.fixPosition.clone()})},o.prototype.getSortedDraggables=function(){var t,e=this.draggables.map(function(t){return t.initPosition});return t=e.map(function(t){return this.draggables.filter(function(e){return e.fixPosition.compare(t)},this)[0]},this)},o.prototype.reset=function(){this.draggables.forEach(function(t){t.move(t.initPosition,0,!0,!1)})},o.prototype.refresh=function(){this.draggables.forEach(function(t){t.refresh()})},o.prototype.add=function(t){t instanceof Array||(t=[t]),t.forEach(this.initDraggable,this),this.draggables=this.draggables.concat(t)},o.prototype.remove=function(t){var e,n=this.draggables.map(function(t){return t.initPosition}),i=[],o=this.getSortedDraggables();t instanceof Array||(t=[t]),t.forEach(function(t){t.onEnd.reset(),t.onMove.reset(),this.draggables.removeItem(t),l.util.remove(this.draggables,t)},this),e=0,o.forEach(function(t,o){this.draggables.indexOf(t)!==-1&&(t.fixPosition!==n[e]&&t.move(n[e],this.options.timeExcange,!0),t.initPosition=n[e],e++,i.push(t))},this),this.draggables=i},o.prototype.clear=function(){this.remove(this.draggables.slice())},o.prototype.destroy=function(){this.draggables.forEach(function(t){t.destroy()})},o.prototype.__defineGetter__("positions",function(){return this.getCurrentFixPosition()}),o.prototype.__defineSetter__("positions",function(t){var e="wrong array length";if(t.length!==this.draggables.length)throw alert(e),e;t.forEach(function(t,e){this.draggables[e].move(t,0,!0,!0)},this)}),o.prototype.__defineGetter__("enable",function(){return this._enable}),o.prototype.__defineSetter__("enable",function(t){this._enable=t,this.draggables.forEach(function(e){e.enable=t})}),e.lists=g,e.List=o,e.listFactory=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){var i,o=a.mathPoint.createRectangleFromElement(t,t);this.options={angle:0,dAngle:2*Math.PI/e.length,center:o.getCenter(),startRadius:50,endRadius:o.getMinSide()/2,lineWidth:2,strokeStyle:"#ff5577",fillStyle:"rgba(150,255,50,0.8)"};for(i in n)n.hasOwnProperty(i)&&(this.options[i]=n[i]);p.push(this),this.area=t,this.areaRectangle=o,this.init(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Spider=e.spiders=void 0;var r=n(3),s=i(r),a=n(2),h=n(7),u=n(4),c={util:s["default"],bound:h.bound,Draggable:u.Draggable},p=[];o.prototype.init=function(t){var e=this;this.canvas=c.util.createCanvas(this.area,this.areaRectangle),this.context=this.canvas.getContext("2d"),this.draggables=t.map(function(t,n){var i=this.options.angle+n*this.options.dAngle,o=a.mathPoint.getSizeOfElement(t).mult(.5),r=a.mathPoint.getPointFromRadialSystem(i,this.options.startRadius,this.options.center).sub(o),s=a.mathPoint.getPointFromRadialSystem(i,this.options.endRadius,this.options.center).sub(o),h=c.bound.toLine(r,s);return new c.Draggable(t,{parent:this.area,bound:h,position:r,onMove:function(){return e.draw(),!0}})},this),this.isInit=!0,this.draw()},o.prototype.draw=function(){var t,e;if(this.isInit){for(this.context.clearRect(0,0,this.areaRectangle.size.x,this.areaRectangle.size.y),this.context.beginPath(),t=this.draggables[0].getCenter(),this.context.moveTo(t.x,t.y),e=0;e<this.draggables.length;e++)t=this.draggables[e].getCenter(),this.context.lineTo(t.x,t.y);this.context.closePath(),this.context.lineWidth=this.options.lineWidth,this.context.strokeStyle=this.options.strokeStyle,this.context.stroke(),this.context.fillStyle=this.options.fillStyle,this.context.fill()}},e.spiders=p,e.Spider=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e,n){var i,o=a.mathPoint.createRectangleFromElement(t,t),r=a.mathPoint.getSizeOfElement(e).mult(.5);this.options={center:o.getCenter(),radius:o.getMinSide()/2,startAngle:Math.PI,endAngle:0,angles:[Math.PI,-Math.PI/4,0,Math.PI/4,Math.PI/2],onChange:function(){},time:500};for(i in n)n.hasOwnProperty(i)&&(this.options[i]=n[i]);this.shiftedCenter=this.options.center.sub(r),this.onChange=this.options.onChange,p.push(this),this.area=t,this.init(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ArcSlider=e.arcSliders=void 0;var r=n(3),s=i(r),a=n(2),h=n(4),u=n(7),c={util:s["default"],Draggable:h.Draggable,bound:u.bound},p=[];o.prototype.init=function(t){var e=this,n=this.options.startAngle,i=a.mathPoint.getPointFromRadialSystem(n,this.options.radius,this.shiftedCenter),o=c.bound.toArc(e.shiftedCenter,e.options.radius,this.options.startAngle,this.options.endAngle);this.angle=n,this.draggable=new c.Draggable(t,{parent:this.area,bound:o,position:i,onMove:function(){return e.change(),!0}})},o.prototype.updateAngle=function(){this.angle=a.mathPoint.getAngle(this.shiftedCenter,this.draggable.position)},o.prototype.change=function(){this.updateAngle(),this.onChange(this.angle)},o.prototype.setAngle=function(t,e){this.angle=a.mathPoint.normalizeAngle(t,n);var n=a.mathPoint.getPointFromRadialSystem(this.angle,this.options.radius,this.shiftedCenter);this.draggable.move(n,e||0,!0,!0),this.onChange(this.angle)},e.arcSliders=p,e.ArcSlider=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var n=[];return t!=-1&&(n.push(t),n.push((t+1)%e)),n}function r(t,e,n){var i,o=h.mathPoint.createRectangleFromElement(t,t);this.options={center:o.getCenter(),radius:o.getMinSide()/2,touchRadius:o.getMinSide()/2,boundAngle:Math.PI/9,fillStyles:p.util.range(0,e.length).map(function(){return p.util.randomColor()}),initAngles:p.util.range(-90,270,360/e.length).map(function(t){return h.mathPoint.toRadian(t)}),onDraw:function(){},limitImg:null,limitImgOffset:new h.Point(0,0),isSelectable:!1};for(i in n)n.hasOwnProperty(i)&&(this.options[i]=n[i]);g.push(this),this.onDraw=this.options.onDraw,this.area=t,this.areaRectangle=o,this.init(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.Chart=e.charts=void 0;var s=n(3),a=i(s),h=n(2),u=n(4),c=n(7),p={util:a["default"],bound:c.bound,Draggable:u.Draggable},f="ontouchstart"in window,g=[];r.prototype.init=function(t){var e=this;this.canvas=p.util.createCanvas(this.area,this.areaRectangle),this.context=this.canvas.getContext("2d"),this.draggables=t.map(function(t,n){var i=this.options.initAngles[n],o=h.mathPoint.getSizeOfElement(t).mult(.5),r=h.mathPoint.getPointFromRadialSystem(i,this.options.touchRadius,this.options.center.sub(o)),s=p.bound.toArc(e.options.center.sub(o),e.options.touchRadius,e.getBoundAngle(n,!1),e.getBoundAngle(n,!0));return new p.Draggable(t,{parent:this.area,bound:s,position:r,onMove:function(){return e.draw(),!0}})},this),this.isInit=!0,this.options.isSelectable&&this.initSelect(),this.draw()},r.prototype.initSelect=function(){var t=this;this.setActiveArc(-1),this.canvas.addEventListener(u.events.start,function(e){var n,i=new h.Point(f?e.changedTouches[0].pageX:e.clientX,f?e.changedTouches[0].pageY:e.clientY);t.canvasOffset||(t.canvasOffset=h.mathPoint.getOffset(t.canvas)),i=i.sub(t.canvasOffset),n=t.getArcOnPoint(i),n!=-1&&t.setActiveArc(t.activeArcIndex!==n?n:-1)})},r.prototype.updateAngles=function(){this.angles=this.draggables.map(function(t){var e=t.getSize().mult(.5);return h.mathPoint.getAngle(this.options.center.sub(e),t.position)},this)},r.prototype.getBoundAngle=function(t,e){var n=this,i=e?1:-1;return function(){var e=(t+i)%n.angles.length;return e<0&&(e+=n.angles.length),h.mathPoint.normalizeAngle(n.angles[e]-i*n.options.boundAngle)}},r.prototype.draw=function(){this.isInit&&(this.updateAngles(),this.context.clearRect(0,0,this.areaRectangle.size.x,this.areaRectangle.size.y),this.draggables.forEach(function(t,e){this.drawArc(this.context,this.options.center,this.options.radius,e)},this),this.draggables.forEach(function(t,e){var n;this.options.isSelectable?(n=o(this.activeArcIndex,this.draggables.length),n.indexOf(e)!==-1&&this.drawLimitImg(e)):this.drawLimitImg(e)},this),this.onDraw())},r.prototype.createClone=function(t,e){var n,i,o,r,s,a,u=this;if(this.isInit){s=h.mathPoint.createRectangleFromElement(t,t),r={center:s.getCenter(),radius:s.getMinSide()/2,fillStyles:this.options.fillStyles};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return i=p.util.createCanvas(t,s),o=i.getContext("2d"),a={draw:function(){o.clearRect(0,0,s.size.x,s.size.y),u.draggables.forEach(function(t,e){u.drawArc(o,r.center,r.radius,e)})}},a.draw(),a}},r.prototype.getFillStyle=function(t){return"function"==typeof this.options.fillStyles[t]&&(this.options.fillStyles[t]=this.options.fillStyles[t].call(this)),this.options.fillStyles[t]},r.prototype.drawArc=function(t,e,n,i){var o=this.angles[i],r=this.angles[(i+1)%this.angles.length],s=this.getFillStyle(i);t.beginPath(),t.moveTo(e.x,e.y),t.arc(e.x,e.y,n,o,r,!1),t.lineTo(e.x,e.y),t.closePath(),t.fillStyle=s,t.fill()},r.prototype.drawLimitImg=function(t){var e,n,i;this.options.limitImg&&(i=this.options.limitImg instanceof Array?this.options.limitImg[t]:this.options.limitImg),i&&(e=h.mathPoint.normalizeAngle(this.angles[t]),n=new h.Point(0,-i.height/2),n=n.add(this.options.limitImgOffset),this.context.translate(this.areaRectangle.size.x/2,this.areaRectangle.size.y/2),this.context.rotate(e),this.context.drawImage(i,n.x,n.y),this.context.setTransform(1,0,0,1,0,0))},r.prototype.getAnglesDiff=function(){var t=this.angles[0],e=this.angles.slice(1);return e.push(t),e.map(function(e){var n=h.mathPoint.normalizeAngle(e-t);return t=e,n})},r.prototype.getPercent=function(){return this.getAnglesDiff().map(function(t){return t/(2*Math.PI)})},r.prototype.getArcBisectrixs=function(){return this.getAnglesDiff().map(function(t,e){return h.mathPoint.normalizeAngle(this.angles[e]+t/2)},this)},r.prototype.getArcOnPoint=function(t){var e,n,i,o=h.mathPoint.getAngle(this.options.center,t),r=h.mathPoint.getDistance(this.options.center,t);if(r>this.options.radius)return-1;for(n=-1,e=0;e<this.angles.length;e++)(n===-1||this.angles[n]>this.angles[e])&&(n=e);for(e=0,i=n;e<this.angles.length&&!(o<this.angles[i]);e++,i=(e+n)%this.angles.length);return--i<0&&(i+=this.angles.length),i},r.prototype.setAngles=function(t){this.angles=t,this.draggables.forEach(function(t,e){var n=this.angles[e],i=t.getSize().mult(.5),o=h.mathPoint.getPointFromRadialSystem(n,this.options.touchRadius,this.options.center.sub(i));t.move(o,0,!0,!0)},this),this.draw()},r.prototype.setActiveArc=function(t){var e=o(t,this.draggables.length);this.activeArcIndex=t,this.draggables.forEach(function(t,n){t.enable=e.indexOf(n)!==-1}),this.draw()},e.charts=g,e.Chart=r},function(t,e,n){"use strict";function i(t,e){e=e||{},e.stepOn=e.stepOn||new r.Point((-50),0),h.List.call(this,t,e)}function o(t,e,n){var o,r,s;return n=n||{},r=n.draggable||{},s=n.list||{},r.parent=r.parent||t,e=Array.prototype.slice.call(e),o=e.map(function(t){return new h.Draggable(t,r)}),new i(o,s)}Object.defineProperty(e,"__esModule",{value:!0}),e.ListSwitcher=e.listSwitcherFactory=void 0;var r=n(2),s=n(4),a=n(11),h={List:a.List,Draggable:s.Draggable},u=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.superclass=e.prototype};u(i,h.List),i.prototype.init=function(){var t=this;this.draggables.forEach(function(e){e.isOn=!1,e.onEnd.add(function(){return t.onEnd(this),!0})})},i.prototype.onEnd=function(t){var e,n,i=this.getCurrentFixPositionWithOff();return e=this.draggables.indexOf(t),n=r.mathPoint.indexOfNearPoint(i,t.position,this.options.radius,this.options.getDistance),n===-1||n===e?this.moveDraggable(e,t.position,i[e],this.options.timeEnd):(this.draggables[n].isDragee?this.fixToOff(n,i[e]):this.moveDraggableToOff(n,i[e],this.options.timeExcange),this.moveDraggable(e,t.position,i[n],this.options.timeEnd),this.onChange.fire()),!0},i.prototype.moveDraggable=function(t,e,n,i){var o=[n,n.add(this.options.stepOn)],s=r.mathPoint.indexOfNearPoint(o,e,-1,r.mathPoint.getXDifference);this.draggables[t].isOn!==!!s&&(this.draggables[t].isOn=!!s,this.onChange.fire()),this.draggables[t].move(o[s],i,!0)},i.prototype.fixToOff=function(t,e){this.draggables[t].isOn=!1,this.draggables[t].fixPosition=e},i.prototype.moveDraggableToOff=function(t,e,n){this.draggables[t].isOn=!1,this.draggables[t].move(e,n,!0)},i.prototype.getCurrentFixPositionWithOff=function(){return this.draggables.map(function(t){return t.isOn?t.fixPosition.sub(this.options.stepOn):t.fixPosition.clone()},this)},i.prototype.getSortedDraggables=function(){return this.draggables.map(function(t){return t.initPosition}).map(function(t){return this.draggables.filter(function(e){return e.fixPosition.compare(t)||e.fixPosition.compare(t.add(this.options.stepOn))},this)[0]},this)},i.prototype.reset=function(){this.draggables.forEach(function(t){t.move(t.initPosition,0,!0,!1),t.isOn=!1})},i.prototype.__defineGetter__("positions",function(){return this.draggables.map(function(t){var e=t.fixPosition.clone();return e.isOn=t.isOn,e})}),i.prototype.__defineSetter__("positions",function(t){var e="wrong array length";if(t.length!==this.draggables.length)throw alert(e),e;t.forEach(function(t,e){this.draggables[e].isOn=t.isOn,this.draggables[e].move(t,0,!0,!0)},this)}),e.listSwitcherFactory=o,e.ListSwitcher=i}])});
//# sourceMappingURL=dragee.min.js.map